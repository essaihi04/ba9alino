var UF=Object.defineProperty;var LF=(e,t,r)=>t in e?UF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Rr=(e,t,r)=>LF(e,typeof t!="symbol"?t+"":t,r);function DF(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var HY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var BB={exports:{}},qm={},CB={exports:{}},hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eh=Symbol.for("react.element"),QF=Symbol.for("react.portal"),OF=Symbol.for("react.fragment"),PF=Symbol.for("react.strict_mode"),RF=Symbol.for("react.profiler"),MF=Symbol.for("react.provider"),HF=Symbol.for("react.context"),KF=Symbol.for("react.forward_ref"),zF=Symbol.for("react.suspense"),VF=Symbol.for("react.memo"),qF=Symbol.for("react.lazy"),Ab=Symbol.iterator;function GF(e){return e===null||typeof e!="object"?null:(e=Ab&&e[Ab]||e["@@iterator"],typeof e=="function"?e:null)}var jB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EB=Object.assign,kB={};function tu(e,t,r){this.props=e,this.context=t,this.refs=kB,this.updater=r||jB}tu.prototype.isReactComponent={};tu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function SB(){}SB.prototype=tu.prototype;function Iy(e,t,r){this.props=e,this.context=t,this.refs=kB,this.updater=r||jB}var Uy=Iy.prototype=new SB;Uy.constructor=Iy;EB(Uy,tu.prototype);Uy.isPureReactComponent=!0;var db=Array.isArray,FB=Object.prototype.hasOwnProperty,Ly={current:null},TB={key:!0,ref:!0,__self:!0,__source:!0};function IB(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)FB.call(t,s)&&!TB.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),A=0;A<l;A++)c[A]=arguments[A+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Eh,type:e,key:i,ref:o,props:a,_owner:Ly.current}}function $F(e,t){return{$$typeof:Eh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Eh}function WF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ub=/\/+/g;function Wg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WF(""+e.key):t.toString(36)}function Np(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Eh:case QF:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Wg(o,0):s,db(a)?(r="",e!=null&&(r=e.replace(ub,"$&/")+"/"),Np(a,t,r,"",function(A){return A})):a!=null&&(Dy(a)&&(a=$F(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(ub,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",db(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+Wg(i,l);o+=Np(i,t,r,c,a)}else if(c=GF(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+Wg(i,l++),o+=Np(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function pf(e,t,r){if(e==null)return e;var s=[],a=0;return Np(e,s,"","",function(i){return t.call(r,i,a++)}),s}function XF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Na={current:null},Bp={transition:null},JF={ReactCurrentDispatcher:Na,ReactCurrentBatchConfig:Bp,ReactCurrentOwner:Ly};function UB(){throw Error("act(...) is not supported in production builds of React.")}hr.Children={map:pf,forEach:function(e,t,r){pf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return pf(e,function(){t++}),t},toArray:function(e){return pf(e,function(t){return t})||[]},only:function(e){if(!Dy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};hr.Component=tu;hr.Fragment=OF;hr.Profiler=RF;hr.PureComponent=Iy;hr.StrictMode=PF;hr.Suspense=zF;hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JF;hr.act=UB;hr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=EB({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ly.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)FB.call(t,c)&&!TB.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var A=0;A<c;A++)l[A]=arguments[A+2];s.children=l}return{$$typeof:Eh,type:e.type,key:a,ref:i,props:s,_owner:o}};hr.createContext=function(e){return e={$$typeof:HF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MF,_context:e},e.Consumer=e};hr.createElement=IB;hr.createFactory=function(e){var t=IB.bind(null,e);return t.type=e,t};hr.createRef=function(){return{current:null}};hr.forwardRef=function(e){return{$$typeof:KF,render:e}};hr.isValidElement=Dy;hr.lazy=function(e){return{$$typeof:qF,_payload:{_status:-1,_result:e},_init:XF}};hr.memo=function(e,t){return{$$typeof:VF,type:e,compare:t===void 0?null:t}};hr.startTransition=function(e){var t=Bp.transition;Bp.transition={};try{e()}finally{Bp.transition=t}};hr.unstable_act=UB;hr.useCallback=function(e,t){return Na.current.useCallback(e,t)};hr.useContext=function(e){return Na.current.useContext(e)};hr.useDebugValue=function(){};hr.useDeferredValue=function(e){return Na.current.useDeferredValue(e)};hr.useEffect=function(e,t){return Na.current.useEffect(e,t)};hr.useId=function(){return Na.current.useId()};hr.useImperativeHandle=function(e,t,r){return Na.current.useImperativeHandle(e,t,r)};hr.useInsertionEffect=function(e,t){return Na.current.useInsertionEffect(e,t)};hr.useLayoutEffect=function(e,t){return Na.current.useLayoutEffect(e,t)};hr.useMemo=function(e,t){return Na.current.useMemo(e,t)};hr.useReducer=function(e,t,r){return Na.current.useReducer(e,t,r)};hr.useRef=function(e){return Na.current.useRef(e)};hr.useState=function(e){return Na.current.useState(e)};hr.useSyncExternalStore=function(e,t,r){return Na.current.useSyncExternalStore(e,t,r)};hr.useTransition=function(){return Na.current.useTransition()};hr.version="18.3.1";CB.exports=hr;var H=CB.exports;const Qy=NB(H),YF=DF({__proto__:null,default:Qy},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZF=H,e6=Symbol.for("react.element"),t6=Symbol.for("react.fragment"),r6=Object.prototype.hasOwnProperty,s6=ZF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n6={key:!0,ref:!0,__self:!0,__source:!0};function LB(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)r6.call(t,s)&&!n6.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:e6,type:e,key:i,ref:o,props:a,_owner:s6.current}}qm.Fragment=t6;qm.jsx=LB;qm.jsxs=LB;BB.exports=qm;var n=BB.exports,I1={},DB={exports:{}},oi={},QB={exports:{}},OB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,V){var ie=J.length;J.push(V);e:for(;0<ie;){var Y=ie-1>>>1,N=J[Y];if(0<a(N,V))J[Y]=V,J[ie]=N,ie=Y;else break e}}function r(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var V=J[0],ie=J.pop();if(ie!==V){J[0]=ie;e:for(var Y=0,N=J.length,C=N>>>1;Y<C;){var E=2*(Y+1)-1,O=J[E],q=E+1,se=J[q];if(0>a(O,ie))q<N&&0>a(se,O)?(J[Y]=se,J[q]=ie,Y=q):(J[Y]=O,J[E]=ie,Y=E);else if(q<N&&0>a(se,ie))J[Y]=se,J[q]=ie,Y=q;else break e}}return V}function a(J,V){var ie=J.sortIndex-V.sortIndex;return ie!==0?ie:J.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],A=[],d=1,h=null,f=3,u=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(J){for(var V=r(A);V!==null;){if(V.callback===null)s(A);else if(V.startTime<=J)s(A),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(A)}}function _(J){if(g=!1,y(J),!p)if(r(c)!==null)p=!0,P(I);else{var V=r(A);V!==null&&te(_,V.startTime-J)}}function I(J,V){p=!1,g&&(g=!1,v(S),S=-1),u=!0;var ie=f;try{for(y(V),h=r(c);h!==null&&(!(h.expirationTime>V)||J&&!U());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var N=Y(h.expirationTime<=V);V=e.unstable_now(),typeof N=="function"?h.callback=N:h===r(c)&&s(c),y(V)}else s(c);h=r(c)}if(h!==null)var C=!0;else{var E=r(A);E!==null&&te(_,E.startTime-V),C=!1}return C}finally{h=null,f=ie,u=!1}}var k=!1,T=null,S=-1,B=5,R=-1;function U(){return!(e.unstable_now()-R<B)}function L(){if(T!==null){var J=e.unstable_now();R=J;var V=!0;try{V=T(!0,J)}finally{V?D():(k=!1,T=null)}}else k=!1}var D;if(typeof x=="function")D=function(){x(L)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,K=Q.port2;Q.port1.onmessage=L,D=function(){K.postMessage(null)}}else D=function(){w(L,0)};function P(J){T=J,k||(k=!0,D())}function te(J,V){S=w(function(){J(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){p||u||(p=!0,P(I))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(J){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var ie=f;f=V;try{return J()}finally{f=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,V){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=f;f=J;try{return V()}finally{f=ie}},e.unstable_scheduleCallback=function(J,V,ie){var Y=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Y+ie:Y):ie=Y,J){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ie+N,J={id:d++,callback:V,priorityLevel:J,startTime:ie,expirationTime:N,sortIndex:-1},ie>Y?(J.sortIndex=ie,t(A,J),r(c)===null&&J===r(A)&&(g?(v(S),S=-1):g=!0,te(_,ie-Y))):(J.sortIndex=N,t(c,J),p||u||(p=!0,P(I))),J},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(J){var V=f;return function(){var ie=f;f=V;try{return J.apply(this,arguments)}finally{f=ie}}}})(OB);QB.exports=OB;var a6=QB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i6=H,ai=a6;function ut(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PB=new Set,R0={};function vA(e,t){Kd(e,t),Kd(e+"Capture",t)}function Kd(e,t){for(R0[e]=t,e=0;e<t.length;e++)PB.add(t[e])}var ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U1=Object.prototype.hasOwnProperty,o6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hb={},fb={};function l6(e){return U1.call(fb,e)?!0:U1.call(hb,e)?!1:o6.test(e)?fb[e]=!0:(hb[e]=!0,!1)}function c6(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A6(e,t,r,s){if(t===null||typeof t>"u"||c6(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ba(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mn[e]=new Ba(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mn[t]=new Ba(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mn[e]=new Ba(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mn[e]=new Ba(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mn[e]=new Ba(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mn[e]=new Ba(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mn[e]=new Ba(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mn[e]=new Ba(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mn[e]=new Ba(e,5,!1,e.toLowerCase(),null,!1,!1)});var Oy=/[\-:]([a-z])/g;function Py(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Oy,Py);Mn[t]=new Ba(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Oy,Py);Mn[t]=new Ba(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Oy,Py);Mn[t]=new Ba(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mn[e]=new Ba(e,1,!1,e.toLowerCase(),null,!1,!1)});Mn.xlinkHref=new Ba("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mn[e]=new Ba(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ry(e,t,r,s){var a=Mn.hasOwnProperty(t)?Mn[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A6(t,r,a,s)&&(r=null),s||a===null?l6(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var hl=i6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mf=Symbol.for("react.element"),dd=Symbol.for("react.portal"),ud=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),L1=Symbol.for("react.profiler"),RB=Symbol.for("react.provider"),MB=Symbol.for("react.context"),Hy=Symbol.for("react.forward_ref"),D1=Symbol.for("react.suspense"),Q1=Symbol.for("react.suspense_list"),Ky=Symbol.for("react.memo"),Ol=Symbol.for("react.lazy"),HB=Symbol.for("react.offscreen"),pb=Symbol.iterator;function Du(e){return e===null||typeof e!="object"?null:(e=pb&&e[pb]||e["@@iterator"],typeof e=="function"?e:null)}var Bs=Object.assign,Xg;function Ju(e){if(Xg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Xg=t&&t[1]||""}return`
`+Xg+e}var Jg=!1;function Yg(e,t){if(!e||Jg)return"";Jg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(A){var s=A}Reflect.construct(e,[],t)}else{try{t.call()}catch(A){s=A}e.call(t.prototype)}else{try{throw Error()}catch(A){s=A}e()}}catch(A){if(A&&s&&typeof A.stack=="string"){for(var a=A.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Jg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ju(e):""}function d6(e){switch(e.tag){case 5:return Ju(e.type);case 16:return Ju("Lazy");case 13:return Ju("Suspense");case 19:return Ju("SuspenseList");case 0:case 2:case 15:return e=Yg(e.type,!1),e;case 11:return e=Yg(e.type.render,!1),e;case 1:return e=Yg(e.type,!0),e;default:return""}}function O1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ud:return"Fragment";case dd:return"Portal";case L1:return"Profiler";case My:return"StrictMode";case D1:return"Suspense";case Q1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case MB:return(e.displayName||"Context")+".Consumer";case RB:return(e._context.displayName||"Context")+".Provider";case Hy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ky:return t=e.displayName||null,t!==null?t:O1(e.type)||"Memo";case Ol:t=e._payload,e=e._init;try{return O1(e(t))}catch{}}return null}function u6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O1(t);case 8:return t===My?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function KB(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function h6(e){var t=KB(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gf(e){e._valueTracker||(e._valueTracker=h6(e))}function zB(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=KB(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function qp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function P1(e,t){var r=t.checked;return Bs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function mb(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=hc(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function VB(e,t){t=t.checked,t!=null&&Ry(e,"checked",t,!1)}function R1(e,t){VB(e,t);var r=hc(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?M1(e,t.type,r):t.hasOwnProperty("defaultValue")&&M1(e,t.type,hc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function M1(e,t,r){(t!=="number"||qp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Yu=Array.isArray;function jd(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+hc(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function H1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ut(91));return Bs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ut(92));if(Yu(r)){if(1<r.length)throw Error(ut(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:hc(r)}}function qB(e,t){var r=hc(t.value),s=hc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function vb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GB(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GB(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xf,$B=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xf=xf||document.createElement("div"),xf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function M0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var h0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f6=["Webkit","ms","Moz","O"];Object.keys(h0).forEach(function(e){f6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),h0[t]=h0[e]})});function WB(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||h0.hasOwnProperty(e)&&h0[e]?(""+t).trim():t+"px"}function XB(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=WB(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var p6=Bs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z1(e,t){if(t){if(p6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ut(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ut(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ut(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ut(62))}}function V1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q1=null;function zy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var G1=null,Ed=null,kd=null;function yb(e){if(e=Fh(e)){if(typeof G1!="function")throw Error(ut(280));var t=e.stateNode;t&&(t=Jm(t),G1(e.stateNode,e.type,t))}}function JB(e){Ed?kd?kd.push(e):kd=[e]:Ed=e}function YB(){if(Ed){var e=Ed,t=kd;if(kd=Ed=null,yb(e),t)for(e=0;e<t.length;e++)yb(t[e])}}function ZB(e,t){return e(t)}function eC(){}var Zg=!1;function tC(e,t,r){if(Zg)return e(t,r);Zg=!0;try{return ZB(e,t,r)}finally{Zg=!1,(Ed!==null||kd!==null)&&(eC(),YB())}}function H0(e,t){var r=e.stateNode;if(r===null)return null;var s=Jm(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ut(231,t,typeof r));return r}var $1=!1;if(ol)try{var Qu={};Object.defineProperty(Qu,"passive",{get:function(){$1=!0}}),window.addEventListener("test",Qu,Qu),window.removeEventListener("test",Qu,Qu)}catch{$1=!1}function m6(e,t,r,s,a,i,o,l,c){var A=Array.prototype.slice.call(arguments,3);try{t.apply(r,A)}catch(d){this.onError(d)}}var f0=!1,Gp=null,$p=!1,W1=null,g6={onError:function(e){f0=!0,Gp=e}};function x6(e,t,r,s,a,i,o,l,c){f0=!1,Gp=null,m6.apply(g6,arguments)}function v6(e,t,r,s,a,i,o,l,c){if(x6.apply(this,arguments),f0){if(f0){var A=Gp;f0=!1,Gp=null}else throw Error(ut(198));$p||($p=!0,W1=A)}}function yA(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function rC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wb(e){if(yA(e)!==e)throw Error(ut(188))}function y6(e){var t=e.alternate;if(!t){if(t=yA(e),t===null)throw Error(ut(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return wb(a),e;if(i===s)return wb(a),t;i=i.sibling}throw Error(ut(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(ut(189))}}if(r.alternate!==s)throw Error(ut(190))}if(r.tag!==3)throw Error(ut(188));return r.stateNode.current===r?e:t}function sC(e){return e=y6(e),e!==null?nC(e):null}function nC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nC(e);if(t!==null)return t;e=e.sibling}return null}var aC=ai.unstable_scheduleCallback,bb=ai.unstable_cancelCallback,w6=ai.unstable_shouldYield,b6=ai.unstable_requestPaint,Ks=ai.unstable_now,_6=ai.unstable_getCurrentPriorityLevel,Vy=ai.unstable_ImmediatePriority,iC=ai.unstable_UserBlockingPriority,Wp=ai.unstable_NormalPriority,N6=ai.unstable_LowPriority,oC=ai.unstable_IdlePriority,Gm=null,wo=null;function B6(e){if(wo&&typeof wo.onCommitFiberRoot=="function")try{wo.onCommitFiberRoot(Gm,e,void 0,(e.current.flags&128)===128)}catch{}}var Zi=Math.clz32?Math.clz32:E6,C6=Math.log,j6=Math.LN2;function E6(e){return e>>>=0,e===0?32:31-(C6(e)/j6|0)|0}var vf=64,yf=4194304;function Zu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xp(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=Zu(l):(i&=o,i!==0&&(s=Zu(i)))}else o=r&~a,o!==0?s=Zu(o):i!==0&&(s=Zu(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Zi(t),a=1<<r,s|=e[r],t&=~a;return s}function k6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S6(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Zi(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=k6(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function X1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lC(){var e=vf;return vf<<=1,!(vf&4194240)&&(vf=64),e}function ex(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function kh(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zi(t),e[t]=r}function F6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Zi(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function qy(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Zi(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var zr=0;function cC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var AC,Gy,dC,uC,hC,J1=!1,wf=[],tc=null,rc=null,sc=null,K0=new Map,z0=new Map,Hl=[],T6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _b(e,t){switch(e){case"focusin":case"focusout":tc=null;break;case"dragenter":case"dragleave":rc=null;break;case"mouseover":case"mouseout":sc=null;break;case"pointerover":case"pointerout":K0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":z0.delete(t.pointerId)}}function Ou(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Fh(t),t!==null&&Gy(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function I6(e,t,r,s,a){switch(t){case"focusin":return tc=Ou(tc,e,t,r,s,a),!0;case"dragenter":return rc=Ou(rc,e,t,r,s,a),!0;case"mouseover":return sc=Ou(sc,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return K0.set(i,Ou(K0.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,z0.set(i,Ou(z0.get(i)||null,e,t,r,s,a)),!0}return!1}function fC(e){var t=$c(e.target);if(t!==null){var r=yA(t);if(r!==null){if(t=r.tag,t===13){if(t=rC(r),t!==null){e.blockedOn=t,hC(e.priority,function(){dC(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Y1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);q1=s,r.target.dispatchEvent(s),q1=null}else return t=Fh(r),t!==null&&Gy(t),e.blockedOn=r,!1;t.shift()}return!0}function Nb(e,t,r){Cp(e)&&r.delete(t)}function U6(){J1=!1,tc!==null&&Cp(tc)&&(tc=null),rc!==null&&Cp(rc)&&(rc=null),sc!==null&&Cp(sc)&&(sc=null),K0.forEach(Nb),z0.forEach(Nb)}function Pu(e,t){e.blockedOn===t&&(e.blockedOn=null,J1||(J1=!0,ai.unstable_scheduleCallback(ai.unstable_NormalPriority,U6)))}function V0(e){function t(a){return Pu(a,e)}if(0<wf.length){Pu(wf[0],e);for(var r=1;r<wf.length;r++){var s=wf[r];s.blockedOn===e&&(s.blockedOn=null)}}for(tc!==null&&Pu(tc,e),rc!==null&&Pu(rc,e),sc!==null&&Pu(sc,e),K0.forEach(t),z0.forEach(t),r=0;r<Hl.length;r++)s=Hl[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Hl.length&&(r=Hl[0],r.blockedOn===null);)fC(r),r.blockedOn===null&&Hl.shift()}var Sd=hl.ReactCurrentBatchConfig,Jp=!0;function L6(e,t,r,s){var a=zr,i=Sd.transition;Sd.transition=null;try{zr=1,$y(e,t,r,s)}finally{zr=a,Sd.transition=i}}function D6(e,t,r,s){var a=zr,i=Sd.transition;Sd.transition=null;try{zr=4,$y(e,t,r,s)}finally{zr=a,Sd.transition=i}}function $y(e,t,r,s){if(Jp){var a=Y1(e,t,r,s);if(a===null)Ax(e,t,s,Yp,r),_b(e,s);else if(I6(a,e,t,r,s))s.stopPropagation();else if(_b(e,s),t&4&&-1<T6.indexOf(e)){for(;a!==null;){var i=Fh(a);if(i!==null&&AC(i),i=Y1(e,t,r,s),i===null&&Ax(e,t,s,Yp,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else Ax(e,t,s,null,r)}}var Yp=null;function Y1(e,t,r,s){if(Yp=null,e=zy(s),e=$c(e),e!==null)if(t=yA(e),t===null)e=null;else if(r=t.tag,r===13){if(e=rC(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yp=e,null}function pC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_6()){case Vy:return 1;case iC:return 4;case Wp:case N6:return 16;case oC:return 536870912;default:return 16}default:return 16}}var ql=null,Wy=null,jp=null;function mC(){if(jp)return jp;var e,t=Wy,r=t.length,s,a="value"in ql?ql.value:ql.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return jp=a.slice(e,1<s?1-s:void 0)}function Ep(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bf(){return!0}function Bb(){return!1}function li(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bf:Bb,this.isPropagationStopped=Bb,this}return Bs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bf)},persist:function(){},isPersistent:bf}),t}var ru={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xy=li(ru),Sh=Bs({},ru,{view:0,detail:0}),Q6=li(Sh),tx,rx,Ru,$m=Bs({},Sh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ru&&(Ru&&e.type==="mousemove"?(tx=e.screenX-Ru.screenX,rx=e.screenY-Ru.screenY):rx=tx=0,Ru=e),tx)},movementY:function(e){return"movementY"in e?e.movementY:rx}}),Cb=li($m),O6=Bs({},$m,{dataTransfer:0}),P6=li(O6),R6=Bs({},Sh,{relatedTarget:0}),sx=li(R6),M6=Bs({},ru,{animationName:0,elapsedTime:0,pseudoElement:0}),H6=li(M6),K6=Bs({},ru,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),z6=li(K6),V6=Bs({},ru,{data:0}),jb=li(V6),q6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$6[e])?!!t[e]:!1}function Jy(){return W6}var X6=Bs({},Sh,{key:function(e){if(e.key){var t=q6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ep(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?G6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jy,charCode:function(e){return e.type==="keypress"?Ep(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ep(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),J6=li(X6),Y6=Bs({},$m,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eb=li(Y6),Z6=Bs({},Sh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jy}),e8=li(Z6),t8=Bs({},ru,{propertyName:0,elapsedTime:0,pseudoElement:0}),r8=li(t8),s8=Bs({},$m,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),n8=li(s8),a8=[9,13,27,32],Yy=ol&&"CompositionEvent"in window,p0=null;ol&&"documentMode"in document&&(p0=document.documentMode);var i8=ol&&"TextEvent"in window&&!p0,gC=ol&&(!Yy||p0&&8<p0&&11>=p0),kb=" ",Sb=!1;function xC(e,t){switch(e){case"keyup":return a8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hd=!1;function o8(e,t){switch(e){case"compositionend":return vC(t);case"keypress":return t.which!==32?null:(Sb=!0,kb);case"textInput":return e=t.data,e===kb&&Sb?null:e;default:return null}}function l8(e,t){if(hd)return e==="compositionend"||!Yy&&xC(e,t)?(e=mC(),jp=Wy=ql=null,hd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gC&&t.locale!=="ko"?null:t.data;default:return null}}var c8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!c8[e.type]:t==="textarea"}function yC(e,t,r,s){JB(s),t=Zp(t,"onChange"),0<t.length&&(r=new Xy("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var m0=null,q0=null;function A8(e){FC(e,0)}function Wm(e){var t=md(e);if(zB(t))return e}function d8(e,t){if(e==="change")return t}var wC=!1;if(ol){var nx;if(ol){var ax="oninput"in document;if(!ax){var Tb=document.createElement("div");Tb.setAttribute("oninput","return;"),ax=typeof Tb.oninput=="function"}nx=ax}else nx=!1;wC=nx&&(!document.documentMode||9<document.documentMode)}function Ib(){m0&&(m0.detachEvent("onpropertychange",bC),q0=m0=null)}function bC(e){if(e.propertyName==="value"&&Wm(q0)){var t=[];yC(t,q0,e,zy(e)),tC(A8,t)}}function u8(e,t,r){e==="focusin"?(Ib(),m0=t,q0=r,m0.attachEvent("onpropertychange",bC)):e==="focusout"&&Ib()}function h8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wm(q0)}function f8(e,t){if(e==="click")return Wm(t)}function p8(e,t){if(e==="input"||e==="change")return Wm(t)}function m8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ro=typeof Object.is=="function"?Object.is:m8;function G0(e,t){if(ro(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!U1.call(t,a)||!ro(e[a],t[a]))return!1}return!0}function Ub(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lb(e,t){var r=Ub(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ub(r)}}function _C(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_C(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NC(){for(var e=window,t=qp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=qp(e.document)}return t}function Zy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function g8(e){var t=NC(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&_C(r.ownerDocument.documentElement,r)){if(s!==null&&Zy(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=Lb(r,i);var o=Lb(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var x8=ol&&"documentMode"in document&&11>=document.documentMode,fd=null,Z1=null,g0=null,ev=!1;function Db(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ev||fd==null||fd!==qp(s)||(s=fd,"selectionStart"in s&&Zy(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),g0&&G0(g0,s)||(g0=s,s=Zp(Z1,"onSelect"),0<s.length&&(t=new Xy("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=fd)))}function _f(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var pd={animationend:_f("Animation","AnimationEnd"),animationiteration:_f("Animation","AnimationIteration"),animationstart:_f("Animation","AnimationStart"),transitionend:_f("Transition","TransitionEnd")},ix={},BC={};ol&&(BC=document.createElement("div").style,"AnimationEvent"in window||(delete pd.animationend.animation,delete pd.animationiteration.animation,delete pd.animationstart.animation),"TransitionEvent"in window||delete pd.transitionend.transition);function Xm(e){if(ix[e])return ix[e];if(!pd[e])return e;var t=pd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in BC)return ix[e]=t[r];return e}var CC=Xm("animationend"),jC=Xm("animationiteration"),EC=Xm("animationstart"),kC=Xm("transitionend"),SC=new Map,Qb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vc(e,t){SC.set(e,t),vA(t,[e])}for(var ox=0;ox<Qb.length;ox++){var lx=Qb[ox],v8=lx.toLowerCase(),y8=lx[0].toUpperCase()+lx.slice(1);vc(v8,"on"+y8)}vc(CC,"onAnimationEnd");vc(jC,"onAnimationIteration");vc(EC,"onAnimationStart");vc("dblclick","onDoubleClick");vc("focusin","onFocus");vc("focusout","onBlur");vc(kC,"onTransitionEnd");Kd("onMouseEnter",["mouseout","mouseover"]);Kd("onMouseLeave",["mouseout","mouseover"]);Kd("onPointerEnter",["pointerout","pointerover"]);Kd("onPointerLeave",["pointerout","pointerover"]);vA("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vA("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vA("onBeforeInput",["compositionend","keypress","textInput","paste"]);vA("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vA("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vA("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var e0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w8=new Set("cancel close invalid load scroll toggle".split(" ").concat(e0));function Ob(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,v6(s,t,void 0,e),e.currentTarget=null}function FC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,A=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Ob(a,l,A),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,A=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Ob(a,l,A),i=c}}}if($p)throw e=W1,$p=!1,W1=null,e}function us(e,t){var r=t[av];r===void 0&&(r=t[av]=new Set);var s=e+"__bubble";r.has(s)||(TC(t,e,2,!1),r.add(s))}function cx(e,t,r){var s=0;t&&(s|=4),TC(r,e,s,t)}var Nf="_reactListening"+Math.random().toString(36).slice(2);function $0(e){if(!e[Nf]){e[Nf]=!0,PB.forEach(function(r){r!=="selectionchange"&&(w8.has(r)||cx(r,!1,e),cx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nf]||(t[Nf]=!0,cx("selectionchange",!1,t))}}function TC(e,t,r,s){switch(pC(t)){case 1:var a=L6;break;case 4:a=D6;break;default:a=$y}r=a.bind(null,t,r,e),a=void 0,!$1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Ax(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=$c(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}tC(function(){var A=i,d=zy(r),h=[];e:{var f=SC.get(e);if(f!==void 0){var u=Xy,p=e;switch(e){case"keypress":if(Ep(r)===0)break e;case"keydown":case"keyup":u=J6;break;case"focusin":p="focus",u=sx;break;case"focusout":p="blur",u=sx;break;case"beforeblur":case"afterblur":u=sx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=Cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=P6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=e8;break;case CC:case jC:case EC:u=H6;break;case kC:u=r8;break;case"scroll":u=Q6;break;case"wheel":u=n8;break;case"copy":case"cut":case"paste":u=z6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Eb}var g=(t&4)!==0,w=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var x=A,y;x!==null;){y=x;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,v!==null&&(_=H0(x,v),_!=null&&g.push(W0(x,_,y)))),w)break;x=x.return}0<g.length&&(f=new u(f,p,null,r,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",u=e==="mouseout"||e==="pointerout",f&&r!==q1&&(p=r.relatedTarget||r.fromElement)&&($c(p)||p[ll]))break e;if((u||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,u?(p=r.relatedTarget||r.toElement,u=A,p=p?$c(p):null,p!==null&&(w=yA(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(u=null,p=A),u!==p)){if(g=Cb,_="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=Eb,_="onPointerLeave",v="onPointerEnter",x="pointer"),w=u==null?f:md(u),y=p==null?f:md(p),f=new g(_,x+"leave",u,r,d),f.target=w,f.relatedTarget=y,_=null,$c(d)===A&&(g=new g(v,x+"enter",p,r,d),g.target=y,g.relatedTarget=w,_=g),w=_,u&&p)t:{for(g=u,v=p,x=0,y=g;y;y=RA(y))x++;for(y=0,_=v;_;_=RA(_))y++;for(;0<x-y;)g=RA(g),x--;for(;0<y-x;)v=RA(v),y--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=RA(g),v=RA(v)}g=null}else g=null;u!==null&&Pb(h,f,u,g,!1),p!==null&&w!==null&&Pb(h,w,p,g,!0)}}e:{if(f=A?md(A):window,u=f.nodeName&&f.nodeName.toLowerCase(),u==="select"||u==="input"&&f.type==="file")var I=d8;else if(Fb(f))if(wC)I=p8;else{I=h8;var k=u8}else(u=f.nodeName)&&u.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=f8);if(I&&(I=I(e,A))){yC(h,I,r,d);break e}k&&k(e,f,A),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&M1(f,"number",f.value)}switch(k=A?md(A):window,e){case"focusin":(Fb(k)||k.contentEditable==="true")&&(fd=k,Z1=A,g0=null);break;case"focusout":g0=Z1=fd=null;break;case"mousedown":ev=!0;break;case"contextmenu":case"mouseup":case"dragend":ev=!1,Db(h,r,d);break;case"selectionchange":if(x8)break;case"keydown":case"keyup":Db(h,r,d)}var T;if(Yy)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else hd?xC(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(gC&&r.locale!=="ko"&&(hd||S!=="onCompositionStart"?S==="onCompositionEnd"&&hd&&(T=mC()):(ql=d,Wy="value"in ql?ql.value:ql.textContent,hd=!0)),k=Zp(A,S),0<k.length&&(S=new jb(S,e,null,r,d),h.push({event:S,listeners:k}),T?S.data=T:(T=vC(r),T!==null&&(S.data=T)))),(T=i8?o8(e,r):l8(e,r))&&(A=Zp(A,"onBeforeInput"),0<A.length&&(d=new jb("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:A}),d.data=T))}FC(h,t)})}function W0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Zp(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=H0(e,r),i!=null&&s.unshift(W0(e,i,a)),i=H0(e,t),i!=null&&s.push(W0(e,i,a))),e=e.return}return s}function RA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pb(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,A=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&A!==null&&(l=A,a?(c=H0(r,i),c!=null&&o.unshift(W0(r,c,l))):a||(c=H0(r,i),c!=null&&o.push(W0(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var b8=/\r\n?/g,_8=/\u0000|\uFFFD/g;function Rb(e){return(typeof e=="string"?e:""+e).replace(b8,`
`).replace(_8,"")}function Bf(e,t,r){if(t=Rb(t),Rb(e)!==t&&r)throw Error(ut(425))}function em(){}var tv=null,rv=null;function sv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nv=typeof setTimeout=="function"?setTimeout:void 0,N8=typeof clearTimeout=="function"?clearTimeout:void 0,Mb=typeof Promise=="function"?Promise:void 0,B8=typeof queueMicrotask=="function"?queueMicrotask:typeof Mb<"u"?function(e){return Mb.resolve(null).then(e).catch(C8)}:nv;function C8(e){setTimeout(function(){throw e})}function dx(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),V0(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);V0(t)}function nc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var su=Math.random().toString(36).slice(2),vo="__reactFiber$"+su,X0="__reactProps$"+su,ll="__reactContainer$"+su,av="__reactEvents$"+su,j8="__reactListeners$"+su,E8="__reactHandles$"+su;function $c(e){var t=e[vo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ll]||r[vo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hb(e);e!==null;){if(r=e[vo])return r;e=Hb(e)}return t}e=r,r=e.parentNode}return null}function Fh(e){return e=e[vo]||e[ll],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function md(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ut(33))}function Jm(e){return e[X0]||null}var iv=[],gd=-1;function yc(e){return{current:e}}function fs(e){0>gd||(e.current=iv[gd],iv[gd]=null,gd--)}function os(e,t){gd++,iv[gd]=e.current,e.current=t}var fc={},ia=yc(fc),Ia=yc(!1),lA=fc;function zd(e,t){var r=e.type.contextTypes;if(!r)return fc;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ua(e){return e=e.childContextTypes,e!=null}function tm(){fs(Ia),fs(ia)}function Kb(e,t,r){if(ia.current!==fc)throw Error(ut(168));os(ia,t),os(Ia,r)}function IC(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(ut(108,u6(e)||"Unknown",a));return Bs({},r,s)}function rm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fc,lA=ia.current,os(ia,e),os(Ia,Ia.current),!0}function zb(e,t,r){var s=e.stateNode;if(!s)throw Error(ut(169));r?(e=IC(e,t,lA),s.__reactInternalMemoizedMergedChildContext=e,fs(Ia),fs(ia),os(ia,e)):fs(Ia),os(Ia,r)}var Xo=null,Ym=!1,ux=!1;function UC(e){Xo===null?Xo=[e]:Xo.push(e)}function k8(e){Ym=!0,UC(e)}function wc(){if(!ux&&Xo!==null){ux=!0;var e=0,t=zr;try{var r=Xo;for(zr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Xo=null,Ym=!1}catch(a){throw Xo!==null&&(Xo=Xo.slice(e+1)),aC(Vy,wc),a}finally{zr=t,ux=!1}}return null}var xd=[],vd=0,sm=null,nm=0,xi=[],vi=0,cA=null,Yo=1,Zo="";function Pc(e,t){xd[vd++]=nm,xd[vd++]=sm,sm=e,nm=t}function LC(e,t,r){xi[vi++]=Yo,xi[vi++]=Zo,xi[vi++]=cA,cA=e;var s=Yo;e=Zo;var a=32-Zi(s)-1;s&=~(1<<a),r+=1;var i=32-Zi(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Yo=1<<32-Zi(t)+a|r<<a|s,Zo=i+e}else Yo=1<<i|r<<a|s,Zo=e}function e2(e){e.return!==null&&(Pc(e,1),LC(e,1,0))}function t2(e){for(;e===sm;)sm=xd[--vd],xd[vd]=null,nm=xd[--vd],xd[vd]=null;for(;e===cA;)cA=xi[--vi],xi[vi]=null,Zo=xi[--vi],xi[vi]=null,Yo=xi[--vi],xi[vi]=null}var si=null,ti=null,xs=!1,Wi=null;function DC(e,t){var r=wi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Vb(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,si=e,ti=nc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,si=e,ti=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cA!==null?{id:Yo,overflow:Zo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,si=e,ti=null,!0):!1;default:return!1}}function ov(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lv(e){if(xs){var t=ti;if(t){var r=t;if(!Vb(e,t)){if(ov(e))throw Error(ut(418));t=nc(r.nextSibling);var s=si;t&&Vb(e,t)?DC(s,r):(e.flags=e.flags&-4097|2,xs=!1,si=e)}}else{if(ov(e))throw Error(ut(418));e.flags=e.flags&-4097|2,xs=!1,si=e}}}function qb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;si=e}function Cf(e){if(e!==si)return!1;if(!xs)return qb(e),xs=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sv(e.type,e.memoizedProps)),t&&(t=ti)){if(ov(e))throw QC(),Error(ut(418));for(;t;)DC(e,t),t=nc(t.nextSibling)}if(qb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ut(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ti=nc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ti=null}}else ti=si?nc(e.stateNode.nextSibling):null;return!0}function QC(){for(var e=ti;e;)e=nc(e.nextSibling)}function Vd(){ti=si=null,xs=!1}function r2(e){Wi===null?Wi=[e]:Wi.push(e)}var S8=hl.ReactCurrentBatchConfig;function Mu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ut(309));var s=r.stateNode}if(!s)throw Error(ut(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ut(284));if(!r._owner)throw Error(ut(290,e))}return e}function jf(e,t){throw e=Object.prototype.toString.call(t),Error(ut(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gb(e){var t=e._init;return t(e._payload)}function OC(e){function t(v,x){if(e){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function s(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function a(v,x){return v=lc(v,x),v.index=0,v.sibling=null,v}function i(v,x,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,y,_){return x===null||x.tag!==6?(x=vx(y,v.mode,_),x.return=v,x):(x=a(x,y),x.return=v,x)}function c(v,x,y,_){var I=y.type;return I===ud?d(v,x,y.props.children,_,y.key):x!==null&&(x.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ol&&Gb(I)===x.type)?(_=a(x,y.props),_.ref=Mu(v,x,y),_.return=v,_):(_=Lp(y.type,y.key,y.props,null,v.mode,_),_.ref=Mu(v,x,y),_.return=v,_)}function A(v,x,y,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=yx(y,v.mode,_),x.return=v,x):(x=a(x,y.children||[]),x.return=v,x)}function d(v,x,y,_,I){return x===null||x.tag!==7?(x=tA(y,v.mode,_,I),x.return=v,x):(x=a(x,y),x.return=v,x)}function h(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=vx(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case mf:return y=Lp(x.type,x.key,x.props,null,v.mode,y),y.ref=Mu(v,null,x),y.return=v,y;case dd:return x=yx(x,v.mode,y),x.return=v,x;case Ol:var _=x._init;return h(v,_(x._payload),y)}if(Yu(x)||Du(x))return x=tA(x,v.mode,y,null),x.return=v,x;jf(v,x)}return null}function f(v,x,y,_){var I=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return I!==null?null:l(v,x,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mf:return y.key===I?c(v,x,y,_):null;case dd:return y.key===I?A(v,x,y,_):null;case Ol:return I=y._init,f(v,x,I(y._payload),_)}if(Yu(y)||Du(y))return I!==null?null:d(v,x,y,_,null);jf(v,y)}return null}function u(v,x,y,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(y)||null,l(x,v,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case mf:return v=v.get(_.key===null?y:_.key)||null,c(x,v,_,I);case dd:return v=v.get(_.key===null?y:_.key)||null,A(x,v,_,I);case Ol:var k=_._init;return u(v,x,y,k(_._payload),I)}if(Yu(_)||Du(_))return v=v.get(y)||null,d(x,v,_,I,null);jf(x,_)}return null}function p(v,x,y,_){for(var I=null,k=null,T=x,S=x=0,B=null;T!==null&&S<y.length;S++){T.index>S?(B=T,T=null):B=T.sibling;var R=f(v,T,y[S],_);if(R===null){T===null&&(T=B);break}e&&T&&R.alternate===null&&t(v,T),x=i(R,x,S),k===null?I=R:k.sibling=R,k=R,T=B}if(S===y.length)return r(v,T),xs&&Pc(v,S),I;if(T===null){for(;S<y.length;S++)T=h(v,y[S],_),T!==null&&(x=i(T,x,S),k===null?I=T:k.sibling=T,k=T);return xs&&Pc(v,S),I}for(T=s(v,T);S<y.length;S++)B=u(T,v,S,y[S],_),B!==null&&(e&&B.alternate!==null&&T.delete(B.key===null?S:B.key),x=i(B,x,S),k===null?I=B:k.sibling=B,k=B);return e&&T.forEach(function(U){return t(v,U)}),xs&&Pc(v,S),I}function g(v,x,y,_){var I=Du(y);if(typeof I!="function")throw Error(ut(150));if(y=I.call(y),y==null)throw Error(ut(151));for(var k=I=null,T=x,S=x=0,B=null,R=y.next();T!==null&&!R.done;S++,R=y.next()){T.index>S?(B=T,T=null):B=T.sibling;var U=f(v,T,R.value,_);if(U===null){T===null&&(T=B);break}e&&T&&U.alternate===null&&t(v,T),x=i(U,x,S),k===null?I=U:k.sibling=U,k=U,T=B}if(R.done)return r(v,T),xs&&Pc(v,S),I;if(T===null){for(;!R.done;S++,R=y.next())R=h(v,R.value,_),R!==null&&(x=i(R,x,S),k===null?I=R:k.sibling=R,k=R);return xs&&Pc(v,S),I}for(T=s(v,T);!R.done;S++,R=y.next())R=u(T,v,S,R.value,_),R!==null&&(e&&R.alternate!==null&&T.delete(R.key===null?S:R.key),x=i(R,x,S),k===null?I=R:k.sibling=R,k=R);return e&&T.forEach(function(L){return t(v,L)}),xs&&Pc(v,S),I}function w(v,x,y,_){if(typeof y=="object"&&y!==null&&y.type===ud&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mf:e:{for(var I=y.key,k=x;k!==null;){if(k.key===I){if(I=y.type,I===ud){if(k.tag===7){r(v,k.sibling),x=a(k,y.props.children),x.return=v,v=x;break e}}else if(k.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ol&&Gb(I)===k.type){r(v,k.sibling),x=a(k,y.props),x.ref=Mu(v,k,y),x.return=v,v=x;break e}r(v,k);break}else t(v,k);k=k.sibling}y.type===ud?(x=tA(y.props.children,v.mode,_,y.key),x.return=v,v=x):(_=Lp(y.type,y.key,y.props,null,v.mode,_),_.ref=Mu(v,x,y),_.return=v,v=_)}return o(v);case dd:e:{for(k=y.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){r(v,x.sibling),x=a(x,y.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=yx(y,v.mode,_),x.return=v,v=x}return o(v);case Ol:return k=y._init,w(v,x,k(y._payload),_)}if(Yu(y))return p(v,x,y,_);if(Du(y))return g(v,x,y,_);jf(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(r(v,x.sibling),x=a(x,y),x.return=v,v=x):(r(v,x),x=vx(y,v.mode,_),x.return=v,v=x),o(v)):r(v,x)}return w}var qd=OC(!0),PC=OC(!1),am=yc(null),im=null,yd=null,s2=null;function n2(){s2=yd=im=null}function a2(e){var t=am.current;fs(am),e._currentValue=t}function cv(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Fd(e,t){im=e,s2=yd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ta=!0),e.firstContext=null)}function Ci(e){var t=e._currentValue;if(s2!==e)if(e={context:e,memoizedValue:t,next:null},yd===null){if(im===null)throw Error(ut(308));yd=e,im.dependencies={lanes:0,firstContext:e}}else yd=yd.next=e;return t}var Wc=null;function i2(e){Wc===null?Wc=[e]:Wc.push(e)}function RC(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,i2(t)):(r.next=a.next,a.next=r),t.interleaved=r,cl(e,s)}function cl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Pl=!1;function o2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ac(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,_r&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,cl(e,r)}return a=s.interleaved,a===null?(t.next=t,i2(s)):(t.next=a.next,a.next=t),s.interleaved=t,cl(e,r)}function kp(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,qy(e,r)}}function $b(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function om(e,t,r,s){var a=e.updateQueue;Pl=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,A=c.next;c.next=null,o===null?i=A:o.next=A,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=A:l.next=A,d.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,d=A=c=null,l=i;do{var f=l.lane,u=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:u,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(f=t,u=r,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(u,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(u,h,f):p,f==null)break e;h=Bs({},h,f);break e;case 2:Pl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else u={eventTime:u,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(A=d=u,c=h):d=d.next=u,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=A,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);dA|=o,e.lanes=o,e.memoizedState=h}}function Wb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(ut(191,a));a.call(s)}}}var Th={},bo=yc(Th),J0=yc(Th),Y0=yc(Th);function Xc(e){if(e===Th)throw Error(ut(174));return e}function l2(e,t){switch(os(Y0,t),os(J0,e),os(bo,Th),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:K1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=K1(t,e)}fs(bo),os(bo,t)}function Gd(){fs(bo),fs(J0),fs(Y0)}function HC(e){Xc(Y0.current);var t=Xc(bo.current),r=K1(t,e.type);t!==r&&(os(J0,e),os(bo,r))}function c2(e){J0.current===e&&(fs(bo),fs(J0))}var _s=yc(0);function lm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hx=[];function A2(){for(var e=0;e<hx.length;e++)hx[e]._workInProgressVersionPrimary=null;hx.length=0}var Sp=hl.ReactCurrentDispatcher,fx=hl.ReactCurrentBatchConfig,AA=0,Ns=null,pn=null,bn=null,cm=!1,x0=!1,Z0=0,F8=0;function Vn(){throw Error(ut(321))}function d2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ro(e[r],t[r]))return!1;return!0}function u2(e,t,r,s,a,i){if(AA=i,Ns=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sp.current=e===null||e.memoizedState===null?L8:D8,e=r(s,a),x0){i=0;do{if(x0=!1,Z0=0,25<=i)throw Error(ut(301));i+=1,bn=pn=null,t.updateQueue=null,Sp.current=Q8,e=r(s,a)}while(x0)}if(Sp.current=Am,t=pn!==null&&pn.next!==null,AA=0,bn=pn=Ns=null,cm=!1,t)throw Error(ut(300));return e}function h2(){var e=Z0!==0;return Z0=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Ns.memoizedState=bn=e:bn=bn.next=e,bn}function ji(){if(pn===null){var e=Ns.alternate;e=e!==null?e.memoizedState:null}else e=pn.next;var t=bn===null?Ns.memoizedState:bn.next;if(t!==null)bn=t,pn=e;else{if(e===null)throw Error(ut(310));pn=e,e={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},bn===null?Ns.memoizedState=bn=e:bn=bn.next=e}return bn}function eh(e,t){return typeof t=="function"?t(e):t}function px(e){var t=ji(),r=t.queue;if(r===null)throw Error(ut(311));r.lastRenderedReducer=e;var s=pn,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,A=i;do{var d=A.lane;if((AA&d)===d)c!==null&&(c=c.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),s=A.hasEagerState?A.eagerState:e(s,A.action);else{var h={lane:d,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Ns.lanes|=d,dA|=d}A=A.next}while(A!==null&&A!==i);c===null?o=s:c.next=l,ro(s,t.memoizedState)||(Ta=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ns.lanes|=i,dA|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function mx(e){var t=ji(),r=t.queue;if(r===null)throw Error(ut(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ro(i,t.memoizedState)||(Ta=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function KC(){}function zC(e,t){var r=Ns,s=ji(),a=t(),i=!ro(s.memoizedState,a);if(i&&(s.memoizedState=a,Ta=!0),s=s.queue,f2(GC.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||bn!==null&&bn.memoizedState.tag&1){if(r.flags|=2048,th(9,qC.bind(null,r,s,a,t),void 0,null),Nn===null)throw Error(ut(349));AA&30||VC(r,t,a)}return a}function VC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ns.updateQueue,t===null?(t={lastEffect:null,stores:null},Ns.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function qC(e,t,r,s){t.value=r,t.getSnapshot=s,$C(t)&&WC(e)}function GC(e,t,r){return r(function(){$C(t)&&WC(e)})}function $C(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ro(e,r)}catch{return!0}}function WC(e){var t=cl(e,1);t!==null&&eo(t,e,1,-1)}function Xb(e){var t=xo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eh,lastRenderedState:e},t.queue=e,e=e.dispatch=U8.bind(null,Ns,e),[t.memoizedState,e]}function th(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ns.updateQueue,t===null?(t={lastEffect:null,stores:null},Ns.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function XC(){return ji().memoizedState}function Fp(e,t,r,s){var a=xo();Ns.flags|=e,a.memoizedState=th(1|t,r,void 0,s===void 0?null:s)}function Zm(e,t,r,s){var a=ji();s=s===void 0?null:s;var i=void 0;if(pn!==null){var o=pn.memoizedState;if(i=o.destroy,s!==null&&d2(s,o.deps)){a.memoizedState=th(t,r,i,s);return}}Ns.flags|=e,a.memoizedState=th(1|t,r,i,s)}function Jb(e,t){return Fp(8390656,8,e,t)}function f2(e,t){return Zm(2048,8,e,t)}function JC(e,t){return Zm(4,2,e,t)}function YC(e,t){return Zm(4,4,e,t)}function ZC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ej(e,t,r){return r=r!=null?r.concat([e]):null,Zm(4,4,ZC.bind(null,t,e),r)}function p2(){}function tj(e,t){var r=ji();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&d2(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function rj(e,t){var r=ji();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&d2(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function sj(e,t,r){return AA&21?(ro(r,t)||(r=lC(),Ns.lanes|=r,dA|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ta=!0),e.memoizedState=r)}function T8(e,t){var r=zr;zr=r!==0&&4>r?r:4,e(!0);var s=fx.transition;fx.transition={};try{e(!1),t()}finally{zr=r,fx.transition=s}}function nj(){return ji().memoizedState}function I8(e,t,r){var s=oc(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},aj(e))ij(t,r);else if(r=RC(e,t,r,s),r!==null){var a=wa();eo(r,e,s,a),oj(r,t,s)}}function U8(e,t,r){var s=oc(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(aj(e))ij(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,ro(l,o)){var c=t.interleaved;c===null?(a.next=a,i2(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=RC(e,t,a,s),r!==null&&(a=wa(),eo(r,e,s,a),oj(r,t,s))}}function aj(e){var t=e.alternate;return e===Ns||t!==null&&t===Ns}function ij(e,t){x0=cm=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function oj(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,qy(e,r)}}var Am={readContext:Ci,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},L8={readContext:Ci,useCallback:function(e,t){return xo().memoizedState=[e,t===void 0?null:t],e},useContext:Ci,useEffect:Jb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Fp(4194308,4,ZC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Fp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fp(4,2,e,t)},useMemo:function(e,t){var r=xo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=xo();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=I8.bind(null,Ns,e),[s.memoizedState,e]},useRef:function(e){var t=xo();return e={current:e},t.memoizedState=e},useState:Xb,useDebugValue:p2,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Xb(!1),t=e[0];return e=T8.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ns,a=xo();if(xs){if(r===void 0)throw Error(ut(407));r=r()}else{if(r=t(),Nn===null)throw Error(ut(349));AA&30||VC(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Jb(GC.bind(null,s,i,e),[e]),s.flags|=2048,th(9,qC.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=xo(),t=Nn.identifierPrefix;if(xs){var r=Zo,s=Yo;r=(s&~(1<<32-Zi(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Z0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=F8++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},D8={readContext:Ci,useCallback:tj,useContext:Ci,useEffect:f2,useImperativeHandle:ej,useInsertionEffect:JC,useLayoutEffect:YC,useMemo:rj,useReducer:px,useRef:XC,useState:function(){return px(eh)},useDebugValue:p2,useDeferredValue:function(e){var t=ji();return sj(t,pn.memoizedState,e)},useTransition:function(){var e=px(eh)[0],t=ji().memoizedState;return[e,t]},useMutableSource:KC,useSyncExternalStore:zC,useId:nj,unstable_isNewReconciler:!1},Q8={readContext:Ci,useCallback:tj,useContext:Ci,useEffect:f2,useImperativeHandle:ej,useInsertionEffect:JC,useLayoutEffect:YC,useMemo:rj,useReducer:mx,useRef:XC,useState:function(){return mx(eh)},useDebugValue:p2,useDeferredValue:function(e){var t=ji();return pn===null?t.memoizedState=e:sj(t,pn.memoizedState,e)},useTransition:function(){var e=mx(eh)[0],t=ji().memoizedState;return[e,t]},useMutableSource:KC,useSyncExternalStore:zC,useId:nj,unstable_isNewReconciler:!1};function Vi(e,t){if(e&&e.defaultProps){t=Bs({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Av(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Bs({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var eg={isMounted:function(e){return(e=e._reactInternals)?yA(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=wa(),a=oc(e),i=tl(s,a);i.payload=t,r!=null&&(i.callback=r),t=ac(e,i,a),t!==null&&(eo(t,e,a,s),kp(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=wa(),a=oc(e),i=tl(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ac(e,i,a),t!==null&&(eo(t,e,a,s),kp(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=wa(),s=oc(e),a=tl(r,s);a.tag=2,t!=null&&(a.callback=t),t=ac(e,a,s),t!==null&&(eo(t,e,s,r),kp(t,e,s))}};function Yb(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!G0(r,s)||!G0(a,i):!0}function lj(e,t,r){var s=!1,a=fc,i=t.contextType;return typeof i=="object"&&i!==null?i=Ci(i):(a=Ua(t)?lA:ia.current,s=t.contextTypes,i=(s=s!=null)?zd(e,a):fc),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eg,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Zb(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&eg.enqueueReplaceState(t,t.state,null)}function dv(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},o2(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ci(i):(i=Ua(t)?lA:ia.current,a.context=zd(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Av(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&eg.enqueueReplaceState(a,a.state,null),om(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function $d(e,t){try{var r="",s=t;do r+=d6(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function gx(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function uv(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var O8=typeof WeakMap=="function"?WeakMap:Map;function cj(e,t,r){r=tl(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){um||(um=!0,bv=s),uv(e,t)},r}function Aj(e,t,r){r=tl(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){uv(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){uv(e,t),typeof s!="function"&&(ic===null?ic=new Set([this]):ic.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function e_(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new O8;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=Y8.bind(null,e,t,r),t.then(e,e))}function t_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function r_(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=tl(-1,1),t.tag=2,ac(r,t,1))),r.lanes|=1),e)}var P8=hl.ReactCurrentOwner,Ta=!1;function ga(e,t,r,s){t.child=e===null?PC(t,null,r,s):qd(t,e.child,r,s)}function s_(e,t,r,s,a){r=r.render;var i=t.ref;return Fd(t,a),s=u2(e,t,r,s,i,a),r=h2(),e!==null&&!Ta?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Al(e,t,a)):(xs&&r&&e2(t),t.flags|=1,ga(e,t,s,a),t.child)}function n_(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!_2(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,dj(e,t,i,s,a)):(e=Lp(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:G0,r(o,s)&&e.ref===t.ref)return Al(e,t,a)}return t.flags|=1,e=lc(i,s),e.ref=t.ref,e.return=t,t.child=e}function dj(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(G0(i,s)&&e.ref===t.ref)if(Ta=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Ta=!0);else return t.lanes=e.lanes,Al(e,t,a)}return hv(e,t,r,s,a)}function uj(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},os(bd,Wa),Wa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,os(bd,Wa),Wa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,os(bd,Wa),Wa|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,os(bd,Wa),Wa|=s;return ga(e,t,a,r),t.child}function hj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function hv(e,t,r,s,a){var i=Ua(r)?lA:ia.current;return i=zd(t,i),Fd(t,a),r=u2(e,t,r,s,i,a),s=h2(),e!==null&&!Ta?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Al(e,t,a)):(xs&&s&&e2(t),t.flags|=1,ga(e,t,r,a),t.child)}function a_(e,t,r,s,a){if(Ua(r)){var i=!0;rm(t)}else i=!1;if(Fd(t,a),t.stateNode===null)Tp(e,t),lj(t,r,s),dv(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,A=r.contextType;typeof A=="object"&&A!==null?A=Ci(A):(A=Ua(r)?lA:ia.current,A=zd(t,A));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==A)&&Zb(t,o,s,A),Pl=!1;var f=t.memoizedState;o.state=f,om(t,s,o,a),c=t.memoizedState,l!==s||f!==c||Ia.current||Pl?(typeof d=="function"&&(Av(t,r,d,s),c=t.memoizedState),(l=Pl||Yb(t,r,l,s,f,c,A))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=A,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,MC(e,t),l=t.memoizedProps,A=t.type===t.elementType?l:Vi(t.type,l),o.props=A,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ci(c):(c=Ua(r)?lA:ia.current,c=zd(t,c));var u=r.getDerivedStateFromProps;(d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Zb(t,o,s,c),Pl=!1,f=t.memoizedState,o.state=f,om(t,s,o,a);var p=t.memoizedState;l!==h||f!==p||Ia.current||Pl?(typeof u=="function"&&(Av(t,r,u,s),p=t.memoizedState),(A=Pl||Yb(t,r,A,s,f,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),o.props=s,o.state=p,o.context=c,s=A):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return fv(e,t,r,s,i,a)}function fv(e,t,r,s,a,i){hj(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&zb(t,r,!1),Al(e,t,i);s=t.stateNode,P8.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=qd(t,e.child,null,i),t.child=qd(t,null,l,i)):ga(e,t,l,i),t.memoizedState=s.state,a&&zb(t,r,!0),t.child}function fj(e){var t=e.stateNode;t.pendingContext?Kb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kb(e,t.context,!1),l2(e,t.containerInfo)}function i_(e,t,r,s,a){return Vd(),r2(a),t.flags|=256,ga(e,t,r,s),t.child}var pv={dehydrated:null,treeContext:null,retryLane:0};function mv(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj(e,t,r){var s=t.pendingProps,a=_s.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),os(_s,a&1),e===null)return lv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=sg(o,s,0,null),e=tA(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=mv(r),t.memoizedState=pv,e):m2(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return R8(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=lc(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=lc(l,i):(i=tA(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?mv(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=pv,s}return i=e.child,e=i.sibling,s=lc(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function m2(e,t){return t=sg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ef(e,t,r,s){return s!==null&&r2(s),qd(t,e.child,null,r),e=m2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function R8(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=gx(Error(ut(422))),Ef(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=sg({mode:"visible",children:s.children},a,0,null),i=tA(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&qd(t,e.child,null,o),t.child.memoizedState=mv(o),t.memoizedState=pv,i);if(!(t.mode&1))return Ef(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(ut(419)),s=gx(i,s,void 0),Ef(e,t,o,s)}if(l=(o&e.childLanes)!==0,Ta||l){if(s=Nn,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,cl(e,a),eo(s,e,a,-1))}return b2(),s=gx(Error(ut(421))),Ef(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Z8.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ti=nc(a.nextSibling),si=t,xs=!0,Wi=null,e!==null&&(xi[vi++]=Yo,xi[vi++]=Zo,xi[vi++]=cA,Yo=e.id,Zo=e.overflow,cA=t),t=m2(t,s.children),t.flags|=4096,t)}function o_(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),cv(e.return,t,r)}function xx(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function mj(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(ga(e,t,s.children,r),s=_s.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&o_(e,r,t);else if(e.tag===19)o_(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(os(_s,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&lm(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),xx(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&lm(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}xx(t,!0,r,null,i);break;case"together":xx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Al(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),dA|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ut(153));if(t.child!==null){for(e=t.child,r=lc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=lc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function M8(e,t,r){switch(t.tag){case 3:fj(t),Vd();break;case 5:HC(t);break;case 1:Ua(t.type)&&rm(t);break;case 4:l2(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;os(am,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(os(_s,_s.current&1),t.flags|=128,null):r&t.child.childLanes?pj(e,t,r):(os(_s,_s.current&1),e=Al(e,t,r),e!==null?e.sibling:null);os(_s,_s.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return mj(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),os(_s,_s.current),s)break;return null;case 22:case 23:return t.lanes=0,uj(e,t,r)}return Al(e,t,r)}var gj,gv,xj,vj;gj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gv=function(){};xj=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Xc(bo.current);var i=null;switch(r){case"input":a=P1(e,a),s=P1(e,s),i=[];break;case"select":a=Bs({},a,{value:void 0}),s=Bs({},s,{value:void 0}),i=[];break;case"textarea":a=H1(e,a),s=H1(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=em)}z1(r,s);var o;r=null;for(A in a)if(!s.hasOwnProperty(A)&&a.hasOwnProperty(A)&&a[A]!=null)if(A==="style"){var l=a[A];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(R0.hasOwnProperty(A)?i||(i=[]):(i=i||[]).push(A,null));for(A in s){var c=s[A];if(l=a!=null?a[A]:void 0,s.hasOwnProperty(A)&&c!==l&&(c!=null||l!=null))if(A==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(A,r)),r=c;else A==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(A,c)):A==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(A,""+c):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(R0.hasOwnProperty(A)?(c!=null&&A==="onScroll"&&us("scroll",e),i||l===c||(i=[])):(i=i||[]).push(A,c))}r&&(i=i||[]).push("style",r);var A=i;(t.updateQueue=A)&&(t.flags|=4)}};vj=function(e,t,r,s){r!==s&&(t.flags|=4)};function Hu(e,t){if(!xs)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function H8(e,t,r){var s=t.pendingProps;switch(t2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(t),null;case 1:return Ua(t.type)&&tm(),qn(t),null;case 3:return s=t.stateNode,Gd(),fs(Ia),fs(ia),A2(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Cf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wi!==null&&(Bv(Wi),Wi=null))),gv(e,t),qn(t),null;case 5:c2(t);var a=Xc(Y0.current);if(r=t.type,e!==null&&t.stateNode!=null)xj(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(ut(166));return qn(t),null}if(e=Xc(bo.current),Cf(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[vo]=t,s[X0]=i,e=(t.mode&1)!==0,r){case"dialog":us("cancel",s),us("close",s);break;case"iframe":case"object":case"embed":us("load",s);break;case"video":case"audio":for(a=0;a<e0.length;a++)us(e0[a],s);break;case"source":us("error",s);break;case"img":case"image":case"link":us("error",s),us("load",s);break;case"details":us("toggle",s);break;case"input":mb(s,i),us("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},us("invalid",s);break;case"textarea":xb(s,i),us("invalid",s)}z1(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bf(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bf(s.textContent,l,e),a=["children",""+l]):R0.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&us("scroll",s)}switch(r){case"input":gf(s),gb(s,i,!0);break;case"textarea":gf(s),vb(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=em)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GB(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[vo]=t,e[X0]=s,gj(e,t,!1,!1),t.stateNode=e;e:{switch(o=V1(r,s),r){case"dialog":us("cancel",e),us("close",e),a=s;break;case"iframe":case"object":case"embed":us("load",e),a=s;break;case"video":case"audio":for(a=0;a<e0.length;a++)us(e0[a],e);a=s;break;case"source":us("error",e),a=s;break;case"img":case"image":case"link":us("error",e),us("load",e),a=s;break;case"details":us("toggle",e),a=s;break;case"input":mb(e,s),a=P1(e,s),us("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Bs({},s,{value:void 0}),us("invalid",e);break;case"textarea":xb(e,s),a=H1(e,s),us("invalid",e);break;default:a=s}z1(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?XB(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$B(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&M0(e,c):typeof c=="number"&&M0(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(R0.hasOwnProperty(i)?c!=null&&i==="onScroll"&&us("scroll",e):c!=null&&Ry(e,i,c,o))}switch(r){case"input":gf(e),gb(e,s,!1);break;case"textarea":gf(e),vb(e);break;case"option":s.value!=null&&e.setAttribute("value",""+hc(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?jd(e,!!s.multiple,i,!1):s.defaultValue!=null&&jd(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=em)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qn(t),null;case 6:if(e&&t.stateNode!=null)vj(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(ut(166));if(r=Xc(Y0.current),Xc(bo.current),Cf(t)){if(s=t.stateNode,r=t.memoizedProps,s[vo]=t,(i=s.nodeValue!==r)&&(e=si,e!==null))switch(e.tag){case 3:Bf(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bf(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[vo]=t,t.stateNode=s}return qn(t),null;case 13:if(fs(_s),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xs&&ti!==null&&t.mode&1&&!(t.flags&128))QC(),Vd(),t.flags|=98560,i=!1;else if(i=Cf(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(ut(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ut(317));i[vo]=t}else Vd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qn(t),i=!1}else Wi!==null&&(Bv(Wi),Wi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||_s.current&1?gn===0&&(gn=3):b2())),t.updateQueue!==null&&(t.flags|=4),qn(t),null);case 4:return Gd(),gv(e,t),e===null&&$0(t.stateNode.containerInfo),qn(t),null;case 10:return a2(t.type._context),qn(t),null;case 17:return Ua(t.type)&&tm(),qn(t),null;case 19:if(fs(_s),i=t.memoizedState,i===null)return qn(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Hu(i,!1);else{if(gn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=lm(e),o!==null){for(t.flags|=128,Hu(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return os(_s,_s.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ks()>Wd&&(t.flags|=128,s=!0,Hu(i,!1),t.lanes=4194304)}else{if(!s)if(e=lm(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Hu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xs)return qn(t),null}else 2*Ks()-i.renderingStartTime>Wd&&r!==1073741824&&(t.flags|=128,s=!0,Hu(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ks(),t.sibling=null,r=_s.current,os(_s,s?r&1|2:r&1),t):(qn(t),null);case 22:case 23:return w2(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Wa&1073741824&&(qn(t),t.subtreeFlags&6&&(t.flags|=8192)):qn(t),null;case 24:return null;case 25:return null}throw Error(ut(156,t.tag))}function K8(e,t){switch(t2(t),t.tag){case 1:return Ua(t.type)&&tm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gd(),fs(Ia),fs(ia),A2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return c2(t),null;case 13:if(fs(_s),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ut(340));Vd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fs(_s),null;case 4:return Gd(),null;case 10:return a2(t.type._context),null;case 22:case 23:return w2(),null;case 24:return null;default:return null}}var kf=!1,ta=!1,z8=typeof WeakSet=="function"?WeakSet:Set,It=null;function wd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ts(e,t,s)}else r.current=null}function xv(e,t,r){try{r()}catch(s){Ts(e,t,s)}}var l_=!1;function V8(e,t){if(tv=Jp,e=NC(),Zy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,A=0,d=0,h=e,f=null;t:for(;;){for(var u;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(u=h.firstChild)!==null;)f=h,h=u;for(;;){if(h===e)break t;if(f===r&&++A===a&&(l=o),f===i&&++d===s&&(c=o),(u=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=u}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(rv={focusedElem:e,selectionRange:r},Jp=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){t=It;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Vi(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(_){Ts(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}return p=l_,l_=!1,p}function v0(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&xv(t,r,i)}a=a.next}while(a!==s)}}function tg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function vv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function yj(e){var t=e.alternate;t!==null&&(e.alternate=null,yj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vo],delete t[X0],delete t[av],delete t[j8],delete t[E8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wj(e){return e.tag===5||e.tag===3||e.tag===4}function c_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yv(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=em));else if(s!==4&&(e=e.child,e!==null))for(yv(e,t,r),e=e.sibling;e!==null;)yv(e,t,r),e=e.sibling}function wv(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(wv(e,t,r),e=e.sibling;e!==null;)wv(e,t,r),e=e.sibling}var Un=null,Gi=!1;function Tl(e,t,r){for(r=r.child;r!==null;)bj(e,t,r),r=r.sibling}function bj(e,t,r){if(wo&&typeof wo.onCommitFiberUnmount=="function")try{wo.onCommitFiberUnmount(Gm,r)}catch{}switch(r.tag){case 5:ta||wd(r,t);case 6:var s=Un,a=Gi;Un=null,Tl(e,t,r),Un=s,Gi=a,Un!==null&&(Gi?(e=Un,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Un.removeChild(r.stateNode));break;case 18:Un!==null&&(Gi?(e=Un,r=r.stateNode,e.nodeType===8?dx(e.parentNode,r):e.nodeType===1&&dx(e,r),V0(e)):dx(Un,r.stateNode));break;case 4:s=Un,a=Gi,Un=r.stateNode.containerInfo,Gi=!0,Tl(e,t,r),Un=s,Gi=a;break;case 0:case 11:case 14:case 15:if(!ta&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xv(r,t,o),a=a.next}while(a!==s)}Tl(e,t,r);break;case 1:if(!ta&&(wd(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Ts(r,t,l)}Tl(e,t,r);break;case 21:Tl(e,t,r);break;case 22:r.mode&1?(ta=(s=ta)||r.memoizedState!==null,Tl(e,t,r),ta=s):Tl(e,t,r);break;default:Tl(e,t,r)}}function A_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new z8),t.forEach(function(s){var a=eT.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Pi(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Un=l.stateNode,Gi=!1;break e;case 3:Un=l.stateNode.containerInfo,Gi=!0;break e;case 4:Un=l.stateNode.containerInfo,Gi=!0;break e}l=l.return}if(Un===null)throw Error(ut(160));bj(i,o,a),Un=null,Gi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(A){Ts(a,t,A)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_j(t,e),t=t.sibling}function _j(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pi(t,e),uo(e),s&4){try{v0(3,e,e.return),tg(3,e)}catch(g){Ts(e,e.return,g)}try{v0(5,e,e.return)}catch(g){Ts(e,e.return,g)}}break;case 1:Pi(t,e),uo(e),s&512&&r!==null&&wd(r,r.return);break;case 5:if(Pi(t,e),uo(e),s&512&&r!==null&&wd(r,r.return),e.flags&32){var a=e.stateNode;try{M0(a,"")}catch(g){Ts(e,e.return,g)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&VB(a,i),V1(l,o);var A=V1(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?XB(a,h):d==="dangerouslySetInnerHTML"?$B(a,h):d==="children"?M0(a,h):Ry(a,d,h,A)}switch(l){case"input":R1(a,i);break;case"textarea":qB(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var u=i.value;u!=null?jd(a,!!i.multiple,u,!1):f!==!!i.multiple&&(i.defaultValue!=null?jd(a,!!i.multiple,i.defaultValue,!0):jd(a,!!i.multiple,i.multiple?[]:"",!1))}a[X0]=i}catch(g){Ts(e,e.return,g)}}break;case 6:if(Pi(t,e),uo(e),s&4){if(e.stateNode===null)throw Error(ut(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ts(e,e.return,g)}}break;case 3:if(Pi(t,e),uo(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{V0(t.containerInfo)}catch(g){Ts(e,e.return,g)}break;case 4:Pi(t,e),uo(e);break;case 13:Pi(t,e),uo(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(v2=Ks())),s&4&&A_(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ta=(A=ta)||d,Pi(t,e),ta=A):Pi(t,e),uo(e),s&8192){if(A=e.memoizedState!==null,(e.stateNode.isHidden=A)&&!d&&e.mode&1)for(It=e,d=e.child;d!==null;){for(h=It=d;It!==null;){switch(f=It,u=f.child,f.tag){case 0:case 11:case 14:case 15:v0(4,f,f.return);break;case 1:wd(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,r=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Ts(s,r,g)}}break;case 5:wd(f,f.return);break;case 22:if(f.memoizedState!==null){u_(h);continue}}u!==null?(u.return=f,It=u):u_(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,A?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=WB("display",o))}catch(g){Ts(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=A?"":h.memoizedProps}catch(g){Ts(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pi(t,e),uo(e),s&4&&A_(e);break;case 21:break;default:Pi(t,e),uo(e)}}function uo(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wj(r)){var s=r;break e}r=r.return}throw Error(ut(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(M0(a,""),s.flags&=-33);var i=c_(e);wv(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=c_(e);yv(e,l,o);break;default:throw Error(ut(161))}}catch(c){Ts(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function q8(e,t,r){It=e,Nj(e)}function Nj(e,t,r){for(var s=(e.mode&1)!==0;It!==null;){var a=It,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||kf;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ta;l=kf;var A=ta;if(kf=o,(ta=c)&&!A)for(It=a;It!==null;)o=It,c=o.child,o.tag===22&&o.memoizedState!==null?h_(a):c!==null?(c.return=o,It=c):h_(a);for(;i!==null;)It=i,Nj(i),i=i.sibling;It=a,kf=l,ta=A}d_(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,It=i):d_(e)}}function d_(e){for(;It!==null;){var t=It;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ta||tg(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ta)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Vi(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Wb(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Wb(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var A=t.alternate;if(A!==null){var d=A.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&V0(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}ta||t.flags&512&&vv(t)}catch(f){Ts(t,t.return,f)}}if(t===e){It=null;break}if(r=t.sibling,r!==null){r.return=t.return,It=r;break}It=t.return}}function u_(e){for(;It!==null;){var t=It;if(t===e){It=null;break}var r=t.sibling;if(r!==null){r.return=t.return,It=r;break}It=t.return}}function h_(e){for(;It!==null;){var t=It;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{tg(4,t)}catch(c){Ts(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Ts(t,a,c)}}var i=t.return;try{vv(t)}catch(c){Ts(t,i,c)}break;case 5:var o=t.return;try{vv(t)}catch(c){Ts(t,o,c)}}}catch(c){Ts(t,t.return,c)}if(t===e){It=null;break}var l=t.sibling;if(l!==null){l.return=t.return,It=l;break}It=t.return}}var G8=Math.ceil,dm=hl.ReactCurrentDispatcher,g2=hl.ReactCurrentOwner,Ni=hl.ReactCurrentBatchConfig,_r=0,Nn=null,rn=null,On=0,Wa=0,bd=yc(0),gn=0,rh=null,dA=0,rg=0,x2=0,y0=null,Fa=null,v2=0,Wd=1/0,$o=null,um=!1,bv=null,ic=null,Sf=!1,Gl=null,hm=0,w0=0,_v=null,Ip=-1,Up=0;function wa(){return _r&6?Ks():Ip!==-1?Ip:Ip=Ks()}function oc(e){return e.mode&1?_r&2&&On!==0?On&-On:S8.transition!==null?(Up===0&&(Up=lC()),Up):(e=zr,e!==0||(e=window.event,e=e===void 0?16:pC(e.type)),e):1}function eo(e,t,r,s){if(50<w0)throw w0=0,_v=null,Error(ut(185));kh(e,r,s),(!(_r&2)||e!==Nn)&&(e===Nn&&(!(_r&2)&&(rg|=r),gn===4&&Kl(e,On)),La(e,s),r===1&&_r===0&&!(t.mode&1)&&(Wd=Ks()+500,Ym&&wc()))}function La(e,t){var r=e.callbackNode;S6(e,t);var s=Xp(e,e===Nn?On:0);if(s===0)r!==null&&bb(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&bb(r),t===1)e.tag===0?k8(f_.bind(null,e)):UC(f_.bind(null,e)),B8(function(){!(_r&6)&&wc()}),r=null;else{switch(cC(s)){case 1:r=Vy;break;case 4:r=iC;break;case 16:r=Wp;break;case 536870912:r=oC;break;default:r=Wp}r=Tj(r,Bj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Bj(e,t){if(Ip=-1,Up=0,_r&6)throw Error(ut(327));var r=e.callbackNode;if(Td()&&e.callbackNode!==r)return null;var s=Xp(e,e===Nn?On:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=fm(e,s);else{t=s;var a=_r;_r|=2;var i=jj();(Nn!==e||On!==t)&&($o=null,Wd=Ks()+500,eA(e,t));do try{X8();break}catch(l){Cj(e,l)}while(!0);n2(),dm.current=i,_r=a,rn!==null?t=0:(Nn=null,On=0,t=gn)}if(t!==0){if(t===2&&(a=X1(e),a!==0&&(s=a,t=Nv(e,a))),t===1)throw r=rh,eA(e,0),Kl(e,s),La(e,Ks()),r;if(t===6)Kl(e,s);else{if(a=e.current.alternate,!(s&30)&&!$8(a)&&(t=fm(e,s),t===2&&(i=X1(e),i!==0&&(s=i,t=Nv(e,i))),t===1))throw r=rh,eA(e,0),Kl(e,s),La(e,Ks()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(ut(345));case 2:Rc(e,Fa,$o);break;case 3:if(Kl(e,s),(s&130023424)===s&&(t=v2+500-Ks(),10<t)){if(Xp(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){wa(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=nv(Rc.bind(null,e,Fa,$o),t);break}Rc(e,Fa,$o);break;case 4:if(Kl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Zi(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=Ks()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*G8(s/1960))-s,10<s){e.timeoutHandle=nv(Rc.bind(null,e,Fa,$o),s);break}Rc(e,Fa,$o);break;case 5:Rc(e,Fa,$o);break;default:throw Error(ut(329))}}}return La(e,Ks()),e.callbackNode===r?Bj.bind(null,e):null}function Nv(e,t){var r=y0;return e.current.memoizedState.isDehydrated&&(eA(e,t).flags|=256),e=fm(e,t),e!==2&&(t=Fa,Fa=r,t!==null&&Bv(t)),e}function Bv(e){Fa===null?Fa=e:Fa.push.apply(Fa,e)}function $8(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!ro(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kl(e,t){for(t&=~x2,t&=~rg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zi(t),s=1<<r;e[r]=-1,t&=~s}}function f_(e){if(_r&6)throw Error(ut(327));Td();var t=Xp(e,0);if(!(t&1))return La(e,Ks()),null;var r=fm(e,t);if(e.tag!==0&&r===2){var s=X1(e);s!==0&&(t=s,r=Nv(e,s))}if(r===1)throw r=rh,eA(e,0),Kl(e,t),La(e,Ks()),r;if(r===6)throw Error(ut(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rc(e,Fa,$o),La(e,Ks()),null}function y2(e,t){var r=_r;_r|=1;try{return e(t)}finally{_r=r,_r===0&&(Wd=Ks()+500,Ym&&wc())}}function uA(e){Gl!==null&&Gl.tag===0&&!(_r&6)&&Td();var t=_r;_r|=1;var r=Ni.transition,s=zr;try{if(Ni.transition=null,zr=1,e)return e()}finally{zr=s,Ni.transition=r,_r=t,!(_r&6)&&wc()}}function w2(){Wa=bd.current,fs(bd)}function eA(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,N8(r)),rn!==null)for(r=rn.return;r!==null;){var s=r;switch(t2(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&tm();break;case 3:Gd(),fs(Ia),fs(ia),A2();break;case 5:c2(s);break;case 4:Gd();break;case 13:fs(_s);break;case 19:fs(_s);break;case 10:a2(s.type._context);break;case 22:case 23:w2()}r=r.return}if(Nn=e,rn=e=lc(e.current,null),On=Wa=t,gn=0,rh=null,x2=rg=dA=0,Fa=y0=null,Wc!==null){for(t=0;t<Wc.length;t++)if(r=Wc[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}Wc=null}return e}function Cj(e,t){do{var r=rn;try{if(n2(),Sp.current=Am,cm){for(var s=Ns.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}cm=!1}if(AA=0,bn=pn=Ns=null,x0=!1,Z0=0,g2.current=null,r===null||r.return===null){gn=1,rh=t,rn=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=On,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var A=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var u=t_(o);if(u!==null){u.flags&=-257,r_(u,o,l,i,t),u.mode&1&&e_(i,A,t),t=u,c=A;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){e_(i,A,t),b2();break e}c=Error(ut(426))}}else if(xs&&l.mode&1){var w=t_(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),r_(w,o,l,i,t),r2($d(c,l));break e}}i=c=$d(c,l),gn!==4&&(gn=2),y0===null?y0=[i]:y0.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=cj(i,c,t);$b(i,v);break e;case 1:l=c;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ic===null||!ic.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Aj(i,l,t);$b(i,_);break e}}i=i.return}while(i!==null)}kj(r)}catch(I){t=I,rn===r&&r!==null&&(rn=r=r.return);continue}break}while(!0)}function jj(){var e=dm.current;return dm.current=Am,e===null?Am:e}function b2(){(gn===0||gn===3||gn===2)&&(gn=4),Nn===null||!(dA&268435455)&&!(rg&268435455)||Kl(Nn,On)}function fm(e,t){var r=_r;_r|=2;var s=jj();(Nn!==e||On!==t)&&($o=null,eA(e,t));do try{W8();break}catch(a){Cj(e,a)}while(!0);if(n2(),_r=r,dm.current=s,rn!==null)throw Error(ut(261));return Nn=null,On=0,gn}function W8(){for(;rn!==null;)Ej(rn)}function X8(){for(;rn!==null&&!w6();)Ej(rn)}function Ej(e){var t=Fj(e.alternate,e,Wa);e.memoizedProps=e.pendingProps,t===null?kj(e):rn=t,g2.current=null}function kj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=K8(r,t),r!==null){r.flags&=32767,rn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gn=6,rn=null;return}}else if(r=H8(r,t,Wa),r!==null){rn=r;return}if(t=t.sibling,t!==null){rn=t;return}rn=t=e}while(t!==null);gn===0&&(gn=5)}function Rc(e,t,r){var s=zr,a=Ni.transition;try{Ni.transition=null,zr=1,J8(e,t,r,s)}finally{Ni.transition=a,zr=s}return null}function J8(e,t,r,s){do Td();while(Gl!==null);if(_r&6)throw Error(ut(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ut(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(F6(e,i),e===Nn&&(rn=Nn=null,On=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sf||(Sf=!0,Tj(Wp,function(){return Td(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ni.transition,Ni.transition=null;var o=zr;zr=1;var l=_r;_r|=4,g2.current=null,V8(e,r),_j(r,e),g8(rv),Jp=!!tv,rv=tv=null,e.current=r,q8(r),b6(),_r=l,zr=o,Ni.transition=i}else e.current=r;if(Sf&&(Sf=!1,Gl=e,hm=a),i=e.pendingLanes,i===0&&(ic=null),B6(r.stateNode),La(e,Ks()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(um)throw um=!1,e=bv,bv=null,e;return hm&1&&e.tag!==0&&Td(),i=e.pendingLanes,i&1?e===_v?w0++:(w0=0,_v=e):w0=0,wc(),null}function Td(){if(Gl!==null){var e=cC(hm),t=Ni.transition,r=zr;try{if(Ni.transition=null,zr=16>e?16:e,Gl===null)var s=!1;else{if(e=Gl,Gl=null,hm=0,_r&6)throw Error(ut(331));var a=_r;for(_r|=4,It=e.current;It!==null;){var i=It,o=i.child;if(It.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var A=l[c];for(It=A;It!==null;){var d=It;switch(d.tag){case 0:case 11:case 15:v0(8,d,i)}var h=d.child;if(h!==null)h.return=d,It=h;else for(;It!==null;){d=It;var f=d.sibling,u=d.return;if(yj(d),d===A){It=null;break}if(f!==null){f.return=u,It=f;break}It=u}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}It=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,It=o;else e:for(;It!==null;){if(i=It,i.flags&2048)switch(i.tag){case 0:case 11:case 15:v0(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,It=v;break e}It=i.return}}var x=e.current;for(It=x;It!==null;){o=It;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,It=y;else e:for(o=x;It!==null;){if(l=It,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tg(9,l)}}catch(I){Ts(l,l.return,I)}if(l===o){It=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,It=_;break e}It=l.return}}if(_r=a,wc(),wo&&typeof wo.onPostCommitFiberRoot=="function")try{wo.onPostCommitFiberRoot(Gm,e)}catch{}s=!0}return s}finally{zr=r,Ni.transition=t}}return!1}function p_(e,t,r){t=$d(r,t),t=cj(e,t,1),e=ac(e,t,1),t=wa(),e!==null&&(kh(e,1,t),La(e,t))}function Ts(e,t,r){if(e.tag===3)p_(e,e,r);else for(;t!==null;){if(t.tag===3){p_(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ic===null||!ic.has(s))){e=$d(r,e),e=Aj(t,e,1),t=ac(t,e,1),e=wa(),t!==null&&(kh(t,1,e),La(t,e));break}}t=t.return}}function Y8(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=wa(),e.pingedLanes|=e.suspendedLanes&r,Nn===e&&(On&r)===r&&(gn===4||gn===3&&(On&130023424)===On&&500>Ks()-v2?eA(e,0):x2|=r),La(e,t)}function Sj(e,t){t===0&&(e.mode&1?(t=yf,yf<<=1,!(yf&130023424)&&(yf=4194304)):t=1);var r=wa();e=cl(e,t),e!==null&&(kh(e,t,r),La(e,r))}function Z8(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Sj(e,r)}function eT(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(ut(314))}s!==null&&s.delete(t),Sj(e,r)}var Fj;Fj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ia.current)Ta=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ta=!1,M8(e,t,r);Ta=!!(e.flags&131072)}else Ta=!1,xs&&t.flags&1048576&&LC(t,nm,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Tp(e,t),e=t.pendingProps;var a=zd(t,ia.current);Fd(t,r),a=u2(null,t,s,e,a,r);var i=h2();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ua(s)?(i=!0,rm(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,o2(t),a.updater=eg,t.stateNode=a,a._reactInternals=t,dv(t,s,e,r),t=fv(null,t,s,!0,i,r)):(t.tag=0,xs&&i&&e2(t),ga(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Tp(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=rT(s),e=Vi(s,e),a){case 0:t=hv(null,t,s,e,r);break e;case 1:t=a_(null,t,s,e,r);break e;case 11:t=s_(null,t,s,e,r);break e;case 14:t=n_(null,t,s,Vi(s.type,e),r);break e}throw Error(ut(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Vi(s,a),hv(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Vi(s,a),a_(e,t,s,a,r);case 3:e:{if(fj(t),e===null)throw Error(ut(387));s=t.pendingProps,i=t.memoizedState,a=i.element,MC(e,t),om(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=$d(Error(ut(423)),t),t=i_(e,t,s,r,a);break e}else if(s!==a){a=$d(Error(ut(424)),t),t=i_(e,t,s,r,a);break e}else for(ti=nc(t.stateNode.containerInfo.firstChild),si=t,xs=!0,Wi=null,r=PC(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Vd(),s===a){t=Al(e,t,r);break e}ga(e,t,s,r)}t=t.child}return t;case 5:return HC(t),e===null&&lv(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,sv(s,a)?o=null:i!==null&&sv(s,i)&&(t.flags|=32),hj(e,t),ga(e,t,o,r),t.child;case 6:return e===null&&lv(t),null;case 13:return pj(e,t,r);case 4:return l2(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=qd(t,null,s,r):ga(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Vi(s,a),s_(e,t,s,a,r);case 7:return ga(e,t,t.pendingProps,r),t.child;case 8:return ga(e,t,t.pendingProps.children,r),t.child;case 12:return ga(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,os(am,s._currentValue),s._currentValue=o,i!==null)if(ro(i.value,o)){if(i.children===a.children&&!Ia.current){t=Al(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=tl(-1,r&-r),c.tag=2;var A=i.updateQueue;if(A!==null){A=A.shared;var d=A.pending;d===null?c.next=c:(c.next=d.next,d.next=c),A.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),cv(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ut(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),cv(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ga(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Fd(t,r),a=Ci(a),s=s(a),t.flags|=1,ga(e,t,s,r),t.child;case 14:return s=t.type,a=Vi(s,t.pendingProps),a=Vi(s.type,a),n_(e,t,s,a,r);case 15:return dj(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Vi(s,a),Tp(e,t),t.tag=1,Ua(s)?(e=!0,rm(t)):e=!1,Fd(t,r),lj(t,s,a),dv(t,s,a,r),fv(null,t,s,!0,e,r);case 19:return mj(e,t,r);case 22:return uj(e,t,r)}throw Error(ut(156,t.tag))};function Tj(e,t){return aC(e,t)}function tT(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(e,t,r,s){return new tT(e,t,r,s)}function _2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rT(e){if(typeof e=="function")return _2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hy)return 11;if(e===Ky)return 14}return 2}function lc(e,t){var r=e.alternate;return r===null?(r=wi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lp(e,t,r,s,a,i){var o=2;if(s=e,typeof e=="function")_2(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ud:return tA(r.children,a,i,t);case My:o=8,a|=8;break;case L1:return e=wi(12,r,t,a|2),e.elementType=L1,e.lanes=i,e;case D1:return e=wi(13,r,t,a),e.elementType=D1,e.lanes=i,e;case Q1:return e=wi(19,r,t,a),e.elementType=Q1,e.lanes=i,e;case HB:return sg(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case RB:o=10;break e;case MB:o=9;break e;case Hy:o=11;break e;case Ky:o=14;break e;case Ol:o=16,s=null;break e}throw Error(ut(130,e==null?e:typeof e,""))}return t=wi(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function tA(e,t,r,s){return e=wi(7,e,s,t),e.lanes=r,e}function sg(e,t,r,s){return e=wi(22,e,s,t),e.elementType=HB,e.lanes=r,e.stateNode={isHidden:!1},e}function vx(e,t,r){return e=wi(6,e,null,t),e.lanes=r,e}function yx(e,t,r){return t=wi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sT(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ex(0),this.expirationTimes=ex(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ex(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function N2(e,t,r,s,a,i,o,l,c){return e=new sT(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=wi(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},o2(i),e}function nT(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dd,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Ij(e){if(!e)return fc;e=e._reactInternals;e:{if(yA(e)!==e||e.tag!==1)throw Error(ut(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ua(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ut(171))}if(e.tag===1){var r=e.type;if(Ua(r))return IC(e,r,t)}return t}function Uj(e,t,r,s,a,i,o,l,c){return e=N2(r,s,!0,e,a,i,o,l,c),e.context=Ij(null),r=e.current,s=wa(),a=oc(r),i=tl(s,a),i.callback=t??null,ac(r,i,a),e.current.lanes=a,kh(e,a,s),La(e,s),e}function ng(e,t,r,s){var a=t.current,i=wa(),o=oc(a);return r=Ij(r),t.context===null?t.context=r:t.pendingContext=r,t=tl(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ac(a,t,o),e!==null&&(eo(e,a,o,i),kp(e,a,o)),o}function pm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function m_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function B2(e,t){m_(e,t),(e=e.alternate)&&m_(e,t)}function aT(){return null}var Lj=typeof reportError=="function"?reportError:function(e){console.error(e)};function C2(e){this._internalRoot=e}ag.prototype.render=C2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ut(409));ng(e,t,null,null)};ag.prototype.unmount=C2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;uA(function(){ng(null,e,null,null)}),t[ll]=null}};function ag(e){this._internalRoot=e}ag.prototype.unstable_scheduleHydration=function(e){if(e){var t=uC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Hl.length&&t!==0&&t<Hl[r].priority;r++);Hl.splice(r,0,e),r===0&&fC(e)}};function j2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ig(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function g_(){}function iT(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var A=pm(o);i.call(A)}}var o=Uj(t,s,e,0,null,!1,!1,"",g_);return e._reactRootContainer=o,e[ll]=o.current,$0(e.nodeType===8?e.parentNode:e),uA(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var A=pm(c);l.call(A)}}var c=N2(e,0,!1,null,null,!1,!1,"",g_);return e._reactRootContainer=c,e[ll]=c.current,$0(e.nodeType===8?e.parentNode:e),uA(function(){ng(t,c,r,s)}),c}function og(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=pm(o);l.call(c)}}ng(t,o,e,a)}else o=iT(r,t,e,a,s);return pm(o)}AC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zu(t.pendingLanes);r!==0&&(qy(t,r|1),La(t,Ks()),!(_r&6)&&(Wd=Ks()+500,wc()))}break;case 13:uA(function(){var s=cl(e,1);if(s!==null){var a=wa();eo(s,e,1,a)}}),B2(e,1)}};Gy=function(e){if(e.tag===13){var t=cl(e,134217728);if(t!==null){var r=wa();eo(t,e,134217728,r)}B2(e,134217728)}};dC=function(e){if(e.tag===13){var t=oc(e),r=cl(e,t);if(r!==null){var s=wa();eo(r,e,t,s)}B2(e,t)}};uC=function(){return zr};hC=function(e,t){var r=zr;try{return zr=e,t()}finally{zr=r}};G1=function(e,t,r){switch(t){case"input":if(R1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Jm(s);if(!a)throw Error(ut(90));zB(s),R1(s,a)}}}break;case"textarea":qB(e,r);break;case"select":t=r.value,t!=null&&jd(e,!!r.multiple,t,!1)}};ZB=y2;eC=uA;var oT={usingClientEntryPoint:!1,Events:[Fh,md,Jm,JB,YB,y2]},Ku={findFiberByHostInstance:$c,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lT={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sC(e),e===null?null:e.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||aT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ff.isDisabled&&Ff.supportsFiber)try{Gm=Ff.inject(lT),wo=Ff}catch{}}oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oT;oi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j2(t))throw Error(ut(200));return nT(e,t,null,r)};oi.createRoot=function(e,t){if(!j2(e))throw Error(ut(299));var r=!1,s="",a=Lj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=N2(e,1,!1,null,null,r,!1,s,a),e[ll]=t.current,$0(e.nodeType===8?e.parentNode:e),new C2(t)};oi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ut(188)):(e=Object.keys(e).join(","),Error(ut(268,e)));return e=sC(t),e=e===null?null:e.stateNode,e};oi.flushSync=function(e){return uA(e)};oi.hydrate=function(e,t,r){if(!ig(t))throw Error(ut(200));return og(null,e,t,!0,r)};oi.hydrateRoot=function(e,t,r){if(!j2(e))throw Error(ut(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=Lj;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Uj(t,null,e,1,r??null,a,!1,i,o),e[ll]=t.current,$0(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ag(t)};oi.render=function(e,t,r){if(!ig(t))throw Error(ut(200));return og(null,e,t,!1,r)};oi.unmountComponentAtNode=function(e){if(!ig(e))throw Error(ut(40));return e._reactRootContainer?(uA(function(){og(null,null,e,!1,function(){e._reactRootContainer=null,e[ll]=null})}),!0):!1};oi.unstable_batchedUpdates=y2;oi.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!ig(r))throw Error(ut(200));if(e==null||e._reactInternals===void 0)throw Error(ut(38));return og(e,t,r,!1,s)};oi.version="18.3.1-next-f1338f8080-20240426";function Dj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dj)}catch(e){console.error(e)}}Dj(),DB.exports=oi;var cT=DB.exports,x_=cT;I1.createRoot=x_.createRoot,I1.hydrateRoot=x_.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sh(){return sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},sh.apply(this,arguments)}var $l;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($l||($l={}));const v_="popstate";function AT(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return Cv("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:mm(a)}return uT(t,r,null,e)}function $s(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function E2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dT(){return Math.random().toString(36).substr(2,8)}function y_(e,t){return{usr:e.state,key:e.key,idx:t}}function Cv(e,t,r,s){return r===void 0&&(r=null),sh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?nu(t):t,{state:r,key:t&&t.key||s||dT()})}function mm(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function nu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function uT(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=$l.Pop,c=null,A=d();A==null&&(A=0,o.replaceState(sh({},o.state,{idx:A}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=$l.Pop;let w=d(),v=w==null?null:w-A;A=w,c&&c({action:l,location:g.location,delta:v})}function f(w,v){l=$l.Push;let x=Cv(g.location,w,v);A=d()+1;let y=y_(x,A),_=g.createHref(x);try{o.pushState(y,"",_)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function u(w,v){l=$l.Replace;let x=Cv(g.location,w,v);A=d();let y=y_(x,A),_=g.createHref(x);o.replaceState(y,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function p(w){let v=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof w=="string"?w:mm(w);return x=x.replace(/ $/,"%20"),$s(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(v_,h),c=w,()=>{a.removeEventListener(v_,h),c=null}},createHref(w){return t(a,w)},createURL:p,encodeLocation(w){let v=p(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:u,go(w){return o.go(w)}};return g}var w_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(w_||(w_={}));function hT(e,t,r){return r===void 0&&(r="/"),fT(e,t,r)}function fT(e,t,r,s){let a=typeof t=="string"?nu(t):t,i=k2(a.pathname||"/",r);if(i==null)return null;let o=Qj(e);pT(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let A=jT(i);l=NT(o[c],A)}return l}function Qj(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&($s(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let A=cc([s,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&($s(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+A+'".')),Qj(i.children,t,d,A)),!(i.path==null&&!i.index)&&t.push({path:A,score:bT(A,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Oj(i.path))a(i,o,c)}),t}function Oj(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=Oj(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function pT(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_T(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const mT=/^:[\w-]+$/,gT=3,xT=2,vT=1,yT=10,wT=-2,b_=e=>e==="*";function bT(e,t){let r=e.split("/"),s=r.length;return r.some(b_)&&(s+=wT),t&&(s+=xT),r.filter(a=>!b_(a)).reduce((a,i)=>a+(mT.test(i)?gT:i===""?vT:yT),s)}function _T(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function NT(e,t,r){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],A=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=BT({path:c.relativePath,caseSensitive:c.caseSensitive,end:A},d),f=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:cc([i,h.pathname]),pathnameBase:TT(cc([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=cc([i,h.pathnameBase]))}return o}function BT(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=CT(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((A,d,h)=>{let{paramName:f,isOptional:u}=d;if(f==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[h];return u&&!p?A[f]=void 0:A[f]=(p||"").replace(/%2F/g,"/"),A},{}),pathname:i,pathnameBase:o,pattern:e}}function CT(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),E2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function jT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return E2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function k2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}const ET=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kT=e=>ET.test(e);function ST(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?nu(e):e,i;if(r)if(kT(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),E2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=__(r.substring(1),"/"):i=__(r,t)}else i=t;return{pathname:i,search:IT(s),hash:UT(a)}}function __(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function wx(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FT(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function S2(e,t){let r=FT(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function F2(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=nu(e):(a=sh({},e),$s(!a.pathname||!a.pathname.includes("?"),wx("?","pathname","search",a)),$s(!a.pathname||!a.pathname.includes("#"),wx("#","pathname","hash",a)),$s(!a.search||!a.search.includes("#"),wx("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=ST(a,l),A=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(A||d)&&(c.pathname+="/"),c}const cc=e=>e.join("/").replace(/\/\/+/g,"/"),TT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),IT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UT=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function LT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Pj=["post","put","patch","delete"];new Set(Pj);const DT=["get",...Pj];new Set(DT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},nh.apply(this,arguments)}const T2=H.createContext(null),QT=H.createContext(null),bc=H.createContext(null),lg=H.createContext(null),fl=H.createContext({outlet:null,matches:[],isDataRoute:!1}),Rj=H.createContext(null);function OT(e,t){let{relative:r}=t===void 0?{}:t;au()||$s(!1);let{basename:s,navigator:a}=H.useContext(bc),{hash:i,pathname:o,search:l}=Kj(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:cc([s,o])),a.createHref({pathname:c,search:l,hash:i})}function au(){return H.useContext(lg)!=null}function wA(){return au()||$s(!1),H.useContext(lg).location}function Mj(e){H.useContext(bc).static||H.useLayoutEffect(e)}function Lr(){let{isDataRoute:e}=H.useContext(fl);return e?JT():PT()}function PT(){au()||$s(!1);let e=H.useContext(T2),{basename:t,future:r,navigator:s}=H.useContext(bc),{matches:a}=H.useContext(fl),{pathname:i}=wA(),o=JSON.stringify(S2(a,r.v7_relativeSplatPath)),l=H.useRef(!1);return Mj(()=>{l.current=!0}),H.useCallback(function(A,d){if(d===void 0&&(d={}),!l.current)return;if(typeof A=="number"){s.go(A);return}let h=F2(A,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:cc([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,o,i,e])}function Hj(){let{matches:e}=H.useContext(fl),t=e[e.length-1];return t?t.params:{}}function Kj(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=H.useContext(bc),{matches:a}=H.useContext(fl),{pathname:i}=wA(),o=JSON.stringify(S2(a,s.v7_relativeSplatPath));return H.useMemo(()=>F2(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function RT(e,t){return MT(e,t)}function MT(e,t,r,s){au()||$s(!1);let{navigator:a}=H.useContext(bc),{matches:i}=H.useContext(fl),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let A=wA(),d;if(t){var h;let w=typeof t=="string"?nu(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||$s(!1),d=w}else d=A;let f=d.pathname||"/",u=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");u="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=hT(e,{pathname:u}),g=qT(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:cc([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:cc([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,s);return t&&g?H.createElement(lg.Provider,{value:{location:nh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:$l.Pop}},g):g}function HT(){let e=XT(),t=LT(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),r?H.createElement("pre",{style:a},r):null,null)}const KT=H.createElement(HT,null);class zT extends H.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?H.createElement(fl.Provider,{value:this.props.routeContext},H.createElement(Rj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VT(e){let{routeContext:t,match:r,children:s}=e,a=H.useContext(T2);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),H.createElement(fl.Provider,{value:t},s)}function qT(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||$s(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,A=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(A=d),h.route.id){let{loaderData:f,errors:u}=r,p=h.route.loader&&f[h.route.id]===void 0&&(!u||u[h.route.id]===void 0);if(h.route.lazy||p){c=!0,A>=0?o=o.slice(0,A+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let u,p=!1,g=null,w=null;r&&(u=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||KT,c&&(A<0&&f===0?(YT("route-fallback"),p=!0,w=null):A===f&&(p=!0,w=h.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,f+1)),x=()=>{let y;return u?y=g:p?y=w:h.route.Component?y=H.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,H.createElement(VT,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?H.createElement(zT,{location:r.location,revalidation:r.revalidation,component:g,error:u,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var zj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zj||{}),Vj=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Vj||{});function GT(e){let t=H.useContext(T2);return t||$s(!1),t}function $T(e){let t=H.useContext(QT);return t||$s(!1),t}function WT(e){let t=H.useContext(fl);return t||$s(!1),t}function qj(e){let t=WT(),r=t.matches[t.matches.length-1];return r.route.id||$s(!1),r.route.id}function XT(){var e;let t=H.useContext(Rj),r=$T(),s=qj();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function JT(){let{router:e}=GT(zj.UseNavigateStable),t=qj(Vj.UseNavigateStable),r=H.useRef(!1);return Mj(()=>{r.current=!0}),H.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,nh({fromRouteId:t},i)))},[e,t])}const N_={};function YT(e,t,r){N_[e]||(N_[e]=!0)}function ZT(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Gj(e){let{to:t,replace:r,state:s,relative:a}=e;au()||$s(!1);let{future:i,static:o}=H.useContext(bc),{matches:l}=H.useContext(fl),{pathname:c}=wA(),A=Lr(),d=F2(t,S2(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return H.useEffect(()=>A(JSON.parse(h),{replace:r,state:s,relative:a}),[A,h,a,r,s]),null}function Wt(e){$s(!1)}function eI(e){let{basename:t="/",children:r=null,location:s,navigationType:a=$l.Pop,navigator:i,static:o=!1,future:l}=e;au()&&$s(!1);let c=t.replace(/^\/*/,"/"),A=H.useMemo(()=>({basename:c,navigator:i,static:o,future:nh({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=nu(s));let{pathname:d="/",search:h="",hash:f="",state:u=null,key:p="default"}=s,g=H.useMemo(()=>{let w=k2(d,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:u,key:p},navigationType:a}},[c,d,h,f,u,p,a]);return g==null?null:H.createElement(bc.Provider,{value:A},H.createElement(lg.Provider,{children:r,value:g}))}function tI(e){let{children:t,location:r}=e;return RT(jv(t),r)}new Promise(()=>{});function jv(e,t){t===void 0&&(t=[]);let r=[];return H.Children.forEach(e,(s,a)=>{if(!H.isValidElement(s))return;let i=[...t,a];if(s.type===H.Fragment){r.push.apply(r,jv(s.props.children,i));return}s.type!==Wt&&$s(!1),!s.props.index||!s.props.children||$s(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=jv(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ev.apply(this,arguments)}function rI(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function sI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nI(e,t){return e.button===0&&(!t||t==="_self")&&!sI(e)}function kv(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function aI(e,t){let r=kv(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const iI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oI="6";try{window.__reactRouterVersion=oI}catch{}const lI="startTransition",B_=YF[lI];function cI(e){let{basename:t,children:r,future:s,window:a}=e,i=H.useRef();i.current==null&&(i.current=AT({window:a,v5Compat:!0}));let o=i.current,[l,c]=H.useState({action:o.action,location:o.location}),{v7_startTransition:A}=s||{},d=H.useCallback(h=>{A&&B_?B_(()=>c(h)):c(h)},[c,A]);return H.useLayoutEffect(()=>o.listen(d),[o,d]),H.useEffect(()=>ZT(s),[s]),H.createElement(eI,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const AI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uI=H.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:A,preventScrollReset:d,viewTransition:h}=t,f=rI(t,iI),{basename:u}=H.useContext(bc),p,g=!1;if(typeof A=="string"&&dI.test(A)&&(p=A,AI))try{let y=new URL(window.location.href),_=A.startsWith("//")?new URL(y.protocol+A):new URL(A),I=k2(_.pathname,u);_.origin===y.origin&&I!=null?A=I+_.search+_.hash:g=!0}catch{}let w=OT(A,{relative:a}),v=hI(A,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function x(y){s&&s(y),y.defaultPrevented||v(y)}return H.createElement("a",Ev({},f,{href:p||w,onClick:g||i?s:x,ref:r,target:c}))});var C_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(C_||(C_={}));var j_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(j_||(j_={}));function hI(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Lr(),A=wA(),d=Kj(e,{relative:o});return H.useCallback(h=>{if(nI(h,r)){h.preventDefault();let f=s!==void 0?s:mm(A)===mm(d);c(e,{replace:f,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[A,c,d,s,a,r,e,i,o,l])}function $j(e){let t=H.useRef(kv(e)),r=H.useRef(!1),s=wA(),a=H.useMemo(()=>aI(s.search,r.current?null:t.current),[s.search]),i=Lr(),o=H.useCallback((l,c)=>{const A=kv(typeof l=="function"?l(a):l);r.current=!0,i("?"+A,c)},[i,a]);return[a,o]}const fI={},E_=e=>{let t;const r=new Set,s=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const u=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(p=>p(t,u))}},a=()=>t,c={setState:s,getState:a,getInitialState:()=>A,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(fI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},A=t=e(s,a,c);return c},pI=e=>e?E_(e):E_;var Wj={exports:{}},Xj={},Jj={exports:{}},Yj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xd=H;function mI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gI=typeof Object.is=="function"?Object.is:mI,xI=Xd.useState,vI=Xd.useEffect,yI=Xd.useLayoutEffect,wI=Xd.useDebugValue;function bI(e,t){var r=t(),s=xI({inst:{value:r,getSnapshot:t}}),a=s[0].inst,i=s[1];return yI(function(){a.value=r,a.getSnapshot=t,bx(a)&&i({inst:a})},[e,r,t]),vI(function(){return bx(a)&&i({inst:a}),e(function(){bx(a)&&i({inst:a})})},[e]),wI(r),r}function bx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!gI(e,r)}catch{return!0}}function _I(e,t){return t()}var NI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_I:bI;Yj.useSyncExternalStore=Xd.useSyncExternalStore!==void 0?Xd.useSyncExternalStore:NI;Jj.exports=Yj;var BI=Jj.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg=H,CI=BI;function jI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var EI=typeof Object.is=="function"?Object.is:jI,kI=CI.useSyncExternalStore,SI=cg.useRef,FI=cg.useEffect,TI=cg.useMemo,II=cg.useDebugValue;Xj.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var i=SI(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=TI(function(){function c(u){if(!A){if(A=!0,d=u,u=s(u),a!==void 0&&o.hasValue){var p=o.value;if(a(p,u))return h=p}return h=u}if(p=h,EI(d,u))return p;var g=s(u);return a!==void 0&&a(p,g)?(d=u,p):(d=u,h=g)}var A=!1,d,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,s,a]);var l=kI(e,i[0],i[1]);return FI(function(){o.hasValue=!0,o.value=l},[l]),II(l),l};Wj.exports=Xj;var UI=Wj.exports;const LI=NB(UI),Zj={},{useDebugValue:DI}=Qy,{useSyncExternalStoreWithSelector:QI}=LI;let k_=!1;const OI=e=>e;function PI(e,t=OI,r){(Zj?"production":void 0)!=="production"&&r&&!k_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),k_=!0);const s=QI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return DI(s),s}const S_=e=>{(Zj?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?pI(e):e,r=(s,a)=>PI(t,s,a);return Object.assign(r,t),r},RI=e=>e?S_(e):S_;function Ag(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function MI(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{A(s.next(d))}catch(h){o(h)}}function c(d){try{A(s.throw(d))}catch(h){o(h)}}function A(d){d.done?i(d.value):a(d.value).then(l,c)}A((s=s.apply(e,t||[])).next())})}const HI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class I2 extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class KI extends I2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class F_ extends I2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class T_ extends I2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sv||(Sv={}));class zI{constructor(t,{headers:r={},customFetch:s,region:a=Sv.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=HI(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return MI(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:l,method:c,body:A,signal:d,timeout:h}=s;let f={},{region:u}=s;u||(u=this.region);const p=new URL(`${this.url}/${r}`);u&&u!=="any"&&(f["x-region"]=u,p.searchParams.set("forceFunctionRegion",u));let g;A&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&A instanceof Blob||A instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=A):typeof A=="string"?(f["Content-Type"]="text/plain",g=A):typeof FormData<"u"&&A instanceof FormData?g=A:(f["Content-Type"]="application/json",g=JSON.stringify(A)):A&&typeof A!="string"&&!(typeof Blob<"u"&&A instanceof Blob)&&!(A instanceof ArrayBuffer)&&!(typeof FormData<"u"&&A instanceof FormData)?g=JSON.stringify(A):g=A;let w=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(w=o.signal,d.addEventListener("abort",()=>o.abort())):w=o.signal);const v=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:g,signal:w}).catch(I=>{throw new KI(I)}),x=v.headers.get("x-relay-error");if(x&&x==="true")throw new F_(v);if(!v.ok)throw new T_(v);let y=((a=v.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield v.json():y==="application/octet-stream"||y==="application/pdf"?_=yield v.blob():y==="text/event-stream"?_=v:y==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof T_||l instanceof F_?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var VI=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},qI=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,A=i.status,d=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var u;const v=await i.text();v===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((u=r.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?l=v:l=JSON.parse(v))}const g=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&w&&w.length>1&&(c=parseInt(w[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,A=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var p;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(l=[],o=null,A=200,d="OK")}catch{i.status===404&&g===""?(A=204,d="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(p=o.details)===null||p===void 0)&&p.includes("0 rows"))&&(o=null,A=200,d="OK"),o&&r.shouldThrowOnError)throw new VI(o)}return{error:o,data:l,count:c,status:A,statusText:d}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var A,d,h,f;const p=(A=c==null?void 0:c.message)!==null&&A!==void 0?A:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${p}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var u;l=(u=i==null?void 0:i.stack)!==null&&u!==void 0?u:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},GI=class extends qI{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const I_=new RegExp("[,()]");var sd=class extends GI{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&I_.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&I_.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},$I=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:s}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(A=>/\s/.test(A)&&!i?"":(A==='"'&&(i=!i),A)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),s&&c.append("Prefer",`count=${s}`),new sd({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,A)=>c.concat(Object.keys(A)),[]);if(l.length>0){const c=[...new Set(l)].map(A=>`"${A}"`);i.searchParams.set("columns",c.join(","))}}return new sd({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),s&&c.append("Prefer",`count=${s}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const A=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(A.length>0){const d=[...new Set(A)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new sd({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const s="PATCH",{url:a,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new sd({method:s,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:s,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new sd({method:r,url:s,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},WI=class e3{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new $I(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e3(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let A;const d=u=>u!==null&&typeof u=="object"&&(!Array.isArray(u)||u.some(d)),h=s&&Object.values(r).some(d);h?(l="POST",A=r):s||a?(l=s?"HEAD":"GET",Object.entries(r).filter(([u,p])=>p!==void 0).map(([u,p])=>[u,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([u,p])=>{c.searchParams.append(u,p)})):(l="POST",A=r);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new sd({method:l,url:c,headers:f,schema:this.schemaName,body:A,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class XI{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const s=r.versions;if(s&&s.node){const a=s.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const JI="2.91.0",YI=`realtime-js/${JI}`,ZI="1.0.0",t3="2.0.0",U_=t3,Fv=1e4,eU=1e3,tU=100;var Rl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Rl||(Rl={}));var hn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(hn||(hn={}));var $i;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($i||($i={}));var Tv;(function(e){e.websocket="websocket"})(Tv||(Tv={}));var Kc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Kc||(Kc={}));class rU{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,s){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",A=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(A.length>255)throw new Error(`userEvent length ${A.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+A.length+h.length,u=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(u),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,c.length),p.setUint8(g++,l.length),p.setUint8(g++,o.length),p.setUint8(g++,A.length),p.setUint8(g++,h.length),p.setUint8(g++,r),Array.from(c,v=>p.setUint8(g++,v.charCodeAt(0))),Array.from(l,v=>p.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>p.setUint8(g++,v.charCodeAt(0))),Array.from(A,v=>p.setUint8(g++,v.charCodeAt(0))),Array.from(h,v=>p.setUint8(g++,v.charCodeAt(0)));var w=new Uint8Array(u.byteLength+s.byteLength);return w.set(new Uint8Array(u),0),w.set(new Uint8Array(s),u.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[a,i,o,l,c]=s;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const A=s.decode(t.slice(c,c+a));c=c+a;const d=s.decode(t.slice(c,c+i));c=c+i;const h=s.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),u=l===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,p={type:this.BROADCAST_EVENT,event:d,payload:u};return o>0&&(p.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:A,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class r3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var as;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(as||(as={}));const L_=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=sU(o,e,t,a),i),{}):{}},sU=(e,t,r,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?s3(i,o):Iv(o)},s3=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return oU(t,r)}switch(e){case as.bool:return nU(t);case as.float4:case as.float8:case as.int2:case as.int4:case as.int8:case as.numeric:case as.oid:return aU(t);case as.json:case as.jsonb:return iU(t);case as.timestamp:return lU(t);case as.abstime:case as.date:case as.daterange:case as.int4range:case as.int8range:case as.money:case as.reltime:case as.text:case as.time:case as.timestamptz:case as.timetz:case as.tsrange:case as.tstzrange:return Iv(t);default:return Iv(t)}},Iv=e=>e,nU=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},aU=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},iU=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},oU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>s3(t,l))}return e},lU=e=>typeof e=="string"?e.replace(" ","T"):e,n3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class _x{constructor(t,r,s={},a=Fv){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var D_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(D_||(D_={}));class b0{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=b0.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=b0.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=b0.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(A,d)=>{o[A]||(c[A]=d)}),this.map(o,(A,d)=>{const h=i[A];if(h){const f=d.map(w=>w.presence_ref),u=h.map(w=>w.presence_ref),p=d.filter(w=>u.indexOf(w.presence_ref)<0),g=h.filter(w=>f.indexOf(w.presence_ref)<0);p.length>0&&(l[A]=p),g.length>0&&(c[A]=g)}else l[A]=d}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var A;const d=(A=t[l])!==null&&A!==void 0?A:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(u=>u.presence_ref),f=d.filter(u=>h.indexOf(u.presence_ref)<0);t[l].unshift(...f)}s(l,d,c)}),this.map(o,(l,c)=>{let A=t[l];if(!A)return;const d=c.map(h=>h.presence_ref);A=A.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=A,a(l,A,c),A.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Q_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Q_||(Q_={}));var _0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_0||(_0={}));var Wo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wo||(Wo={}));class _d{constructor(t,r={config:{}},s){var a,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=hn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new _x(this,$i.join,this.params,this.timeout),this.rejoinTimer=new r3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=hn.errored,this.rejoinTimer.scheduleTimeout())}),this._on($i.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new b0(this),this.broadcastEndpointURL=n3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==hn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,A=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[_0.PRESENCE]&&this.bindings[_0.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:A,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(u=>t==null?void 0:t(Wo.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(Wo.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),u===void 0){t==null||t(Wo.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,v=[];for(let x=0;x<w;x++){const y=g[x],{filter:{event:_,schema:I,table:k,filter:T}}=y,S=u&&u[x];if(S&&S.event===_&&_d.isFilterValueEqual(S.schema,I)&&_d.isFilterValueEqual(S.table,k)&&_d.isFilterValueEqual(S.filter,T))v.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=hn.errored,t==null||t(Wo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Wo.SUBSCRIBED);return}}).receive("error",u=>{this.state=hn.errored,t==null||t(Wo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Wo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===hn.joined&&t===_0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const A=await l.json();c=A.error||A.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const A=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=A.body)===null||a===void 0?void 0:a.cancel()),A.ok?"ok":"error"}catch(A){return A.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const A=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),A.receive("ok",()=>i("ok")),A.receive("error",()=>i("error")),A.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=hn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($i.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new _x(this,$i.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=hn.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new _x(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>tU){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:A,join:d}=$i;if(s&&[l,c,A,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(u=>{var p,g,w;return((p=u.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(g=u.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(u=>u.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(u=>{var p,g,w,v,x,y,_,I;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in u){const k=u.id,T=(p=u.filter)===null||p===void 0?void 0:p.event;return k&&((g=r.ids)===null||g===void 0?void 0:g.includes(k))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))&&(!(!((v=u.filter)===null||v===void 0)&&v.table)||u.filter.table===((x=r.data)===null||x===void 0?void 0:x.table))}else{const k=(_=(y=u==null?void 0:u.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return k==="*"||k===((I=r==null?void 0:r.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return u.type.toLocaleLowerCase()===o}).map(u=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:g,table:w,commit_timestamp:v,type:x,errors:y}=p;f=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:y}),this._getPayloadRecords(p))}u.callback(f,s)})}_isClosed(){return this.state===hn.closed}_isJoined(){return this.state===hn.joined}_isJoining(){return this.state===hn.joining}_isLeaving(){return this.state===hn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&_d.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($i.close,{},t)}_onError(t){this._on($i.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=L_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=L_(t.columns,t.old_record)),r}}const Nx=()=>{},Tf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cU=[1e3,2e3,5e3,1e4],AU=1e4,dU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uU{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fv,this.transport=null,this.heartbeatIntervalMs=Tf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Nx,this.ref=0,this.reconnectTimer=null,this.vsn=U_,this.logger=Nx,this.conn=null,this.sendBuffer=[],this.serializer=new rU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Tv.websocket}`,this.httpEndpoint=n3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=XI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Rl.connecting:return Kc.Connecting;case Rl.open:return Kc.Open;case Rl.closing:return Kc.Closing;default:return Kc.Closed}}isConnected(){return this.connectionState()===Kc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new _d(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(eU,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Tf.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const A=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",A)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${a} ${l}`.trim(),i),this.channels.filter(A=>A._isMember(s)).forEach(A=>A._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Rl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Rl.open||this.conn.readyState===Rl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($i.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([dU],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:YI};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push($i.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new r3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,i,o,l,c,A,d,h,f,u;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Fv,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Tf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Nx,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:U_,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(A=t==null?void 0:t.reconnectAfterMs)!==null&&A!==void 0?A:p=>cU[p-1]||AU,this.vsn){case ZI:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(p,g)=>g(JSON.stringify(p)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(p,g)=>g(JSON.parse(p));break;case t3:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ah=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hU(e,t,r){const s=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function fU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function pU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const l=hU(e.baseUrl,s,a),c=await fU(e.auth),A=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await A.text(),h=(A.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!A.ok){const u=h?f:void 0,p=u==null?void 0:u.error;throw new ah((p==null?void 0:p.message)??`Request failed with status ${A.status}`,{status:A.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:u})}return{status:A.status,headers:A.headers,data:f}}}}function If(e){return e.join("")}var mU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:If(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${If(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${If(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${If(e.namespace)}`}),!0}catch(t){if(t instanceof ah&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof ah&&r.status===409)return;throw r}}};function MA(e){return e.join("")}var gU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${MA(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${MA(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${MA(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${MA(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${MA(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${MA(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof ah&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof ah&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},xU=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=pU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new mU(this.client,t),this.tableOps=new gU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},dg=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function bs(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var vU=class extends dg{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Uv=class extends dg{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const U2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),yU=()=>Response,Lv=e=>{if(Array.isArray(e))return e.map(r=>Lv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Lv(s)}),t},wU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},bU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ih(e){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ih(e)}function _U(e,t){if(ih(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ih(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NU(e){var t=_U(e,"string");return ih(t)=="symbol"?t:t+""}function BU(e,t,r){return(t=NU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O_(Object(r),!0).forEach(function(s){BU(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O_(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const Bx=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},CU=async(e,t,r)=>{e instanceof await yU()&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new vU(Bx(s),a,i))}).catch(s=>{t(new Uv(Bx(s),s))}):t(new Uv(Bx(e),e))},jU=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(wU(s)?(a.headers=Jt({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Jt(Jt({},a),r))};async function Ih(e,t,r,s,a,i){return new Promise((o,l)=>{e(r,jU(t,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>CU(c,l,s))})}async function oh(e,t,r,s){return Ih(e,"GET",t,r,s)}async function qi(e,t,r,s,a){return Ih(e,"POST",t,s,a,r)}async function Dv(e,t,r,s,a){return Ih(e,"PUT",t,s,a,r)}async function EU(e,t,r,s){return Ih(e,"HEAD",t,Jt(Jt({},r),{},{noResolveJson:!0}),s)}async function L2(e,t,r,s,a){return Ih(e,"DELETE",t,s,a,r)}var kU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(bs(t))return{data:null,error:t};throw t}}};let a3;a3=Symbol.toStringTag;var SU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[a3]="BlobDownloadBuilder",this.promise=null}asStream(){return new kU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(bs(t))return{data:null,error:t};throw t}}};const FU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},P_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var TU=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=U2(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){var a=this;try{let i;const o=Jt(Jt({},P_),s);let l=Jt(Jt({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=Jt(Jt({},l),s.headers));const A=a._removeEmptyFolders(t),d=a._getFinalPath(A),h=await(e=="PUT"?Dv:qi)(a.fetch,`${a.url}/object/${d}`,i,Jt({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:A,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(bs(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const A=Jt({upsert:P_.upsert},s),d=Jt(Jt({},a.headers),{"x-upsert":String(A.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",A.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",A.cacheControl)):(c=r,d["cache-control"]=`max-age=${A.cacheControl}`,d["content-type"]=A.contentType),{data:{path:i,fullPath:(await Dv(a.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(bs(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let s=r._getFinalPath(e);const a=Jt({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await qi(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new dg("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bs(s))return{data:null,error:s};throw s}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;try{return{data:await qi(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(bs(a))return{data:null,error:a};throw a}}async copy(e,t,r){var s=this;try{return{data:{path:(await qi(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(bs(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,r){var s=this;try{let a=s._getFinalPath(e),i=await qi(s.fetch,`${s.url}/object/sign/${a}`,Jt({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(bs(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,r){var s=this;try{const a=await qi(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Jt(Jt({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(bs(a))return{data:null,error:a};throw a}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"",i=this._getFinalPath(e),o=()=>oh(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new SU(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Lv(await oh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(bs(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await EU(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(bs(s)&&s instanceof Uv){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&s.push(o);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await L2(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(bs(r))return{data:null,error:r};throw r}}async list(e,t,r){var s=this;try{const a=Jt(Jt(Jt({},FU),t),{},{prefix:e||""});return{data:await qi(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},r),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(bs(a))return{data:null,error:a};throw a}}async listV2(e,t){var r=this;try{const s=Jt({},e);return{data:await qi(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bs(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const i3="2.91.0",o3={"X-Client-Info":`storage-js/${i3}`};var IU=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Jt(Jt({},o3),t),this.fetch=U2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await oh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(bs(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await oh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(bs(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await qi(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bs(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var r=this;try{return{data:await Dv(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(bs(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await qi(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(bs(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await L2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(bs(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},UU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Jt(Jt({},o3),t),this.fetch=U2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await qi(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(bs(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await oh(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(bs(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await L2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(bs(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!bU(e))throw new dg("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new xU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(s)throw c;return{data:null,error:c}}}}})}};const D2={"X-Client-Info":`storage-js/${i3}`,"Content-Type":"application/json"};var l3=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ya(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Cx=class extends l3{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},LU=class extends l3{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Q2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),DU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},R_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),QU=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";t(new Cx(R_(i),s,o))}).catch(()=>{const i=s+"";t(new Cx(a.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";t(new Cx(a.statusText||`HTTP ${s} error`,s,i))}}else t(new LU(R_(e),e))},OU=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(DU(s)?(a.headers=Jt({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,Jt(Jt({},a),r)):a};async function PU(e,t,r,s,a,i){return new Promise((o,l)=>{e(r,OU(t,s,a,i)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const A=c.headers.get("content-type");return!A||!A.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>QU(c,l,s))})}async function Za(e,t,r,s,a){return PU(e,"POST",t,s,a,r)}var RU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Jt(Jt({},D2),t),this.fetch=Q2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Za(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Za(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ya(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await Za(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Za(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ya(s))return{data:null,error:s};throw s}}},MU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Jt(Jt({},D2),t),this.fetch=Q2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Za(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Za(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Za(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Za(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Za(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}},HU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Jt(Jt({},D2),t),this.fetch=Q2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Za(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Za(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await Za(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Za(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ya(r))return{data:null,error:r};throw r}}},KU=class extends HU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new zU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},zU=class extends RU{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new VU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},VU=class extends MU{constructor(e,t,r,s,a){super(e,t,a),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},qU=class extends IU{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new TU(this.url,this.headers,e,this.fetch)}get vectors(){return new KU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new UU(this.url+"/iceberg",this.headers,this.fetch)}};const c3="2.91.0",nd=30*1e3,Qv=3,jx=Qv*nd,GU="http://localhost:9999",$U="supabase.auth.token",WU={"X-Client-Info":`gotrue-js/${c3}`},Ov="X-Supabase-Api-Version",A3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JU=10*60*1e3;class lh extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Vt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class YU extends lh{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function ZU(e){return Vt(e)&&e.name==="AuthApiError"}class zc extends lh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class pl extends lh{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class Ga extends pl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eL(e){return Vt(e)&&e.name==="AuthSessionMissingError"}class HA extends pl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Uf extends pl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Lf extends pl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tL(e){return Vt(e)&&e.name==="AuthImplicitGrantRedirectError"}class M_ extends pl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rL extends pl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Pv extends pl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ex(e){return Vt(e)&&e.name==="AuthRetryableFetchError"}class H_ extends pl{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Rv extends pl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const gm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),K_=` 	
\r=`.split(""),sL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<K_.length;t+=1)e[K_[t].charCodeAt(0)]=-2;for(let t=0;t<gm.length;t+=1)e[gm[t].charCodeAt(0)]=t;return e})();function z_(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(gm[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(gm[s]),t.queuedBits-=6}}function d3(e,t,r){const s=sL[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function V_(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{iL(o,s,r)};for(let o=0;o<e.length;o+=1)d3(e.charCodeAt(o),a,i);return t.join("")}function nL(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function aL(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}nL(s,t)}}function iL(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Id(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)d3(e.charCodeAt(a),r,s);return new Uint8Array(t)}function oL(e){const t=[];return aL(e,r=>t.push(r)),new Uint8Array(t)}function Jc(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>z_(a,r,s)),z_(null,r,s),t.join("")}function lL(e){return Math.round(Date.now()/1e3)+e}function cL(){return Symbol("auth-callback")}const In=()=>typeof window<"u"&&typeof document<"u",Dc={tested:!1,writable:!1},u3=()=>{if(!In())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Dc.tested)return Dc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Dc.tested=!0,Dc.writable=!0}catch{Dc.tested=!0,Dc.writable=!1}return Dc.writable};function AL(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const h3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),dL=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ad=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Qc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Tn=async(e,t)=>{await e.removeItem(t)};class ug{constructor(){this.promise=new ug.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ug.promiseConstructor=Promise;function kx(e){const t=e.split(".");if(t.length!==3)throw new Rv("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!XU.test(t[s]))throw new Rv("JWT not in base64url format");return{header:JSON.parse(V_(t[0])),payload:JSON.parse(V_(t[1])),signature:Id(t[2]),raw:{header:t[0],payload:t[1]}}}async function uL(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hL(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function fL(e){return("0"+e.toString(16)).substr(-2)}function pL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,fL).join("")}async function mL(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function gL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await mL(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function KA(e,t,r=!1){const s=pL();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await ad(e,`${t}-code-verifier`,a);const i=await gL(s);return[i,s===i?"plain":"s256"]}const xL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vL(e){const t=e.headers.get(Ov);if(!t||!t.match(xL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function yL(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function wL(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zA(e){if(!bL.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sx(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _L(e,t){return new Proxy(e,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,a)}})}function q_(e){return JSON.parse(JSON.stringify(e))}const Mc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),NL=[502,503,504];async function G_(e){var t;if(!dL(e))throw new Pv(Mc(e),0);if(NL.includes(e.status))throw new Pv(Mc(e),e.status);let r;try{r=await e.json()}catch(i){throw new zc(Mc(i),i)}let s;const a=vL(e);if(a&&a.getTime()>=A3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new H_(Mc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Ga}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new H_(Mc(r),e.status,r.weak_password.reasons);throw new YU(Mc(r),e.status||500,s)}const BL=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function Xt(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[Ov]||(i[Ov]=A3["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await CL(e,t,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function CL(e,t,r,s,a,i){const o=BL(t,s,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Pv(Mc(c),0)}if(l.ok||await G_(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await G_(c)}}function Ki(e){var t;let r=null;kL(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=lL(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function $_(e){const t=Ki(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function jL(e){return{data:e,error:null}}function EL(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=Ag(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function W_(e){return e}function kL(e){return e.access_token&&e.refresh_token&&e.expires_in}const Fx=["global","local","others"];class SL{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=h3(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Fx[0]){if(Fx.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fx.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:zl})}catch(s){if(Vt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Ag(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:EL,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Vt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zl})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,o,l,c;try{const A={nextPage:null,lastPage:0,total:0},d=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:W_});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,u=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return u.length>0&&(u.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);A[`${w}Page`]=g}),A.total=parseInt(f)),{data:Object.assign(Object.assign({},h),A),error:null}}catch(A){if(Vt(A))return{data:{users:[]},error:A};throw A}}async getUserById(t){zA(t);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zl})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zA(t);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:zl})}catch(s){if(Vt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){zA(t);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:zl})}catch(s){if(Vt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){zA(t.userId);try{const{data:r,error:s}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Vt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zA(t.userId),zA(t.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,i,o,l,c;try{const A={nextPage:null,lastPage:0,total:0},d=await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:W_});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,u=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return u.length>0&&(u.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);A[`${w}Page`]=g}),A.total=parseInt(f)),{data:Object.assign(Object.assign({},h),A),error:null}}catch(A){if(Vt(A))return{data:{clients:[]},error:A};throw A}}async _createOAuthClient(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Vt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Vt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Xt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Vt(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Vt(r))return{data:null,error:r};throw r}}}function X_(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const VA={debug:!!(globalThis&&u3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class f3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class FL extends f3{}async function TL(e,t,r){VA.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),VA.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){VA.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{VA.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw VA.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new FL(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(VA.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function IL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function p3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function UL(e){return parseInt(e,16)}function LL(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function DL(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:A,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const u=p3(e.address),p=d?`${d}://${s}`:s,g=e.statement?`${e.statement}
`:"",w=`${p} wants you to sign in with your Ethereum account:
${u}

${g}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(v+=`
Expiration Time: ${a.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),A){let x=`
Resources:`;for(const y of A){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);x+=`
- ${y}`}v+=x}return`${w}
${v}`}class en extends Error{constructor({message:t,code:r,cause:s,name:a}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class xm extends en{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function QL({error:e,options:t}){var r,s,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new en({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new en({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new en({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new en({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new en({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new en({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new en({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new en({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(m3(o)){if(i.rp.id!==o)return new en({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new en({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new en({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new en({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new en({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function OL({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new en({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new en({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(m3(s)){if(r.rpId!==s)return new en({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new en({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new en({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new en({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class PL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const RL=new PL;function ML(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=Ag(e,["challenge","user","excludeCredentials"]),i=Id(t).buffer,o=Object.assign(Object.assign({},r),{id:Id(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const A=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},A),{id:Id(A.id).buffer,type:A.type||"public-key",transports:A.transports})}}return l}function HL(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=Ag(e,["challenge","allowCredentials"]),a=Id(t).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Id(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function KL(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Jc(new Uint8Array(e.response.attestationObject)),clientDataJSON:Jc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function zL(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Jc(new Uint8Array(a.authenticatorData)),clientDataJSON:Jc(new Uint8Array(a.clientDataJSON)),signature:Jc(new Uint8Array(a.signature)),userHandle:a.userHandle?Jc(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function m3(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function J_(){var e,t;return!!(In()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function VL(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xm("Browser returned unexpected credential type",t)}:{data:null,error:new xm("Empty credential response",t)}}catch(t){return{data:null,error:QL({error:t,options:e})}}}async function qL(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xm("Browser returned unexpected credential type",t)}:{data:null,error:new xm("Empty credential response",t)}}catch(t){return{data:null,error:OL({error:t,options:e})}}}const GL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},$L={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function vm(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(t(o)){const l=s[i];t(l)?s[i]=vm(l,o):s[i]=vm(o)}else s[i]=o}return s}function WL(e,t){return vm(GL,e,t||{})}function XL(e,t){return vm($L,e,t||{})}class JL{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??RL.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:A}=o.webauthn.credential_options.publicKey;A.name||(A.name=`${A.id}:${s}`),A.displayName||(A.displayName=A.name)}switch(o.webauthn.type){case"create":{const A=WL(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await VL({publicKey:A,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const A=XL(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await qL(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:A,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return Vt(o)?{data:null,error:o}:{data:null,error:new zc("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new lh("rpId is required for WebAuthn authentication")};try{if(!J_())return{data:null,error:new zc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return Vt(o)?{data:null,error:o}:{data:null,error:new zc("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new lh("rpId is required for WebAuthn registration")};try{if(!J_())return{data:null,error:new zc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:A}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:A}}catch(o){return Vt(o)?{data:null,error:o}:{data:null,error:new zc("Unexpected error in register",o)}}}}IL();const YL={url:GU,storageKey:$U,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Y_(e,t,r){return await r()}const qA={};class ch{get jwks(){var t,r;return(r=(t=qA[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){qA[this.storageKey]=Object.assign(Object.assign({},qA[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=qA[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qA[this.storageKey]=Object.assign(Object.assign({},qA[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},YL),t);if(this.storageKey=i.storageKey,this.instanceID=(r=ch.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ch.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&In()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new SL({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=h3(i.fetch),this.lock=i.lock||Y_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&In()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=TL:this.lock=Y_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new JL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:u3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=X_(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=X_(this.memoryStorage)),In()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${c3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(In()&&(r=AL(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),In()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),tL(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Vt(r)?this._returnResult({error:r}):this._returnResult({error:new zc("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ki}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,A=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:A,session:c},error:null})}catch(i){if(Vt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,a;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let u=null,p=null;this.flowType==="pkce"&&([u,p]=await KA(this.storage,this.storageKey)),i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:u,code_challenge_method:p},xform:Ki})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ki})}else throw new Uf("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Tn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,A=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:A,session:c},error:null})}catch(i){if(await Tn(this.storage,`${this.storageKey}-code-verifier`),Vt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$_})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$_})}else throw new Uf("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new HA;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,a,i,o,l,c,A,d,h,f;let u,p;if("message"in t)u=t.message,p=t.signature;else{const{chain:g,wallet:w,statement:v,options:x}=t;let y;if(In())if(typeof w=="object")y=w;else{const B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")y=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=w}const _=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),I=await y.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=p3(I[0]);let T=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!T){const B=await y.request({method:"eth_chainId"});T=UL(B)}const S={domain:_.host,address:k,statement:v,uri:_.href,version:"1",chainId:T,nonce:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(A=x==null?void 0:x.signInWithEthereum)===null||A===void 0?void 0:A.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};u=DL(S),p=await y.request({method:"personal_sign",params:[LL(u),k]})}try{const{data:g,error:w}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:u,signature:p},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ki});if(w)throw w;if(!g||!g.session||!g.user){const v=new HA;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(Vt(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,s,a,i,o,l,c,A,d,h,f,u;let p,g;if("message"in t)p=t.message,g=t.signature;else{const{chain:w,wallet:v,statement:x,options:y}=t;let _;if(In())if(typeof v=="object")_=v;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const I=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),x?{statement:x}:null));let T;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")T=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)T=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)p=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),g=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${I.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(a=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((A=y==null?void 0:y.signInWithSolana)===null||A===void 0)&&A.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:w,error:v}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Jc(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(u=t.options)===null||u===void 0?void 0:u.captchaToken}}:null),xform:Ki});if(v)throw v;if(!w||!w.session||!w.user){const x=new HA;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:v})}catch(w){if(Vt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await Qc(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new rL;const{data:i,error:o}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Ki});if(await Tn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new HA;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Tn(this.storage,`${this.storageKey}-code-verifier`),Vt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=t,l=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ki}),{data:c,error:A}=l;if(A)return this._returnResult({data:{user:null,session:null},error:A});if(!c||!c.session||!c.user){const d=new HA;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:A})}catch(r){if(Vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let A=null,d=null;this.flowType==="pkce"&&([A,d]=await KA(this.storage,this.storageKey));const{error:h}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:A,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:A,error:d}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:A==null?void 0:A.message_id},error:d})}throw new Uf("You must provide either an email or phone number.")}catch(l){if(await Tn(this.storage,`${this.storageKey}-code-verifier`),Vt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,s;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ki});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,A=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:A,session:c},error:null})}catch(a){if(Vt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,s,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await KA(this.storage,this.storageKey));const A=await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:jL});return!((i=A.data)===null||i===void 0)&&i.url&&In()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(A.data.url),this._returnResult(A)}catch(l){if(await Tn(this.storage,`${this.storageKey}-code-verifier`),Vt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Ga;const{error:a}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Vt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:o}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Uf("You must provide either an email or phone number and a type")}catch(r){if(Vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Qc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<jx:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await Qc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Sx()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=_L(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zl}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ga}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:zl})})}catch(r){if(Vt(r))return eL(r)&&(await this._removeSession(),await Tn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Ga;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await KA(this.storage,this.storageKey));const{data:A,error:d}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:zl});if(d)throw d;return o.user=A.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await Tn(this.storage,`${this.storageKey}-code-verifier`),Vt(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ga;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=kx(t.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Vt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Ga;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!In())throw new Lf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Lf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new M_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new M_("No code detected.");const{data:x,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:A}=t;if(!i||!l||!o||!A)throw new Lf("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const u=f-d;u*1e3<=nd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${u}s, should have been closer to ${h}s`);const p=f-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,d);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:A,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(s){if(Vt(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Qc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(ZU(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Tn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=cL(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await KA(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Tn(this.storage,`${this.storageKey}-code-verifier`),Vt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,A,d;const{data:h,error:f}=i;if(f)throw f;const u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",u,{headers:this.headers,jwt:(d=(A=h.session)===null||A===void 0?void 0:A.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return In()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Vt(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:A,nonce:d}=t,h=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:A,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ki}),{data:f,error:u}=h;return u?this._returnResult({data:{user:null,session:null},error:u}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new HA}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:u}))}catch(a){if(await Tn(this.storage,`${this.storageKey}-code-verifier`),Vt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await hL(async a=>(a>0&&await uL(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ki})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Ex(i)&&Date.now()+o-s<nd})}catch(s){if(this._debug(r,"error",s),Vt(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),In()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Qc(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Qc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await ad(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Sx()}else if(a&&!a.user&&!a.user){const o=await Qc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Tn(this.storage,this.storageKey+"-user"),await ad(this.storage,this.storageKey,a)):a.user=Sx()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<jx;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${jx}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Ex(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Ga;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ug;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ga;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Vt(i)){const o={data:null,error:i};return Ex(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Tn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ad(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=q_(a);await ad(this.storage,this.storageKey,i)}else{const a=q_(r);await ad(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Tn(this.storage,this.storageKey),await Tn(this.storage,this.storageKey+"-code-verifier"),await Tn(this.storage,this.storageKey+"-user"),this.userStorage&&await Tn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&In()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),nd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/nd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${nd}ms, refresh threshold is ${Qv} ticks`),a<=Qv&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof f3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!In()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await KA(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Xt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:A}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return A?this._returnResult({data:null,error:A}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?KL(t.webauthn.credential_response):zL(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ML(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:HL(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=kx(s.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const A=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:A},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await Xt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ga})})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ga});const o=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&In()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Vt(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ga});const o=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&In()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Vt(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await Xt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ga})})}catch(t){if(Vt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?(await Xt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ga})})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+JU>a)return s;const{data:i,error:o}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:u,error:p}=await this.getSession();if(p||!u.session)return this._returnResult({data:null,error:p});s=u.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=kx(s);r!=null&&r.allowExpired||yL(i.exp);const A=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!A){const{error:u}=await this.getUser(s);if(u)throw u;return{data:{claims:i,header:a,signature:o},error:null}}const d=wL(a.alg),h=await crypto.subtle.importKey("jwk",A,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,oL(`${l}.${c}`)))throw new Rv("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(Vt(s))return this._returnResult({data:null,error:s});throw s}}}ch.nextInstanceID={};const ZL=ch,eD="2.91.0";let t0="";typeof Deno<"u"?t0="deno":typeof document<"u"?t0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?t0="react-native":t0="node";const tD={"X-Client-Info":`supabase-js-${t0}/${eD}`},rD={headers:tD},sD={schema:"public"},nD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aD={};function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}function iD(e,t){if(Ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ah(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oD(e){var t=iD(e,"string");return Ah(t)=="symbol"?t:t+""}function lD(e,t,r){return(t=oD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z_(Object(r),!0).forEach(function(s){lD(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z_(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const cD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),AD=()=>Headers,dD=(e,t,r)=>{const s=cD(r),a=AD();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let A=new a(o==null?void 0:o.headers);return A.has("apikey")||A.set("apikey",e),A.has("Authorization")||A.set("Authorization",`Bearer ${c}`),s(i,Fs(Fs({},o),{},{headers:A}))}};function uD(e){return e.endsWith("/")?e:e+"/"}function hD(e,t){var r,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:A,realtime:d,global:h}=t,f={db:Fs(Fs({},c),a),auth:Fs(Fs({},A),i),realtime:Fs(Fs({},d),o),storage:{},global:Fs(Fs(Fs({},h),l),{},{headers:Fs(Fs({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function fD(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uD(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var pD=class extends ZL{constructor(e){super(e)}},mD=class{constructor(e,t,r){var s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=fD(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:sD,realtime:aD,auth:Fs(Fs({},nD),{},{storageKey:o}),global:rD},c=hD(r??{},l);if(this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var A;this.auth=this._initSupabaseAuthClient((A=c.auth)!==null&&A!==void 0?A:{},this.headers,c.global.fetch)}this.fetch=dD(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Fs({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new WI(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new qU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new zI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:A},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pD({url:this.authUrl.href,headers:Fs(Fs({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:A,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(u=>u.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new uU(this.realtimeUrl.href,Fs(Fs({},e),{},{params:Fs(Fs({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const gD=(e,t,r)=>new mD(e,t,r);function xD(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}xD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const vD="https://pvztozmqrbjxsyqwxmex.supabase.co",yD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB2enRvem1xcmJqeHN5cXd4bWV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MTc5NTksImV4cCI6MjA4NDQ5Mzk1OX0.APCmDFTCTP_Cj1lLdOW1_DSPGD0ofhrfI-3EBF7V5Go",we=gD(vD,yD),dh=RI(e=>({user:null,loading:!0,error:null,login:async(t,r)=>{e({loading:!0,error:null});try{let s=String(t||"").trim();if(s&&!s.includes("@")){const{data:o,error:l}=await we.from("user_accounts").select("email").eq("username",s).limit(1).maybeSingle();!l&&(o!=null&&o.email)&&(s=o.email)}const{data:a,error:i}=await we.auth.signInWithPassword({email:s,password:r});if(i)throw i;e({user:a.user,loading:!1})}catch(s){throw e({error:s.message,loading:!1}),s}},logout:async()=>{e({loading:!0});try{await we.auth.signOut(),e({user:null,loading:!1})}catch(t){e({error:t.message,loading:!1})}},checkAuth:async()=>{e({loading:!0});try{const{data:{session:t}}=await we.auth.getSession();e({user:(t==null?void 0:t.user)||null,loading:!1})}catch(t){e({error:t.message,loading:!1})}}}));/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),qt=(e,t)=>{const r=H.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...A},d)=>H.createElement("svg",{ref:d,...wD,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${bD(e)}`,l].join(" "),...A},[...t.map(([h,f])=>H.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=qt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=qt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=qt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=qt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=qt("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=qt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=qt("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=qt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=qt("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=qt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=qt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=qt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=qt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=qt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=qt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=qt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=qt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=qt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=qt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=qt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=qt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=qt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=qt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=qt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=qt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=qt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=qt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=qt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=qt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=qt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=qt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=qt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=qt("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=qt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=qt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=qt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=qt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=qt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=qt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=qt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=qt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=qt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=qt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=qt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=qt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=qt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=qt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=qt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=qt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=qt("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=qt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=qt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=qt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=qt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=qt("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=qt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=qt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=qt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function OD(){const[e,t]=H.useState(""),[r,s]=H.useState(""),[a,i]=H.useState(""),o=Lr(),l="admin",c="admin123",A=async d=>{d.preventDefault(),i("");const h=String(e||"").trim().toLowerCase(),f=String(r||"");if(!h||!f){i("    ");return}if(h===l){if(f!==c){i("   ");return}dh.setState({user:{id:"virtual-admin",email:"admin@local",user_metadata:{role:"admin",name:"admin"}},loading:!1}),o("/");return}try{const{data:u,error:p}=await we.rpc("virtual_login",{p_name:h,p_password:f});if(p)throw p;const g=Array.isArray(u)?u[0]:null;if(!g){i("     ");return}const w=String((g==null?void 0:g.role)||"").toLowerCase(),v=String((g==null?void 0:g.name)||h),x=String((g==null?void 0:g.id)||"");if(dh.setState({user:{id:x,email:`${v}@local`,user_metadata:{role:w,name:v}},loading:!1}),w==="commercial"){localStorage.setItem("commercial_id",x),localStorage.setItem("commercial_name",v),localStorage.setItem("commercial_role","commercial"),o("/commercial/dashboard");return}o("/pos")}catch(u){i((u==null?void 0:u.message)||"  ")}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 flex items-center justify-center p-4",dir:"rtl",children:n.jsx("div",{className:"w-full max-w-2xl",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 mb-6",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full mb-4",children:n.jsx(v3,{className:"text-white",size:40})}),n.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Ba9alino"}),n.jsx("p",{className:"text-gray-500",children:"  ( +  )"})]}),n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),n.jsx("input",{type:"text",value:e,onChange:d=>t(d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 focus:border-transparent outline-none transition",placeholder:" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"password",value:r,onChange:d=>s(d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 focus:border-transparent outline-none transition",placeholder:"",style:{direction:"ltr",textAlign:"right"}})]}),a&&n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:a}),n.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 rounded-lg hover:shadow-lg transition",children:" "})]})]})})})}function PD(){const[e,t]=H.useState({todaySales:0,todayProfit:0,totalCredits:0,lowStockProducts:0,totalStock:0,todaySalesCount:0,supplierDebts:0,monthlyExpenses:0,activeEmployees:0,chequesCount:0,chequesTotal:0,overdueClients:[],chequesList:[],supplierPaymentReminders:[]}),[r,s]=H.useState(!0);H.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("payment-updated",o),window.addEventListener("order-payment-updated",o),()=>{window.removeEventListener("payment-updated",o),window.removeEventListener("order-payment-updated",o)}},[]);const a=async()=>{s(!0);try{const o=new Date,l=o.toISOString().split("T")[0],c=new Date(o.getFullYear(),o.getMonth(),1).toISOString().split("T")[0],A=new Date(o.getTime()+864e5).toISOString().split("T")[0];console.log("Dashboard fetch - Today:",l,"Month start:",c);const{data:d,error:h}=await we.from("invoices").select("total_amount").gte("created_at",l).lt("created_at",A);h?console.error(" Invoices error:",h):console.log(" Invoices fetched:",d==null?void 0:d.length);const f=(d==null?void 0:d.reduce((z,Be)=>z+(Be.total_amount||0),0))||0,u=(d==null?void 0:d.length)||0,p=f*.3,{data:g,error:w}=await we.from("invoices").select("total_amount, paid_amount, status");w?console.error(" All invoices error:",w):console.log(" All invoices fetched:",g==null?void 0:g.length);const v=(g==null?void 0:g.reduce((z,Be)=>Be.status==="sent"||Be.status==="partial"?z+((Be.total_amount||0)-(Be.paid_amount||0)):z,0))||0,{data:x,error:y}=await we.from("products").select("id, stock");y?console.error(" Products error:",y):console.log(" Products fetched:",x==null?void 0:x.length);const _=(x==null?void 0:x.filter(z=>(z.stock||0)<10).length)||0,I=(x==null?void 0:x.reduce((z,Be)=>z+(Be.stock||0),0))||0,{data:k,error:T}=await we.from("purchases").select("total_amount");T?console.error(" Purchases error:",T):console.log(" Purchases fetched:",k==null?void 0:k.length);const{data:S,error:B}=await we.from("supplier_payments").select("amount");B?console.error(" Payments error:",B):console.log(" Payments fetched:",S==null?void 0:S.length);const R=(k==null?void 0:k.reduce((z,Be)=>z+(Be.total_amount||0),0))||0,U=(S==null?void 0:S.reduce((z,Be)=>z+(Be.amount||0),0))||0,L=Math.max(0,R-U),{data:D,error:Q}=await we.from("expenses").select("amount").gte("date",c).lte("date",l);Q?console.error(" Expenses error:",Q):console.log(" Expenses fetched:",D==null?void 0:D.length);const K=(D==null?void 0:D.reduce((z,Be)=>z+(Be.amount||0),0))||0,{data:P,error:te}=await we.from("employees").select("id").eq("status","active");te?console.error(" Employees error:",te):console.log(" Employees fetched:",P==null?void 0:P.length);const J=(P==null?void 0:P.length)||0,{data:V,error:ie}=await we.from("purchases").select(`
          purchase_number,
          total_amount,
          payment_type,
          check_number,
          bank_name,
          check_deposit_date,
          credit_due_date,
          supplier:suppliers(name_ar)
        `).in("payment_type",["check","credit"]).order("purchase_date",{ascending:!1}).limit(200);ie&&console.error(" Purchases reminders error:",ie);const Y=(V||[]).map(z=>{var ne;const Be=z.payment_type==="check"?z.check_deposit_date:z.credit_due_date;if(!Be)return null;const Ve=Math.floor((new Date(l).getTime()-new Date(Be).getTime())/(1e3*60*60*24));return Ve<0?null:{purchaseNumber:z.purchase_number,supplierName:((ne=z.supplier)==null?void 0:ne.name_ar)||" ",paymentType:z.payment_type,amount:Number(z.total_amount||0),dueDate:Be,checkNumber:z.check_number||void 0,bankName:z.bank_name||void 0,daysOverdue:Ve}}).filter(Boolean).sort((z,Be)=>Be.daysOverdue-z.daysOverdue||Be.amount-z.amount).slice(0,8),{data:N,error:C}=await we.from("invoices").select(`
          id,
          invoice_number,
          created_at,
          total_amount,
          paid_amount,
          payment_method,
          bank_name,
          bank_name_ar,
          check_number,
          check_date,
          check_deposit_date,
          client:clients(company_name_ar),
          payments(payment_method)
        `).order("created_at",{ascending:!1}).limit(200);C&&console.error(" Cheque invoices error:",C);const E=(N||[]).filter(z=>{var Ve,ne;const Be=z.payment_method||((ne=(Ve=z.payments)==null?void 0:Ve[0])==null?void 0:ne.payment_method);return Be==="check"||Be==="cheque"}),O=E.length,q=E.reduce((z,Be)=>z+Number(Be.total_amount||0),0),{data:se,error:ye}=await we.from("invoices").select(`
          total_amount,
          paid_amount,
          created_at,
          client:clients(id, company_name_ar)
        `).in("status",["partial","credit"]).lt("created_at",new Date(Date.now()-30*24*60*60*1e3).toISOString());ye?console.error(" Overdue invoices error:",ye):console.log(" Overdue invoices fetched:",se==null?void 0:se.length);const re=new Map;se==null||se.forEach(z=>{const Be=z.client,Ve=Be==null?void 0:Be.id,ne=(Be==null?void 0:Be.company_name_ar)||"  ",Me=(z.total_amount||0)-(z.paid_amount||0);if(Me>0&&Ve){const Re=Math.floor((Date.now()-new Date(z.created_at).getTime())/864e5);if(re.has(Ve)){const Ye=re.get(Ve);Ye.debt+=Me,Ye.daysOverdue=Math.max(Ye.daysOverdue,Re)}else re.set(Ve,{name:ne,debt:Me,daysOverdue:Re})}});const de=Array.from(re.values()).sort((z,Be)=>Be.debt-z.debt).slice(0,5),Ne=E.slice(0,8).map(z=>{var Re;const Be=((Re=z==null?void 0:z.client)==null?void 0:Re.company_name_ar)||"  ",Ve=Number((z==null?void 0:z.total_amount)??0),ne=Number((z==null?void 0:z.paid_amount)??0),Me=Math.max(0,Ve-ne);return{invoiceNumber:(z==null?void 0:z.invoice_number)||" ",clientName:Be,checkNumber:(z==null?void 0:z.check_number)||" ",checkBank:(z==null?void 0:z.bank_name_ar)||(z==null?void 0:z.bank_name)||" ",checkDepositDate:(z==null?void 0:z.check_deposit_date)||null,totalAmount:Ve,paidAmount:ne,remainingAmount:Me}});console.log(" Dashboard stats:",{todaySales:f,totalCredits:v,lowStockProducts:_,totalStock:I,supplierDebts:L,monthlyExpenses:K,activeEmployees:J,supplierPaymentReminders:Y,chequesCount:O,chequesTotal:q,overdueClients:de}),t({todaySales:f,todayProfit:p,totalCredits:v,lowStockProducts:_,totalStock:I,todaySalesCount:u,supplierDebts:L,monthlyExpenses:K,activeEmployees:J,supplierPaymentReminders:Y,chequesCount:O,chequesTotal:q,overdueClients:de,chequesList:Ne})}catch(o){console.error("Error fetching dashboard data:",o)}finally{s(!1)}},i=[{title:" ",value:`${e.todaySales.toFixed(2)} MAD`,icon:ni,color:"from-green-500 to-green-600"},{title:" ",value:`${e.todayProfit.toFixed(2)} MAD`,icon:No,color:"from-blue-500 to-blue-600"},{title:" ",value:e.totalStock.toString(),icon:kr,color:"from-teal-500 to-teal-600"},{title:"  ",value:`${e.totalCredits.toFixed(2)} MAD`,icon:Sr,color:"from-red-500 to-red-600"},{title:"  ",value:e.lowStockProducts.toString(),icon:vs,color:"from-orange-500 to-orange-600"},{title:"  ",value:e.todaySalesCount.toString(),icon:ni,color:"from-purple-500 to-purple-600"},{title:" ",value:`${e.supplierDebts.toFixed(2)} MAD`,icon:hA,color:"from-indigo-500 to-indigo-600"},{title:"  ",value:`${e.monthlyExpenses.toFixed(2)} MAD`,icon:fg,color:"from-pink-500 to-pink-600"},{title:" ",value:e.activeEmployees.toString(),icon:Bi,color:"from-cyan-500 to-cyan-600"},{title:"",value:e.chequesCount.toString(),icon:hh,color:"from-amber-500 to-amber-600"}];return r?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:" ..."})}):n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(No,{className:"text-white",size:36})," "]}),n.jsx("div",{className:"text-sm text-white",children:new Date().toLocaleDateString("ar-MA",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((o,l)=>{const c=o.icon;return n.jsx("div",{className:`bg-gradient-to-br ${o.color} text-white rounded-2xl p-8 shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-white/80 text-lg mb-2",children:o.title}),n.jsx("p",{className:"text-4xl font-bold mb-1",children:o.value})]}),n.jsx("div",{className:"bg-white/20 p-4 rounded-2xl",children:n.jsx(c,{size:48,className:"text-white"})})]})},l)})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[n.jsxs("button",{onClick:()=>window.location.href="/pos",className:"bg-green-100 hover:bg-green-200 text-green-700 p-4 rounded-xl font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(ni,{size:32})," "]}),n.jsxs("button",{onClick:()=>window.location.href="/invoices",className:"bg-blue-100 hover:bg-blue-200 text-blue-700 p-4 rounded-xl font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(kr,{size:32}),""]}),n.jsxs("button",{onClick:()=>window.location.href="/orders",className:"bg-indigo-100 hover:bg-indigo-200 text-indigo-700 p-4 rounded-xl font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(Gs,{size:32}),""]}),n.jsxs("button",{onClick:()=>window.location.href="/credits",className:"bg-red-100 hover:bg-red-200 text-red-700 p-4 rounded-xl font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(Sr,{size:32})," "]}),n.jsxs("button",{onClick:()=>window.location.href="/products",className:"bg-purple-100 hover:bg-purple-200 text-purple-700 p-4 rounded-xl font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(kr,{size:32}),""]})]})]}),e.lowStockProducts>0&&n.jsx("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(vs,{className:"text-orange-600",size:24}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-orange-800",children:" "}),n.jsxs("p",{className:"text-orange-700",children:[" ",e.lowStockProducts,"    (  10 )"]})]})]})}),e.totalCredits>0&&n.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Sr,{className:"text-red-600",size:24}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-red-800",children:" "}),n.jsxs("p",{className:"text-red-700",children:["   : ",e.totalCredits.toFixed(2)," MAD"]})]})]})}),e.overdueClients.length>0&&n.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(vs,{className:"text-red-600 mt-1",size:24}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-red-800",children:"     (  30 )"}),n.jsx("div",{className:"mt-2 space-y-1",children:e.overdueClients.map((o,l)=>n.jsxs("div",{className:"flex justify-between items-center text-red-700",children:[n.jsx("span",{className:"font-medium",children:o.name}),n.jsxs("span",{className:"text-sm",children:[o.debt.toFixed(2)," MAD  ",o.daysOverdue," "]})]},l))}),e.overdueClients.length>=5&&n.jsx("p",{className:"text-xs text-red-600 mt-2",children:"+  ..."})]})]})}),e.supplierPaymentReminders.length>0&&n.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(vs,{className:"text-blue-600 mt-1",size:24}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-blue-800",children:" : /  "}),n.jsx("div",{className:"mt-2 space-y-2",children:e.supplierPaymentReminders.map((o,l)=>n.jsx("div",{className:"bg-blue-100 rounded-lg p-3 border border-blue-200",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-blue-900",children:o.supplierName}),n.jsx("p",{className:"text-sm text-blue-700",children:o.purchaseNumber}),n.jsxs("p",{className:"text-xs text-blue-600",children:[o.paymentType==="check"?"":"","  ",new Date(o.dueDate).toLocaleDateString("ar-MA"),o.daysOverdue>0?`   ${o.daysOverdue} `:""]}),o.paymentType==="check"&&o.checkNumber&&n.jsxs("p",{className:"text-xs text-blue-600",children:[" #",o.checkNumber,o.bankName?` - ${o.bankName}`:""]})]}),n.jsx("div",{className:"text-left",children:n.jsxs("p",{className:"text-sm font-bold text-blue-900",children:[o.amount.toFixed(2)," MAD"]})})]})},l))})]})]})}),e.chequesCount>0&&n.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(hh,{className:"text-amber-600 mt-1",size:24}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-amber-800",children:" (  )"}),n.jsx("div",{className:"mt-2 space-y-2",children:e.chequesList.map((o,l)=>n.jsx("div",{className:"bg-amber-100 rounded-lg p-3 border border-amber-200",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-amber-900",children:o.clientName}),n.jsxs("p",{className:"text-sm text-amber-700",children:[" #",o.invoiceNumber]}),n.jsxs("p",{className:"text-xs text-amber-600",children:[" #",o.checkNumber," - ",o.checkBank]}),o.checkDepositDate&&n.jsxs("p",{className:"text-xs text-blue-600",children:[" : ",new Date(o.checkDepositDate).toLocaleDateString("ar-MA")]})]}),n.jsxs("div",{className:"text-left",children:[n.jsxs("p",{className:"text-sm text-amber-700",children:[": ",o.totalAmount.toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-sm text-green-700",children:[": ",o.paidAmount.toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-sm font-bold text-red-700",children:[": ",o.remainingAmount.toFixed(2)," MAD"]})]})]})},l))})]})]})})]})}function RD(){var Ls,jr;const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState([]),[i,o]=H.useState([]),[l,c]=H.useState(""),[A,d]=H.useState(null),[h,f]=H.useState(null),[u,p]=H.useState([]),[g,w]=H.useState(!1),[v,x]=H.useState(!1),[y,_]=H.useState(!1),[I,k]=H.useState(!1),[T,S]=H.useState(!1),[B,R]=H.useState(null),[U,L]=H.useState(!0),[D,Q]=H.useState("ticket"),[K,P]=H.useState(!1),[te,J]=H.useState(20),[V,ie]=H.useState({company_name_ar:"",company_name_en:"",contact_person_name:"",contact_person_email:"",contact_person_phone:"",address:"",subscription_tier:"E"}),[Y,N]=H.useState("paid"),[C,E]=H.useState(0),[O,q]=H.useState([]),[se,ye]=H.useState(!1),[re,de]=H.useState(!1),[Ne,z]=H.useState(null),[Be,Ve]=H.useState(""),[ne,Me]=H.useState(""),[Re,Ye]=H.useState(!1),[ze,yt]=H.useState(null),[mt,at]=H.useState(""),[it,jt]=H.useState(""),[gt,pt]=H.useState(!1),[ot,Et]=H.useState("cash"),[ht,nt]=H.useState({bank_name_ar:"",check_number:"",check_date:"",debt_due_date:""}),[ee,Se]=H.useState(null),[je,qe]=H.useState(""),[At,wt]=H.useState([]),[He,ft]=H.useState({company_name_ar:"",company_name:"",ice:"",address_ar:"",address:"",phone:"",email:""}),[Je,dt]=H.useState([]),[nr,Kt]=H.useState([]),[xt,ir]=H.useState(null),[Dr,ys]=H.useState({totalSales:0,totalCash:0,totalCard:0,totalTransfer:0,totalCredit:0,expectedCash:0}),[sn,Cs]=H.useState(!0),[Rt,Fr]=H.useState(!1),[Br,Tr]=H.useState(""),[Vr,yr]=H.useState(""),[qr,Z]=H.useState(""),[pe,Ae]=H.useState(!1),[he,fe]=H.useState(""),[xe,Fe]=H.useState("");H.useEffect(()=>{ct(),_t(),Gt(),Cr(),Ke(),Ue(),Le();const oe=localStorage.getItem("companyInfo");if(oe)try{const Ie=JSON.parse(oe);ft(Ie)}catch(Ie){console.error("Error loading company info:",Ie)}},[]),H.useEffect(()=>{xt!=null&&xt.id&&st(xt.id)},[xt==null?void 0:xt.id]);const Ke=async()=>{try{const{data:oe,error:Ie}=await we.from("employees").select("id, name, status").eq("status","active").order("name");if(Ie)throw Ie;dt(oe||[])}catch(oe){console.error("Error loading employees:",oe)}},Ue=async()=>{try{const{data:oe,error:Ie}=await we.from("warehouses").select("id, name").eq("is_active",!0).order("name");if(Ie)throw Ie;Kt(oe||[])}catch(oe){console.error("Error loading warehouses:",oe)}},Le=async()=>{try{const oe=localStorage.getItem("pos_cash_session_id"),Ie=localStorage.getItem("pos_employee_id"),Ze=localStorage.getItem("pos_warehouse_id");if(!oe||!Ie||!Ze){await De();return}const{data:bt,error:St}=await we.from("cash_sessions").select("*").eq("id",oe).maybeSingle();if(St)throw St;if(!bt||bt.closed_at){localStorage.removeItem("pos_cash_session_id"),localStorage.removeItem("pos_employee_id"),localStorage.removeItem("pos_warehouse_id"),await De();return}ir(bt)}catch(oe){console.error("Error loading cash session:",oe),await De()}},De=async()=>{try{const{data:oe,error:Ie}=await we.from("cash_sessions").select(`
          *,
          employees!cash_sessions_employee_id_fkey (
            id,
            name
          ),
          warehouses!cash_sessions_warehouse_id_fkey (
            id,
            name
          )
        `).is("closed_at",null).order("opened_at",{ascending:!1});if(Ie)throw Ie;if(oe&&oe.length>0){const Ze=oe.map(St=>{var da,Xr;return` ${((da=St.employees)==null?void 0:da.name)||" "} - ${((Xr=St.warehouses)==null?void 0:Xr.name)||" "} (: ${new Date(St.opened_at).toLocaleTimeString("ar-MA")})`}).join(`
`);if(confirm(`    :

`+Ze+`

    

 ""   
 ""   `)){const St=oe[0];localStorage.setItem("pos_cash_session_id",St.id),localStorage.setItem("pos_employee_id",St.employee_id),localStorage.setItem("pos_warehouse_id",St.warehouse_id),ir(St);return}}Fr(!0)}catch(oe){console.error("Error checking for open sessions:",oe),Fr(!0)}},st=async oe=>{try{const{data:Ie,error:Ze}=await we.from("cash_sessions").select("opening_cash").eq("id",oe).single();if(Ze)throw Ze;const bt=Number((Ie==null?void 0:Ie.opening_cash)||0),{data:St,error:da}=await we.from("payments").select("amount, payment_method, status").eq("cash_session_id",oe).eq("status","completed");if(da)throw da;const Xr=(St||[]).filter(on=>on.payment_method==="cash").reduce((on,Ca)=>on+Number(Ca.amount||0),0),Jr=(St||[]).filter(on=>on.payment_method==="card").reduce((on,Ca)=>on+Number(Ca.amount||0),0),du=(St||[]).filter(on=>on.payment_method==="bank_transfer").reduce((on,Ca)=>on+Number(Ca.amount||0),0),{data:Yt,error:FA}=await we.from("invoices").select("total_amount, amount_paid, paid_amount").eq("cash_session_id",oe);if(FA)throw FA;const TA=(Yt||[]).reduce((on,Ca)=>on+Number(Ca.total_amount||0),0),uu=(Yt||[]).reduce((on,Ca)=>on+Number(Ca.amount_paid??Ca.paid_amount??0),0),Ii=Math.max(0,TA-uu),Ui=bt+Xr;ys({totalSales:TA,totalCash:Xr,totalCard:Jr,totalTransfer:du,totalCredit:Ii,expectedCash:Ui})}catch(Ie){console.error("Error loading cash session summary:",Ie)}},vt=async()=>{if(!Br||!Vr){alert("      ");return}const oe=Number(qr||0);if(Number.isNaN(oe)||oe<0){alert("   ");return}try{const{data:Ie,error:Ze}=await we.from("cash_sessions").select("*").eq("employee_id",Br).eq("warehouse_id",Vr).is("closed_at",null).maybeSingle();if(Ze&&Ze.code!=="PGRST116")throw Ze;if(Ie){localStorage.setItem("pos_employee_id",Br),localStorage.setItem("pos_warehouse_id",Vr),ir(Ie),Fr(!1),Z(""),Tr(""),yr(""),alert("      ");return}const{data:bt,error:St}=await we.from("cash_sessions").insert({employee_id:Br,warehouse_id:Vr,opening_cash:oe,opened_at:new Date().toISOString()}).select().single();if(St)throw St;localStorage.setItem("pos_cash_session_id",bt.id),localStorage.setItem("pos_employee_id",Br),localStorage.setItem("pos_warehouse_id",Vr),ir(bt),Fr(!1),Z(""),Tr(""),yr("")}catch(Ie){if(console.error("Error opening cash session:",Ie),(Ie==null?void 0:Ie.code)==="23505"){alert("      ");return}alert("  : "+((Ie==null?void 0:Ie.message)||"  "))}},Bt=async()=>{if(!xt)return;const oe=Number(he||0);if(Number.isNaN(oe)||oe<0){alert("   ");return}const Ie=oe-Dr.expectedCash;if(Ie!==0&&!xe.trim()){alert("       ");return}try{const{error:Ze}=await we.from("cash_sessions").update({closed_at:new Date().toISOString(),closing_cash_declared:oe,closing_note:xe.trim()||null}).eq("id",xt.id);if(Ze)throw Ze;const{error:bt}=await we.from("cash_session_reports").insert({session_id:xt.id,total_sales:Dr.totalSales,total_cash:Dr.totalCash,total_card:Dr.totalCard,total_transfer:Dr.totalTransfer,total_credit:Dr.totalCredit,expected_cash:Dr.expectedCash,declared_cash:oe,difference:Ie});if(bt)throw bt;localStorage.removeItem("pos_cash_session_id"),localStorage.removeItem("pos_employee_id"),localStorage.removeItem("pos_warehouse_id"),ir(null),Ae(!1),fe(""),Fe(""),Fr(!0)}catch(Ze){console.error("Error closing cash session:",Ze),alert("  ")}},ct=async()=>{const{data:oe,error:Ie}=await we.from("products").select("id, name_ar, sku, stock, price_a, price_b, price_c, price_d, price_e, category_id, image_url").order("name_ar");if(Ie){console.error("Error loading products:",Ie);return}console.log("POS - Produits rcuprs:",oe==null?void 0:oe.length,"produits"),r(oe||[])},_t=async()=>{try{const{data:oe,error:Ie}=await we.from("product_categories").select("*").order("name_ar");if(Ie)throw Ie;a(oe||[])}catch(oe){console.error("Error loading categories:",oe)}},Gt=async()=>{try{console.log(" Chargement des clients...");const{data:oe,error:Ie}=await we.from("clients").select("*");console.log(" Rponse clients:",{data:oe,error:Ie}),Ie?console.warn(" Error loading clients:",Ie):(console.log(` ${(oe==null?void 0:oe.length)||0} clients chargs`),console.log(" Structure du premier client:",JSON.stringify(oe==null?void 0:oe[0],null,2)),p(oe||[]))}catch(oe){console.error(" Exception loading clients:",oe),p([])}},Cr=async()=>{try{console.log(" Chargement des factures en attente...");const{data:oe,error:Ie}=await we.from("invoices").select("*").order("created_at",{ascending:!1}).limit(10);if(Ie){console.error("Error loading on hold invoices:",Ie);return}console.log(" Factures en attente rcupres:",(oe==null?void 0:oe.length)||0),wt(oe||[])}catch(oe){console.error(" Exception loading on hold invoices:",oe),wt([])}},cr=t.filter(oe=>{var Ie,Ze;return((Ie=oe.name_ar)==null?void 0:Ie.toLowerCase().includes(l.toLowerCase()))||((Ze=oe.barcode)==null?void 0:Ze.includes(l))}).filter(oe=>!(A&&oe.category_id!==A)),Qr=oe=>{if("customPrice"in oe&&oe.customPrice)return oe.customPrice;if(!h)return console.log(" Aucun client slectionn, prix E:",oe.price_e),oe.price_e;const Ie=h.subscription_tier||h.subscription_tier_old;if(console.log(" Catgorie client:",{selectedClient:h.id,subscription_tier:h.subscription_tier,subscription_tier_old:h.subscription_tier_old,clientCategory:Ie,type:typeof Ie}),!Ie)return console.log(" Pas de catgorie, prix E:",oe.price_e),oe.price_e;let Ze=oe.price_e;switch(Ie){case"A":Ze=oe.price_a,console.log(" Catgorie A, prix:",Ze);break;case"B":Ze=oe.price_b,console.log(" Catgorie B, prix:",Ze);break;case"C":Ze=oe.price_c,console.log(" Catgorie C, prix:",Ze);break;case"D":Ze=oe.price_d,console.log(" Catgorie D, prix:",Ze);break;case"E":Ze=oe.price_e,console.log(" Catgorie E, prix:",Ze);break;default:console.log(" Catgorie inconnue:",Ie,", prix E par dfaut:",oe.price_e),Ze=oe.price_e}return Ze},nn=()=>{const Ie=new Date().toISOString().split("T")[0].replace(/-/g,""),Ze=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`INV-${Ie}-${Ze}`},Hn=()=>{const oe=nn();qe(oe);const Ie={id:`draft-${Date.now()}`,invoice_number:oe,client_id:(h==null?void 0:h.id)||null,client_name:(h==null?void 0:h.company_name_ar)||" ",status:"paid",lines:[],subtotal:0,total_amount:0,paid_amount:0,remaining_amount:0,created_at:new Date().toISOString()};return Se(Ie),Ie},Aa=oe=>{let Ie=ee;Ie||(Ie=Hn());const Ze=Qr(oe),bt=Ie.lines.find(St=>St.product_id===oe.id);if(bt)bt.deleted?(bt.deleted=!1,bt.quantity=1):bt.quantity+=1,bt.total=bt.quantity*bt.unit_price;else{const St={id:`line-${Date.now()}-${Math.random()}`,product_id:oe.id,product_name_ar:oe.name_ar,quantity:1,unit_price:Ze,total:Ze,deleted:!1,image_url:oe.image_url};Ie.lines.push(St)}Ie.subtotal=Ie.lines.reduce((St,da)=>da.deleted?St:St+da.total,0),Ie.total_amount=Ie.subtotal,Ie.remaining_amount=Ie.total_amount-Ie.paid_amount,Se({...Ie})},an=(oe,Ie)=>{if(!ee)return;const Ze=ee.lines.find(bt=>bt.id===oe);Ze&&!Ze.deleted&&Ie>0&&(Ze.quantity=Ie,Ze.total=Ze.quantity*Ze.unit_price,ee.subtotal=ee.lines.reduce((bt,St)=>St.deleted?bt:bt+St.total,0),ee.total_amount=ee.subtotal,ee.remaining_amount=ee.total_amount-ee.paid_amount,Se({...ee}))},Qa=oe=>{if(!ee)return;const Ie=ee.lines.find(Ze=>Ze.id===oe);Ie&&(Ie.deleted=!0,Ie.quantity=0,Ie.total=0,ee.subtotal=ee.lines.reduce((Ze,bt)=>bt.deleted?Ze:Ze+bt.total,0),ee.total_amount=ee.subtotal,ee.remaining_amount=ee.total_amount-ee.paid_amount,Se({...ee}))},As=oe=>{if(!ee)return;const Ie=ee.lines.find(Ze=>Ze.id===oe);Ie&&(Ie.deleted=!1,Ie.quantity=1,Ie.total=Ie.quantity*Ie.unit_price,ee.subtotal=ee.lines.reduce((Ze,bt)=>bt.deleted?Ze:Ze+bt.total,0),ee.total_amount=ee.subtotal,ee.remaining_amount=ee.total_amount-ee.paid_amount,Se({...ee}))},ci=oe=>{ee&&(ee.paid_amount=oe,ee.remaining_amount=ee.total_amount-oe,oe===0?ee.status="credit":oe<ee.total_amount?ee.status="partial":ee.status="paid",Se({...ee}),E(oe))},Fi=oe=>K?oe*(1+te/100):oe,rs=oe=>K?oe*(te/100):0;H.useEffect(()=>{ee&&ee.status==="paid"&&ci(ee.total_amount)},[ee==null?void 0:ee.total_amount,ee==null?void 0:ee.status]);const Fo=async oe=>{if(oe.preventDefault(),!V.company_name_ar.trim()||!V.contact_person_name.trim()){alert("      ");return}try{const{data:Ie,error:Ze}=await we.from("clients").insert([V]).select().single();if(Ze)throw Ze;f(Ie),x(!1),w(!1),ie({company_name_ar:"",company_name_en:"",contact_person_name:"",contact_person_email:"",contact_person_phone:"",address:"",subscription_tier:"E"}),await Gt(),alert("    ")}catch(Ie){console.error("Error adding client:",Ie),alert("     ")}},Kn=i.reduce((oe,Ie)=>Ie.deleted?oe:oe+Qr(Ie)*Ie.quantity,0);H.useEffect(()=>{Y==="paid"&&E(Kn)},[Kn,Y]);const Ti=oe=>{o(oe.items),f(u.find(Ze=>Ze.id===oe.client_id)||null),E(0),ye(!1);const Ie=O.filter(Ze=>Ze.id!==oe.id);q(Ie),localStorage.setItem("pos_drafts",JSON.stringify(Ie))},X=oe=>{const Ie=O.filter(Ze=>Ze.id!==oe);q(Ie),localStorage.setItem("pos_drafts",JSON.stringify(Ie))};H.useEffect(()=>{const oe=localStorage.getItem("pos_drafts");oe&&q(JSON.parse(oe))},[]);const Ee=()=>{if(!Ne)return;const oe=parseInt(Be),Ie=parseFloat(ne);oe>0&&!isNaN(oe)&&Ie>0&&!isNaN(Ie)&&(o(i.map(Ze=>Ze.id===Ne.id?{...Ze,quantity:oe,customPrice:Ie}:Ze)),de(!1),z(null),Ve(""),Me(""))},Qe=()=>{de(!1),z(null),Ve(""),Me("")},et=()=>{if(!ee||!ze)return;const oe=parseInt(mt),Ie=parseFloat(it);if(oe>0&&!isNaN(oe)&&Ie>=0&&!isNaN(Ie)){const Ze=ee.lines.find(bt=>bt.id===ze.id);if(!Ze)return;Ze.quantity=oe,Ze.unit_price=Ie,Ze.total=oe*Ie,ee.subtotal=ee.lines.reduce((bt,St)=>bt+St.total,0),ee.total_amount=ee.subtotal,ee.remaining_amount=ee.total_amount-ee.paid_amount,Se({...ee}),Ye(!1),yt(null),at(""),jt("")}},Dt=()=>{Ye(!1),yt(null),at(""),jt("")},Tt=oe=>{yt(oe),at(oe.quantity.toString()),jt(oe.unit_price.toFixed(2)),Ye(!0)},$t=()=>{if(!xt){Fr(!0),alert("     ");return}!ee||ee.lines.length===0||_(!0)},Ct=async()=>{if(ee){if(!xt){Fr(!0),alert("     ");return}try{let oe=h==null?void 0:h.id;if(!oe){const{data:Xr}=await we.from("clients").select("id").eq("company_name_ar"," ").maybeSingle();if(Xr)oe=Xr.id;else{const{data:Jr}=await we.from("clients").insert({company_name_ar:" ",company_name_en:"General Client"}).select().single();oe=Jr==null?void 0:Jr.id}}let Ie=ee.invoice_number;const Ze=Xr=>({invoice_number:Xr,order_id:null,client_id:oe,invoice_date:new Date().toISOString(),due_date:new Date().toISOString(),subtotal:ee.subtotal,total_amount:ee.total_amount,paid_amount:ee.paid_amount,cash_session_id:xt.id,employee_id:xt.employee_id,warehouse_id:xt.warehouse_id,status:ee.status==="credit"?"draft":ee.status==="partial"?"sent":ee.status==="paid"?"paid":"draft",items:ee.lines.filter(Jr=>!Jr.deleted).map(Jr=>({product_id:Jr.product_id,product_name:Jr.product_name_ar,quantity:Jr.quantity,unit_price:Jr.unit_price,total:Jr.total}))});let{data:bt,error:St}=await we.from("invoices").insert(Ze(Ie)).select().single();if(St&&St.code==="23505"){Ie=`INV-${Date.now()}-${Math.floor(Math.random()*1e3)}`;const Xr=await we.from("invoices").insert(Ze(Ie)).select().single();bt=Xr.data,St=Xr.error}if(St)throw St;if(ee.paid_amount>0){const Xr=ot==="cash"?"cash":ot==="check"?"check":ot==="card"?"card":ot==="bank_transfer"?"bank_transfer":ot==="credit"?"credit":"cash",{error:Jr}=await we.from("payments").insert({invoice_id:bt.id,client_id:oe,payment_number:`PAY-${Date.now()}-${Math.floor(Math.random()*1e3)}`,amount:ee.paid_amount,payment_method:Xr,payment_date:new Date().toISOString(),status:"completed",order_id:null,cash_session_id:xt.id,collected_by:xt.employee_id});if(Jr)throw Jr}for(const Xr of ee.lines.filter(Jr=>!Jr.deleted)){const{data:Jr}=await we.from("products").select("stock").eq("id",Xr.product_id).single();Jr&&await we.from("products").update({stock:Jr.stock-Xr.quantity}).eq("id",Xr.product_id)}const da={...ee,id:bt.id,invoice_number:Ie,total_with_tva:Fi(ee.total_amount),tva_amount:rs(ee.total_amount),enable_tva:K,tva_rate:te};R(da),_(!1),k(!0),S(!0),Se(null),qe(""),f(null),E(0),await ct(),await st(xt.id)}catch(oe){console.error("Error:",oe),alert("  ")}}},ur=oe=>{if(!B)return;let Ie="";oe==="invoice"?Ie=`
        <div style="direction: rtl; font-family: Arial, sans-serif; color: black; max-width: 210mm; margin: 0 auto; padding: 20px;">
          <div style="text-align: center; margin-bottom: 30px; border-bottom: 2px solid black; padding-bottom: 20px;">
            <h1 style="font-size: 28px; margin: 0; color: black;">${He.company_name_ar||He.company_name||"BA9ALINO"}</h1>
            ${He.ice?`<p style="margin: 5px 0; color: black;">ICE: ${He.ice}</p>`:""}
            ${He.address_ar?`<p style="margin: 5px 0; color: black;">${He.address_ar}</p>`:'<p style="margin: 5px 0; color: black;"> -  </p>'}
            ${He.phone?`<p style="margin: 5px 0; color: black;">: ${He.phone}</p>`:'<p style="margin: 5px 0; color: black;">: 0123456789</p>'}
            ${He.email?`<p style="margin: 5px 0; color: black;"> : ${He.email}</p>`:'<p style="margin: 5px 0; color: black;"> : info@ba9alino.ma</p>'}
          </div>
          
          <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
            <div style="text-align: right;">
              <p style="margin: 5px 0; color: black;"><strong> :</strong> ${B.invoice_number}</p>
              <p style="margin: 5px 0; color: black;"><strong>:</strong> ${new Date(B.created_at).toLocaleDateString("ar-DZ")}</p>
            </div>
            <div style="text-align: left;">
              <p style="margin: 5px 0; color: black;"><strong>:</strong> ${B.client_name}</p>
            </div>
          </div>
          
          <table style="width: 100%; border-collapse: collapse; margin-bottom: 30px;">
            <thead>
              <tr style="background: #f0f0f0; border: 1px solid black;">
                <th style="border: 1px solid black; padding: 10px; text-align: center;"></th>
                <th style="border: 1px solid black; padding: 10px; text-align: center;"></th>
                <th style="border: 1px solid black; padding: 10px; text-align: right;"></th>
                <th style="border: 1px solid black; padding: 10px; text-align: left;"></th>
                <th style="border: 1px solid black; padding: 10px; text-align: left;"></th>
              </tr>
            </thead>
            <tbody>
              ${B.lines.filter(bt=>!bt.deleted).map(bt=>`
                <tr style="border: 1px solid black;">
                  <td style="border: 1px solid black; padding: 8px; text-align: center;">${bt.quantity}</td>
                  <td style="border: 1px solid black; padding: 8px; text-align: center;"></td>
                  <td style="border: 1px solid black; padding: 8px; text-align: right;">${bt.product_name_ar}</td>
                  <td style="border: 1px solid black; padding: 8px; text-align: left;">${bt.unit_price.toFixed(2)} MAD</td>
                  <td style="border: 1px solid black; padding: 8px; text-align: left; font-weight: bold;">${bt.total.toFixed(2)} MAD</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          
          <div style="text-align: left; width: 50%; margin-left: auto;">
            <table style="width: 100%; border-collapse: collapse;">
              <tr style="border: 1px solid black;">
                <td style="border: 1px solid black; padding: 8px; text-align: right;">:</td>
                <td style="border: 1px solid black; padding: 8px; text-align: left; font-weight: bold;">${B.subtotal.toFixed(2)} MAD</td>
              </tr>
              ${B.enable_tva?`
                <tr style="border: 1px solid black;">
                  <td style="border: 1px solid black; padding: 8px; text-align: right;">   (${B.tva_rate}%):</td>
                  <td style="border: 1px solid black; padding: 8px; text-align: left; font-weight: bold;">${B.tva_amount.toFixed(2)} MAD</td>
                </tr>
              `:""}
              <tr style="border: 1px solid black; background: #f0f0f0;">
                <td style="border: 1px solid black; padding: 10px; text-align: right; font-weight: bold;">${B.enable_tva?"  :":":"}</td>
                <td style="border: 1px solid black; padding: 10px; text-align: left; font-weight: bold; font-size: 16px;">${B.total_with_tva.toFixed(2)} MAD</td>
              </tr>
              <tr style="border: 1px solid black;">
                <td style="border: 1px solid black; padding: 8px; text-align: right;">:</td>
                <td style="border: 1px solid black; padding: 8px; text-align: left; font-weight: bold;">${B.paid_amount.toFixed(2)} MAD</td>
              </tr>
              <tr style="border: 1px solid black;">
                <td style="border: 1px solid black; padding: 8px; text-align: right;">:</td>
                <td style="border: 1px solid black; padding: 8px; text-align: left; font-weight: bold; color: ${B.total_with_tva-B.paid_amount>0?"red":"green"};">${(B.total_with_tva-B.paid_amount).toFixed(2)} MAD</td>
              </tr>
            </table>
          </div>
          
          <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid black;">
            <p style="margin: 5px 0; color: black;">  </p>
          </div>
        </div>
      `:oe==="ticket"?Ie=`
        <div style="direction: rtl; font-family: monospace; color: black; max-width: 80mm; margin: 0 auto; padding: 10px; font-size: 12px;">
          <div style="text-align: center; margin-bottom: 15px;">
            <h1 style="font-size: 18px; margin: 0; color: black;">${He.company_name_ar||He.company_name||"BA9ALINO"}</h1>
            ${He.address_ar?`<p style="margin: 2px 0; color: black; font-size: 10px;">${He.address_ar}</p>`:'<p style="margin: 2px 0; color: black; font-size: 10px;"> -  </p>'}
            ${He.phone?`<p style="margin: 2px 0; color: black; font-size: 10px;">: ${He.phone}</p>`:""}
          </div>
          
          <div style="border-bottom: 1px dashed black; padding-bottom: 10px; margin-bottom: 10px;">
            <p style="margin: 2px 0; color: black;"><strong>:</strong> ${B.invoice_number}</p>
            <p style="margin: 2px 0; color: black;"><strong>:</strong> ${new Date(B.created_at).toLocaleDateString("ar-DZ")}</p>
            <p style="margin: 2px 0; color: black;"><strong>:</strong> ${B.client_name}</p>
          </div>
          
          <div style="margin-bottom: 10px;">
            ${B.lines.filter(bt=>!bt.deleted).map(bt=>`
              <div style="margin-bottom: 5px;">
                <div style="display: flex; justify-content: space-between;">
                  <span style="color: black;">${bt.product_name_ar}</span>
                  <span style="color: black;">${bt.total.toFixed(2)} MAD</span>
                </div>
                <div style="font-size: 10px; color: black;">
                  ${bt.quantity}  ${bt.unit_price.toFixed(2)} MAD
                </div>
              </div>
            `).join("")}
          </div>
          
          <div style="border-top: 1px dashed black; padding-top: 10px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 2px;">
              <span style="color: black;">:</span>
              <span style="color: black;">${B.subtotal.toFixed(2)} MAD</span>
            </div>
            ${B.enable_tva?`
              <div style="display: flex; justify-content: space-between; margin-bottom: 2px;">
                <span style="color: black;">TVA (${B.tva_rate}%):</span>
                <span style="color: black;">${B.tva_amount.toFixed(2)} MAD</span>
              </div>
            `:""}
            <div style="display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 2px;">
              <span style="color: black;">:</span>
              <span style="color: black;">${B.total_with_tva.toFixed(2)} MAD</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 2px;">
              <span style="color: black;">:</span>
              <span style="color: black;">${B.paid_amount.toFixed(2)} MAD</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: black; ${B.total_with_tva-B.paid_amount>0?"color: red;":"color: green;"}">:</span>
              <span style="color: black; ${B.total_with_tva-B.paid_amount>0?"color: red;":"color: green;"}">${(B.total_with_tva-B.paid_amount).toFixed(2)} MAD</span>
            </div>
          </div>
          
          <div style="text-align: center; margin-top: 15px; padding-top: 10px; border-top: 1px dashed black;">
            <p style="margin: 2px 0; color: black; font-size: 10px;">  </p>
          </div>
        </div>
      `:oe==="order"&&(Ie=`
        <div style="direction: rtl; font-family: Arial, sans-serif; color: black; max-width: 80mm; margin: 0 auto; padding: 15px;">
          <div style="text-align: center; margin-bottom: 20px; border-bottom: 2px solid black; padding-bottom: 10px;">
            <h1 style="font-size: 20px; margin: 0; color: black;"> </h1>
            <p style="margin: 5px 0; color: black;">${He.company_name_ar||He.company_name||"BA9ALINO"}</p>
          </div>
          
          <div style="margin-bottom: 15px;">
            <p style="margin: 3px 0; color: black;"><strong> :</strong> ${B.invoice_number}</p>
            <p style="margin: 3px 0; color: black;"><strong>:</strong> ${new Date(B.created_at).toLocaleDateString("ar-DZ")}</p>
            <p style="margin: 3px 0; color: black;"><strong>:</strong> ${B.client_name}</p>
          </div>
          
          <div style="margin-bottom: 15px;">
            <h3 style="margin: 5px 0; color: black; text-decoration: underline;">:</h3>
            ${B.lines.filter(bt=>!bt.deleted).map((bt,St)=>`
              <div style="margin-bottom: 8px; padding: 5px; border-bottom: 1px dotted black;">
                <div style="color: black; font-weight: bold;">${St+1}. ${bt.product_name_ar}</div>
                <div style="color: black; font-size: 12px;">: ${bt.quantity} | : ${bt.unit_price.toFixed(2)} MAD | : ${bt.total.toFixed(2)} MAD</div>
              </div>
            `).join("")}
          </div>
          
          <div style="border-top: 2px solid black; padding-top: 10px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
              <span style="color: black;">:</span>
              <span style="color: black;">${B.subtotal.toFixed(2)} MAD</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
              <span style="color: black;">:</span>
              <span style="color: black;">${B.paid_amount.toFixed(2)} MAD</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 16px;">
              <span style="color: black;">:</span>
              <span style="color: black;">${(B.total_with_tva-B.paid_amount).toFixed(2)} MAD</span>
            </div>
          </div>
          
          <div style="text-align: center; margin-top: 20px;">
            <p style="margin: 5px 0; color: black;">_________________________</p>
            <p style="margin: 5px 0; color: black; font-size: 12px;"> </p>
          </div>
        </div>
      `);const Ze=window.open("","_blank");Ze&&(Ze.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>${oe==="invoice"?"":oe==="ticket"?"":""}</title>
          <style>
            @media print {
              body { margin: 0; }
              @page { ${oe==="invoice"?"margin: 10mm;":"margin: 5mm;"} }
            }
          </style>
        </head>
        <body>
          ${Ie}
        </body>
        </html>
      `),Ze.document.close(),Ze.focus(),setTimeout(()=>{Ze.print()},500))},js=xt&&((Ls=Je.find(oe=>oe.id===xt.employee_id))==null?void 0:Ls.name)||"",Er=xt&&((jr=nr.find(oe=>oe.id===xt.warehouse_id))==null?void 0:jr.name)||"";return n.jsxs("div",{className:"h-screen flex gap-4 overflow-hidden relative",dir:"rtl",children:[xt&&sn&&n.jsxs("div",{className:"absolute top-3 left-3 z-50 bg-white rounded-xl shadow-lg p-4 w-[360px]",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"text-sm font-bold text-gray-800",children:[" ",js]}),n.jsxs("div",{className:"text-sm font-bold text-gray-800",children:[" ",Er]})]}),n.jsx("button",{onClick:()=>Cs(!1),className:"w-full mb-3 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 rounded-lg font-bold text-sm",children:"  "}),n.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:["  : ",new Date(xt.opened_at).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:""}),n.jsxs("div",{className:"font-bold text-green-700",children:[Dr.totalCash.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:""}),n.jsxs("div",{className:"font-bold text-blue-700",children:[Dr.totalCard.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:""}),n.jsxs("div",{className:"font-bold text-purple-700",children:[Dr.totalTransfer.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:""}),n.jsxs("div",{className:"font-bold text-orange-700",children:[Dr.totalCredit.toFixed(2)," MAD"]})]})]}),n.jsxs("div",{className:"mt-3 bg-gray-900 text-white rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-200 mb-1",children:"  "}),n.jsxs("div",{className:"text-lg font-bold",children:[Dr.expectedCash.toFixed(2)," MAD"]})]}),n.jsx("button",{onClick:()=>Ae(!0),className:"w-full mt-3 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg font-bold",children:"  "})]}),xt&&!sn&&n.jsx("button",{onClick:()=>Cs(!0),className:"absolute top-3 left-3 z-50 bg-white hover:bg-gray-50 border border-gray-200 rounded-xl shadow-lg px-4 py-3 font-bold",children:"   "}),Rt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[80]",onClick:()=>Fr(!1),children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[520px] max-w-[92vw] p-6",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("span",{className:"inline-block bg-gray-200 text-gray-800 font-bold px-4 py-2 rounded-md",children:" "}),n.jsx("button",{onClick:()=>Fr(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsxs("select",{value:Br,onChange:oe=>Tr(oe.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",children:[n.jsx("option",{value:"",children:" "}),Je.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),n.jsxs("select",{value:Vr,onChange:oe=>yr(oe.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",children:[n.jsx("option",{value:"",children:" "}),nr.map(oe=>n.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Fond de caisse initial"}),n.jsx("input",{type:"number",value:qr,onChange:oe=>Z(oe.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",placeholder:"0",min:0})]}),n.jsx("button",{onClick:vt,className:"w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg font-bold text-lg",children:"Ouvrir la caisse"})]})]})}),pe&&xt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[80]",onClick:()=>Ae(!1),children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[520px] max-w-[92vw] p-6",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("span",{className:"inline-block bg-gray-200 text-gray-800 font-bold px-4 py-2 rounded-md",children:" "}),n.jsx("button",{onClick:()=>Ae(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Fond initial"}),n.jsxs("span",{className:"font-bold",children:[Number(xt.opening_cash||0).toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Espces encaisses"}),n.jsxs("span",{className:"font-bold",children:[Dr.totalCash.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" Cash thorique"}),n.jsxs("span",{className:"font-bold",children:[Dr.expectedCash.toFixed(2)," MAD"]})]})]}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Cash rel compt"}),n.jsx("input",{type:"number",value:he,onChange:oe=>fe(oe.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:outline-none",placeholder:"0",min:0}),he!==""&&n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["cart: ",(Number(he||0)-Dr.expectedCash).toFixed(2)," MAD"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" (    )"}),n.jsx("textarea",{value:xe,onChange:oe=>Fe(oe.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-red-500 focus:outline-none",rows:3})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:Bt,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-bold",children:"Fermer"}),n.jsx("button",{onClick:()=>Ae(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-bold",children:"Annuler"})]})]})]})}),n.jsxs("div",{className:"flex-1 bg-white rounded-xl shadow-lg p-4 flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(uh,{size:20,className:"text-gray-600"}),n.jsx("span",{className:"text-gray-600",children:""})]}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"     ...",className:"w-full pr-10 pl-4 py-2 border-2 border-gray-200 rounded-lg text-lg focus:border-green-500 focus:outline-none",value:l,onChange:oe=>c(oe.target.value),autoFocus:!0}),l&&n.jsx("button",{onClick:()=>c(""),className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx(Xa,{size:20})})]})]}),n.jsx("div",{className:"mb-3",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{onClick:()=>d(null),className:`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap transition-colors ${A?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-600 text-white"}`,children:""}),s.map(oe=>n.jsx("button",{onClick:()=>d(oe.id),className:`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap transition-colors ${A===oe.id?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:oe.name_ar},oe.id))]})}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:cr.map(oe=>{const Ie=oe.stock===0?"text-red-600":oe.stock<10?"text-orange-600":"text-green-600",Ze=oe.stock===0?" ":oe.stock<10?"":"";return n.jsxs("button",{onClick:()=>Aa(oe),className:"p-3 rounded-xl border-2 bg-white border-gray-200 hover:border-green-500 hover:shadow-lg transition-all",children:[n.jsx("div",{className:"w-full h-24 mb-2 flex items-center justify-center bg-gray-50 rounded-lg overflow-hidden",children:oe.image_url?n.jsx("img",{src:oe.image_url,alt:oe.name_ar,className:"w-full h-full object-cover rounded-lg",onError:bt=>{var St;bt.currentTarget.style.display="none",(St=bt.currentTarget.parentElement)==null||St.classList.add("bg-gray-100")}}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 rounded-lg",children:n.jsx(ni,{size:32,className:"text-gray-400"})})}),n.jsx("div",{className:"text-sm font-bold text-gray-800 mb-1 line-clamp-2",children:oe.name_ar}),n.jsxs("div",{className:"text-lg font-bold text-green-600",children:[Qr(oe).toFixed(2)," MAD"]}),n.jsx("div",{className:`text-xs font-bold mt-1 ${Ie}`,children:Ze})]},oe.id)})})})]}),n.jsx("div",{className:"w-96 bg-white rounded-xl shadow-lg p-4 flex flex-col overflow-hidden",children:ee?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-3 pb-3 border-b-2 border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500",children:" "}),n.jsx("p",{className:"font-bold text-lg text-gray-800",children:ee.invoice_number})]}),n.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold text-white ${ee.status==="paid"?"bg-green-600":ee.status==="partial"?"bg-yellow-600":ee.status==="credit"?"bg-red-600":"bg-blue-600"}`,children:ee.status==="paid"?"":ee.status==="partial"?"":ee.status==="credit"?"":""})]}),n.jsx("p",{className:"text-xs text-gray-500",children:new Date(ee.created_at).toLocaleString("ar-DZ")})]}),n.jsxs("button",{onClick:()=>w(!0),className:"mb-3 p-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 transition-colors text-right text-sm w-full",children:[n.jsx("p",{className:"text-xs text-gray-500",children:""}),n.jsx("p",{className:"font-bold text-gray-800",children:ee.client_name})]}),n.jsx("div",{className:"flex-1 overflow-y-auto mb-3 border-b-2 border-gray-200 pb-3 min-h-[150px] max-h-[250px]",children:ee.lines.length===0?n.jsx("div",{className:"text-center text-gray-400 py-8 text-sm",children:"  "}):n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{className:"grid grid-cols-12 gap-1 mb-2 pb-2 border-b border-gray-300 font-bold text-gray-700",children:[n.jsx("div",{className:"col-span-5",children:""}),n.jsx("div",{className:"col-span-2 text-center",children:""}),n.jsx("div",{className:"col-span-2 text-center",children:""}),n.jsx("div",{className:"col-span-2 text-left",children:""}),n.jsx("div",{className:"col-span-1 text-center",children:""})]}),n.jsx("div",{className:"space-y-1",children:ee.lines.map(oe=>n.jsxs("div",{className:`grid grid-cols-12 gap-1 p-1 bg-gray-50 rounded border border-gray-200 transition-colors items-center ${oe.deleted?"opacity-60":"hover:border-green-500 hover:bg-green-50"}`,children:[n.jsxs("div",{className:"col-span-5 flex items-center gap-2",children:[oe.image_url?n.jsx("img",{src:oe.image_url,alt:oe.product_name_ar,className:"w-8 h-8 object-cover rounded border border-gray-300",onError:Ie=>{Ie.currentTarget.style.display="none"}}):n.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-300 flex items-center justify-center",children:n.jsx(ni,{size:14,className:"text-gray-400"})}),n.jsx("button",{onClick:()=>{oe.deleted||Tt(oe)},className:`flex-1 font-semibold truncate text-left ${oe.deleted?"text-gray-500 line-through cursor-not-allowed":"text-gray-800 hover:text-green-700 hover:underline"}`,type:"button",children:oe.product_name_ar})]}),n.jsx("button",{onClick:()=>{oe.deleted||Tt(oe)},className:`col-span-2 text-center ${oe.deleted?"text-gray-500 line-through cursor-not-allowed":"text-gray-600 hover:text-green-700 hover:underline"}`,type:"button",disabled:!!oe.deleted,children:oe.deleted?"0.00":oe.unit_price.toFixed(2)}),n.jsxs("div",{className:"col-span-2 flex items-center justify-center gap-0.5",children:[n.jsx("button",{onClick:()=>{oe.deleted||an(oe.id,oe.quantity-1)},className:`w-5 h-5 rounded text-xs font-bold ${oe.deleted?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 hover:bg-gray-300"}`,disabled:!!oe.deleted,children:""}),n.jsx("input",{type:"number",min:"1",value:oe.deleted?0:oe.quantity,onChange:Ie=>{const Ze=parseInt(Ie.target.value);!oe.deleted&&Ze>0&&an(oe.id,Ze)},className:`w-8 text-center text-xs font-bold border border-gray-200 rounded ${oe.deleted?"bg-gray-100 text-gray-400 cursor-not-allowed":""}`,disabled:!!oe.deleted}),n.jsx("button",{onClick:()=>{oe.deleted||an(oe.id,oe.quantity+1)},className:`w-5 h-5 rounded text-xs font-bold ${oe.deleted?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,disabled:!!oe.deleted,children:"+"})]}),n.jsx("div",{className:`col-span-2 text-left font-bold ${oe.deleted?"text-gray-500 line-through":"text-green-600"}`,children:(oe.deleted?0:oe.total).toFixed(2)}),n.jsx("div",{className:"col-span-1 flex justify-center",children:n.jsx("button",{onClick:()=>oe.deleted?As(oe.id):Qa(oe.id),className:`w-5 h-5 rounded flex items-center justify-center text-xs font-bold ${oe.deleted?"bg-gray-500 hover:bg-gray-600 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:oe.deleted?"":""})})]},oe.id))})]})}),n.jsxs("div",{className:"mb-2 pb-2 border-b-2 border-gray-200",children:[n.jsxs("div",{className:"flex justify-between mb-1 text-xs",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-bold text-gray-800",children:[ee.subtotal.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold text-green-600",children:[n.jsx("span",{children:":"}),n.jsxs("span",{children:[ee.total_amount.toFixed(2)," MAD"]})]})]}),n.jsxs("div",{className:"mb-2 pb-2 border-b-2 border-gray-200 space-y-1",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-gray-600",children:" :"}),n.jsx("input",{type:"number",value:ee.paid_amount,onChange:oe=>ci(parseFloat(oe.target.value)||0),className:"w-full p-1 border-2 border-gray-200 rounded font-bold text-sm focus:border-green-500 focus:outline-none"})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:`font-bold ${ee.remaining_amount>0?"text-red-600":"text-green-600"}`,children:[ee.remaining_amount.toFixed(2)," MAD"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[n.jsx("button",{onClick:()=>{Se(null),qe("")},className:"bg-gray-500 hover:bg-gray-600 text-white py-1 rounded font-bold text-xs transition-all",children:""}),n.jsx("button",{onClick:async()=>{if(ee.lines.length>0)try{let oe=h==null?void 0:h.id;if(!oe){const{data:bt}=await we.from("clients").select("id").eq("company_name_ar"," ").maybeSingle();if(bt)oe=bt.id;else{const{data:St}=await we.from("clients").insert({company_name_ar:" ",company_name_en:"General Client"}).select().single();oe=St==null?void 0:St.id}}const{data:Ie,error:Ze}=await we.from("invoices").insert({invoice_number:ee.invoice_number,client_id:oe,status:"draft",subtotal:ee.subtotal,total_amount:ee.total_amount,paid_amount:0,invoice_date:new Date().toISOString(),due_date:new Date().toISOString(),items:ee.lines.filter(bt=>!bt.deleted).map(bt=>({product_id:bt.product_id,product_name:bt.product_name_ar,quantity:bt.quantity,unit_price:bt.unit_price,total:bt.total}))}).select().single();if(Ze)throw Ze;wt([...At,{...ee,status:"draft",id:Ie.id}]),Se(null),qe(""),f(null),E(0)}catch(oe){console.error("Error putting invoice on hold:",oe),alert("       ")}},disabled:ee.lines.length===0,className:"bg-orange-500 hover:bg-orange-600 text-white py-1 rounded font-bold text-xs disabled:opacity-50 transition-all",children:""}),n.jsxs("button",{onClick:()=>ye(!0),className:"bg-blue-500 hover:bg-blue-600 text-white py-1 rounded font-bold text-xs transition-all col-span-2",children:["  (",At.length,")"]}),n.jsx("button",{onClick:$t,disabled:ee.lines.length===0,className:"bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold text-sm disabled:opacity-50 transition-all col-span-2",children:" "})]})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"    "}),n.jsx("button",{onClick:()=>Hn(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold",children:"  "})]})}),g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>w(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-96 max-h-96 overflow-auto",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800",children:" "}),n.jsx("button",{onClick:()=>{w(!1),x(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold text-sm transition-colors",children:"  "})]}),n.jsx("div",{className:"space-y-2",children:u.map(oe=>n.jsx("button",{onClick:()=>{f(oe),w(!1)},className:"w-full text-right p-3 hover:bg-green-100 rounded-lg transition-colors text-gray-800 font-medium border-2 border-gray-200",children:oe.company_name_ar||oe.company_name_en||oe.name_ar||oe.name||"  "},oe.id))})]})}),Re&&ze&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>Dt(),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-[400px]",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-bold",children:ze.product_name_ar}),n.jsx("button",{onClick:Dt,className:"text-gray-500 hover:text-gray-700",children:n.jsx(Xa,{size:24})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),n.jsx("input",{type:"number",min:"1",value:mt,onChange:oe=>at(oe.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" (MAD)"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:it,onChange:oe=>jt(oe.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:et,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""}),n.jsx("button",{onClick:Dt,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]})]})}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>x(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 sm:p-6 lg:p-8 max-w-md sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"  "}),n.jsx("button",{type:"button",onClick:()=>x(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition",children:n.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:Fo,className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"  ()"}),n.jsx("input",{type:"text",value:V.company_name_ar,onChange:oe=>ie({...V,company_name_ar:oe.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"   ...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"  (English)"}),n.jsx("input",{type:"text",value:V.company_name_en,onChange:oe=>ie({...V,company_name_en:oe.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"Enter company name in English..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"  "}),n.jsx("input",{type:"text",value:V.contact_person_name,onChange:oe=>ie({...V,contact_person_name:oe.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"   ...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:" "}),n.jsx("input",{type:"email",value:V.contact_person_email,onChange:oe=>ie({...V,contact_person_email:oe.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"example@email.com",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsx("input",{type:"tel",value:V.contact_person_phone,onChange:oe=>ie({...V,contact_person_phone:oe.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"06xxxxxxxx ou 07xxxxxxxx",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsx("textarea",{value:V.address,onChange:oe=>ie({...V,address:oe.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base resize-none",placeholder:"  ...",rows:3})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsxs("select",{value:V.subscription_tier,onChange:oe=>ie({...V,subscription_tier:oe.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",children:[n.jsx("option",{value:"A",children:" A"}),n.jsx("option",{value:"B",children:" B"}),n.jsx("option",{value:"C",children:" C"}),n.jsx("option",{value:"D",children:" D"}),n.jsx("option",{value:"E",children:" E"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-3 sm:pt-4",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-indigo-600 text-white py-2 px-3 sm:px-4 rounded-lg hover:bg-indigo-700 transition font-medium text-sm sm:text-base",children:""}),n.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-3 sm:px-4 rounded-lg hover:bg-gray-300 transition font-medium text-sm sm:text-base",children:""})]})]})]})}),se&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>ye(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-[500px] max-h-[80vh] overflow-auto",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[n.jsx(Hr,{className:"text-blue-600"}),"  (",At.length,")"]}),n.jsx("button",{onClick:()=>ye(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(Xa,{size:24})})]}),At.length===0?n.jsxs("div",{className:"text-center text-gray-400 py-8",children:[n.jsx(Hr,{size:48,className:"mx-auto mb-2"}),n.jsx("p",{children:"    "})]}):n.jsx("div",{className:"space-y-3",children:At.map(oe=>{var Ie,Ze;return n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-gray-800",children:oe.client_name||" "}),n.jsx("p",{className:"text-sm text-gray-600",children:new Date(oe.created_at).toLocaleString("fr-FR")}),n.jsxs("p",{className:"text-sm text-gray-600",children:[((Ie=oe.items)==null?void 0:Ie.length)||0," /"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[((Ze=oe.total_amount)==null?void 0:Ze.toFixed(2))||"0.00"," MAD"]})})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs("button",{onClick:()=>Ti(oe),className:"flex-1 bg-green-600 text-white py-2 rounded-lg font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[n.jsx(TD,{size:18}),""]}),n.jsx("button",{onClick:()=>X(oe.id),className:"bg-red-500 text-white py-2 px-4 rounded-lg font-bold hover:bg-red-600 transition-colors",children:n.jsx(UD,{size:18})})]})]},oe.id)})})]})}),re&&Ne&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>Qe(),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-[400px]",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-bold",children:Ne.name_ar}),n.jsx("button",{onClick:Qe,className:"text-gray-500 hover:text-gray-700",children:n.jsx(Xa,{size:24})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),n.jsx("input",{type:"number",min:"1",value:Be,onChange:oe=>Ve(oe.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" (MAD)"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:ne,onChange:oe=>Me(oe.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:Ee,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""}),n.jsx("button",{onClick:Qe,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]})]})}),y&&ee&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>_(!1),children:n.jsxs("div",{className:"bg-white shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-hidden flex flex-col",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("h1",{className:"text-4xl font-bold mb-2",children:He.company_name_ar||He.company_name||"BA9ALINO"}),He.ice&&n.jsxs("p",{className:"text-blue-100 text-sm",children:["ICE: ",He.ice]}),He.address_ar&&n.jsx("p",{className:"text-blue-100 text-sm",children:He.address_ar}),He.phone&&n.jsxs("p",{className:"text-blue-100 text-sm",children:[": ",He.phone]}),He.email&&n.jsxs("p",{className:"text-blue-100 text-sm",children:[" : ",He.email]})]}),n.jsxs("div",{className:"text-left",children:[n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm px-4 py-2 rounded-lg",children:[n.jsx("p",{className:"text-xs text-blue-100",children:" "}),n.jsx("p",{className:"text-xl font-bold",children:ee.invoice_number})]}),n.jsx("p",{className:"text-sm text-blue-100 mt-2",children:new Date(ee.created_at).toLocaleDateString("ar-DZ")})]})]}),n.jsx("div",{className:"mt-4 flex justify-center",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white/20 backdrop-blur-sm px-4 py-2 rounded-lg",children:[n.jsx("input",{type:"checkbox",checked:K,onChange:oe=>P(oe.target.checked),className:"w-4 h-4 text-green-600 border-white rounded focus:ring-green-500"}),n.jsx("span",{className:"text-sm font-medium text-white",children:"    (TVA)"})]})}),K&&n.jsxs("div",{className:"mt-2 flex justify-center gap-4",children:[n.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"tvaRate",checked:te===7,onChange:()=>J(7),className:"w-3 h-3 text-white border-white focus:ring-green-500"}),n.jsx("span",{className:"text-xs text-white",children:"7%"})]}),n.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"tvaRate",checked:te===10,onChange:()=>J(10),className:"w-3 h-3 text-white border-white focus:ring-green-500"}),n.jsx("span",{className:"text-xs text-white",children:"10%"})]}),n.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"tvaRate",checked:te===20,onChange:()=>J(20),className:"w-3 h-3 text-white border-white focus:ring-green-500"}),n.jsx("span",{className:"text-xs text-white",children:"20%"})]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[n.jsxs("div",{className:"mb-6 text-right",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:":"}),n.jsx("p",{className:"text-lg font-bold text-gray-800",children:ee.client_name})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100 border-2 border-gray-800",children:[n.jsx("th",{className:"border border-gray-800 py-3 px-4 text-center font-bold text-gray-800",children:""}),n.jsx("th",{className:"border border-gray-800 py-3 px-4 text-center font-bold text-gray-800",children:""}),n.jsx("th",{className:"border border-gray-800 py-3 px-4 text-right font-bold text-gray-800",children:""}),n.jsx("th",{className:"border border-gray-800 py-3 px-4 text-left font-bold text-gray-800",children:""}),n.jsx("th",{className:"border border-gray-800 py-3 px-4 text-left font-bold text-gray-800",children:""})]})}),n.jsx("tbody",{children:ee.lines.map((oe,Ie)=>n.jsxs("tr",{className:"border border-gray-800",children:[n.jsx("td",{className:"border border-gray-800 py-3 px-4 text-center text-gray-700",children:oe.quantity}),n.jsx("td",{className:"border border-gray-800 py-3 px-4 text-center text-gray-700",children:""}),n.jsx("td",{className:"border border-gray-800 py-3 px-4 text-right font-medium text-gray-800",children:oe.product_name_ar}),n.jsxs("td",{className:"border border-gray-800 py-3 px-4 text-left text-gray-700",children:[oe.unit_price.toFixed(2)," MAD"]}),n.jsxs("td",{className:"border border-gray-800 py-3 px-4 text-left font-bold text-gray-800",children:[oe.total.toFixed(2)," MAD"]})]},oe.id))})]})}),n.jsx("div",{className:"flex justify-end mb-6",children:n.jsx("div",{className:"w-1/2",children:n.jsx("table",{className:"w-full border-collapse",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-800 py-2 px-4 text-right text-gray-600",children:":"}),n.jsxs("td",{className:"border border-gray-800 py-2 px-4 text-left font-bold text-gray-800",children:[ee.subtotal.toFixed(2)," MAD"]})]}),K&&n.jsxs("tr",{children:[n.jsxs("td",{className:"border border-gray-800 py-2 px-4 text-right text-gray-600",children:["   (",te,"%):"]}),n.jsxs("td",{className:"border border-gray-800 py-2 px-4 text-left font-bold text-blue-600",children:[rs(ee.subtotal).toFixed(2)," MAD"]})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-800 py-2 px-4 text-right text-gray-600",children:" :"}),n.jsxs("td",{className:"border border-gray-800 py-2 px-4 text-left font-bold text-green-600",children:[ee.paid_amount.toFixed(2)," MAD"]})]}),n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("td",{className:"border border-gray-800 py-3 px-4 text-right font-bold text-gray-800",children:K?"  :":":"}),n.jsxs("td",{className:"border border-gray-800 py-3 px-4 text-left font-bold text-lg text-blue-700",children:[Fi(ee.total_amount).toFixed(2)," MAD"]})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-800 py-2 px-4 text-right text-gray-600",children:":"}),n.jsxs("td",{className:`border border-gray-800 py-2 px-4 text-left font-bold ${Fi(ee.total_amount)-ee.paid_amount>0?"text-red-600":"text-green-600"}`,children:[(Fi(ee.total_amount)-ee.paid_amount).toFixed(2)," MAD"]})]})]})})})}),n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("span",{className:`px-6 py-3 rounded-full text-lg font-bold text-white ${ee.status==="paid"?"bg-green-600":ee.status==="partial"?"bg-yellow-600":ee.status==="credit"?"bg-red-600":"bg-blue-600"}`,children:ee.status==="paid"?"":ee.status==="partial"?"":ee.status==="credit"?"":""})})]}),n.jsxs("div",{className:"bg-gray-100 p-4 border-t flex gap-2",children:[n.jsx("button",{onClick:()=>_(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 px-4 rounded-lg font-bold transition-colors",children:""}),n.jsxs("button",{onClick:()=>{_(!1),pt(!0)},className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-bold transition-colors flex items-center justify-center gap-2",children:[n.jsx(Jd,{size:16})," "]})]})]})}),I&&B&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>k(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:oe=>oe.stopPropagation(),children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-1",children:" "}),n.jsx("p",{className:"text-blue-100",children:"   "})]}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-sm text-blue-100",children:" "}),n.jsx("p",{className:"text-xl font-bold",children:B.invoice_number})]})]})}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[n.jsxs("div",{className:"text-center mb-6 border-b pb-4",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:He.company_name_ar||He.company_name||"BA9ALINO"}),He.ice&&n.jsxs("p",{className:"text-gray-600",children:["ICE: ",He.ice]}),He.address_ar&&n.jsx("p",{className:"text-gray-600",children:He.address_ar}),He.phone&&n.jsxs("p",{className:"text-gray-600",children:[": ",He.phone]}),He.email&&n.jsxs("p",{className:"text-gray-600",children:[" : ",He.email]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:" "}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsx("span",{className:"font-semibold",children:B.invoice_number})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-semibold",children:new Date(B.created_at).toLocaleDateString("ar-DZ")})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-semibold",children:new Date(B.created_at).toLocaleTimeString("ar-DZ")})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:" "}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsx("span",{className:"font-semibold",children:B.client_name})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsx("span",{className:`font-semibold px-2 py-1 rounded text-xs text-white ${B.status==="paid"?"bg-green-600":B.status==="partial"?"bg-yellow-600":"bg-red-600"}`,children:B.status==="paid"?"":B.status==="partial"?"":""})]})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" "}),n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-100 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-800",children:""}),n.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-800",children:""}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-800",children:""}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-800",children:""}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-800",children:""})]})}),n.jsx("tbody",{children:B.lines.map((oe,Ie)=>n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4 text-center text-gray-700",children:oe.quantity}),n.jsx("td",{className:"py-3 px-4 text-center text-gray-700",children:""}),n.jsx("td",{className:"py-3 px-4 font-medium text-gray-800",children:oe.product_name_ar}),n.jsxs("td",{className:"py-3 px-4 text-left text-gray-700",children:[oe.unit_price.toFixed(2)," MAD"]}),n.jsxs("td",{className:"py-3 px-4 text-left font-semibold text-gray-800",children:[oe.total.toFixed(2)," MAD"]})]},oe.id))})]})})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" "}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-semibold",children:[(B.subtotal||0).toFixed(2)," MAD"]})]}),B.enable_tva&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["   (",B.tva_rate,"%):"]}),n.jsxs("span",{className:"font-semibold text-blue-600",children:[(B.tva_amount||0).toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsxs("span",{className:"font-semibold text-green-600",children:[(B.paid_amount||0).toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"border-t pt-2 mt-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-bold text-gray-800",children:B.enable_tva?"  :":":"}),n.jsxs("span",{className:"font-bold text-lg text-blue-700",children:[(B.total_with_tva||B.total_amount||0).toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:`font-semibold ${(B.total_with_tva||B.total_amount||0)-(B.paid_amount||0)>0?"text-red-600":"text-green-600"}`,children:[((B.total_with_tva||B.total_amount||0)-(B.paid_amount||0)).toFixed(2)," MAD"]})]})]})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 border-t",children:[n.jsxs("div",{className:"mb-4 p-4 bg-white rounded-lg border",children:[n.jsx("div",{className:"mb-3",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:U,onChange:oe=>L(oe.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "})]})}),U&&n.jsxs("div",{className:"mr-6 space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"printFormat",checked:D==="ticket",onChange:()=>Q("ticket"),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Ticket (10/10)"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"printFormat",checked:D==="a4",onChange:()=>Q("a4"),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"}),n.jsx("span",{className:"text-sm text-gray-600",children:"A4"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-gray-600",children:n.jsx("p",{children:"  "})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{k(!1),_(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[n.jsx(Sr,{size:16})," "]}),n.jsxs("button",{onClick:()=>{S(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[n.jsx(hg,{size:16})," "]}),n.jsx("button",{onClick:()=>k(!1),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg font-semibold transition-colors",children:""})]})]})]})]})}),T&&B&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",onClick:()=>{S(!1),k(!1)},children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[420px] max-w-[92vw] p-6",onClick:oe=>oe.stopPropagation(),children:[n.jsx("div",{className:"text-center mb-6",children:n.jsx("span",{className:"inline-block bg-gray-200 text-gray-800 font-bold px-4 py-2 rounded-md",children:"  "})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("button",{onClick:()=>{ur("invoice")},className:"w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3",children:[n.jsx(Gs,{size:20})," "]}),n.jsxs("button",{onClick:()=>{ur("ticket")},className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3",children:[n.jsx(b3,{size:20})," "]}),n.jsxs("button",{onClick:()=>{ur("order")},className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3",children:[n.jsx(CD,{size:20})," "]}),n.jsxs("button",{onClick:()=>{S(!1),k(!1)},className:"w-full bg-red-600 hover:bg-red-700 text-white py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3",children:[n.jsx(Xa,{size:20}),""]})]})]})}),gt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",onClick:()=>pt(!1),children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[420px] max-w-[92vw] p-6",onClick:oe=>oe.stopPropagation(),children:[n.jsx("div",{className:"text-center mb-6",children:n.jsx("span",{className:"inline-block bg-gray-200 text-gray-800 font-bold px-4 py-2 rounded-md",children:" "})}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("button",{onClick:()=>{Et("cash"),nt({bank_name_ar:"",check_number:"",check_date:"",debt_due_date:""}),ee&&(Se({...ee,status:"paid",paid_amount:ee.total_amount}),E(ee.total_amount))},className:`w-full py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3 ${ot==="cash"?"bg-green-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:[n.jsx(Sr,{size:20}),""]}),n.jsxs("button",{onClick:()=>{Et("check"),nt({bank_name_ar:"",check_number:"",check_date:"",debt_due_date:""}),ee&&(Se({...ee,status:"paid",paid_amount:ee.total_amount}),E(ee.total_amount))},className:`w-full py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3 ${ot==="check"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:[n.jsx(Gs,{size:20}),""]}),n.jsxs("button",{onClick:()=>{Et("debt"),nt({bank_name_ar:"",check_number:"",check_date:"",debt_due_date:""}),ee&&(Se({...ee,status:"credit",paid_amount:0}),E(0))},className:`w-full py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3 ${ot==="debt"?"bg-orange-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:[n.jsx(Hr,{size:20})," ()"]})]}),ot==="check"&&n.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),n.jsxs("select",{value:ht.bank_name_ar,onChange:oe=>nt({...ht,bank_name_ar:oe.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",children:[n.jsx("option",{value:"",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:"  ",children:"  "}),n.jsx("option",{value:"  ",children:"  "}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:"   ",children:"   "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:"HSBC",children:"HSBC"}),n.jsx("option",{value:"BMCE",children:"BMCE"}),n.jsx("option",{value:"CIH",children:"CIH"}),n.jsx("option",{value:" ",children:" "})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:ht.check_number,onChange:oe=>nt({...ht,check_number:oe.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"  "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"date",value:ht.check_date,onChange:oe=>nt({...ht,check_date:oe.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]})]}),ot==="debt"&&n.jsx("div",{className:"space-y-4 mb-6 p-4 bg-orange-50 rounded-lg",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"date",value:ht.debt_due_date,onChange:oe=>nt({...ht,debt_due_date:oe.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:outline-none"})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>{if(ot==="check"&&(!ht.bank_name_ar||!ht.check_number||!ht.check_date)){alert("    ");return}if(ot==="debt"&&!ht.debt_due_date){alert("   ");return}pt(!1),Ct()},className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3",children:[n.jsx(Jd,{size:20})," "]}),n.jsxs("button",{onClick:()=>pt(!1),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3",children:[n.jsx(Xa,{size:20}),""]})]})]})})]})}function MD(){var K;const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState([]),[i,o]=H.useState(null),[l,c]=H.useState([]),[A,d]=H.useState(!0),[h,f]=H.useState(!1),[u,p]=H.useState(null),[g,w]=H.useState(!1),[v,x]=H.useState(null);H.useEffect(()=>{y()},[]);const y=async()=>{d(!0);try{console.log(" Loading credits...");const{data:P,error:te}=await we.from("invoices").select(`
          *,
          client:clients(id, company_name_ar),
          payments (*)
        `).order("created_at",{ascending:!0});if(console.log(" Raw credits data:",P==null?void 0:P.length,"invoices"),console.log(" Credits Error:",te),te){console.error("Supabase credits error:",te);return}if(P){console.log(" Processing",P.length,"invoices for credits");const J=P.filter(C=>{var O,q;const E=C.payment_method||((q=(O=C.payments)==null?void 0:O[0])==null?void 0:q.payment_method);return E==="check"||E==="cheque"}),V=P.filter(C=>{var se,ye;const E=(C.total_amount||0)-(C.paid_amount||0),O=C.payment_method||((ye=(se=C.payments)==null?void 0:se[0])==null?void 0:ye.payment_method),q=C.payment_status==="partial"||C.payment_status==="credit"||E>0;return console.log(` Invoice ${C.invoice_number}: status=${C.payment_status}, remaining=${E}, isUnpaid=${q}`),q&&O!=="check"&&O!=="cheque"}),ie=J.map(C=>{var E,O;return{...C,remaining:C.remaining||0,payment_method:C.payment_method||((O=(E=C.payments)==null?void 0:E[0])==null?void 0:O.payment_method)||"check",payment_status:C.payment_status||"pending",paid_amount:C.paid_amount||0}});a(ie);const Y=new Map;V.forEach(C=>{var de;const E=C.client_id,O=((de=C.client)==null?void 0:de.company_name_ar)||"  ",q=(C.total_amount||0)-(C.paid_amount||0);Y.has(E)||Y.set(E,{client_id:E,client_name:O,client_phone:void 0,total_debt:0,total_paid:0,remaining:0,invoices_count:0,oldest_debt_date:C.created_at||C.invoice_date,days_overdue:0});const se=Y.get(E);se.total_debt+=C.total_amount||0,se.total_paid+=C.paid_amount||0,se.remaining+=q,se.invoices_count+=1;const ye=new Date(se.oldest_debt_date),re=new Date;se.days_overdue=Math.floor((re.getTime()-ye.getTime())/(1e3*60*60*24))});const N=Array.from(Y.values()).sort((C,E)=>E.remaining-C.remaining);console.log(" Final credits processed:",N.length,"clients"),console.log(" Total debt amount:",N.reduce((C,E)=>C+E.remaining,0)),r(N)}}catch(P){console.error("Error loading credits:",P)}finally{d(!1)}},_=async P=>{const{data:te}=await we.from("invoices").select(`
        *,
        payments (*)
      `).eq("client_id",P).order("created_at",{ascending:!1});if(te){const V=te.filter(ie=>{const Y=(ie.total_amount||0)-(ie.paid_amount||0);return ie.payment_status==="partial"||ie.payment_status==="credit"||Y>0}).map(ie=>{var Y,N;return{...ie,remaining:(ie.total_amount||0)-(ie.paid_amount||0),payment_method:((N=(Y=ie.payments)==null?void 0:Y[0])==null?void 0:N.payment_method)||null}});c(V)}},I=P=>{if(!P)return"-";switch(P){case"cash":return n.jsxs("span",{className:"flex items-center gap-1 text-green-700 font-semibold",children:[n.jsx(Sr,{size:14}),""]});case"check":return n.jsxs("span",{className:"flex items-center gap-1 text-blue-700 font-semibold",children:[n.jsx(Gs,{size:14}),""]});case"debt":return n.jsxs("span",{className:"flex items-center gap-1 text-orange-700 font-semibold",children:[n.jsx(Hr,{size:14}),""]});default:return P}},k=P=>{o(P),_(P.client_id)},T=P=>{p(P),f(!0)},S=async(P,te,J)=>{try{const V=s.find(E=>E.id===P);if(!V)return;const ie=V.total_amount||0,Y=J||0,N=Math.max(0,ie-Y),{error:C}=await we.from("invoices").update({paid_amount:Y,remaining_amount:N}).eq("id",P);if(C){console.error("Error updating invoice status:",C),alert("    ");return}a(E=>E.map(O=>O.id===P?{...O,payment_status:te==="unpaid"?"pending":te,paid_amount:Y,remaining:N}:O)),w(!1),alert("    ")}catch(V){console.error("Error updating cheque status:",V),alert("    ")}},B=t.reduce((P,te)=>P+te.remaining,0),[R,U]=H.useState([]);H.useEffect(()=>{L()},[]);const L=async()=>{try{console.log(" Loading all invoices...");const{data:P,error:te}=await we.from("invoices").select(`
          *,
          client:clients(id, company_name_ar),
          payments (*)
        `).order("created_at",{ascending:!1});if(console.log(" Raw invoices data:",P==null?void 0:P.length,"invoices"),console.log(" Error:",te),te){console.error("Supabase error:",te);return}if(P){console.log(" Processing",P.length,"invoices");const J=P.filter(V=>{const ie=(V.total_amount||0)-(V.paid_amount||0),Y=new Date(V.created_at||V.invoice_date),N=Math.floor((new Date().getTime()-Y.getTime())/(1e3*60*60*24));return console.log(` Invoice ${V.invoice_number}: remaining=${ie}, days=${N}`),ie>0&&N<=30}).map(V=>({...V,remaining:(V.total_amount||0)-(V.paid_amount||0),daysSinceInvoice:Math.floor((new Date().getTime()-new Date(V.created_at||V.invoice_date).getTime())/(1e3*60*60*24))}));console.log(" Non-due invoices found:",J.length),console.log(" Total non-due amount:",J.reduce((V,ie)=>V+ie.remaining,0)),U(J)}}catch(P){console.error("Error loading all invoices:",P)}},D=R.reduce((P,te)=>P+te.remaining,0),Q=R.length;return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(vs,{className:"text-white",size:36})," "]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-100 text-sm mb-1",children:" "}),n.jsxs("p",{className:"text-3xl font-bold",children:[B.toFixed(2)," MAD"]})]}),n.jsx(Sr,{size:48,className:"text-red-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-purple-100 text-sm mb-1",children:"  "}),n.jsxs("p",{className:"text-3xl font-bold",children:[D.toFixed(2)," MAD"]})]}),n.jsx(Hr,{size:48,className:"text-purple-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-100 text-sm mb-1",children:" "}),n.jsx("p",{className:"text-3xl font-bold",children:t.length})]}),n.jsx(_o,{size:48,className:"text-orange-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-100 text-sm mb-1",children:" "}),n.jsxs("p",{className:"text-3xl font-bold",children:[t.length>0?(B/t.length).toFixed(2):"0.00"," MAD"]})]}),n.jsx(No,{size:48,className:"text-yellow-200"})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-100 text-black",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""})]})}),n.jsx("tbody",{children:A?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:" ..."})}):t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-8 text-gray-500",children:"   "})}):t.map(P=>n.jsxs("tr",{className:"border-b hover:bg-red-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_o,{className:"text-gray-400",size:20}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:P.client_name}),P.client_phone&&n.jsx("p",{className:"text-xs text-gray-500",children:P.client_phone})]})]})}),n.jsxs("td",{className:"px-6 py-4 font-bold text-gray-700",children:[P.total_debt.toFixed(2)," MAD"]}),n.jsxs("td",{className:"px-6 py-4 font-bold text-green-600",children:[P.total_paid.toFixed(2)," MAD"]}),n.jsxs("td",{className:"px-6 py-4 font-bold text-red-600 text-lg",children:[P.remaining.toFixed(2)," MAD"]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"bg-gray-100 px-3 py-1 rounded-full font-semibold",children:P.invoices_count})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hr,{className:"text-orange-500",size:18}),n.jsxs("span",{className:"font-semibold",children:[P.days_overdue," "]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full font-bold text-sm ${P.days_overdue>30?"bg-red-100 text-red-700":P.days_overdue>15?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:P.days_overdue>30?" ":P.days_overdue>15?"":""})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>k(P),className:"bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded-lg transition-colors",title:" ",children:n.jsx(la,{size:18})}),n.jsx("button",{onClick:()=>e(`/client-tracking/${P.client_id}`),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded-lg transition-colors",title:" ",children:n.jsx(uh,{size:18})})]})})]},P.client_id))})]})})}),(R.length>0||s.length>0)&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white p-6",children:n.jsxs("h2",{className:"text-xl font-bold flex items-center gap-3",children:[n.jsx(Gs,{size:24}),"  ",n.jsxs("span",{className:"bg-orange-800 px-3 py-1 rounded-full text-sm",children:[s.length,"   ",s.reduce((P,te)=>P+(te.total_amount||0),0).toFixed(2)," MAD"]})]})}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-orange-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right font-bold text-orange-900 text-sm",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-orange-900 text-sm",children:""}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-orange-900 text-sm",children:""}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-orange-900 text-sm",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-orange-900 text-sm",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-orange-900 text-sm",children:""})]})}),n.jsx("tbody",{children:s.slice(0,10).map(P=>{var te;return n.jsxs("tr",{className:"border-b hover:bg-orange-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3 font-bold text-orange-700 text-sm",children:P.invoice_number||P.id.slice(0,8)}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{children:n.jsx("p",{className:"font-semibold text-sm",children:((te=P.client)==null?void 0:te.company_name_ar)||"  "})})}),n.jsxs("td",{className:"px-4 py-3 font-bold text-sm",children:[(P.total_amount||0).toFixed(2)," MAD"]}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1 text-orange-700 font-semibold mb-1",children:[n.jsx(Gs,{size:12}),""]}),P.bank_name&&n.jsxs("p",{className:"text-gray-600 text-xs",children:[": ",P.bank_name]}),P.check_number&&n.jsxs("p",{className:"text-gray-600 text-xs",children:[": ",P.check_number]}),P.check_date&&n.jsxs("p",{className:"text-gray-600 text-xs",children:[" : ",new Date(P.check_date).toLocaleDateString("ar-DZ")]}),P.check_deposit_date&&n.jsxs("p",{className:"text-gray-600 text-xs",children:[" : ",new Date(P.check_deposit_date).toLocaleDateString("ar-DZ")]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${(P.paid_amount||0)>=(P.total_amount||0)?"bg-green-100 text-green-700":(P.paid_amount||0)>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:(P.paid_amount||0)>=(P.total_amount||0)?"":(P.paid_amount||0)>0?" ":" "}),(P.paid_amount||0)>0&&(P.paid_amount||0)<(P.total_amount||0)&&n.jsxs("span",{className:"text-xs text-gray-600",children:[": ",((P.total_amount||0)-(P.paid_amount||0)).toFixed(2)," MAD"]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>{x(P),w(!0)},className:"bg-orange-600 hover:bg-orange-700 text-white px-2 py-1 rounded text-xs font-bold transition-colors",children:" "}),n.jsx("button",{onClick:()=>{p(P),f(!0)},className:"bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded text-xs font-bold transition-colors",children:""})]})})]},P.id)})})]}),s.length>10&&n.jsxs("div",{className:"p-3 text-center text-sm text-gray-500 border-t",children:["  10   ",s.length]})]})]}),R.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-6",children:n.jsxs("h2",{className:"text-xl font-bold flex items-center gap-3",children:[n.jsx(Hr,{size:24}),"   (  30 )",n.jsxs("span",{className:"bg-purple-800 px-3 py-1 rounded-full text-sm",children:[Q,"   ",D.toFixed(2)," MAD"]})]})}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right font-bold text-purple-900 text-sm",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-purple-900 text-sm",children:""}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-purple-900 text-sm",children:""}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-purple-900 text-sm",children:""}),n.jsx("th",{className:"px-4 py-3 text-right font-bold text-purple-900 text-sm",children:""})]})}),n.jsx("tbody",{children:R.slice(0,10).map(P=>{var te;return n.jsxs("tr",{className:"border-b hover:bg-purple-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3 font-bold text-purple-700 text-sm",children:P.invoice_number||P.id.slice(0,8)}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{children:n.jsx("p",{className:"font-semibold text-sm",children:((te=P.client)==null?void 0:te.company_name_ar)||"  "})})}),n.jsxs("td",{className:"px-4 py-3 font-bold text-sm",children:[(P.total_amount||0).toFixed(2)," MAD"]}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"font-bold text-purple-600 text-sm",children:[P.remaining.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{onClick:()=>{p(P),f(!0)},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg font-bold text-xs transition-colors",children:""})})]},P.id)})})]}),R.length>10&&n.jsxs("div",{className:"p-3 text-center text-sm text-gray-500 border-t",children:["  10   ",R.length]})]})]})]}),i&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(_o,{className:"text-red-600"})," : ",i.client_name]}),n.jsx("div",{className:"space-y-3",children:l.map(P=>{var te,J;return n.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:border-red-300 transition-colors cursor-pointer",onClick:()=>T(P),children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("p",{className:"font-bold text-gray-800",children:[" #",P.invoice_number||P.id.slice(0,8)]}),I(P.payment_method)]}),n.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[n.jsx(hh,{size:14}),new Date(P.created_at).toLocaleDateString("ar-DZ")]}),P.payments&&P.payments.length>0&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[P.payments.length,"  "]})]}),n.jsxs("div",{className:"text-left",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[": ",(te=P.total_amount)==null?void 0:te.toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-sm text-green-600",children:[": ",(J=P.paid_amount)==null?void 0:J.toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-lg font-bold text-red-600",children:[": ",P.remaining.toFixed(2)," MAD"]})]})]})},P.id)})})]}),g&&v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>w(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",onClick:P=>P.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[n.jsx(Gs,{className:"text-orange-600"}),"  "]}),n.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),n.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[": ",n.jsx("span",{className:"font-bold",children:v.invoice_number})]}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" : ",n.jsxs("span",{className:"font-bold",children:[(K=v.total_amount)==null?void 0:K.toFixed(2)," MAD"]})]}),v.check_number&&n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" : ",n.jsx("span",{className:"font-bold",children:v.check_number})]}),v.check_date&&n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" : ",n.jsx("span",{className:"font-bold",children:new Date(v.check_date).toLocaleDateString("ar-DZ")})]}),v.check_deposit_date&&n.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",n.jsx("span",{className:"font-bold",children:new Date(v.check_deposit_date).toLocaleDateString("ar-DZ")})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>S(v.id,"paid",v.total_amount),className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2",children:[n.jsx(Kr,{size:18})," "]}),n.jsxs("button",{onClick:()=>{var te;const P=prompt("  :",(te=v.total_amount)==null?void 0:te.toString());if(P&&!isNaN(Number(P))){const J=Math.min(Number(P),v.total_amount||0);S(v.id,"partial",J)}},className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2",children:[n.jsx(Hr,{size:18})," "]}),n.jsxs("button",{onClick:()=>S(v.id,"unpaid",0),className:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2",children:[n.jsx(vs,{size:18})," "]})]}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("button",{onClick:()=>w(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-bold transition-colors",children:""})})]})}),h&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>f(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[n.jsx(hA,{className:"text-blue-600"})," :  #",u.invoice_number||u.id.slice(0,8)]}),n.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),(()=>{const P=Number(u.total_amount||0),J=u.payment_method==="check"||u.payment_method==="cheque"?P:Number(u.paid_amount||0),V=Math.max(0,P-J);return n.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-bold mr-2",children:[P.toFixed(2)," MAD"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-bold text-green-600 mr-2",children:[J.toFixed(2)," MAD"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-bold text-red-600 mr-2",children:[V.toFixed(2)," MAD"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsx("span",{className:"mr-2",children:I(u.payment_method)})]})]})})})(),u.payments&&u.payments.length>0?n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"  :"}),u.payments.map((P,te)=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("span",{className:"font-semibold",children:[" #",te+1]}),I(P.payment_method)]}),n.jsx("p",{className:"text-sm text-gray-600",children:new Date(P.payment_date).toLocaleDateString("ar-DZ",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n.jsxs("div",{className:"text-left",children:[n.jsxs("p",{className:"font-bold text-lg text-green-600",children:[P.amount.toFixed(2)," MAD"]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:P.status==="completed"?"":" "})]})]})},P.id))]}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Hr,{size:48,className:"mx-auto mb-3 text-gray-300"}),n.jsx("p",{children:"      "})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx("button",{onClick:()=>f(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-bold transition-colors",children:""})})]})})]})}function HD(){const[e,t]=H.useState([]),[r,s]=H.useState(!0),[a,i]=H.useState(""),[o,l]=H.useState(!1),[c,A]=H.useState(null),[d,h]=H.useState({company_name_ar:"",company_name_en:"",contact_person_name:"",contact_person_email:"",contact_person_phone:"",address:"",subscription_tier:"A"});H.useEffect(()=>{f()},[]);const f=async()=>{try{s(!0);const{data:y,error:_}=await we.from("clients").select("*").order("created_at",{ascending:!1});if(_)throw _;t(y||[])}catch(y){console.error("Error fetching clients:",y)}finally{s(!1)}},u=async y=>{y.preventDefault();try{if(c){const{error:_}=await we.from("clients").update(d).eq("id",c);if(_)throw _}else{const{error:_}=await we.from("clients").insert([d]);if(_)throw _}p(),l(!1),f()}catch(_){console.error("Error saving client:",_)}},p=()=>{h({company_name_ar:"",company_name_en:"",contact_person_name:"",contact_person_email:"",contact_person_phone:"",address:"",subscription_tier:"A"}),A(null)},g=y=>{h({company_name_ar:y.company_name_ar,company_name_en:y.company_name_en||"",contact_person_name:y.contact_person_name,contact_person_email:y.contact_person_email,contact_person_phone:y.contact_person_phone,address:y.address||"",subscription_tier:y.subscription_tier}),A(y.id),l(!0)},w=async y=>{if(window.confirm("      "))try{const{error:_}=await we.from("clients").delete().eq("id",y);if(_)throw _;f()}catch(_){console.error("Error deleting client:",_)}},v=e.filter(y=>{var _;return y.company_name_ar.toLowerCase().includes(a.toLowerCase())||((_=y.company_name_en)==null?void 0:_.toLowerCase().includes(a.toLowerCase()))}),x=y=>({A:"bg-green-100 text-green-800",B:"bg-blue-100 text-blue-800",C:"bg-yellow-100 text-yellow-800",D:"bg-orange-100 text-orange-800",E:"bg-red-100 text-red-800"})[y]||"bg-gray-100 text-gray-800";return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),n.jsx("p",{className:"text-white mt-2",children:"  "})]}),n.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:shadow-lg transition",children:[n.jsx(ts,{size:20}),n.jsx("span",{children:" "})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 rounded-lg px-4 py-3",children:[n.jsx(cs,{size:20,className:"text-gray-400"}),n.jsx("input",{type:"text",placeholder:"  ...",value:a,onChange:y=>i(y.target.value),className:"flex-1 bg-transparent outline-none text-gray-800"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:r?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),n.jsx("p",{className:"text-gray-600 mt-4",children:" ..."})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""})]})}),n.jsx("tbody",{children:v.map(y=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition",children:[n.jsx("td",{className:"py-4 px-6 text-gray-800 font-medium",children:y.company_name_ar}),n.jsx("td",{className:"py-4 px-6 text-gray-800",children:y.contact_person_name}),n.jsx("td",{className:"py-4 px-6 text-gray-600",children:y.contact_person_email}),n.jsx("td",{className:"py-4 px-6 text-gray-600",children:y.contact_person_phone}),n.jsx("td",{className:"py-4 px-6 text-gray-600",children:y.address||"-"}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${x(y.subscription_tier)}`,children:y.subscription_tier})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",children:n.jsx(la,{size:18})}),n.jsx("button",{onClick:()=>g(y),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition",children:n.jsx(no,{size:18})}),n.jsx("button",{onClick:()=>w(y.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:n.jsx(na,{size:18})})]})})]},y.id))})]})})}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 sm:p-6 lg:p-8 max-w-md sm:max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:c?" ":"  "}),n.jsx("button",{type:"button",onClick:()=>{p(),l(!1)},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition",children:n.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:u,className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"  ()"}),n.jsx("input",{type:"text",value:d.company_name_ar,onChange:y=>h({...d,company_name_ar:y.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"   ...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"  (English)"}),n.jsx("input",{type:"text",value:d.company_name_en,onChange:y=>h({...d,company_name_en:y.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"Enter company name in English..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"  "}),n.jsx("input",{type:"text",value:d.contact_person_name,onChange:y=>h({...d,contact_person_name:y.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"   ...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:" "}),n.jsx("input",{type:"email",value:d.contact_person_email,onChange:y=>h({...d,contact_person_email:y.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"example@email.com",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsx("input",{type:"tel",value:d.contact_person_phone,onChange:y=>h({...d,contact_person_phone:y.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",placeholder:"06xxxxxxxx ou 07xxxxxxxx",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsx("textarea",{value:d.address,onChange:y=>h({...d,address:y.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base resize-none",placeholder:"  ...",rows:3})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsxs("select",{value:d.subscription_tier,onChange:y=>h({...d,subscription_tier:y.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none text-sm sm:text-base",children:[n.jsx("option",{value:"A",children:" A"}),n.jsx("option",{value:"B",children:" B"}),n.jsx("option",{value:"C",children:" C"}),n.jsx("option",{value:"D",children:" D"}),n.jsx("option",{value:"E",children:" E"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-3 sm:pt-4",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-indigo-600 text-white py-2 px-3 sm:px-4 rounded-lg hover:bg-indigo-700 transition font-medium text-sm sm:text-base",children:c?"":""}),n.jsx("button",{type:"button",onClick:()=>{p(),l(!1)},className:"flex-1 bg-gray-200 text-gray-800 py-2 px-3 sm:px-4 rounded-lg hover:bg-gray-300 transition font-medium text-sm sm:text-base",children:""})]})]})]})})]})}function KD(){var Qa,As,ci,Fi,rs,Fo,Kn,Ti;const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(!0),[i,o]=H.useState(""),[l,c]=H.useState("all"),[A,d]=H.useState("all"),[h,f]=H.useState({start:"",end:""}),[u,p]=H.useState(null),[g,w]=H.useState(!1),[v,x]=H.useState(!1),[y,_]=H.useState(!1),[I,k]=H.useState(!1),[T,S]=H.useState(""),[B,R]=H.useState({amount:"",payment_method:"cash",payment_date:new Date().toISOString().split("T")[0]}),[U,L]=H.useState({bank_name:"",cheque_number:"",deposit_date:""}),[D,Q]=H.useState(0),[K,P]=H.useState(!1),[te,J]=H.useState(!1),[V,ie]=H.useState([]),[Y,N]=H.useState([]),[C,E]=H.useState(""),[O,q]=H.useState(""),[se,ye]=H.useState({}),[re,de]=H.useState([]),[Ne,z]=H.useState([]),[Be,Ve]=H.useState([]),[ne,Me]=H.useState({client_id:"",phone:"",delivery_address:"",order_date:new Date().toISOString().split("T")[0],delivery_date:"",coupon_id:"",notes:"",tva_rate:0,warehouse_id:""}),[Re,Ye]=H.useState(!1),[ze,yt]=H.useState(!1),[mt,at]=H.useState(!1),[it,jt]=H.useState(1),[gt,pt]=H.useState([]),[ot,Et]=H.useState({company_name_ar:"",address:"",city:"",contact_person_phone:"",subscription_tier:"A"}),[ht,nt]=H.useState([]),[ee,Se]=H.useState([]),[je,qe]=H.useState(!1),At=(X,Ee)=>`${X}`;H.useEffect(()=>{wt(),xe();const X=Ee=>{wt()};return window.addEventListener("payment-updated",X),()=>{window.removeEventListener("payment-updated",X)}},[]),H.useEffect(()=>{dt(),He(),nr(),ft(),Kt(),ir(),xt()},[]),H.useEffect(()=>{if(!K)return;const X=localStorage.getItem("order_create_draft");if(X)try{const Ee=JSON.parse(X);if(!window.confirm("   .   "))return;Ee!=null&&Ee.orderData&&Me(et=>({...et,...Ee.orderData,order_date:Ee.orderData.order_date||et.order_date,delivery_date:Ee.orderData.delivery_date||""})),Array.isArray(Ee==null?void 0:Ee.orderItems)&&z(Ee.orderItems),(Ee==null?void 0:Ee.selectedCategoryId)!==void 0&&E(Ee.selectedCategoryId||""),typeof(Ee==null?void 0:Ee.productSearchTerm)=="string"&&q(Ee.productSearchTerm)}catch{}},[K]);const wt=async()=>{try{a(!0);const{data:X,error:Ee}=await we.from("orders").select("*").order("order_date",{ascending:!1});if(Ee)throw console.error("Simple query failed:",Ee),Ee;console.log("Orders fetched successfully:",(X==null?void 0:X.length)||0,"orders"),r(X||[])}catch(X){console.error("Error fetching orders:",X)}finally{a(!1)}},He=async()=>{try{const{data:X,error:Ee}=await we.from("product_categories").select("id, name_ar, name_en").order("name_ar");if(Ee)throw Ee;N(X||[])}catch(X){console.error("Error fetching categories:",X),N([])}},ft=async()=>{try{const{data:X,error:Ee}=await we.from("product_variants").select("id, product_id, variant_name, unit_type, quantity_contained, barcode, purchase_price, price_a, price_b, price_c, price_d, price_e, stock, alert_threshold, is_active, is_default").eq("is_active",!0).order("product_id");if(Ee)throw Ee;const Qe={};(X||[]).forEach(et=>{const Dt=String(et.product_id);Qe[Dt]||(Qe[Dt]=[]),Qe[Dt].push(et)}),ye(Qe)}catch(X){console.error("Error fetching variants:",X),ye({})}},Je=H.useMemo(()=>{const X=O.trim().toLowerCase();return(re||[]).filter(Ee=>!C||Ee.category_id===C?X?(Ee.name_ar||"").toLowerCase().includes(X)||(Ee.sku||"").toLowerCase().includes(X):!0:!1)},[re,O,C]),dt=async()=>{try{const{data:X,error:Ee}=await we.from("clients").select("id, company_name_ar, company_name_en, address, city, contact_person_phone, subscription_tier").eq("is_active",!0).order("company_name_ar");if(Ee)throw Ee;ie(X||[])}catch(X){console.error("Error fetching clients:",X)}},nr=async()=>{try{const{data:X,error:Ee}=await we.from("products").select("id, sku, name_ar, price, price_a, price_b, price_c, price_d, price_e, image_url, category_id").order("name_ar");if(Ee)throw Ee;de(X||[])}catch(X){console.error("Error fetching products:",X)}},Kt=async()=>{try{const{data:X,error:Ee}=await we.from("coupons").select("*").eq("is_active",!0).order("code");if(Ee)throw Ee;Ve(X||[])}catch(X){console.error("Error fetching coupons:",X),Ve([])}},xt=async()=>{try{const{data:X,error:Ee}=await we.from("warehouses").select("id, name, is_active").eq("is_active",!0).order("name");if(Ee)throw Ee;nt(X||[]),X&&X.length>0&&!ne.warehouse_id&&Me(Qe=>({...Qe,warehouse_id:X[0].id}))}catch(X){console.error("Error fetching warehouses:",X),nt([])}},ir=async()=>{try{const{data:X,error:Ee}=await we.from("stock").select("product_id, quantity_in_stock, quantity_available, quantity_reserved");if(Ee)throw Ee;let Qe=null;try{const{data:Tt,error:$t}=await we.from("order_items").select("product_id, quantity, orders!inner(status)").in("orders.status",["confirmed","processing","shipped"]);if(!$t)Qe=Tt;else{const{data:Ct,error:ur}=await we.from("orders").select("status").or("status.eq.confirmed,status.eq.processing,status.eq.shipped");ur||(Qe=Ct)}}catch(Tt){console.warn("Could not fetch orders data, using stock data only:",Tt),Qe=null}const et={};Qe&&Qe.forEach(Tt=>{if(Tt.product_id&&Tt.quantity){const $t=Tt.product_id,Ct=Tt.quantity||0;et[$t]=(et[$t]||0)+Ct}else Tt.items&&Array.isArray(Tt.items)&&Tt.items.forEach($t=>{var js;const Ct=$t.product_id||((js=$t.product)==null?void 0:js.id),ur=$t.quantity||0;Ct&&(et[Ct]=(et[Ct]||0)+ur)})});const Dt=(X||[]).map(Tt=>{const $t=et[Tt.product_id]||0,ur=(Tt.quantity_reserved||0)+$t;return{...Tt,quantity_reserved:ur,quantity_available:Math.max(0,(Tt.quantity_in_stock||0)-ur)}});pt(Dt)}catch(X){console.error("Error fetching stock data:",X),pt([])}},Dr=async()=>{if(!ot.company_name_ar||!ot.address||!ot.city||!ot.contact_person_phone){alert("       ");return}try{const{data:X,error:Ee}=await we.from("clients").insert([{company_name_ar:ot.company_name_ar,address:ot.address,city:ot.city,contact_person_phone:ot.contact_person_phone,subscription_tier:ot.subscription_tier,is_active:!0}]).select().single();if(Ee)throw Ee;ie([...V,X]),Me({...ne,client_id:X.id}),Et({company_name_ar:"",address:"",city:"",contact_person_phone:"",subscription_tier:"A"}),J(!1),alert("   ")}catch(X){console.error("Error creating client:",X),alert("    ")}},ys=X=>{if(Me({...ne,client_id:X}),Ye(!1),yt(!1),X){const Ee=V.find(Qe=>Qe.id===X);if(Ee){const Qe=Ee.contact_person_phone,et=Ee.address;Me(Dt=>({...Dt,phone:Qe||"",delivery_address:et?`${Ee.address}, ${Ee.city||""}`:""})),(Qe||et)&&(at(!0),setTimeout(()=>at(!1),3e3)),sn(Ee.subscription_tier)}}else Me(Ee=>({...Ee,phone:"",delivery_address:""})),sn()},sn=X=>{z(Ee=>Ee.map(Qe=>{const et=re.find(Tt=>Tt.id===Qe.product_id);if(!et)return Qe;let Dt=Cs(et);return{...Qe,unit_price:Dt,line_total:Qe.quantity*Dt}}))},Cs=X=>{const Ee=X.price_e??X.price??X.price_a??X.price_b??X.price_c??X.price_d??0;if(!ne.client_id)return Number(Ee)||0;const Qe=V.find(Dt=>Dt.id===ne.client_id);if(!Qe)return Number(Ee)||0;let et=0;switch(Qe.subscription_tier){case"A":et=X.price_a||Ee||0;break;case"B":et=X.price_b||Ee||0;break;case"C":et=X.price_c||Ee||0;break;case"D":et=X.price_d||Ee||0;break;case"E":et=X.price_e||Ee||0;break;default:et=Ee||0}if(et===0){const Tt=[X.price_a,X.price_b,X.price_c,X.price_d,X.price_e,X.price].find($t=>$t&&$t>0);Tt?et=Tt:console.warn("All prices are 0 for product:",X.name_ar)}return et},Rt=()=>{let X=Ne.reduce((et,Dt)=>et+Dt.line_total,0);if(ne.coupon_id){const et=Be.find(Dt=>Dt.id===ne.coupon_id);et&&(et.discount_type==="percentage"?X=X*(1-et.discount_value/100):X=X-et.discount_value)}const Ee=X*(ne.tva_rate/100),Qe=X+Ee;return Math.max(0,Qe)},Fr=()=>{let X=Ne.reduce((Ee,Qe)=>Ee+Qe.line_total,0);if(ne.coupon_id){const Ee=Be.find(Qe=>Qe.id===ne.coupon_id);Ee&&(Ee.discount_type==="percentage"?X=X*(1-Ee.discount_value/100):X=X-Ee.discount_value)}return Math.max(0,X)},Br=()=>Fr()*(ne.tva_rate/100),Tr=X=>{const Ee=V.find(et=>et.id===ne.client_id);switch(Ee==null?void 0:Ee.subscription_tier){case"A":return X.price_a;case"B":return X.price_b;case"C":return X.price_c;case"D":return X.price_d;case"E":return X.price_e;default:return X.price_e}},Vr=(X,Ee)=>{if(Ee){const et=gt.find(Dt=>Dt.product_id===X&&Dt.warehouse_id===Ee);return(et==null?void 0:et.quantity_available)||0}const Qe=gt.find(et=>et.product_id===X);return(Qe==null?void 0:Qe.quantity_available)||0},yr=(X,Ee)=>{const Qe=(se[X]||[]).find(et=>et.id===Ee);return Qe?Math.max(0,Number(Qe.stock||0)):0},qr=(X,Ee,Qe=0)=>{const et=Vr(X),Dt=Qe+Ee;if(Dt>et){const Tt=re.find(Ct=>Ct.id===X),$t=Tt?Tt.name_ar:"";return alert(`     !

${$t}:
-  : ${et}
-  : ${Dt}
-  : ${Dt-et}

      .`),!1}return!0},Z=(X,Ee=1)=>{const Qe=At(X),et=Ne.find(Ct=>At(Ct.product_id)===Qe),Dt=et?et.quantity:0;if(!qr(X,Ee,Dt))return;if(et){z(Ne.map(Ct=>At(Ct.product_id)===Qe?{...Ct,quantity:Ct.quantity+Ee,line_total:(Ct.quantity+Ee)*Ct.unit_price}:Ct));return}const Tt=re.find(Ct=>Ct.id===X);if(!Tt){console.error("Product not found:",X);return}const $t=Cs(Tt);z([...Ne,{product_id:X,quantity:Ee,unit_price:$t,line_total:Ee*$t,product:{...Tt,name_ar:Tt.name_ar,sku:Tt.sku}}])},pe=X=>{const Ee=At(X);z(Ne.filter(Qe=>At(Qe.product_id)!==Ee))},Ae=(X,Ee)=>{if(Ee<=0)pe(X);else{if(!qr(X,0,Ee))return;z(Ne.map(Qe=>At(Qe.product_id)===At(X)?{...Qe,quantity:Ee,line_total:Ee*Qe.unit_price}:Qe))}},he=async()=>{try{const X={orderData:ne,orderItems:Ne,selectedCategoryId:C,productSearchTerm:O,created_at:new Date().toISOString(),status:"draft"},Ee=`draft_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Qe={...X,id:Ee};localStorage.setItem(`order_draft_${Ee}`,JSON.stringify(Qe)),fe(),alert("   ")}catch(X){console.error("Error saving draft:",X),alert("   ")}},fe=()=>{try{const X=[];for(let Ee=0;Ee<localStorage.length;Ee++){const Qe=localStorage.key(Ee);if(Qe&&Qe.startsWith("order_draft_")){const et=localStorage.getItem(Qe);et&&X.push(JSON.parse(et))}}X.sort((Ee,Qe)=>new Date(Qe.created_at).getTime()-new Date(Ee.created_at).getTime()),Se(X)}catch(X){console.error("Error fetching drafts from localStorage:",X),Se([])}},xe=async()=>{fe()},Fe=X=>{X!=null&&X.orderData&&Me(Ee=>({...Ee,...X.orderData,order_date:X.orderData.order_date||Ee.order_date,delivery_date:X.orderData.delivery_date||""})),Array.isArray(X==null?void 0:X.orderItems)&&z(X.orderItems),X!=null&&X.selectedCategoryId&&E(X.selectedCategoryId),X!=null&&X.productSearchTerm&&q(X.productSearchTerm),qe(!1),P(!0)},Ke=X=>{try{localStorage.removeItem(`order_draft_${X}`),fe(),alert("   ")}catch(Ee){console.error("Error deleting draft:",Ee),alert("   ")}},Ue=async(X,Ee)=>{try{let Qe=V.find(Ie=>Ie.id===X.client_id);if(!Qe){const{data:Ie,error:Ze}=await we.from("clients").select("*").eq("id",X.client_id).single();Ze?console.error(" Error fetching client from database:",Ze):Ie&&(Qe=Ie)}const et=(Qe==null?void 0:Qe.company_name_ar)||" ",Dt=X.phone||(Qe==null?void 0:Qe.contact_person_phone)||null,Tt=Qe!=null&&Qe.address?`${Qe.address}${Qe.city?`, ${Qe.city}`:""}`:null,$t=X.subtotal||0,Ct=Number(X.tax_rate||ne.tva_rate||0),ur=X.tax_amount||$t*(Ct/100),js=X.total_amount||X.final_amount||$t+ur,Er=(Ee||[]).map(Ie=>({product_id:Ie.product_id,product_name_ar:Ie.product_name_ar,product_sku:Ie.product_sku,quantity:Ie.quantity,unit_price:Ie.unit_price,line_total:Ie.line_total})),Ls={invoice_number:`FAC-${X.order_number}`,invoice_date:new Date().toISOString(),client_id:X.client_id,client_name:et,client_phone:Dt,client_address:Tt,company_name_ar:"",order_id:X.id,order_number:X.order_number,subtotal:$t,tax_rate:Ct,tax_amount:ur,discount_amount:0,total_amount:js,paid_amount:0,remaining_amount:js,currency:"MAD",status:"sent",payment_status:"unpaid",items:Er},jr=async Ie=>await we.from("invoices").insert(Ie);let{error:oe}=await jr(Ls);if(oe){const Ie=String((oe==null?void 0:oe.message)||""),Ze=String((oe==null?void 0:oe.code)||"");if(Ze==="42703"||Ze==="PGRST204"||Ie.includes("payment_status")||Ie.includes("tax_rate")||Ie.includes("tax_amount")||Ie.includes("'items'")||Ie.includes(" items ")){const St={...Ls};delete St.items,delete St.payment_status,delete St.payment_method,delete St.tax_rate,delete St.tax_amount,delete St.discount_amount,{error:oe}=await jr(St)}}oe&&console.error("Error creating invoice automatically:",oe)}catch(Qe){console.error("Unexpected error creating invoice automatically:",Qe)}},Le=async()=>{var Ee;if(!ne.client_id||!ne.phone||!ne.delivery_address||Ne.length===0){console.error(" Missing required fields for order creation"),alert("            ");return}if(Ne.reduce((Qe,et)=>Qe+Number((et.line_total??Number(et.unit_price||0)*Number(et.quantity||0))||0),0)===0){console.error(" Order total is 0 - cannot create order"),alert("       0.     .");return}try{const Qe=`ORD-${Date.now()}${Math.floor(Math.random()*1e3)}`,et=Ne.reduce((jr,oe)=>jr+Number((oe.line_total??Number(oe.unit_price||0)*Number(oe.quantity||0))||0),0),Dt=Ne.map(jr=>{var oe,Ie;return{product_id:jr.product_id,product_name_ar:(oe=jr.product)==null?void 0:oe.name_ar,product_sku:(Ie=jr.product)==null?void 0:Ie.sku,quantity:jr.quantity,unit_price:jr.unit_price,line_total:jr.line_total??Number(jr.unit_price||0)*Number(jr.quantity||0),variant_id:jr.variant_id||null}}),Tt={order_number:Qe,client_id:ne.client_id,phone:ne.phone,delivery_address:ne.delivery_address,warehouse_id:ne.warehouse_id,subtotal:Fr(),tax_amount:Br(),total_amount:et,status:"pending",payment_status:"unpaid",payment_method:null,created_at:new Date().toISOString()},{data:$t,error:Ct}=await we.from("orders").insert(Tt).select().single();if(Ct)throw console.error(" Error creating order:",Ct),Ct;const ur=Dt.map(jr=>({...jr,order_id:$t.id,created_at:new Date().toISOString()})),js=async jr=>await we.from("order_items").insert(jr);let{error:Er}=await js(ur);if(Er){const jr=String((Er==null?void 0:Er.message)||""),oe=String((Er==null?void 0:Er.code)||"");if(oe==="42703"||oe==="PGRST204"||jr.includes("Could not find the '")){const Ze=ur.map(St=>({order_id:St.order_id,product_id:St.product_id,quantity:St.quantity,unit_price:St.unit_price,line_total:St.line_total}));Er=(await js(Ze)).error}}Er&&(console.error(" Error inserting order items:",Er),console.warn("Order created but items failed to insert")),await Ue($t,ur),P(!1),at(!1),localStorage.removeItem("order_create_draft"),Me({client_id:"",phone:"",delivery_address:"",order_date:new Date().toISOString().split("T")[0],delivery_date:"",coupon_id:"",notes:"",tva_rate:0,warehouse_id:((Ee=ht[0])==null?void 0:Ee.id)||""}),z([]),E(""),q(""),wt(),alert("   "),p($t),S("pending"),x(!0)}catch(Qe){console.error("Error creating order:",Qe),alert(`    : ${(Qe==null?void 0:Qe.message)||"  "}`)}},De=X=>!X.items||!Array.isArray(X.items)?0:X.items.reduce((Ee,Qe)=>Ee+(Qe.quantity||0),0),st=async()=>{if(u&&T)try{const X=u.status,{error:Ee}=await we.from("orders").update({status:T}).eq("id",u.id);if(Ee)throw console.error("Update error:",Ee),Ee;await ct(u,X,T),T==="delivered"?(x(!1),_(!0)):(x(!1),p(null),S("")),wt()}catch(X){console.error("Error updating order status:",X),alert(`    : ${(X==null?void 0:X.message)||"  "}`)}},vt=async(X,Ee)=>{try{const{data:Qe}=await we.from("payments").select("amount, status").eq("order_id",X).or("status.eq.completed,status.eq.refunded"),et=Qe||[],Dt=et.filter(Ct=>Ct.status==="completed").reduce((Ct,ur)=>Ct+Number(ur.amount||0),0),Tt=et.filter(Ct=>Ct.status==="refunded").reduce((Ct,ur)=>Ct+Number(ur.amount||0),0),$t=Math.max(0,Dt-Tt);return Ee-$t}catch(Qe){return console.error("Error calculating remaining amount:",Qe),Ee}},Bt=async()=>{if(!(!u||!B.amount))try{const X=u.final_amount||u.total_amount,Ee=parseFloat(B.amount),{data:Qe}=await we.from("payments").select("amount, status").eq("order_id",u.id).or("status.eq.completed,status.eq.refunded"),et=Qe||[],Dt=et.filter(Er=>Er.status==="completed").reduce((Er,Ls)=>Er+Number(Ls.amount||0),0),Tt=et.filter(Er=>Er.status==="refunded").reduce((Er,Ls)=>Er+Number(Ls.amount||0),0),Ct=Math.max(0,Dt-Tt)+Ee;let ur="partial";Ct>=X?ur="paid":Ct>0&&(ur="partial");const{error:js}=await we.from("orders").update({payment_status:ur,payment_method:B.payment_method}).eq("id",u.id);if(js)throw console.error(" Error updating order payment status:",js),js;if(u.id){const{data:Er,error:Ls}=await we.from("invoices").select("id, total_amount, paid_amount, order_id, order_number").eq("order_id",u.id);Ls&&console.error(" Error finding invoices:",Ls);const jr=[...Er||[]];if(jr.length===0){const{data:oe}=await we.from("invoices").select("id, total_amount, paid_amount, order_id, order_number").eq("order_number",u.order_number);oe&&oe.length>0&&jr.push(...oe)}if(jr.length>0){const oe=jr[0],Ie=Ct,Ze=Ct>=oe.total_amount?"paid":"sent",{error:bt}=await we.from("invoices").update({paid_amount:Ie,remaining_amount:oe.total_amount-Ie,status:Ze,updated_at:new Date().toISOString()}).eq("id",oe.id);bt&&console.error(" Error updating invoice payment status:",bt)}}k(!1),wt(),R({amount:"",payment_method:"cash",payment_date:new Date().toISOString().split("T")[0]}),L({bank_name:"",cheque_number:"",deposit_date:""}),window.dispatchEvent(new CustomEvent("order-payment-updated",{detail:{orderId:u.id,paymentStatus:ur,newTotalPaid:Ct}})),alert("   ")}catch(X){console.error("Error adding payment:",X),alert(`    : ${(X==null?void 0:X.message)||"  "}`)}},ct=async(X,Ee,Qe)=>{if(Ee!==Qe){if(Ee!=="delivered"&&Qe==="delivered"){await _t(X,"deduct");return}if(Ee==="delivered"&&Qe!=="delivered"){await _t(X,"restock");return}}},_t=async(X,Ee)=>{try{let Qe=X.items;if(!Qe||!Array.isArray(Qe)){const{data:et,error:Dt}=await we.from("order_items").select("product_id, variant_id, quantity").eq("order_id",X.id);if(Dt){console.error("Error fetching order items:",Dt);return}Qe=et||[]}for(const et of Qe){const{data:Dt,error:Tt}=await we.from("product_variants").select("id, stock").eq("id",et.variant_id||et.product_id).single();if(Tt){console.error("Error fetching stock item:",Tt);continue}const $t=(Dt==null?void 0:Dt.stock)||0,Ct=Ee==="deduct"?-et.quantity:et.quantity,ur=Math.max(0,$t+Ct),{error:js}=await we.from("product_variants").update({stock:ur,updated_at:new Date().toISOString()}).eq("id",Dt.id);js&&console.error("Error updating stock:",js)}}catch(Qe){console.error("Error updating stock on delivery:",Qe)}},Gt=()=>{u&&(sessionStorage.setItem("invoiceOrderData",JSON.stringify(u)),e("/invoices/create"))},Cr=()=>{u&&(sessionStorage.setItem("deliveryNoteOrderData",JSON.stringify(u)),e("/delivery-notes/create"))},cr=()=>{_(!1),p(null),S("")},Qr=H.useMemo(()=>{let X=t;const Ee=i.trim().toLowerCase();return Ee&&(X=X.filter(Qe=>{var $t,Ct;const et=String(Qe.order_number||"").toLowerCase(),Dt=String((($t=Qe.client)==null?void 0:$t.company_name_ar)||"").toLowerCase(),Tt=String(((Ct=Qe.client)==null?void 0:Ct.contact_person_email)||"").toLowerCase();return et.includes(Ee)||Dt.includes(Ee)||Tt.includes(Ee)})),l!=="all"&&(X=X.filter(Qe=>Qe.status===l)),A!=="all"&&(X=X.filter(Qe=>Qe.payment_status===A)),h.start&&(X=X.filter(Qe=>new Date(Qe.order_date)>=new Date(h.start))),h.end&&(X=X.filter(Qe=>new Date(Qe.order_date)<=new Date(h.end+"T23:59:59"))),X},[t,i,l,A,h]),nn=H.useMemo(()=>{const X=t.length,Ee=t.filter(Ct=>Ct.status==="pending").length,Qe=t.filter(Ct=>Ct.status==="processing").length,et=t.filter(Ct=>Ct.status==="shipped").length,Dt=t.filter(Ct=>Ct.status==="delivered").length,Tt=t.filter(Ct=>Ct.status==="cancelled").length,$t=t.filter(Ct=>Ct.status==="delivered").reduce((Ct,ur)=>Ct+(ur.total_amount||0),0);return{total:X,pending:Ee,processing:Qe,shipped:et,delivered:Dt,cancelled:Tt,totalRevenue:$t}},[t]),Hn=X=>{switch(X){case"pending":return n.jsx(Hr,{className:"w-4 h-4"});case"confirmed":return n.jsx(Kr,{className:"w-4 h-4"});case"processing":return n.jsx(kr,{className:"w-4 h-4"});case"shipped":return n.jsx(ym,{className:"w-4 h-4"});case"delivered":return n.jsx(Kr,{className:"w-4 h-4"});case"cancelled":return n.jsx(sl,{className:"w-4 h-4"});default:return null}},Aa=X=>{switch(X){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"processing":return"bg-purple-100 text-purple-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},an=X=>{switch(X){case"pending":return"bg-red-100 text-red-800";case"unpaid":return"bg-red-100 text-red-800";case"partial":return"bg-orange-100 text-orange-800";case"paid":return"bg-green-100 text-green-800";case"refunded":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:""}),n.jsx("p",{className:"text-white mt-2",children:"   "})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>P(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700",children:[n.jsx(ts,{className:"w-5 h-5"})," "]}),n.jsxs("button",{onClick:()=>qe(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-700",children:[n.jsx(rl,{className:"w-5 h-5"})," (",ee.length,")"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:nn.total})]}),n.jsx(kr,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:nn.pending})]}),n.jsx(Hr,{className:"w-8 h-8 text-yellow-500"})]})}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:nn.processing})]}),n.jsx(kr,{className:"w-8 h-8 text-purple-500"})]})}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:nn.shipped})]}),n.jsx(ym,{className:"w-8 h-8 text-indigo-500"})]})}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:nn.delivered})]}),n.jsx(Kr,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsxs("p",{className:"text-2xl font-bold",children:[nn.totalRevenue.toFixed(2)," MAD"]})]}),n.jsx(kr,{className:"w-8 h-8 text-emerald-500"})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"  ...",value:i,onChange:X=>o(X.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("select",{value:l,onChange:X=>c(X.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"pending",children:" "}),n.jsx("option",{value:"confirmed",children:""}),n.jsx("option",{value:"processing",children:" "}),n.jsx("option",{value:"shipped",children:" "}),n.jsx("option",{value:"delivered",children:" "}),n.jsx("option",{value:"cancelled",children:""})]}),n.jsxs("select",{value:A,onChange:X=>d(X.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"pending",children:" "}),n.jsx("option",{value:"partial",children:" "}),n.jsx("option",{value:"paid",children:" "}),n.jsx("option",{value:"refunded",children:""})]}),n.jsx("input",{type:"date",value:h.start,onChange:X=>f({...h,start:X.target.value}),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("input",{type:"date",value:h.end,onChange:X=>f({...h,end:X.target.value}),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[1400px]",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-24",children:" "}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase min-w-40",children:""}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-32",children:""}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-28",children:""}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-28",children:""}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-20",children:""}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-28",children:""}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-28",children:" "}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-28",children:" "}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-28",children:" "}),n.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase w-24",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:s?n.jsx("tr",{children:n.jsx("td",{colSpan:10,className:"px-4 py-8 text-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})}):Qr.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:10,className:"px-4 py-8 text-center text-gray-500",children:"  "})}):Qr.map(X=>{var Ee,Qe,et,Dt,Tt,$t;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-4",children:n.jsxs("p",{className:"font-medium",children:["#",X.order_number]})}),n.jsx("td",{className:"px-3 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:(Ee=X.client)==null?void 0:Ee.company_name_ar}),n.jsx("p",{className:"text-sm text-gray-500",children:(Qe=X.client)==null?void 0:Qe.contact_person_email})]})}),n.jsxs("td",{className:"px-3 py-4",children:[n.jsx("p",{className:"font-medium",children:new Date(X.order_date).toLocaleDateString("ar-MA")}),n.jsx("p",{className:"text-sm text-gray-500",children:new Date(X.order_date).toLocaleTimeString("ar-MA")})]}),n.jsx("td",{className:"px-3 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:((et=X.employee)==null?void 0:et.name)||" "}),n.jsx("p",{className:"text-sm text-gray-500",children:(Dt=X.employee)==null?void 0:Dt.role})]})}),n.jsx("td",{className:"px-3 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:((Tt=X.warehouse)==null?void 0:Tt.name)||" "}),n.jsx("p",{className:"text-sm text-gray-500",children:($t=X.warehouse)!=null&&$t.is_active?"":" "})]})}),n.jsx("td",{className:"px-3 py-4",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"font-bold text-blue-600",children:De(X)}),n.jsx("span",{className:"text-xs text-gray-500",children:""})]})}),n.jsx("td",{className:"px-3 py-4",children:n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium",children:[(X.total_amount||0).toFixed(2)," MAD"]}),X.discount_amount>0&&n.jsxs("p",{className:"text-sm text-gray-500 line-through",children:[((X.total_amount||0)+(X.discount_amount||0)).toFixed(2)," MAD"]})]})}),n.jsx("td",{className:"px-3 py-4",children:n.jsxs("span",{className:`px-2 py-1 text-xs rounded-full flex items-center gap-1 w-fit ${Aa(X.status)}`,children:[Hn(X.status),X.status==="pending"?" ":X.status==="confirmed"?"":X.status==="processing"?" ":X.status==="shipped"?" ":X.status==="delivered"?" ":X.status==="cancelled"?"":X.status]})}),n.jsx("td",{className:"px-3 py-4",children:n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${an(X.payment_status)}`,children:X.payment_status==="unpaid"?" ":X.payment_status==="partial"?" ":X.payment_status==="paid"?"":X.payment_status==="refunded"?"":X.payment_status})}),n.jsx("td",{className:"px-3 py-4",children:n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:X.payment_method==="cash"?"":X.payment_method==="check"?"":X.payment_method==="card"?"":X.payment_method==="bank_transfer"?" ":X.payment_method==="mobile_payment"?" ":X.payment_method==="credit"?"":X.payment_method||""})}),n.jsx("td",{className:"px-3 py-4",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>{p(X),w(!0)},className:"text-blue-600 hover:text-blue-800",title:" ",children:n.jsx(la,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{p(X),S(X.status),x(!0)},className:`text-green-600 hover:text-green-800 ${X.status==="delivered"&&X.payment_status==="paid"?"opacity-50 cursor-not-allowed":""}`,title:X.status==="delivered"&&X.payment_status==="paid"?"     ":" ",disabled:X.status==="delivered"&&X.payment_status==="paid",children:n.jsx(no,{className:"w-4 h-4"})}),n.jsx("button",{onClick:async()=>{p(X);const Ct=X.final_amount||X.total_amount,ur=await vt(X.id,Ct);Q(ur),R({amount:"",payment_method:"cash",payment_date:new Date().toISOString().split("T")[0]}),k(!0)},className:`text-purple-600 hover:text-purple-800 ${X.payment_status==="paid"?"opacity-50 cursor-not-allowed":""}`,title:X.payment_status==="paid"?"  ":"  ",disabled:X.payment_status==="paid",children:n.jsx(Sr,{className:"w-4 h-4"})})]})})]},X.id)})})]})})}),g&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("h2",{className:"text-xl font-bold mb-4",children:["  #",u.order_number]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:" "}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",(Qa=u.client)==null?void 0:Qa.company_name_ar]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",(As=u.client)==null?void 0:As.contact_person_email]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",(ci=u.client)==null?void 0:ci.contact_person_phone]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:" "}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",new Date(u.order_date).toLocaleString("ar-MA")]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"}),n.jsx("span",{className:`mr-2 px-2 py-1 text-xs rounded-full ${Aa(u.status)}`,children:u.status})]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"}),n.jsx("span",{className:`mr-2 px-2 py-1 text-xs rounded-full ${an(u.payment_status)}`,children:u.payment_status})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold mb-2",children:" "}),n.jsx("p",{children:(Fi=u.shipping_address)==null?void 0:Fi.street}),n.jsxs("p",{children:[(rs=u.shipping_address)==null?void 0:rs.city,", ",(Fo=u.shipping_address)==null?void 0:Fo.postal_code]}),n.jsx("p",{children:(Kn=u.shipping_address)==null?void 0:Kn.country})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold mb-2",children:" "}),n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-right",children:""}),n.jsx("th",{className:"px-4 py-2 text-right",children:""}),n.jsx("th",{className:"px-4 py-2 text-right",children:" (MAD)"}),n.jsx("th",{className:"px-4 py-2 text-right",children:" (MAD)"})]})}),n.jsx("tbody",{className:"divide-y",children:(Ti=u.items)==null?void 0:Ti.map(X=>{var Ee,Qe,et;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:X.product_name_ar||((Ee=X.product)==null?void 0:Ee.name_ar)||"Produit sans nom"}),n.jsxs("p",{className:"text-sm text-gray-500",children:[X.product_sku||((Qe=X.product)==null?void 0:Qe.sku),X.variant_name&&n.jsx("span",{className:"ml-2 text-blue-600",children:X.variant_name})]}),((et=X.product)==null?void 0:et.description)&&n.jsx("p",{className:"text-xs text-gray-400 mt-1 max-w-xs",children:X.product.description})]})}),n.jsx("td",{className:"px-4 py-2 text-center",children:X.quantity}),n.jsx("td",{className:"px-4 py-2 text-right",children:(X.unit_price||0).toFixed(2)}),n.jsx("td",{className:"px-4 py-2 text-right font-medium",children:(X.line_total||0).toFixed(2)})]},X.id)})})]})})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-gray-500",children:[" : ",(u.total_amount||0).toFixed(2)," MAD"]}),(u.discount_amount||0)>0&&n.jsxs("p",{className:"text-gray-500",children:[": -",(u.discount_amount||0).toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-xl font-bold",children:[": ",(u.total_amount||0).toFixed(2)," MAD"]})]}),n.jsx("button",{onClick:()=>{w(!1),p(null)},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:""})]})]})}),I&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[n.jsxs("h2",{className:"text-xl font-bold mb-4",children:["   #",u.order_number]}),n.jsxs("form",{onSubmit:X=>{X.preventDefault(),Bt()},className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" (MAD)"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:D,value:B.amount,onChange:X=>{(parseFloat(X.target.value)||0)<=D&&R({...B,amount:X.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:" ",required:!0}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" : ",((u==null?void 0:u.final_amount)||(u==null?void 0:u.total_amount)||0).toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["  : ",(((u==null?void 0:u.final_amount)||(u==null?void 0:u.total_amount)||0)-D).toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-xs text-green-600 mt-1 font-medium",children:[": ",D.toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[" : ",D.toFixed(2)," MAD"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsxs("select",{value:B.payment_method,onChange:X=>R({...B,payment_method:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[n.jsx("option",{value:"cash",children:" (Cash)"}),n.jsx("option",{value:"check",children:" (Cheque)"}),n.jsx("option",{value:"card",children:" (Card)"}),n.jsx("option",{value:"bank_transfer",children:"  (Bank Transfer)"}),n.jsx("option",{value:"mobile_payment",children:"  (Mobile Payment)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsx("input",{type:"date",value:B.payment_date,onChange:X=>R({...B,payment_date:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0})]}),B.payment_method==="check"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsxs("select",{value:U.bank_name,onChange:X=>L({...U,bank_name:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0,children:[n.jsx("option",{value:"",children:" "}),n.jsx("option",{value:"Attijariwafa Bank",children:"Attijariwafa Bank"}),n.jsx("option",{value:"Banque Populaire",children:"Banque Populaire"}),n.jsx("option",{value:"BMCE",children:"BMCE"}),n.jsx("option",{value:"CIH",children:"CIH"}),n.jsx("option",{value:"Crdit Agricole",children:"Crdit Agricole"}),n.jsx("option",{value:"Crdit du Maroc",children:"Crdit du Maroc"}),n.jsx("option",{value:"Socit Gnrale",children:"Socit Gnrale"}),n.jsx("option",{value:"BMCI",children:"BMCI"}),n.jsx("option",{value:"Al Barid Bank",children:"Al Barid Bank"}),n.jsx("option",{value:"AwBank",children:"AwBank"}),n.jsx("option",{value:"Bank of Africa",children:"Bank of Africa"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsx("input",{type:"text",value:U.cheque_number,onChange:X=>L({...U,cheque_number:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"  ",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsx("input",{type:"date",value:U.deposit_date,onChange:X=>L({...U,deposit_date:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{k(!1),R({amount:"",payment_method:"cash",payment_date:new Date().toISOString().split("T")[0]}),L({bank_name:"",cheque_number:"",deposit_date:""})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:""}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:" "})]})]})]})}),v&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),n.jsxs("form",{onSubmit:X=>{X.preventDefault(),st()},className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsxs("select",{value:T,onChange:X=>S(X.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"pending",children:" "}),n.jsx("option",{value:"confirmed",children:""}),n.jsx("option",{value:"processing",children:" "}),n.jsx("option",{value:"shipped",children:" "}),n.jsx("option",{value:"delivered",children:" "}),n.jsx("option",{value:"cancelled",children:""})]})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{x(!1),p(null),S("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:""}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:""})]})]})]})}),K&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 max-w-7xl w-full h-[100vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"  "}),n.jsx("button",{type:"button",onClick:()=>{P(!1),at(!1)},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),mt&&n.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg flex items-center gap-2 animate-pulse",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"text-sm font-medium",children:"        "})]}),n.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 mb-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:ne.client_id,onChange:X=>ys(X.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0,children:[n.jsx("option",{value:"",children:" ..."}),V.map(X=>n.jsxs("option",{value:X.id,children:[X.company_name_ar," ",X.subscription_tier&&`(${X.subscription_tier})`]},X.id))]}),n.jsx("button",{type:"button",onClick:()=>J(!0),className:"bg-green-600 text-white px-2 py-1 rounded-lg hover:bg-green-700 transition text-sm",children:"+"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),n.jsx("select",{value:ne.warehouse_id,onChange:X=>Me({...ne,warehouse_id:X.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:ht.length===0?n.jsx("option",{value:"",children:"  "}):ht.map(X=>n.jsx("option",{value:X.id,children:X.name},X.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),n.jsx("input",{type:"date",value:ne.order_date,onChange:X=>Me({...ne,order_date:X.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" "}),n.jsxs("select",{value:ne.coupon_id,onChange:X=>Me({...ne,coupon_id:X.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[n.jsx("option",{value:"",children:" "}),Be.map(X=>n.jsxs("option",{value:X.id,children:[X.code," - ",X.discount_type==="percentage"?`${X.discount_value}%`:`${X.discount_value} MAD`]},X.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"   (TVA)"}),n.jsxs("select",{value:ne.tva_rate,onChange:X=>Me({...ne,tva_rate:parseFloat(X.target.value)}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[n.jsx("option",{value:"0",children:" TVA"}),n.jsx("option",{value:"7",children:"7%"}),n.jsx("option",{value:"10",children:"10%"}),n.jsx("option",{value:"20",children:"20%"})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 flex-1 min-h-0",children:[n.jsx("div",{className:"lg:col-span-12",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-2 text-sm",children:""}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{type:"button",onClick:()=>E(""),className:`px-3 py-1 rounded border text-xs transition ${C?"bg-white text-gray-700 border-gray-200 hover:bg-gray-50":"bg-blue-600 text-white border-blue-600"}`,children:" "}),Y.map(X=>n.jsx("button",{type:"button",onClick:()=>E(X.id),className:`px-3 py-1 rounded border text-xs transition ${C===X.id?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:X.name_ar},X.id))]})]})}),n.jsx("div",{className:"lg:col-span-7",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:"  "}),n.jsxs("div",{className:"relative flex-1 max-w-xs mr-2",children:[n.jsx(cs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400",size:12}),n.jsx("input",{type:"text",placeholder:"  ...",value:O,onChange:X=>q(X.target.value),className:"w-full pr-8 pl-2 py-1 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2",children:Je.map(X=>{const Ee=(se[X.id]||[]).slice().sort((Tt,$t)=>Number($t.is_default)-Number(Tt.is_default)),Qe=Ee.length>0,et=Vr(X.id,ne.warehouse_id),Dt=Cs(X);return n.jsx("div",{className:"border border-gray-200 rounded-lg p-2 hover:shadow-md transition bg-white cursor-pointer hover:bg-gray-50",onClick:()=>{Qe?(Ee.find($t=>$t.is_default)||Ee[0])&&Z(X.id,1):Z(X.id,1)},children:n.jsxs("div",{className:"flex flex-col items-center text-center",children:[X.image_url?n.jsx("img",{src:X.image_url,alt:X.name_ar,className:"w-8 h-8 object-cover rounded mb-1"}):n.jsx("div",{className:"w-8 h-8 rounded bg-gray-100 flex items-center justify-center mb-1",children:n.jsx(kr,{size:12,className:"text-gray-400"})}),n.jsx("p",{className:"font-semibold text-gray-800 text-xs truncate w-full leading-tight",children:X.name_ar}),n.jsx("p",{className:"text-xs text-gray-500 truncate w-full",children:X.sku}),n.jsxs("p",{className:"text-xs text-gray-500",children:[": ",et]}),Qe?n.jsxs("div",{className:"mt-1",children:[Ee.slice(0,1).map(Tt=>{const $t=Tr(Tt),Ct=yr(X.id,Tt.id);return n.jsxs("div",{className:"text-xs",children:[n.jsxs("p",{className:"font-bold text-gray-800",children:[$t," MAD"]}),n.jsx("p",{className:"text-xs text-gray-500",children:Tt.variant_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",Ct]})]},Tt.id)}),Ee.length>1&&n.jsxs("p",{className:"text-xs text-blue-600",children:["+",Ee.length-1," "]})]}):n.jsx("div",{className:"mt-1",children:n.jsxs("p",{className:"text-xs text-gray-700 font-bold",children:[Dt," MAD"]})})]})},X.id)})})})]})}),n.jsx("div",{className:"lg:col-span-5",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:" / "}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-2 py-1 font-bold text-blue-800 text-sm",children:[Rt().toFixed(2)," MAD"]})]}),ne.tva_rate>0&&n.jsx("div",{className:"mb-3 p-2 bg-gray-50 rounded-lg border border-gray-200",children:n.jsxs("div",{className:"text-xs space-y-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsxs("span",{className:"font-medium",children:[Fr().toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-gray-600",children:["TVA (",ne.tva_rate,"%):"]}),n.jsxs("span",{className:"font-medium",children:[Br().toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between pt-1 border-t border-gray-300",children:[n.jsx("span",{className:"font-bold text-gray-800",children:":"}),n.jsxs("span",{className:"font-bold text-blue-600",children:[Rt().toFixed(2)," MAD"]})]})]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden flex-1 min-h-0",children:n.jsx("div",{className:"overflow-y-auto h-full",children:Ne.length===0?n.jsx("p",{className:"text-gray-500 text-center py-4 text-xs",children:"   "}):n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:"SKU"}),n.jsx("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:""}),n.jsx("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-700",children:""}),n.jsx("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:""}),n.jsx("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:""}),n.jsx("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-700"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:Ne.map((X,Ee)=>{var Qe,et;return Vr(X.product_id,ne.warehouse_id),n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-2 py-1 text-xs text-gray-900",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"truncate max-w-[60px]",children:(Qe=X.product)==null?void 0:Qe.sku}),X.variant_barcode&&n.jsx("span",{className:"flex items-center gap-1 text-blue-600",children:n.jsx(Ud,{size:10})})]})}),n.jsx("td",{className:"px-2 py-1 text-xs text-gray-900",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium truncate max-w-[100px]",children:(et=X.product)==null?void 0:et.name_ar}),X.variant_name&&n.jsx("p",{className:"text-xs text-gray-500 truncate",children:X.variant_name})]})}),n.jsx("td",{className:"px-2 py-1",children:n.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[n.jsx("button",{type:"button",onClick:()=>Ae(X.product_id,X.quantity-1),className:"w-4 h-4 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center",children:n.jsx("span",{className:"text-xs",children:"-"})}),n.jsx("span",{className:"w-6 text-center font-medium text-xs",children:X.quantity}),n.jsx("button",{type:"button",onClick:()=>Ae(X.product_id,X.quantity+1),className:"w-4 h-4 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center",children:n.jsx("span",{className:"text-xs",children:"+"})})]})}),n.jsx("td",{className:"px-2 py-1 text-xs text-gray-900 text-right",children:(X.unit_price||0).toFixed(2)}),n.jsx("td",{className:"px-2 py-1 text-xs text-gray-900 text-right font-medium",children:(X.line_total||0).toFixed(2)}),n.jsx("td",{className:"px-2 py-1 text-center",children:n.jsx("button",{type:"button",onClick:()=>pe(X.product_id),className:"text-red-500 hover:text-red-700",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]},`${X.product_id}-${Ee}`)})})]})})})]})})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t mt-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{type:"button",onClick:he,className:"bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 font-medium flex items-center gap-2 text-sm",children:[n.jsx(rl,{size:14})," "]}),n.jsx("button",{type:"button",onClick:()=>{P(!1),at(!1),Me({client_id:"",phone:"",delivery_address:"",order_date:new Date().toISOString().split("T")[0],delivery_date:"",coupon_id:"",notes:""}),z([]),E(""),q("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium text-sm",children:""})]}),n.jsx("button",{type:"button",onClick:Le,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-medium text-sm",children:" "})]})]})}),te&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 sm:p-6 w-full max-w-md sm:max-w-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"  "}),n.jsx("button",{type:"button",onClick:()=>J(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition",children:n.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:X=>{X.preventDefault(),Dr()},className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:" "}),n.jsx("input",{type:"text",value:ot.company_name_ar,onChange:X=>Et({...ot,company_name_ar:X.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm sm:text-base",placeholder:"  ...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsx("input",{type:"text",value:ot.address,onChange:X=>Et({...ot,address:X.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm sm:text-base",placeholder:"  ...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsx("input",{type:"text",value:ot.city,onChange:X=>Et({...ot,city:X.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm sm:text-base",placeholder:" ...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:""}),n.jsxs("select",{value:ot.subscription_tier,onChange:X=>Et({...ot,subscription_tier:X.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm sm:text-base",required:!0,children:[n.jsx("option",{value:"A",children:" A"}),n.jsx("option",{value:"B",children:" B"}),n.jsx("option",{value:"C",children:" C"}),n.jsx("option",{value:"D",children:" D"}),n.jsx("option",{value:"E",children:" E"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:" "}),n.jsx("input",{type:"tel",value:ot.contact_person_phone,onChange:X=>Et({...ot,contact_person_phone:X.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm sm:text-base",placeholder:"06xxxxxxxx ou 07xxxxxxxx",required:!0})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-3 sm:pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{J(!1),Et({company_name_ar:"",address:"",city:"",contact_person_phone:"",subscription_tier:"A"})},className:"flex-1 bg-gray-200 text-gray-800 py-2 px-3 sm:px-4 rounded-lg hover:bg-gray-300 transition font-medium text-sm sm:text-base",children:""}),n.jsx("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-2 px-3 sm:px-4 rounded-lg hover:bg-green-700 transition font-medium text-sm sm:text-base",children:" "})]})]})]})}),y&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"  !"}),n.jsx("button",{type:"button",onClick:cr,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Kr,{className:"w-8 h-8 text-green-600"})}),n.jsx("p",{className:"text-gray-600 mb-2",children:'     " "'}),n.jsx("p",{className:"text-sm text-gray-500",children:"       "})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:Gt,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition font-medium",children:[n.jsx(Gs,{size:20}),n.jsx("span",{children:" "})]}),n.jsxs("button",{onClick:Cr,className:"w-full flex items-center justify-center space-x-2 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition font-medium",children:[n.jsx(b3,{size:20}),n.jsx("span",{children:"  "})]}),n.jsx("button",{onClick:cr,className:"w-full bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300 transition font-medium",children:" "})]})]})}),je&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" "}),n.jsx("button",{onClick:()=>qe(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(Xa,{size:24})})]}),ee.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx(rl,{size:48,className:"mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"   "})]}):n.jsx("div",{className:"space-y-4",children:ee.map(X=>{var Ee,Qe,et,Dt;return n.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(kr,{size:16,className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-800",children:[" #",X.id.slice(0,8)]}),n.jsx("span",{className:"text-sm text-gray-500",children:new Date(X.created_at).toLocaleDateString("ar-DZ")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",((Ee=X.orderData)==null?void 0:Ee.client_id)||" "]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",((Qe=X.orderData)==null?void 0:Qe.phone)||" "]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",((et=X.orderItems)==null?void 0:et.length)||0," "]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",((Dt=X.orderData)==null?void 0:Dt.delivery_address)||" "]})]}),X.orderItems&&X.orderItems.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:":"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.orderItems.slice(0,3).map((Tt,$t)=>n.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs",children:[Tt.product_name_ar," x",Tt.quantity]},$t)),X.orderItems.length>3&&n.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:["+",X.orderItems.length-3," "]})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>Fe(X),className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 text-sm flex items-center gap-1",children:[n.jsx(kr,{size:14}),""]}),n.jsxs("button",{onClick:()=>Ke(X.id),className:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 text-sm flex items-center gap-1",children:[n.jsx(na,{size:14}),""]})]})]})},X.id)})})]})})]})}function zD(){const[e,t]=H.useState([]),[r,s]=H.useState(!0),[a,i]=H.useState(""),[o,l]=H.useState("all"),[c,A]=H.useState(!1),[d,h]=H.useState([]),[f,u]=H.useState([]),[p,g]=H.useState({client_name:"",client_phone:"",client_address:"",notes:""}),[w,v]=H.useState(!1);H.useEffect(()=>{B(),x()},[]);const x=async()=>{v(!0);try{const{data:K,error:P}=await we.from("products").select("id, name_ar, name_en, sku, price_a, price_b, price_c, price_d, price_e, stock, weight, weight_unit").order("name_ar");if(P)throw P;h(K||[])}catch(K){console.error("Error loading products:",K)}finally{v(!1)}},y=K=>!K.items||!Array.isArray(K.items)?0:K.items.reduce((P,te)=>P+(te.quantity||0),0),_=()=>Math.floor(Math.random()*1e12).toString().padStart(12,"0"),I=(K,P,te)=>{const J=P==="unit"?K.price_a:P==="kg"?K.price_b:K.price_c,V={id:`temp-${Date.now()}-${Math.random()}`,product_id:K.id,product_name_ar:K.name_ar,product_sku:K.sku,quantity:te,unit_type:P,unit_price:J,line_total:J*te,barcode:K.barcode||_(),weight:K.weight,weight_unit:K.weight_unit};u([...f,V])},k=K=>{u(f.filter(P=>P.id!==K))},T=()=>f.reduce((K,P)=>K+P.line_total,0),S=async()=>{try{const K={invoice_number:`INV-${Date.now()}-${Math.floor(Math.random()*1e3)}`,invoice_date:new Date().toISOString(),client_name:p.client_name||" ",client_phone:p.client_phone,client_address:p.client_address,company_name_ar:"",subtotal:T(),total_amount:T(),paid_amount:0,remaining_amount:T(),currency:"MAD",status:"draft",payment_status:"unpaid",notes:p.notes,items:f.map(J=>({product_id:J.product_id,product_name_ar:J.product_name_ar,product_sku:J.product_sku,quantity:J.quantity,unit_type:J.unit_type,unit_price:J.unit_price,line_total:J.line_total,barcode:J.barcode}))},{data:P,error:te}=await we.from("invoices").insert(K).select().single();if(te)throw te;A(!1),u([]),g({client_name:"",client_phone:"",client_address:"",notes:""}),B()}catch(K){console.error("Error creating invoice:",K)}},B=async()=>{s(!0);try{const{data:K,error:P}=await we.from("invoices").select(`
          *,
          payments (
            amount,
            payment_method,
            status,
            payment_date,
            created_at
          )
        `).order("created_at",{ascending:!1});if(P)throw P;const[te,J]=await Promise.all([we.from("employees").select("id, name, phone, role, status").eq("status","active"),we.from("warehouses").select("id, name, address, is_active").eq("is_active",!0)]),V=new Map((te.data||[]).map(N=>[N.id,N])),ie=new Map((J.data||[]).map(N=>[N.id,N])),Y=(K||[]).map(N=>{const C=Array.isArray(N.payments)?N.payments:[],E=C.filter(z=>(z==null?void 0:z.status)==="completed").reduce((z,Be)=>z+Number((Be==null?void 0:Be.amount)||0),0),O=Number(N.total_amount||0),q=Number(N.paid_amount||0),se=q>0?q:E,ye=Math.max(0,O-se),re=C.slice().sort((z,Be)=>{const Ve=new Date((z==null?void 0:z.created_at)||(z==null?void 0:z.payment_date)||0).getTime();return new Date((Be==null?void 0:Be.created_at)||(Be==null?void 0:Be.payment_date)||0).getTime()-Ve})[0],de=ye===0?"paid":se>0?"partial":"unpaid",Ne=N.payment_status==="credit"?"credit":de;return{...N,paid_amount:se,remaining_amount:ye,payment_method:(re==null?void 0:re.payment_method)||null,payment_status:Ne,employee:N.employee_id&&V.get(N.employee_id)||null,warehouse:N.warehouse_id&&ie.get(N.warehouse_id)||null}});t(Y)}catch(K){console.error("Error loading invoices:",K)}finally{s(!1)}},R={totalInvoices:e.length,totalAmount:e.reduce((K,P)=>K+(P.total_amount||0),0),paidAmount:e.reduce((K,P)=>K+(P.paid_amount||0),0),remainingAmount:e.reduce((K,P)=>K+(P.remaining_amount||0),0),paidCount:e.filter(K=>(K.payment_status||"")==="paid").length,partialCount:e.filter(K=>(K.payment_status||"")==="partial").length,creditCount:e.filter(K=>(K.payment_status||"")==="credit").length},U=e.filter(K=>{const P=(K.client_name||"").toLowerCase().includes(a.toLowerCase())||(K.company_name_ar||"").toLowerCase().includes(a.toLowerCase())||(K.invoice_number||"").toLowerCase().includes(a.toLowerCase()),te=o==="all"||(K.payment_status||"")===o;return P&&te}),L=K=>{switch(K){case"paid":return n.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(Kr,{size:14}),""]});case"partial":return n.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(Hr,{size:14}),""]});case"unpaid":return n.jsxs("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(vs,{size:14})," "]});case"credit":return n.jsxs("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(vs,{size:14}),""]});default:return n.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full font-bold text-sm",children:K})}},D=K=>K.remaining_amount||(K.total_amount||0)-(K.paid_amount||0),Q=K=>{if(!K)return"-";switch(K){case"cash":return n.jsxs("span",{className:"flex items-center gap-1 text-green-700 font-semibold",children:[n.jsx(Sr,{size:16}),""]});case"check":return n.jsxs("span",{className:"flex items-center gap-1 text-blue-700 font-semibold",children:[n.jsx(Gs,{size:16}),""]});case"debt":return n.jsxs("span",{className:"flex items-center gap-1 text-orange-700 font-semibold",children:[n.jsx(Hr,{size:16}),""]});default:return K}};return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(Gs,{className:"text-white",size:36}),""]}),n.jsxs("button",{onClick:()=>window.location.href="/pos",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex items-center gap-2",children:[n.jsx(ts,{size:20})," "]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-600",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:R.totalInvoices})]}),n.jsx(Gs,{className:"text-blue-600",size:32})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-600",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[R.totalAmount.toFixed(2)," MAD"]})]}),n.jsx(Sr,{className:"text-green-600",size:32})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-emerald-600",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:""}),n.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[R.paidAmount.toFixed(2)," MAD"]})]}),n.jsx(Kr,{className:"text-emerald-600",size:32})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-600",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:""}),n.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[R.remainingAmount.toFixed(2)," MAD"]})]}),n.jsx(vs,{className:"text-red-600",size:32})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"bg-green-50 rounded-xl p-4 border border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-700 text-sm font-semibold",children:" "}),n.jsx("p",{className:"text-xl font-bold text-green-800",children:R.paidCount})]}),n.jsx(Kr,{className:"text-green-600",size:24})]})}),n.jsx("div",{className:"bg-yellow-50 rounded-xl p-4 border border-yellow-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-700 text-sm font-semibold",children:" "}),n.jsx("p",{className:"text-xl font-bold text-yellow-800",children:R.partialCount})]}),n.jsx(Hr,{className:"text-yellow-600",size:24})]})}),n.jsx("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-700 text-sm font-semibold",children:" "}),n.jsx("p",{className:"text-xl font-bold text-red-800",children:R.creditCount})]}),n.jsx(vs,{className:"text-red-600",size:24})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"    ...",className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",value:a,onChange:K=>i(K.target.value)})]}),n.jsxs("select",{value:o,onChange:K=>l(K.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"unpaid",children:" "}),n.jsx("option",{value:"paid",children:""}),n.jsx("option",{value:"partial",children:""}),n.jsx("option",{value:"credit",children:""})]}),n.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-600",children:[U.length," "]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg",children:r?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):U.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):n.jsx("div",{className:"overflow-x-auto w-full pb-2",children:n.jsxs("table",{className:"w-full min-w-max",children:[n.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700",style:{color:"#000000"},children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",style:{color:"#000000"},children:""})]})}),n.jsx("tbody",{children:U.map(K=>{var P,te,J,V;return n.jsxs("tr",{className:"border-b hover:bg-blue-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-gray-800",children:["#",K.invoice_number||K.id.slice(0,8)]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"font-semibold text-gray-700",children:K.client_name||K.company_name_ar||" "})}),n.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(K.invoice_date).toLocaleDateString("ar-DZ")}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-700",children:((P=K.employee)==null?void 0:P.name)||" "}),n.jsx("p",{className:"text-sm text-gray-500",children:((te=K.employee)==null?void 0:te.role)||""})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-700",children:((J=K.warehouse)==null?void 0:J.name)||" "}),n.jsx("p",{className:"text-sm text-gray-500",children:(V=K.warehouse)!=null&&V.is_active?"":" "})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"font-bold text-blue-600",children:y(K)}),n.jsx("span",{className:"text-xs text-gray-500",children:""})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-gray-800",children:[(K.total_amount||0).toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-green-600",children:[(K.paid_amount||0).toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`font-bold text-lg ${D(K)>0?"text-red-600":"text-green-600"}`,children:[D(K).toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-6 py-4",children:Q(K.payment_method)}),n.jsx("td",{className:"px-6 py-4",children:L(K.payment_status||"")}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("button",{onClick:()=>{window.location.href=`/invoices/${K.id}/edit`},className:"bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded-lg transition-colors",children:n.jsx(la,{size:18})})})]},K.id)})})]})})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-100 text-sm mb-1",children:" "}),n.jsxs("p",{className:"text-2xl font-bold",children:[U.reduce((K,P)=>K+(P.total_amount||0),0).toFixed(2)," MAD"]})]}),n.jsx(Gs,{size:32,className:"text-blue-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-100 text-sm mb-1",children:""}),n.jsxs("p",{className:"text-2xl font-bold",children:[U.reduce((K,P)=>K+(P.paid_amount||0),0).toFixed(2)," MAD"]})]}),n.jsx(Kr,{size:32,className:"text-green-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-100 text-sm mb-1",children:""}),n.jsxs("p",{className:"text-2xl font-bold",children:[U.reduce((K,P)=>K+D(P),0).toFixed(2)," MAD"]})]}),n.jsx(vs,{size:32,className:"text-red-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-purple-100 text-sm mb-1",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:U.length})]}),n.jsx(Sr,{size:32,className:"text-purple-200"})]})})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"  "}),n.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Xa,{size:24})})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:p.client_name,onChange:K=>g({...p,client_name:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"tel",value:p.client_phone,onChange:K=>g({...p,client_phone:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:p.client_address,onChange:K=>g({...p,client_address:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" "})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:" "}),n.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:w?n.jsx("div",{className:"p-4 text-center text-gray-500",children:" ..."}):n.jsx("div",{className:"divide-y divide-gray-200",children:d.map(K=>n.jsxs("div",{className:"p-3 hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-800",children:K.name_ar}),n.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",K.sku]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[": ",K.stock]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>I(K,"unit",1),className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",children:""}),n.jsx("button",{onClick:()=>I(K,"kg",1),className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600",children:""}),n.jsx("button",{onClick:()=>I(K,"carton",1),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600",children:""})]})]}),n.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[n.jsxs("span",{children:[" : ",K.price_a," MAD"]}),n.jsxs("span",{children:[" : ",K.price_b," MAD"]}),n.jsxs("span",{children:[" : ",K.price_c," MAD"]})]}),K.barcode&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(Ud,{size:16,className:"text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-600",children:K.barcode})]})]},K.id))})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:" "}),n.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:f.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"     "}):n.jsx("div",{className:"divide-y divide-gray-200",children:f.map(K=>n.jsxs("div",{className:"p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-800",children:K.product_name_ar}),n.jsxs("p",{className:"text-sm text-gray-500",children:[K.unit_type==="unit"?"":K.unit_type==="kg"?"":"","  ",K.quantity]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[K.unit_price," MAD / ",K.unit_type]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-medium text-gray-800",children:[K.line_total," MAD"]}),n.jsx("button",{onClick:()=>k(K.id),className:"text-red-500 hover:text-red-700",children:n.jsx(na,{size:16})})]})]}),K.barcode&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(Ud,{size:14,className:"text-gray-400"}),n.jsx("span",{className:"text-xs text-gray-600",children:K.barcode})]})]},K.id))})})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),n.jsx("textarea",{value:p.notes,onChange:K=>g({...p,notes:K.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:" ..."})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("span",{className:"text-lg font-semibold text-gray-800",children:":"}),n.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[T().toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>A(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:""}),n.jsx("button",{onClick:S,disabled:f.length===0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:" "})]})]})]})]})})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hv=function(e,t){return Hv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},Hv(e,t)};function ao(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Hv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Kv=function(){return Kv=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Kv.apply(this,arguments)};function ma(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{A(s.next(d))}catch(h){o(h)}}function c(d){try{A(s.throw(d))}catch(h){o(h)}}function A(d){d.done?i(d.value):a(d.value).then(l,c)}A((s=s.apply(e,[])).next())})}function Yn(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(A){return function(d){return c([A,d])}}function c(A){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,a&&(i=A[0]&2?a.return:A[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,A[1])).done)return i;switch(a=0,i&&(A=[A[0]&2,i.value]),A[0]){case 0:case 1:i=A;break;case 4:return r.label++,{value:A[1],done:!1};case 5:r.label++,a=A[1],A=[0];continue;case 7:A=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(A[0]===6||A[0]===2)){r=0;continue}if(A[0]===3&&(!i||A[1]>i[0]&&A[1]<i[3])){r.label=A[1];break}if(A[0]===6&&r.label<i[1]){r.label=i[1],i=A;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(A);break}i[2]&&r.ops.pop(),r.trys.pop();continue}A=t.call(e,r)}catch(d){A=[6,d],a=0}finally{s=i=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function Qf(e,t,r){if(arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||t)}var dl=function(){function e(t,r,s,a){this.left=t,this.top=r,this.width=s,this.height=a}return e.prototype.add=function(t,r,s,a){return new e(this.left+t,this.top+r,this.width+s,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var s=Array.from(r).find(function(a){return a.width!==0});return s?new e(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),pg=function(e,t){return dl.fromClientRect(e,t.getBoundingClientRect())},VD=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var s=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new dl(0,0,s,a)},mg=function(e){for(var t=[],r=0,s=e.length;r<s;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){var i=e.charCodeAt(r++);(i&64512)===56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Hs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var s=[],a=-1,i="";++a<r;){var o=e[a];o<=65535?s.push(o):(o-=65536,s.push((o>>10)+55296,o%1024+56320)),(a+1===r||s.length>16384)&&(i+=String.fromCharCode.apply(String,s),s.length=0)}return i},t5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qD=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Of=0;Of<t5.length;Of++)qD[t5.charCodeAt(Of)]=Of;var r5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pf=0;Pf<r5.length;Pf++)r0[r5.charCodeAt(Pf)]=Pf;var GD=function(e){var t=e.length*.75,r=e.length,s,a=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(s=0;s<r;s+=4)i=r0[e.charCodeAt(s)],o=r0[e.charCodeAt(s+1)],l=r0[e.charCodeAt(s+2)],c=r0[e.charCodeAt(s+3)],d[a++]=i<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return A},$D=function(e){for(var t=e.length,r=[],s=0;s<t;s+=2)r.push(e[s+1]<<8|e[s]);return r},WD=function(e){for(var t=e.length,r=[],s=0;s<t;s+=4)r.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return r},sA=5,M2=11,Ix=2,XD=M2-sA,_3=65536>>sA,JD=1<<sA,Ux=JD-1,YD=1024>>sA,ZD=_3+YD,e7=ZD,t7=32,r7=e7+t7,s7=65536>>M2,n7=1<<XD,a7=n7-1,s5=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},i7=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},o7=function(e,t){var r=GD(e),s=Array.isArray(r)?WD(r):new Uint32Array(r),a=Array.isArray(r)?$D(r):new Uint16Array(r),i=24,o=s5(a,i/2,s[4]/2),l=s[5]===2?s5(a,(i+s[4])/2):i7(s,Math.ceil((i+s[4])/4));return new l7(s[0],s[1],s[2],s[3],o,l)},l7=function(){function e(t,r,s,a,i,o){this.initialValue=t,this.errorValue=r,this.highStart=s,this.highValueIndex=a,this.index=i,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>sA],r=(r<<Ix)+(t&Ux),this.data[r];if(t<=65535)return r=this.index[_3+(t-55296>>sA)],r=(r<<Ix)+(t&Ux),this.data[r];if(t<this.highStart)return r=r7-s7+(t>>M2),r=this.index[r],r+=t>>sA&a7,r=this.index[r],r=(r<<Ix)+(t&Ux),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),n5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Rf=0;Rf<n5.length;Rf++)c7[n5.charCodeAt(Rf)]=Rf;var A7="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",a5=50,d7=1,N3=2,B3=3,u7=4,h7=5,i5=7,C3=8,o5=9,Wl=10,zv=11,l5=12,Vv=13,f7=14,s0=15,qv=16,Mf=17,zu=18,p7=19,c5=20,Gv=21,Vu=22,Lx=23,GA=24,$a=25,n0=26,a0=27,$A=28,m7=29,Vc=30,g7=31,Hf=32,Kf=33,$v=34,Wv=35,Xv=36,fh=37,Jv=38,Dp=39,Qp=40,Dx=41,j3=42,x7=43,v7=[9001,65288],E3="!",fr="",zf="",Yv=o7(A7),zo=[Vc,Xv],Zv=[d7,N3,B3,h7],k3=[Wl,C3],A5=[a0,n0],y7=Zv.concat(k3),d5=[Jv,Dp,Qp,$v,Wv],w7=[s0,Vv],b7=function(e,t){t===void 0&&(t="strict");var r=[],s=[],a=[];return e.forEach(function(i,o){var l=Yv.get(i);if(l>a5?(a.push(!0),l-=a5):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return s.push(o),r.push(qv);if(l===u7||l===zv){if(o===0)return s.push(o),r.push(Vc);var c=r[o-1];return y7.indexOf(c)===-1?(s.push(s[o-1]),r.push(c)):(s.push(o),r.push(Vc))}if(s.push(o),l===g7)return r.push(t==="strict"?Gv:fh);if(l===j3||l===m7)return r.push(Vc);if(l===x7)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(fh):r.push(Vc);r.push(l)}),[s,r,a]},Qx=function(e,t,r,s){var a=s[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var i=r;i<=s.length;){i++;var o=s[i];if(o===t)return!0;if(o!==Wl)break}if(a===Wl)for(var i=r;i>0;){i--;var l=s[i];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=s.length;){c++;var o=s[c];if(o===t)return!0;if(o!==Wl)break}if(l!==Wl)break}return!1},u5=function(e,t){for(var r=e;r>=0;){var s=t[r];if(s===Wl)r--;else return s}return 0},_7=function(e,t,r,s,a){if(r[s]===0)return fr;var i=s-1;if(Array.isArray(a)&&a[i]===!0)return fr;var o=i-1,l=i+1,c=t[i],A=o>=0?t[o]:0,d=t[l];if(c===N3&&d===B3)return fr;if(Zv.indexOf(c)!==-1)return E3;if(Zv.indexOf(d)!==-1||k3.indexOf(d)!==-1)return fr;if(u5(i,t)===C3)return zf;if(Yv.get(e[i])===zv||(c===Hf||c===Kf)&&Yv.get(e[l])===zv||c===i5||d===i5||c===o5||[Wl,Vv,s0].indexOf(c)===-1&&d===o5||[Mf,zu,p7,GA,$A].indexOf(d)!==-1||u5(i,t)===Vu||Qx(Lx,Vu,i,t)||Qx([Mf,zu],Gv,i,t)||Qx(l5,l5,i,t))return fr;if(c===Wl)return zf;if(c===Lx||d===Lx)return fr;if(d===qv||c===qv)return zf;if([Vv,s0,Gv].indexOf(d)!==-1||c===f7||A===Xv&&w7.indexOf(c)!==-1||c===$A&&d===Xv||d===c5||zo.indexOf(d)!==-1&&c===$a||zo.indexOf(c)!==-1&&d===$a||c===a0&&[fh,Hf,Kf].indexOf(d)!==-1||[fh,Hf,Kf].indexOf(c)!==-1&&d===n0||zo.indexOf(c)!==-1&&A5.indexOf(d)!==-1||A5.indexOf(c)!==-1&&zo.indexOf(d)!==-1||[a0,n0].indexOf(c)!==-1&&(d===$a||[Vu,s0].indexOf(d)!==-1&&t[l+1]===$a)||[Vu,s0].indexOf(c)!==-1&&d===$a||c===$a&&[$a,$A,GA].indexOf(d)!==-1)return fr;if([$a,$A,GA,Mf,zu].indexOf(d)!==-1)for(var h=i;h>=0;){var f=t[h];if(f===$a)return fr;if([$A,GA].indexOf(f)!==-1)h--;else break}if([a0,n0].indexOf(d)!==-1)for(var h=[Mf,zu].indexOf(c)!==-1?o:i;h>=0;){var f=t[h];if(f===$a)return fr;if([$A,GA].indexOf(f)!==-1)h--;else break}if(Jv===c&&[Jv,Dp,$v,Wv].indexOf(d)!==-1||[Dp,$v].indexOf(c)!==-1&&[Dp,Qp].indexOf(d)!==-1||[Qp,Wv].indexOf(c)!==-1&&d===Qp||d5.indexOf(c)!==-1&&[c5,n0].indexOf(d)!==-1||d5.indexOf(d)!==-1&&c===a0||zo.indexOf(c)!==-1&&zo.indexOf(d)!==-1||c===GA&&zo.indexOf(d)!==-1||zo.concat($a).indexOf(c)!==-1&&d===Vu&&v7.indexOf(e[l])===-1||zo.concat($a).indexOf(d)!==-1&&c===zu)return fr;if(c===Dx&&d===Dx){for(var u=r[i],p=1;u>0&&(u--,t[u]===Dx);)p++;if(p%2!==0)return fr}return c===Hf&&d===Kf?fr:zf},N7=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=b7(e,t.lineBreak),s=r[0],a=r[1],i=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[$a,Vc,j3].indexOf(l)!==-1?fh:l}));var o=t.wordBreak==="keep-all"?i.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[s,a,o]},B7=function(){function e(t,r,s,a){this.codePoints=t,this.required=r===E3,this.start=s,this.end=a}return e.prototype.slice=function(){return Hs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),C7=function(e,t){var r=mg(e),s=N7(r,t),a=s[0],i=s[1],o=s[2],l=r.length,c=0,A=0;return{next:function(){if(A>=l)return{done:!0,value:null};for(var d=fr;A<l&&(d=_7(r,i,a,++A,o))===fr;);if(d!==fr||A===l){var h=new B7(r,d,c,A);return c=A,{value:h,done:!1}}return{done:!0,value:null}}}},j7=1,E7=2,Lh=4,h5=8,wm=10,f5=47,N0=92,k7=9,S7=32,Vf=34,qu=61,F7=35,T7=36,I7=37,qf=39,Gf=40,Gu=41,U7=95,Sa=45,L7=33,D7=60,Q7=62,O7=64,P7=91,R7=93,M7=61,H7=123,$f=63,K7=125,p5=124,z7=126,V7=128,m5=65533,Ox=42,Yc=43,q7=44,G7=58,$7=59,ph=46,W7=0,X7=8,J7=11,Y7=14,Z7=31,eQ=127,ho=-1,S3=48,F3=97,T3=101,tQ=102,rQ=117,sQ=122,I3=65,U3=69,L3=70,nQ=85,aQ=90,Zn=function(e){return e>=S3&&e<=57},iQ=function(e){return e>=55296&&e<=57343},WA=function(e){return Zn(e)||e>=I3&&e<=L3||e>=F3&&e<=tQ},oQ=function(e){return e>=F3&&e<=sQ},lQ=function(e){return e>=I3&&e<=aQ},cQ=function(e){return oQ(e)||lQ(e)},AQ=function(e){return e>=V7},Wf=function(e){return e===wm||e===k7||e===S7},bm=function(e){return cQ(e)||AQ(e)||e===U7},g5=function(e){return bm(e)||Zn(e)||e===Sa},dQ=function(e){return e>=W7&&e<=X7||e===J7||e>=Y7&&e<=Z7||e===eQ},Ml=function(e,t){return e!==N0?!1:t!==wm},Xf=function(e,t,r){return e===Sa?bm(t)||Ml(t,r):bm(e)?!0:!!(e===N0&&Ml(e,t))},Px=function(e,t,r){return e===Yc||e===Sa?Zn(t)?!0:t===ph&&Zn(r):Zn(e===ph?t:e)},uQ=function(e){var t=0,r=1;(e[t]===Yc||e[t]===Sa)&&(e[t]===Sa&&(r=-1),t++);for(var s=[];Zn(e[t]);)s.push(e[t++]);var a=s.length?parseInt(Hs.apply(void 0,s),10):0;e[t]===ph&&t++;for(var i=[];Zn(e[t]);)i.push(e[t++]);var o=i.length,l=o?parseInt(Hs.apply(void 0,i),10):0;(e[t]===U3||e[t]===T3)&&t++;var c=1;(e[t]===Yc||e[t]===Sa)&&(e[t]===Sa&&(c=-1),t++);for(var A=[];Zn(e[t]);)A.push(e[t++]);var d=A.length?parseInt(Hs.apply(void 0,A),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},hQ={type:2},fQ={type:3},pQ={type:4},mQ={type:13},gQ={type:8},xQ={type:21},vQ={type:9},yQ={type:10},wQ={type:11},bQ={type:12},_Q={type:14},Jf={type:23},NQ={type:1},BQ={type:25},CQ={type:24},jQ={type:26},EQ={type:27},kQ={type:28},SQ={type:29},FQ={type:31},ey={type:32},D3=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(mg(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==ey;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Vf:return this.consumeStringToken(Vf);case F7:var r=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(g5(r)||Ml(s,a)){var i=Xf(r,s,a)?E7:j7,o=this.consumeName();return{type:5,value:o,flags:i}}break;case T7:if(this.peekCodePoint(0)===qu)return this.consumeCodePoint(),mQ;break;case qf:return this.consumeStringToken(qf);case Gf:return hQ;case Gu:return fQ;case Ox:if(this.peekCodePoint(0)===qu)return this.consumeCodePoint(),_Q;break;case Yc:if(Px(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case q7:return pQ;case Sa:var l=t,c=this.peekCodePoint(0),A=this.peekCodePoint(1);if(Px(l,c,A))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Xf(l,c,A))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Sa&&A===Q7)return this.consumeCodePoint(),this.consumeCodePoint(),CQ;break;case ph:if(Px(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case f5:if(this.peekCodePoint(0)===Ox)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Ox&&(d=this.consumeCodePoint(),d===f5))return this.consumeToken();if(d===ho)return this.consumeToken()}break;case G7:return jQ;case $7:return EQ;case D7:if(this.peekCodePoint(0)===L7&&this.peekCodePoint(1)===Sa&&this.peekCodePoint(2)===Sa)return this.consumeCodePoint(),this.consumeCodePoint(),BQ;break;case O7:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),u=this.peekCodePoint(2);if(Xf(h,f,u)){var o=this.consumeName();return{type:7,value:o}}break;case P7:return kQ;case N0:if(Ml(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case R7:return SQ;case M7:if(this.peekCodePoint(0)===qu)return this.consumeCodePoint(),gQ;break;case H7:return wQ;case K7:return bQ;case rQ:case nQ:var p=this.peekCodePoint(0),g=this.peekCodePoint(1);return p===Yc&&(WA(g)||g===$f)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case p5:if(this.peekCodePoint(0)===qu)return this.consumeCodePoint(),vQ;if(this.peekCodePoint(0)===p5)return this.consumeCodePoint(),xQ;break;case z7:if(this.peekCodePoint(0)===qu)return this.consumeCodePoint(),yQ;break;case ho:return ey}return Wf(t)?(this.consumeWhiteSpace(),FQ):Zn(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):bm(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Hs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();WA(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var s=!1;r===$f&&t.length<6;)t.push(r),r=this.consumeCodePoint(),s=!0;if(s){var a=parseInt(Hs.apply(void 0,t.map(function(c){return c===$f?S3:c})),16),i=parseInt(Hs.apply(void 0,t.map(function(c){return c===$f?L3:c})),16);return{type:30,start:a,end:i}}var o=parseInt(Hs.apply(void 0,t),16);if(this.peekCodePoint(0)===Sa&&WA(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];WA(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var i=parseInt(Hs.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Gf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Gf?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ho)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===qf||r===Vf){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ho||this.peekCodePoint(0)===Gu)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),Jf)}for(;;){var a=this.consumeCodePoint();if(a===ho||a===Gu)return{type:22,value:Hs.apply(void 0,t)};if(Wf(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ho||this.peekCodePoint(0)===Gu?(this.consumeCodePoint(),{type:22,value:Hs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Jf);if(a===Vf||a===qf||a===Gf||dQ(a))return this.consumeBadUrlRemnants(),Jf;if(a===N0)if(Ml(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Jf;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;Wf(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Gu||t===ho)return;Ml(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,s="";t>0;){var a=Math.min(r,t);s+=Hs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),s},e.prototype.consumeStringToken=function(t){var r="",s=0;do{var a=this._value[s];if(a===ho||a===void 0||a===t)return r+=this.consumeStringSlice(s),{type:0,value:r};if(a===wm)return this._value.splice(0,s),NQ;if(a===N0){var i=this._value[s+1];i!==ho&&i!==void 0&&(i===wm?(r+=this.consumeStringSlice(s),s=-1,this._value.shift()):Ml(a,i)&&(r+=this.consumeStringSlice(s),r+=Hs(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=Lh,s=this.peekCodePoint(0);for((s===Yc||s===Sa)&&t.push(this.consumeCodePoint());Zn(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(s===ph&&Zn(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=h5;Zn(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0),a=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((s===U3||s===T3)&&((a===Yc||a===Sa)&&Zn(i)||Zn(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=h5;Zn(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[uQ(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],s=t[1],a=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Xf(a,i,o)){var l=this.consumeName();return{type:15,number:r,flags:s,unit:l}}return a===I7?(this.consumeCodePoint(),{type:16,number:r,flags:s}):{type:17,number:r,flags:s}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(WA(t)){for(var r=Hs(t);WA(this.peekCodePoint(0))&&r.length<6;)r+=Hs(this.consumeCodePoint());Wf(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(r,16);return s===0||iQ(s)||s>1114111?m5:s}return t===ho?m5:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(g5(r))t+=Hs(r);else if(Ml(r,this.peekCodePoint(0)))t+=Hs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),Q3=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new D3;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},s=this.consumeToken();;){if(s.type===32||IQ(s,t))return r;this.reconsumeToken(s),r.values.push(this.consumeComponentValue()),s=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return r;this.reconsumeToken(s),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?ey:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),Dh=function(e){return e.type===15},iu=function(e){return e.type===17},Wr=function(e){return e.type===20},TQ=function(e){return e.type===0},ty=function(e,t){return Wr(e)&&e.value===t},O3=function(e){return e.type!==31},Yd=function(e){return e.type!==31&&e.type!==4},Co=function(e){var t=[],r=[];return e.forEach(function(s){if(s.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}s.type!==31&&r.push(s)}),r.length&&t.push(r),t},IQ=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},pc=function(e){return e.type===17||e.type===15},tn=function(e){return e.type===16||pc(e)},P3=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Qn={type:17,number:0,flags:Lh},H2={type:16,number:50,flags:Lh},Xl={type:16,number:100,flags:Lh},i0=function(e,t,r){var s=e[0],a=e[1];return[is(s,t),is(typeof a<"u"?a:s,r)]},is=function(e,t){if(e.type===16)return e.number/100*t;if(Dh(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},R3="deg",M3="grad",H3="rad",K3="turn",gg={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case R3:return Math.PI*t.number/180;case M3:return Math.PI/200*t.number;case H3:return t.number;case K3:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},z3=function(e){return e.type===15&&(e.unit===R3||e.unit===M3||e.unit===H3||e.unit===K3)},V3=function(e){var t=e.filter(Wr).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Qn,Qn];case"to top":case"bottom":return bi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Qn,Xl];case"to right":case"left":return bi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Xl,Xl];case"to bottom":case"top":return bi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Xl,Qn];case"to left":case"right":return bi(270)}return 0},bi=function(e){return Math.PI*e/180},Ac={name:"color",parse:function(e,t){if(t.type===18){var r=UQ[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var s=t.value.substring(0,1),a=t.value.substring(1,2),i=t.value.substring(2,3);return Jl(parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(t.value.length===4){var s=t.value.substring(0,1),a=t.value.substring(1,2),i=t.value.substring(2,3),o=t.value.substring(3,4);return Jl(parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(t.value.length===6){var s=t.value.substring(0,2),a=t.value.substring(2,4),i=t.value.substring(4,6);return Jl(parseInt(s,16),parseInt(a,16),parseInt(i,16),1)}if(t.value.length===8){var s=t.value.substring(0,2),a=t.value.substring(2,4),i=t.value.substring(4,6),o=t.value.substring(6,8);return Jl(parseInt(s,16),parseInt(a,16),parseInt(i,16),parseInt(o,16)/255)}}if(t.type===20){var l=nl[t.value.toUpperCase()];if(typeof l<"u")return l}return nl.TRANSPARENT}},dc=function(e){return(255&e)===0},yn=function(e){var t=255&e,r=255&e>>8,s=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+s+","+r+","+t/255+")":"rgb("+a+","+s+","+r+")"},Jl=function(e,t,r,s){return(e<<24|t<<16|r<<8|Math.round(s*255)<<0)>>>0},x5=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},v5=function(e,t){var r=t.filter(Yd);if(r.length===3){var s=r.map(x5),a=s[0],i=s[1],o=s[2];return Jl(a,i,o,1)}if(r.length===4){var l=r.map(x5),a=l[0],i=l[1],o=l[2],c=l[3];return Jl(a,i,o,c)}return 0};function Rx(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var y5=function(e,t){var r=t.filter(Yd),s=r[0],a=r[1],i=r[2],o=r[3],l=(s.type===17?bi(s.number):gg.parse(e,s))/(Math.PI*2),c=tn(a)?a.number/100:0,A=tn(i)?i.number/100:0,d=typeof o<"u"&&tn(o)?is(o,1):1;if(c===0)return Jl(A*255,A*255,A*255,1);var h=A<=.5?A*(c+1):A+c-A*c,f=A*2-h,u=Rx(f,h,l+1/3),p=Rx(f,h,l),g=Rx(f,h,l-1/3);return Jl(u*255,p*255,g*255,d)},UQ={hsl:y5,hsla:y5,rgb:v5,rgba:v5},B0=function(e,t){return Ac.parse(e,Q3.create(t).parseComponentValue())},nl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},LQ={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Wr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},DQ={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xg=function(e,t){var r=Ac.parse(e,t[0]),s=t[1];return s&&tn(s)?{color:r,stop:s}:{color:r,stop:null}},w5=function(e,t){var r=e[0],s=e[e.length-1];r.stop===null&&(r.stop=Qn),s.stop===null&&(s.stop=Xl);for(var a=[],i=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=is(l,t);c>i?a.push(c):a.push(i),i=c}else a.push(null)}for(var A=null,o=0;o<a.length;o++){var d=a[o];if(d===null)A===null&&(A=o);else if(A!==null){for(var h=o-A,f=a[A-1],u=(d-f)/(h+1),p=1;p<=h;p++)a[A+p-1]=u*p;A=null}}return e.map(function(g,w){var v=g.color;return{color:v,stop:Math.max(Math.min(1,a[w]/t),0)}})},QQ=function(e,t,r){var s=t/2,a=r/2,i=is(e[0],t)-s,o=a-is(e[1],r);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},OQ=function(e,t,r){var s=typeof e=="number"?e:QQ(e,t,r),a=Math.abs(t*Math.sin(s))+Math.abs(r*Math.cos(s)),i=t/2,o=r/2,l=a/2,c=Math.sin(s-Math.PI/2)*l,A=Math.cos(s-Math.PI/2)*l;return[a,i-A,i+A,o-c,o+c]},zi=function(e,t){return Math.sqrt(e*e+t*t)},b5=function(e,t,r,s,a){var i=[[0,0],[0,t],[e,0],[e,t]];return i.reduce(function(o,l){var c=l[0],A=l[1],d=zi(r-c,s-A);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},PQ=function(e,t,r,s,a){var i=0,o=0;switch(e.size){case 0:e.shape===0?i=o=Math.min(Math.abs(t),Math.abs(t-s),Math.abs(r),Math.abs(r-a)):e.shape===1&&(i=Math.min(Math.abs(t),Math.abs(t-s)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)i=o=Math.min(zi(t,r),zi(t,r-a),zi(t-s,r),zi(t-s,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-s)),c=b5(s,a,t,r,!0),A=c[0],d=c[1];i=zi(A-t,(d-r)/l),o=l*i}break;case 1:e.shape===0?i=o=Math.max(Math.abs(t),Math.abs(t-s),Math.abs(r),Math.abs(r-a)):e.shape===1&&(i=Math.max(Math.abs(t),Math.abs(t-s)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)i=o=Math.max(zi(t,r),zi(t,r-a),zi(t-s,r),zi(t-s,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-s)),h=b5(s,a,t,r,!1),A=h[0],d=h[1];i=zi(A-t,(d-r)/l),o=l*i}break}return Array.isArray(e.size)&&(i=is(e.size[0],s),o=e.size.length===2?is(e.size[1],a):i),[i,o]},RQ=function(e,t){var r=bi(180),s=[];return Co(t).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&o.value==="to"){r=V3(a);return}else if(z3(o)){r=gg.parse(e,o);return}}var l=xg(e,a);s.push(l)}),{angle:r,stops:s,type:1}},Yf=function(e,t){var r=bi(180),s=[];return Co(t).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=V3(a);return}else if(z3(o)){r=(gg.parse(e,o)+bi(270))%bi(360);return}}var l=xg(e,a);s.push(l)}),{angle:r,stops:s,type:1}},MQ=function(e,t){var r=bi(180),s=[],a=1,i=0,o=3,l=[];return Co(t).forEach(function(c,A){var d=c[0];if(A===0){if(Wr(d)&&d.value==="linear"){a=1;return}else if(Wr(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var h=Ac.parse(e,d.values[0]);s.push({stop:Qn,color:h})}else if(d.name==="to"){var h=Ac.parse(e,d.values[0]);s.push({stop:Xl,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Yd);if(f.length===2){var h=Ac.parse(e,f[1]),u=f[0];iu(u)&&s.push({stop:{type:16,number:u.number*100,flags:u.flags},color:h})}}}}),a===1?{angle:(r+bi(180))%bi(360),stops:s,type:a}:{size:o,shape:i,stops:s,position:l,type:a}},q3="closest-side",G3="farthest-side",$3="closest-corner",W3="farthest-corner",X3="circle",J3="ellipse",Y3="cover",Z3="contain",HQ=function(e,t){var r=0,s=3,a=[],i=[];return Co(t).forEach(function(o,l){var c=!0;if(l===0){var A=!1;c=o.reduce(function(h,f){if(A)if(Wr(f))switch(f.value){case"center":return i.push(H2),h;case"top":case"left":return i.push(Qn),h;case"right":case"bottom":return i.push(Xl),h}else(tn(f)||pc(f))&&i.push(f);else if(Wr(f))switch(f.value){case X3:return r=0,!1;case J3:return r=1,!1;case"at":return A=!0,!1;case q3:return s=0,!1;case Y3:case G3:return s=1,!1;case Z3:case $3:return s=2,!1;case W3:return s=3,!1}else if(pc(f)||tn(f))return Array.isArray(s)||(s=[]),s.push(f),!1;return h},c)}if(c){var d=xg(e,o);a.push(d)}}),{size:s,shape:r,stops:a,position:i,type:2}},Zf=function(e,t){var r=0,s=3,a=[],i=[];return Co(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,h){if(Wr(h))switch(h.value){case"center":return i.push(H2),!1;case"top":case"left":return i.push(Qn),!1;case"right":case"bottom":return i.push(Xl),!1}else if(tn(h)||pc(h))return i.push(h),!1;return d},c):l===1&&(c=o.reduce(function(d,h){if(Wr(h))switch(h.value){case X3:return r=0,!1;case J3:return r=1,!1;case Z3:case q3:return s=0,!1;case G3:return s=1,!1;case $3:return s=2,!1;case Y3:case W3:return s=3,!1}else if(pc(h)||tn(h))return Array.isArray(s)||(s=[]),s.push(h),!1;return d},c)),c){var A=xg(e,o);a.push(A)}}),{size:s,shape:r,stops:a,position:i,type:2}},KQ=function(e){return e.type===1},zQ=function(e){return e.type===2},K2={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var s=eE[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return s(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function VQ(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!eE[e.name])}var eE={"linear-gradient":RQ,"-moz-linear-gradient":Yf,"-ms-linear-gradient":Yf,"-o-linear-gradient":Yf,"-webkit-linear-gradient":Yf,"radial-gradient":HQ,"-moz-radial-gradient":Zf,"-ms-radial-gradient":Zf,"-o-radial-gradient":Zf,"-webkit-radial-gradient":Zf,"-webkit-gradient":MQ},qQ={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(s){return Yd(s)&&VQ(s)}).map(function(s){return K2.parse(e,s)})}},GQ={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Wr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$Q={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Co(t).map(function(r){return r.filter(tn)}).map(P3)}},WQ={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Co(t).map(function(r){return r.filter(Wr).map(function(s){return s.value}).join(" ")}).map(XQ)}},XQ=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ld;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Ld||(Ld={}));var JQ={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Co(t).map(function(r){return r.filter(YQ)})}},YQ=function(e){return Wr(e)||tn(e)},vg=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ZQ=vg("top"),eO=vg("right"),tO=vg("bottom"),rO=vg("left"),yg=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return P3(r.filter(tn))}}},sO=yg("top-left"),nO=yg("top-right"),aO=yg("bottom-right"),iO=yg("bottom-left"),wg=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},oO=wg("top"),lO=wg("right"),cO=wg("bottom"),AO=wg("left"),bg=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return Dh(r)?r.number:0}}},dO=bg("top"),uO=bg("right"),hO=bg("bottom"),fO=bg("left"),pO={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mO={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},gO={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Wr).reduce(function(r,s){return r|xO(s.value)},0)}},xO=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},vO={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},yO={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},_m;(function(e){e.NORMAL="normal",e.STRICT="strict"})(_m||(_m={}));var wO={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return _m.STRICT;case"normal":default:return _m.NORMAL}}},bO={name:"line-height",initialValue:"normal",prefix:!1,type:4},_5=function(e,t){return Wr(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:tn(e)?is(e,t):t},_O={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:K2.parse(e,t)}},NO={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},ry={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},_g=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},BO=_g("top"),CO=_g("right"),jO=_g("bottom"),EO=_g("left"),kO={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Wr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},SO={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ng=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},FO=Ng("top"),TO=Ng("right"),IO=Ng("bottom"),UO=Ng("left"),LO={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},DO={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},QO={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&ty(t[0],"none")?[]:Co(t).map(function(r){for(var s={color:nl.TRANSPARENT,offsetX:Qn,offsetY:Qn,blur:Qn},a=0,i=0;i<r.length;i++){var o=r[i];pc(o)?(a===0?s.offsetX=o:a===1?s.offsetY=o:s.blur=o,a++):s.color=Ac.parse(e,o)}return s})}},OO={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},PO={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=HO[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},RO=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},MO=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],s=t[1];t[2],t[3];var a=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,s,a,i,o,l]:null},HO={matrix:RO,matrix3d:MO},N5={type:16,number:50,flags:Lh},KO=[N5,N5],zO={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(tn);return r.length!==2?KO:[r[0],r[1]]}},VO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},C0;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(C0||(C0={}));var qO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return C0.BREAK_ALL;case"keep-all":return C0.KEEP_ALL;case"normal":default:return C0.NORMAL}}},GO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(iu(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},tE={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},$O={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return iu(t)?t.number:1}},WO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},XO={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Wr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},JO={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],s=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:s.push(r.join(" ")),r.length=0;break}}),r.length&&s.push(r.join(" ")),s.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},YO={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ZO={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(iu(t))return t.number;if(Wr(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},eP={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Wr).map(function(r){return r.value})}},tP={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},mn=function(e,t){return(e&t)!==0},rP={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},sP={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var s=[],a=t.filter(O3),i=0;i<a.length;i++){var o=a[i],l=a[i+1];if(o.type===20){var c=l&&iu(l)?l.number:1;s.push({counter:o.value,increment:c})}}return s}},nP={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],s=t.filter(O3),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(Wr(i)&&i.value!=="none"){var l=o&&iu(o)?o.number:0;r.push({counter:i.value,reset:l})}}return r}},aP={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Dh).map(function(r){return tE.parse(e,r)})}},iP={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var s=[],a=t.filter(TQ);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var o=a[i].value,l=a[i+1].value;s.push({open:o,close:l})}return s}},B5=function(e,t,r){if(!e)return"";var s=e[Math.min(t,e.length-1)];return s?r?s.open:s.close:""},oP={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&ty(t[0],"none")?[]:Co(t).map(function(r){for(var s={color:255,offsetX:Qn,offsetY:Qn,blur:Qn,spread:Qn,inset:!1},a=0,i=0;i<r.length;i++){var o=r[i];ty(o,"inset")?s.inset=!0:pc(o)?(a===0?s.offsetX=o:a===1?s.offsetY=o:a===2?s.blur=o:s.spread=o,a++):s.color=Ac.parse(e,o)}return s})}},lP={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],s=[];return t.filter(Wr).forEach(function(a){switch(a.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),r.forEach(function(a){s.indexOf(a)===-1&&s.push(a)}),s}},cP={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},AP={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Dh(t)?t.number:0}},dP=function(){function e(t,r){var s,a;this.animationDuration=Ft(t,aP,r.animationDuration),this.backgroundClip=Ft(t,LQ,r.backgroundClip),this.backgroundColor=Ft(t,DQ,r.backgroundColor),this.backgroundImage=Ft(t,qQ,r.backgroundImage),this.backgroundOrigin=Ft(t,GQ,r.backgroundOrigin),this.backgroundPosition=Ft(t,$Q,r.backgroundPosition),this.backgroundRepeat=Ft(t,WQ,r.backgroundRepeat),this.backgroundSize=Ft(t,JQ,r.backgroundSize),this.borderTopColor=Ft(t,ZQ,r.borderTopColor),this.borderRightColor=Ft(t,eO,r.borderRightColor),this.borderBottomColor=Ft(t,tO,r.borderBottomColor),this.borderLeftColor=Ft(t,rO,r.borderLeftColor),this.borderTopLeftRadius=Ft(t,sO,r.borderTopLeftRadius),this.borderTopRightRadius=Ft(t,nO,r.borderTopRightRadius),this.borderBottomRightRadius=Ft(t,aO,r.borderBottomRightRadius),this.borderBottomLeftRadius=Ft(t,iO,r.borderBottomLeftRadius),this.borderTopStyle=Ft(t,oO,r.borderTopStyle),this.borderRightStyle=Ft(t,lO,r.borderRightStyle),this.borderBottomStyle=Ft(t,cO,r.borderBottomStyle),this.borderLeftStyle=Ft(t,AO,r.borderLeftStyle),this.borderTopWidth=Ft(t,dO,r.borderTopWidth),this.borderRightWidth=Ft(t,uO,r.borderRightWidth),this.borderBottomWidth=Ft(t,hO,r.borderBottomWidth),this.borderLeftWidth=Ft(t,fO,r.borderLeftWidth),this.boxShadow=Ft(t,oP,r.boxShadow),this.color=Ft(t,pO,r.color),this.direction=Ft(t,mO,r.direction),this.display=Ft(t,gO,r.display),this.float=Ft(t,vO,r.cssFloat),this.fontFamily=Ft(t,JO,r.fontFamily),this.fontSize=Ft(t,YO,r.fontSize),this.fontStyle=Ft(t,tP,r.fontStyle),this.fontVariant=Ft(t,eP,r.fontVariant),this.fontWeight=Ft(t,ZO,r.fontWeight),this.letterSpacing=Ft(t,yO,r.letterSpacing),this.lineBreak=Ft(t,wO,r.lineBreak),this.lineHeight=Ft(t,bO,r.lineHeight),this.listStyleImage=Ft(t,_O,r.listStyleImage),this.listStylePosition=Ft(t,NO,r.listStylePosition),this.listStyleType=Ft(t,ry,r.listStyleType),this.marginTop=Ft(t,BO,r.marginTop),this.marginRight=Ft(t,CO,r.marginRight),this.marginBottom=Ft(t,jO,r.marginBottom),this.marginLeft=Ft(t,EO,r.marginLeft),this.opacity=Ft(t,$O,r.opacity);var i=Ft(t,kO,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Ft(t,SO,r.overflowWrap),this.paddingTop=Ft(t,FO,r.paddingTop),this.paddingRight=Ft(t,TO,r.paddingRight),this.paddingBottom=Ft(t,IO,r.paddingBottom),this.paddingLeft=Ft(t,UO,r.paddingLeft),this.paintOrder=Ft(t,lP,r.paintOrder),this.position=Ft(t,DO,r.position),this.textAlign=Ft(t,LO,r.textAlign),this.textDecorationColor=Ft(t,WO,(s=r.textDecorationColor)!==null&&s!==void 0?s:r.color),this.textDecorationLine=Ft(t,XO,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Ft(t,QO,r.textShadow),this.textTransform=Ft(t,OO,r.textTransform),this.transform=Ft(t,PO,r.transform),this.transformOrigin=Ft(t,zO,r.transformOrigin),this.visibility=Ft(t,VO,r.visibility),this.webkitTextStrokeColor=Ft(t,cP,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ft(t,AP,r.webkitTextStrokeWidth),this.wordBreak=Ft(t,qO,r.wordBreak),this.zIndex=Ft(t,GO,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return dc(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return mn(this.display,4)||mn(this.display,33554432)||mn(this.display,268435456)||mn(this.display,536870912)||mn(this.display,67108864)||mn(this.display,134217728)},e}(),uP=function(){function e(t,r){this.content=Ft(t,rP,r.content),this.quotes=Ft(t,iP,r.quotes)}return e}(),C5=function(){function e(t,r){this.counterIncrement=Ft(t,sP,r.counterIncrement),this.counterReset=Ft(t,nP,r.counterReset)}return e}(),Ft=function(e,t,r){var s=new D3,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;s.write(a);var i=new Q3(s.read());switch(t.type){case 2:var o=i.parseComponentValue();return t.parse(e,Wr(o)?o.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return gg.parse(e,i.parseComponentValue());case"color":return Ac.parse(e,i.parseComponentValue());case"image":return K2.parse(e,i.parseComponentValue());case"length":var l=i.parseComponentValue();return pc(l)?l:Qn;case"length-percentage":var c=i.parseComponentValue();return tn(c)?c:Qn;case"time":return tE.parse(e,i.parseComponentValue())}break}},hP="data-html2canvas-debug",fP=function(e){var t=e.getAttribute(hP);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},sy=function(e,t){var r=fP(e);return r===1||t===r},jo=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,sy(r,3))debugger;this.styles=new dP(t,window.getComputedStyle(r,null)),iy(r)&&(this.styles.animationDuration.some(function(s){return s>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=pg(this.context,r),sy(r,4)&&(this.flags|=16)}return e}(),pP="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",j5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ep=0;ep<j5.length;ep++)o0[j5.charCodeAt(ep)]=ep;var mP=function(e){var t=e.length*.75,r=e.length,s,a=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(s=0;s<r;s+=4)i=o0[e.charCodeAt(s)],o=o0[e.charCodeAt(s+1)],l=o0[e.charCodeAt(s+2)],c=o0[e.charCodeAt(s+3)],d[a++]=i<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return A},gP=function(e){for(var t=e.length,r=[],s=0;s<t;s+=2)r.push(e[s+1]<<8|e[s]);return r},xP=function(e){for(var t=e.length,r=[],s=0;s<t;s+=4)r.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return r},nA=5,z2=11,Mx=2,vP=z2-nA,rE=65536>>nA,yP=1<<nA,Hx=yP-1,wP=1024>>nA,bP=rE+wP,_P=bP,NP=32,BP=_P+NP,CP=65536>>z2,jP=1<<vP,EP=jP-1,E5=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},kP=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},SP=function(e,t){var r=mP(e),s=Array.isArray(r)?xP(r):new Uint32Array(r),a=Array.isArray(r)?gP(r):new Uint16Array(r),i=24,o=E5(a,i/2,s[4]/2),l=s[5]===2?E5(a,(i+s[4])/2):kP(s,Math.ceil((i+s[4])/4));return new FP(s[0],s[1],s[2],s[3],o,l)},FP=function(){function e(t,r,s,a,i,o){this.initialValue=t,this.errorValue=r,this.highStart=s,this.highValueIndex=a,this.index=i,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>nA],r=(r<<Mx)+(t&Hx),this.data[r];if(t<=65535)return r=this.index[rE+(t-55296>>nA)],r=(r<<Mx)+(t&Hx),this.data[r];if(t<this.highStart)return r=BP-CP+(t>>z2),r=this.index[r],r+=t>>nA&EP,r=this.index[r],r=(r<<Mx)+(t&Hx),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),k5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TP=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tp=0;tp<k5.length;tp++)TP[k5.charCodeAt(tp)]=tp;var IP=1,Kx=2,zx=3,S5=4,F5=5,UP=7,T5=8,Vx=9,qx=10,I5=11,U5=12,L5=13,D5=14,Gx=15,LP=function(e){for(var t=[],r=0,s=e.length;r<s;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){var i=e.charCodeAt(r++);(i&64512)===56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},DP=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var s=[],a=-1,i="";++a<r;){var o=e[a];o<=65535?s.push(o):(o-=65536,s.push((o>>10)+55296,o%1024+56320)),(a+1===r||s.length>16384)&&(i+=String.fromCharCode.apply(String,s),s.length=0)}return i},QP=SP(pP),mi="",$x="",OP=function(e){return QP.get(e)},PP=function(e,t,r){var s=r-2,a=t[s],i=t[r-1],o=t[r];if(i===Kx&&o===zx)return mi;if(i===Kx||i===zx||i===S5||o===Kx||o===zx||o===S5)return $x;if(i===T5&&[T5,Vx,I5,U5].indexOf(o)!==-1||(i===I5||i===Vx)&&(o===Vx||o===qx)||(i===U5||i===qx)&&o===qx||o===L5||o===F5||o===UP||i===IP)return mi;if(i===L5&&o===D5){for(;a===F5;)a=t[--s];if(a===D5)return mi}if(i===Gx&&o===Gx){for(var l=0;a===Gx;)l++,a=t[--s];if(l%2===0)return mi}return $x},RP=function(e){var t=LP(e),r=t.length,s=0,a=0,i=t.map(OP);return{next:function(){if(s>=r)return{done:!0,value:null};for(var o=mi;s<r&&(o=PP(t,i,++s))===mi;);if(o!==mi||s===r){var l=DP.apply(null,t.slice(a,s));return a=s,{value:l,done:!1}}return{done:!0,value:null}}}},MP=function(e){for(var t=RP(e),r=[],s;!(s=t.next()).done;)s.value&&r.push(s.value.slice());return r},HP=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var s=e.createElement("boundtest");s.style.height=t+"px",s.style.display="block",e.body.appendChild(s),r.selectNode(s);var a=r.getBoundingClientRect(),i=Math.round(a.height);if(e.body.removeChild(s),i===t)return!0}}return!1},KP=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=t.firstChild,a=mg(s.data).map(function(c){return Hs(c)}),i=0,o={},l=a.every(function(c,A){r.setStart(s,i),r.setEnd(s,i+c.length);var d=r.getBoundingClientRect();i+=c.length;var h=d.x>o.x||d.y>o.y;return o=d,A===0?!0:h});return e.body.removeChild(t),l},zP=function(){return typeof new Image().crossOrigin<"u"},VP=function(){return typeof new XMLHttpRequest().responseType=="string"},qP=function(e){var t=new Image,r=e.createElement("canvas"),s=r.getContext("2d");if(!s)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},Q5=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},GP=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var s=t.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,r,r);var a=new Image,i=t.toDataURL();a.src=i;var o=ny(r,r,0,0,a);return s.fillStyle="red",s.fillRect(0,0,r,r),O5(o).then(function(l){s.drawImage(l,0,0);var c=s.getImageData(0,0,r,r).data;s.fillStyle="red",s.fillRect(0,0,r,r);var A=e.createElement("div");return A.style.backgroundImage="url("+i+")",A.style.height=r+"px",Q5(c)?O5(ny(r,r,0,0,A)):Promise.reject(!1)}).then(function(l){return s.drawImage(l,0,0),Q5(s.getImageData(0,0,r,r).data)}).catch(function(){return!1})},ny=function(e,t,r,s,a){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",s.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},O5=function(e){return new Promise(function(t,r){var s=new Image;s.onload=function(){return t(s)},s.onerror=r,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Ln={get SUPPORT_RANGE_BOUNDS(){var e=HP(document);return Object.defineProperty(Ln,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ln.SUPPORT_RANGE_BOUNDS&&KP(document);return Object.defineProperty(Ln,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=qP(document);return Object.defineProperty(Ln,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?GP(document):Promise.resolve(!1);return Object.defineProperty(Ln,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=zP();return Object.defineProperty(Ln,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=VP();return Object.defineProperty(Ln,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ln,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ln,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},j0=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),$P=function(e,t,r,s){var a=JP(t,r),i=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Ln.SUPPORT_RANGE_BOUNDS){var c=P5(s,o,l.length).getClientRects();if(c.length>1){var A=V2(l),d=0;A.forEach(function(f){i.push(new j0(f,dl.fromDOMRectList(e,P5(s,d+o,f.length).getClientRects()))),d+=f.length})}else i.push(new j0(l,dl.fromDOMRectList(e,c)))}else{var h=s.splitText(l.length);i.push(new j0(l,WP(e,s))),s=h}else Ln.SUPPORT_RANGE_BOUNDS||(s=s.splitText(l.length));o+=l.length}),i},WP=function(e,t){var r=t.ownerDocument;if(r){var s=r.createElement("html2canvaswrapper");s.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(s,t);var i=pg(e,s);return s.firstChild&&a.replaceChild(s.firstChild,s),i}}return dl.EMPTY},P5=function(e,t,r){var s=e.ownerDocument;if(!s)throw new Error("Node has no owner document");var a=s.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},V2=function(e){if(Ln.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return MP(e)},XP=function(e,t){if(Ln.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(s){return s.segment})}return ZP(e,t)},JP=function(e,t){return t.letterSpacing!==0?V2(e):XP(e,t)},YP=[32,160,4961,65792,65793,4153,4241],ZP=function(e,t){for(var r=C7(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),s=[],a,i=function(){if(a.value){var o=a.value.slice(),l=mg(o),c="";l.forEach(function(A){YP.indexOf(A)===-1?c+=Hs(A):(c.length&&s.push(c),s.push(Hs(A)),c="")}),c.length&&s.push(c)}};!(a=r.next()).done;)i();return s},eR=function(){function e(t,r,s){this.text=tR(r.data,s.textTransform),this.textBounds=$P(t,this.text,s,r)}return e}(),tR=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(rR,sR);case 2:return e.toUpperCase();default:return e}},rR=/(^|\s|:|-|\(|\))([a-z])/g,sR=function(e,t,r){return e.length>0?t+r.toUpperCase():e},sE=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;return a.src=s.currentSrc||s.src,a.intrinsicWidth=s.naturalWidth,a.intrinsicHeight=s.naturalHeight,a.context.cache.addImage(a.src),a}return t}(jo),nE=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;return a.canvas=s,a.intrinsicWidth=s.width,a.intrinsicHeight=s.height,a}return t}(jo),aE=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this,i=new XMLSerializer,o=pg(r,s);return s.setAttribute("width",o.width+"px"),s.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(s)),a.intrinsicWidth=s.width.baseVal.value,a.intrinsicHeight=s.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(jo),iE=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;return a.value=s.value,a}return t}(jo),ay=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;return a.start=s.start,a.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,a}return t}(jo),nR=[{type:15,flags:0,unit:"px",number:3}],aR=[{type:16,flags:0,number:50}],iR=function(e){return e.width>e.height?new dl(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new dl(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},oR=function(e){var t=e.type===lR?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},Nm="checkbox",Bm="radio",lR="password",R5=707406591,q2=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;switch(a.type=s.type.toLowerCase(),a.checked=s.checked,a.value=oR(s),(a.type===Nm||a.type===Bm)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=iR(a.bounds)),a.type){case Nm:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=nR;break;case Bm:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=aR;break}return a}return t}(jo),oE=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this,i=s.options[s.selectedIndex||0];return a.value=i&&i.text||"",a}return t}(jo),lE=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;return a.value=s.value,a}return t}(jo),cE=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;a.src=s.src,a.width=parseInt(s.width,10)||0,a.height=parseInt(s.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){a.tree=dE(r,s.contentWindow.document.documentElement);var i=s.contentWindow.document.documentElement?B0(r,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):nl.TRANSPARENT,o=s.contentWindow.document.body?B0(r,getComputedStyle(s.contentWindow.document.body).backgroundColor):nl.TRANSPARENT;a.backgroundColor=dc(i)?dc(o)?a.styles.backgroundColor:o:i}}catch{}return a}return t}(jo),cR=["OL","UL","MENU"],Op=function(e,t,r,s){for(var a=t.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,uE(a)&&a.data.trim().length>0)r.textNodes.push(new eR(e,a,r.styles));else if(Nd(a))if(mE(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return Op(e,l,r,s)});else{var o=AE(e,a);o.styles.isVisible()&&(AR(a,o,s)?o.flags|=4:dR(o.styles)&&(o.flags|=2),cR.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?Op(e,a.shadowRoot,o,s):!Cm(a)&&!hE(a)&&!jm(a)&&Op(e,a,o,s))}},AE=function(e,t){return oy(t)?new sE(e,t):fE(t)?new nE(e,t):hE(t)?new aE(e,t):uR(t)?new iE(e,t):hR(t)?new ay(e,t):fR(t)?new q2(e,t):jm(t)?new oE(e,t):Cm(t)?new lE(e,t):pE(t)?new cE(e,t):new jo(e,t)},dE=function(e,t){var r=AE(e,t);return r.flags|=4,Op(e,t,r,r),r},AR=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||G2(e)&&r.styles.isTransparent()},dR=function(e){return e.isPositioned()||e.isFloating()},uE=function(e){return e.nodeType===Node.TEXT_NODE},Nd=function(e){return e.nodeType===Node.ELEMENT_NODE},iy=function(e){return Nd(e)&&typeof e.style<"u"&&!Pp(e)},Pp=function(e){return typeof e.className=="object"},uR=function(e){return e.tagName==="LI"},hR=function(e){return e.tagName==="OL"},fR=function(e){return e.tagName==="INPUT"},pR=function(e){return e.tagName==="HTML"},hE=function(e){return e.tagName==="svg"},G2=function(e){return e.tagName==="BODY"},fE=function(e){return e.tagName==="CANVAS"},M5=function(e){return e.tagName==="VIDEO"},oy=function(e){return e.tagName==="IMG"},pE=function(e){return e.tagName==="IFRAME"},H5=function(e){return e.tagName==="STYLE"},mR=function(e){return e.tagName==="SCRIPT"},Cm=function(e){return e.tagName==="TEXTAREA"},jm=function(e){return e.tagName==="SELECT"},mE=function(e){return e.tagName==="SLOT"},K5=function(e){return e.tagName.indexOf("-")>0},gR=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(s){return r.counters[s].pop()})},e.prototype.parse=function(t){var r=this,s=t.counterIncrement,a=t.counterReset,i=!0;s!==null&&s.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(i=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return i&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),z5={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},V5={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},xR={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},vR={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},XA=function(e,t,r,s,a,i){return e<t||e>r?mh(e,a,i.length>0):s.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=s.values[c];return o},"")+i},gE=function(e,t,r,s){var a="";do r||e--,a=s(e)+a,e/=t;while(e*t>=t);return a},Rs=function(e,t,r,s,a){var i=r-t+1;return(e<0?"-":"")+(gE(Math.abs(e),i,s,function(o){return Hs(Math.floor(o%i)+t)})+a)},Oc=function(e,t,r){r===void 0&&(r=". ");var s=t.length;return gE(Math.abs(e),s,!1,function(a){return t[Math.floor(a%s)]})+r},id=1,Dl=2,Ql=4,l0=8,Vo=function(e,t,r,s,a,i){if(e<-9999||e>9999)return mh(e,4,a.length>0);var o=Math.abs(e),l=a;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var A=o%10;A===0&&mn(i,id)&&l!==""?l=t[A]+l:A>1||A===1&&c===0||A===1&&c===1&&mn(i,Dl)||A===1&&c===1&&mn(i,Ql)&&e>100||A===1&&c>1&&mn(i,l0)?l=t[A]+(c>0?r[c-1]:"")+l:A===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?s:"")+l},q5="",G5="",$5="",Wx="",mh=function(e,t,r){var s=r?". ":"",a=r?"":"",i=r?", ":"",o=r?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Rs(e,48,57,!0,s);return l.length<4?"0"+l:l;case 4:return Oc(e,"",a);case 6:return XA(e,1,3999,z5,3,s).toLowerCase();case 7:return XA(e,1,3999,z5,3,s);case 8:return Rs(e,945,969,!1,s);case 9:return Rs(e,97,122,!1,s);case 10:return Rs(e,65,90,!1,s);case 11:return Rs(e,1632,1641,!0,s);case 12:case 49:return XA(e,1,9999,V5,3,s);case 35:return XA(e,1,9999,V5,3,s).toLowerCase();case 13:return Rs(e,2534,2543,!0,s);case 14:case 30:return Rs(e,6112,6121,!0,s);case 15:return Oc(e,"",a);case 16:return Oc(e,"",a);case 17:case 48:return Vo(e,"",q5,"",a,Dl|Ql|l0);case 47:return Vo(e,"",G5,"",a,id|Dl|Ql|l0);case 42:return Vo(e,"",q5,"",a,Dl|Ql|l0);case 41:return Vo(e,"",G5,"",a,id|Dl|Ql|l0);case 26:return Vo(e,"","",$5,a,0);case 25:return Vo(e,"","",$5,a,id|Dl|Ql);case 31:return Vo(e,"","",Wx,i,id|Dl|Ql);case 33:return Vo(e,"","",Wx,i,0);case 32:return Vo(e,"","",Wx,i,id|Dl|Ql);case 18:return Rs(e,2406,2415,!0,s);case 20:return XA(e,1,19999,vR,3,s);case 21:return Rs(e,2790,2799,!0,s);case 22:return Rs(e,2662,2671,!0,s);case 22:return XA(e,1,10999,xR,3,s);case 23:return Oc(e,"");case 24:return Oc(e,"");case 27:return Rs(e,3302,3311,!0,s);case 28:return Oc(e,"",a);case 29:return Oc(e,"",a);case 34:return Rs(e,3792,3801,!0,s);case 37:return Rs(e,6160,6169,!0,s);case 38:return Rs(e,4160,4169,!0,s);case 39:return Rs(e,2918,2927,!0,s);case 40:return Rs(e,1776,1785,!0,s);case 43:return Rs(e,3046,3055,!0,s);case 44:return Rs(e,3174,3183,!0,s);case 45:return Rs(e,3664,3673,!0,s);case 46:return Rs(e,3872,3881,!0,s);case 3:default:return Rs(e,48,57,!0,s)}},xE="data-html2canvas-ignore",W5=function(){function e(t,r,s){if(this.context=t,this.options=s,this.scrolledElements=[],this.referenceElement=r,this.counters=new gR,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var s=this,a=yR(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,A=_R(a).then(function(){return ma(s,void 0,void 0,function(){var d,h;return Yn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(jR),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,bR(c)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,h)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(BR(document.doctype)+"<html></html>"),CR(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),A},e.prototype.createElementClone=function(t){if(sy(t,2))debugger;if(fE(t))return this.createCanvasClone(t);if(M5(t))return this.createVideoClone(t);if(H5(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return oy(r)&&(oy(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),K5(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return Xx(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var s=[].slice.call(r.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),a=t.cloneNode(!1);return a.textContent=s,a}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var s=t.ownerDocument.createElement("img");try{return s.src=t.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var i=t.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var s=r.getContext("2d");try{return s&&(s.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||s.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,s){(!Nd(r)||!mR(r)&&!r.hasAttribute(xE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Nd(r)||!H5(r))&&t.appendChild(this.cloneNode(r,s))},e.prototype.cloneChildNodes=function(t,r,s){for(var a=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(Nd(i)&&mE(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,s)})}else this.appendChildNode(r,i,s)},e.prototype.cloneNode=function(t,r){if(uE(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var s=t.ownerDocument.defaultView;if(s&&Nd(t)&&(iy(t)||Pp(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var i=s.getComputedStyle(t),o=s.getComputedStyle(t,":before"),l=s.getComputedStyle(t,":after");this.referenceElement===t&&iy(a)&&(this.clonedReferenceElement=a),G2(a)&&SR(a);var c=this.counters.parse(new C5(this.context,i)),A=this.resolvePseudoContent(t,a,o,E0.BEFORE);K5(t)&&(r=!0),M5(t)||this.cloneChildNodes(t,a,r),A&&a.insertBefore(A,a.firstChild);var d=this.resolvePseudoContent(t,a,l,E0.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(i&&(this.options.copyStyles||Pp(t))&&!pE(t)||r)&&Xx(i,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(Cm(t)||jm(t))&&(Cm(a)||jm(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,s,a){var i=this;if(s){var o=s.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||s.display==="none")){this.counters.parse(new C5(this.context,s));var c=new uP(this.context,s),A=l.createElement("html2canvaspseudoelement");Xx(s,A),c.content.forEach(function(h){if(h.type===0)A.appendChild(l.createTextNode(h.value));else if(h.type===22){var f=l.createElement("img");f.src=h.value,f.style.opacity="1",A.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var u=h.values.filter(Wr);u.length&&A.appendChild(l.createTextNode(t.getAttribute(u[0].value)||""))}else if(h.name==="counter"){var p=h.values.filter(Yd),g=p[0],w=p[1];if(g&&Wr(g)){var v=i.counters.getCounterValue(g.value),x=w&&Wr(w)?ry.parse(i.context,w.value):3;A.appendChild(l.createTextNode(mh(v,x,!1)))}}else if(h.name==="counters"){var y=h.values.filter(Yd),g=y[0],_=y[1],w=y[2];if(g&&Wr(g)){var I=i.counters.getCounterValues(g.value),k=w&&Wr(w)?ry.parse(i.context,w.value):3,T=_&&_.type===0?_.value:"",S=I.map(function(U){return mh(U,k,!1)}).join(T);A.appendChild(l.createTextNode(S))}}}else if(h.type===20)switch(h.value){case"open-quote":A.appendChild(l.createTextNode(B5(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":A.appendChild(l.createTextNode(B5(c.quotes,--i.quoteDepth,!1)));break;default:A.appendChild(l.createTextNode(h.value))}}),A.className=ly+" "+cy;var d=a===E0.BEFORE?" "+ly:" "+cy;return Pp(r)?r.className.baseValue+=d:r.className+=d,A}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),E0;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(E0||(E0={}));var yR=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(xE,"true"),e.body.appendChild(r),r},wR=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},bR=function(e){return Promise.all([].slice.call(e.images,0).map(wR))},_R=function(e){return new Promise(function(t,r){var s=e.contentWindow;if(!s)return r("No window assigned for iframe");var a=s.document;s.onload=e.onload=function(){s.onload=e.onload=null;var i=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(i),t(e))},50)}})},NR=["all","d","content"],Xx=function(e,t){for(var r=e.length-1;r>=0;r--){var s=e.item(r);NR.indexOf(s)===-1&&t.style.setProperty(s,e.getPropertyValue(s))}return t},BR=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},CR=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},jR=function(e){var t=e[0],r=e[1],s=e[2];t.scrollLeft=r,t.scrollTop=s},ER=":before",kR=":after",ly="___html2canvas___pseudoelement_before",cy="___html2canvas___pseudoelement_after",X5=`{
    content: "" !important;
    display: none !important;
}`,SR=function(e){FR(e,"."+ly+ER+X5+`
         .`+cy+kR+X5)},FR=function(e,t){var r=e.ownerDocument;if(r){var s=r.createElement("style");s.textContent=t,e.appendChild(s)}},vE=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),TR=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(Yx(t)||DR(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return ma(this,void 0,void 0,function(){var r,s,a,i,o=this;return Yn(this,function(l){switch(l.label){case 0:return r=vE.isSameOrigin(t),s=!Jx(t)&&this._options.useCORS===!0&&Ln.SUPPORT_CORS_IMAGES&&!r,a=!Jx(t)&&!r&&!Yx(t)&&typeof this._options.proxy=="string"&&Ln.SUPPORT_CORS_XHR&&!s,!r&&this._options.allowTaint===!1&&!Jx(t)&&!Yx(t)&&!a&&!s?[2]:(i=t,a?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,A){var d=new Image;d.onload=function(){return c(d)},d.onerror=A,(QR(i)||s)&&(d.crossOrigin="anonymous"),d.src=i,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(i,o){var l=Ln.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")i(c.response);else{var h=new FileReader;h.addEventListener("load",function(){return i(h.result)},!1),h.addEventListener("error",function(f){return o(f)},!1),h.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var A=s.indexOf("?")>-1?"&":"?";if(c.open("GET",""+s+A+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),IR=/^data:image\/svg\+xml/i,UR=/^data:image\/.*;base64,/i,LR=/^data:image\/.*/i,DR=function(e){return Ln.SUPPORT_SVG_DRAWING||!OR(e)},Jx=function(e){return LR.test(e)},QR=function(e){return UR.test(e)},Yx=function(e){return e.substr(0,4)==="blob"},OR=function(e){return e.substr(-3).toLowerCase()==="svg"||IR.test(e)},kt=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),JA=function(e,t,r){return new kt(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},rp=function(){function e(t,r,s,a){this.type=1,this.start=t,this.startControl=r,this.endControl=s,this.end=a}return e.prototype.subdivide=function(t,r){var s=JA(this.start,this.startControl,t),a=JA(this.startControl,this.endControl,t),i=JA(this.endControl,this.end,t),o=JA(s,a,t),l=JA(a,i,t),c=JA(o,l,t);return r?new e(this.start,s,o,c):new e(c,l,i,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),yi=function(e){return e.type===1},PR=function(){function e(t){var r=t.styles,s=t.bounds,a=i0(r.borderTopLeftRadius,s.width,s.height),i=a[0],o=a[1],l=i0(r.borderTopRightRadius,s.width,s.height),c=l[0],A=l[1],d=i0(r.borderBottomRightRadius,s.width,s.height),h=d[0],f=d[1],u=i0(r.borderBottomLeftRadius,s.width,s.height),p=u[0],g=u[1],w=[];w.push((i+c)/s.width),w.push((p+h)/s.width),w.push((o+g)/s.height),w.push((A+f)/s.height);var v=Math.max.apply(Math,w);v>1&&(i/=v,o/=v,c/=v,A/=v,h/=v,f/=v,p/=v,g/=v);var x=s.width-c,y=s.height-f,_=s.width-h,I=s.height-g,k=r.borderTopWidth,T=r.borderRightWidth,S=r.borderBottomWidth,B=r.borderLeftWidth,R=is(r.paddingTop,t.bounds.width),U=is(r.paddingRight,t.bounds.width),L=is(r.paddingBottom,t.bounds.width),D=is(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?ps(s.left+B/3,s.top+k/3,i-B/3,o-k/3,Ur.TOP_LEFT):new kt(s.left+B/3,s.top+k/3),this.topRightBorderDoubleOuterBox=i>0||o>0?ps(s.left+x,s.top+k/3,c-T/3,A-k/3,Ur.TOP_RIGHT):new kt(s.left+s.width-T/3,s.top+k/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?ps(s.left+_,s.top+y,h-T/3,f-S/3,Ur.BOTTOM_RIGHT):new kt(s.left+s.width-T/3,s.top+s.height-S/3),this.bottomLeftBorderDoubleOuterBox=p>0||g>0?ps(s.left+B/3,s.top+I,p-B/3,g-S/3,Ur.BOTTOM_LEFT):new kt(s.left+B/3,s.top+s.height-S/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?ps(s.left+B*2/3,s.top+k*2/3,i-B*2/3,o-k*2/3,Ur.TOP_LEFT):new kt(s.left+B*2/3,s.top+k*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?ps(s.left+x,s.top+k*2/3,c-T*2/3,A-k*2/3,Ur.TOP_RIGHT):new kt(s.left+s.width-T*2/3,s.top+k*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?ps(s.left+_,s.top+y,h-T*2/3,f-S*2/3,Ur.BOTTOM_RIGHT):new kt(s.left+s.width-T*2/3,s.top+s.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||g>0?ps(s.left+B*2/3,s.top+I,p-B*2/3,g-S*2/3,Ur.BOTTOM_LEFT):new kt(s.left+B*2/3,s.top+s.height-S*2/3),this.topLeftBorderStroke=i>0||o>0?ps(s.left+B/2,s.top+k/2,i-B/2,o-k/2,Ur.TOP_LEFT):new kt(s.left+B/2,s.top+k/2),this.topRightBorderStroke=i>0||o>0?ps(s.left+x,s.top+k/2,c-T/2,A-k/2,Ur.TOP_RIGHT):new kt(s.left+s.width-T/2,s.top+k/2),this.bottomRightBorderStroke=h>0||f>0?ps(s.left+_,s.top+y,h-T/2,f-S/2,Ur.BOTTOM_RIGHT):new kt(s.left+s.width-T/2,s.top+s.height-S/2),this.bottomLeftBorderStroke=p>0||g>0?ps(s.left+B/2,s.top+I,p-B/2,g-S/2,Ur.BOTTOM_LEFT):new kt(s.left+B/2,s.top+s.height-S/2),this.topLeftBorderBox=i>0||o>0?ps(s.left,s.top,i,o,Ur.TOP_LEFT):new kt(s.left,s.top),this.topRightBorderBox=c>0||A>0?ps(s.left+x,s.top,c,A,Ur.TOP_RIGHT):new kt(s.left+s.width,s.top),this.bottomRightBorderBox=h>0||f>0?ps(s.left+_,s.top+y,h,f,Ur.BOTTOM_RIGHT):new kt(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=p>0||g>0?ps(s.left,s.top+I,p,g,Ur.BOTTOM_LEFT):new kt(s.left,s.top+s.height),this.topLeftPaddingBox=i>0||o>0?ps(s.left+B,s.top+k,Math.max(0,i-B),Math.max(0,o-k),Ur.TOP_LEFT):new kt(s.left+B,s.top+k),this.topRightPaddingBox=c>0||A>0?ps(s.left+Math.min(x,s.width-T),s.top+k,x>s.width+T?0:Math.max(0,c-T),Math.max(0,A-k),Ur.TOP_RIGHT):new kt(s.left+s.width-T,s.top+k),this.bottomRightPaddingBox=h>0||f>0?ps(s.left+Math.min(_,s.width-B),s.top+Math.min(y,s.height-S),Math.max(0,h-T),Math.max(0,f-S),Ur.BOTTOM_RIGHT):new kt(s.left+s.width-T,s.top+s.height-S),this.bottomLeftPaddingBox=p>0||g>0?ps(s.left+B,s.top+Math.min(I,s.height-S),Math.max(0,p-B),Math.max(0,g-S),Ur.BOTTOM_LEFT):new kt(s.left+B,s.top+s.height-S),this.topLeftContentBox=i>0||o>0?ps(s.left+B+D,s.top+k+R,Math.max(0,i-(B+D)),Math.max(0,o-(k+R)),Ur.TOP_LEFT):new kt(s.left+B+D,s.top+k+R),this.topRightContentBox=c>0||A>0?ps(s.left+Math.min(x,s.width+B+D),s.top+k+R,x>s.width+B+D?0:c-B+D,A-(k+R),Ur.TOP_RIGHT):new kt(s.left+s.width-(T+U),s.top+k+R),this.bottomRightContentBox=h>0||f>0?ps(s.left+Math.min(_,s.width-(B+D)),s.top+Math.min(y,s.height+k+R),Math.max(0,h-(T+U)),f-(S+L),Ur.BOTTOM_RIGHT):new kt(s.left+s.width-(T+U),s.top+s.height-(S+L)),this.bottomLeftContentBox=p>0||g>0?ps(s.left+B+D,s.top+I,Math.max(0,p-(B+D)),g-(S+L),Ur.BOTTOM_LEFT):new kt(s.left+B+D,s.top+s.height-(S+L))}return e}(),Ur;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ur||(Ur={}));var ps=function(e,t,r,s,a){var i=4*((Math.sqrt(2)-1)/3),o=r*i,l=s*i,c=e+r,A=t+s;switch(a){case Ur.TOP_LEFT:return new rp(new kt(e,A),new kt(e,A-l),new kt(c-o,t),new kt(c,t));case Ur.TOP_RIGHT:return new rp(new kt(e,t),new kt(e+o,t),new kt(c,A-l),new kt(c,A));case Ur.BOTTOM_RIGHT:return new rp(new kt(c,t),new kt(c,t+l),new kt(e+o,A),new kt(e,A));case Ur.BOTTOM_LEFT:default:return new rp(new kt(c,A),new kt(c-o,A),new kt(e,t+l),new kt(e,t))}},Em=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},RR=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},km=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},MR=function(){function e(t,r,s){this.offsetX=t,this.offsetY=r,this.matrix=s,this.type=0,this.target=6}return e}(),sp=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),HR=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),KR=function(e){return e.type===0},yE=function(e){return e.type===1},zR=function(e){return e.type===2},J5=function(e,t){return e.length===t.length?e.some(function(r,s){return r===t[s]}):!1},VR=function(e,t,r,s,a){return e.map(function(i,o){switch(o){case 0:return i.add(t,r);case 1:return i.add(t+s,r);case 2:return i.add(t+s,r+a);case 3:return i.add(t,r+a)}return i})},wE=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),bE=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new PR(this.container),this.container.styles.opacity<1&&this.effects.push(new HR(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new MR(s,a,i))}if(this.container.styles.overflowX!==0){var o=Em(this.curves),l=km(this.curves);J5(o,l)?this.effects.push(new sp(o,6)):(this.effects.push(new sp(o,2)),this.effects.push(new sp(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,a=this.effects.slice(0);s;){var i=s.effects.filter(function(c){return!yE(c)});if(r||s.container.styles.position!==0||!s.parent){if(a.unshift.apply(a,i),r=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var o=Em(s.curves),l=km(s.curves);J5(o,l)||a.unshift(new sp(l,6))}}else a.unshift.apply(a,i);s=s.parent}return a.filter(function(c){return mn(c.target,t)})},e}(),Ay=function(e,t,r,s){e.container.elements.forEach(function(a){var i=mn(a.flags,4),o=mn(a.flags,2),l=new bE(a,e);mn(a.styles.display,2048)&&s.push(l);var c=mn(a.flags,8)?[]:s;if(i||o){var A=i||a.styles.isPositioned()?r:t,d=new wE(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var f=0;A.negativeZIndex.some(function(p,g){return h>p.element.container.styles.zIndex.order?(f=g,!1):f>0}),A.negativeZIndex.splice(f,0,d)}else if(h>0){var u=0;A.positiveZIndex.some(function(p,g){return h>=p.element.container.styles.zIndex.order?(u=g+1,!1):u>0}),A.positiveZIndex.splice(u,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);Ay(l,d,i?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),Ay(l,t,r,c);mn(a.flags,8)&&_E(a,c)})},_E=function(e,t){for(var r=e instanceof ay?e.start:1,s=e instanceof ay?e.reversed:!1,a=0;a<t.length;a++){var i=t[a];i.container instanceof iE&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=mh(r,i.container.styles.listStyleType,!0),r+=s?-1:1}},qR=function(e){var t=new bE(e,null),r=new wE(t),s=[];return Ay(t,r,r,s),_E(t.container,s),r},Y5=function(e,t){switch(t){case 0:return _i(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return _i(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return _i(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return _i(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},GR=function(e,t){switch(t){case 0:return _i(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return _i(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return _i(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return _i(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},$R=function(e,t){switch(t){case 0:return _i(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return _i(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return _i(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return _i(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},WR=function(e,t){switch(t){case 0:return np(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return np(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return np(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return np(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},np=function(e,t){var r=[];return yi(e)?r.push(e.subdivide(.5,!1)):r.push(e),yi(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},_i=function(e,t,r,s){var a=[];return yi(e)?a.push(e.subdivide(.5,!1)):a.push(e),yi(r)?a.push(r.subdivide(.5,!0)):a.push(r),yi(s)?a.push(s.subdivide(.5,!0).reverse()):a.push(s),yi(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},NE=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Sm=function(e){var t=e.styles,r=e.bounds,s=is(t.paddingLeft,r.width),a=is(t.paddingRight,r.width),i=is(t.paddingTop,r.width),o=is(t.paddingBottom,r.width);return r.add(s+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+s+a),-(t.borderTopWidth+t.borderBottomWidth+i+o))},XR=function(e,t){return e===0?t.bounds:e===2?Sm(t):NE(t)},JR=function(e,t){return e===0?t.bounds:e===2?Sm(t):NE(t)},Zx=function(e,t,r){var s=XR(od(e.styles.backgroundOrigin,t),e),a=JR(od(e.styles.backgroundClip,t),e),i=YR(od(e.styles.backgroundSize,t),r,s),o=i[0],l=i[1],c=i0(od(e.styles.backgroundPosition,t),s.width-o,s.height-l),A=ZR(od(e.styles.backgroundRepeat,t),c,i,s,a),d=Math.round(s.left+c[0]),h=Math.round(s.top+c[1]);return[A,d,h,o,l]},YA=function(e){return Wr(e)&&e.value===Ld.AUTO},ap=function(e){return typeof e=="number"},YR=function(e,t,r){var s=t[0],a=t[1],i=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(tn(o)&&l&&tn(l))return[is(o,r.width),is(l,r.height)];var c=ap(i);if(Wr(o)&&(o.value===Ld.CONTAIN||o.value===Ld.COVER)){if(ap(i)){var A=r.width/r.height;return A<i!=(o.value===Ld.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var d=ap(s),h=ap(a),f=d||h;if(YA(o)&&(!l||YA(l))){if(d&&h)return[s,a];if(!c&&!f)return[r.width,r.height];if(f&&c){var u=d?s:a*i,p=h?a:s/i;return[u,p]}var g=d?s:r.width,w=h?a:r.height;return[g,w]}if(c){var v=0,x=0;return tn(o)?v=is(o,r.width):tn(l)&&(x=is(l,r.height)),YA(o)?v=x*i:(!l||YA(l))&&(x=v/i),[v,x]}var y=null,_=null;if(tn(o)?y=is(o,r.width):l&&tn(l)&&(_=is(l,r.height)),y!==null&&(!l||YA(l))&&(_=d&&h?y/s*a:r.height),_!==null&&YA(o)&&(y=d&&h?_/a*s:r.width),y!==null&&_!==null)return[y,_];throw new Error("Unable to calculate background-size for element")},od=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},ZR=function(e,t,r,s,a){var i=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new kt(Math.round(s.left),Math.round(s.top+o)),new kt(Math.round(s.left+s.width),Math.round(s.top+o)),new kt(Math.round(s.left+s.width),Math.round(c+s.top+o)),new kt(Math.round(s.left),Math.round(c+s.top+o))];case 3:return[new kt(Math.round(s.left+i),Math.round(s.top)),new kt(Math.round(s.left+i+l),Math.round(s.top)),new kt(Math.round(s.left+i+l),Math.round(s.height+s.top)),new kt(Math.round(s.left+i),Math.round(s.height+s.top))];case 1:return[new kt(Math.round(s.left+i),Math.round(s.top+o)),new kt(Math.round(s.left+i+l),Math.round(s.top+o)),new kt(Math.round(s.left+i+l),Math.round(s.top+o+c)),new kt(Math.round(s.left+i),Math.round(s.top+o+c))];default:return[new kt(Math.round(a.left),Math.round(a.top)),new kt(Math.round(a.left+a.width),Math.round(a.top)),new kt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new kt(Math.round(a.left),Math.round(a.height+a.top))]}},eM="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Z5="Hidden Text",tM=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var s=this._document.createElement("div"),a=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;s.style.visibility="hidden",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",o.appendChild(s),a.src=eM,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Z5)),s.appendChild(i),s.appendChild(a);var l=a.offsetTop-i.offsetTop+2;s.removeChild(i),s.appendChild(this._document.createTextNode(Z5)),s.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-s.offsetTop+2;return o.removeChild(s),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var s=t+" "+r;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(t,r)),this._data[s]},e}(),BE=function(){function e(t,r){this.context=t,this.options=r}return e}(),rM=1e4,sM=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;return a._activeEffects=[],a.canvas=s.canvas?s.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),s.canvas||(a.canvas.width=Math.floor(s.width*s.scale),a.canvas.height=Math.floor(s.height*s.scale),a.canvas.style.width=s.width+"px",a.canvas.style.height=s.height+"px"),a.fontMetrics=new tM(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-s.x,-s.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),a}return t.prototype.applyEffects=function(r){for(var s=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return s.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),zR(r)&&(this.ctx.globalAlpha=r.opacity),KR(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),yE(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return ma(this,void 0,void 0,function(){var s;return Yn(this,function(a){switch(a.label){case 0:return s=r.element.container.styles,s.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return ma(this,void 0,void 0,function(){return Yn(this,function(s){switch(s.label){case 0:if(mn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(r)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,s,a){var i=this;if(s===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=V2(r.text);o.reduce(function(l,c){return i.ctx.fillText(c,l,r.bounds.top+a),l+i.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var s=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=lM(r.fontFamily).join(", "),i=Dh(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,s,r.fontWeight,i,a].join(" "),a,i]},t.prototype.renderTextNode=function(r,s){return ma(this,void 0,void 0,function(){var a,i,o,l,c,A,d,h,f=this;return Yn(this,function(u){return a=this.createFontStyle(s),i=a[0],o=a[1],l=a[2],this.ctx.font=i,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),A=c.baseline,d=c.middle,h=s.paintOrder,r.textBounds.forEach(function(p){h.forEach(function(g){switch(g){case 0:f.ctx.fillStyle=yn(s.color),f.renderTextWithLetterSpacing(p,s.letterSpacing,A);var w=s.textShadow;w.length&&p.text.trim().length&&(w.slice(0).reverse().forEach(function(v){f.ctx.shadowColor=yn(v.color),f.ctx.shadowOffsetX=v.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=v.offsetY.number*f.options.scale,f.ctx.shadowBlur=v.blur.number,f.renderTextWithLetterSpacing(p,s.letterSpacing,A)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),s.textDecorationLine.length&&(f.ctx.fillStyle=yn(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(v){switch(v){case 1:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+A),p.bounds.width,1);break;case 2:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:f.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+d),p.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&p.text.trim().length&&(f.ctx.strokeStyle=yn(s.webkitTextStrokeColor),f.ctx.lineWidth=s.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+A)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,s,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=Sm(r),o=km(s);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return ma(this,void 0,void 0,function(){var s,a,i,o,l,c,x,x,A,d,h,f,_,u,p,I,g,w,v,x,y,_,I;return Yn(this,function(k){switch(k.label){case 0:this.applyEffects(r.getEffects(4)),s=r.container,a=r.curves,i=s.styles,o=0,l=s.textNodes,k.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:k.sent(),k.label=3;case 3:return o++,[3,1];case 4:if(!(s instanceof sE))return[3,8];k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return x=k.sent(),this.renderReplacedElement(s,a,x),[3,8];case 7:return k.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof nE&&this.renderReplacedElement(s,a,s.canvas),!(s instanceof aE))return[3,12];k.label=9;case 9:return k.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return x=k.sent(),this.renderReplacedElement(s,a,x),[3,12];case 11:return k.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof cE&&s.tree?(A=new t(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,A.render(s.tree)]):[3,14];case 13:d=k.sent(),s.width&&s.height&&this.ctx.drawImage(d,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),k.label=14;case 14:if(s instanceof q2&&(h=Math.min(s.bounds.width,s.bounds.height),s.type===Nm?s.checked&&(this.ctx.save(),this.path([new kt(s.bounds.left+h*.39363,s.bounds.top+h*.79),new kt(s.bounds.left+h*.16,s.bounds.top+h*.5549),new kt(s.bounds.left+h*.27347,s.bounds.top+h*.44071),new kt(s.bounds.left+h*.39694,s.bounds.top+h*.5649),new kt(s.bounds.left+h*.72983,s.bounds.top+h*.23),new kt(s.bounds.left+h*.84,s.bounds.top+h*.34085),new kt(s.bounds.left+h*.39363,s.bounds.top+h*.79)]),this.ctx.fillStyle=yn(R5),this.ctx.fill(),this.ctx.restore()):s.type===Bm&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+h/2,s.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=yn(R5),this.ctx.fill(),this.ctx.restore())),nM(s)&&s.value.length){switch(f=this.createFontStyle(i),_=f[0],u=f[1],p=this.fontMetrics.getMetrics(_,u).baseline,this.ctx.font=_,this.ctx.fillStyle=yn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=iM(s.styles.textAlign),I=Sm(s),g=0,s.styles.textAlign){case 1:g+=I.width/2;break;case 2:g+=I.width;break}w=I.add(g,0,0,-I.height/2+1),this.ctx.save(),this.path([new kt(I.left,I.top),new kt(I.left+I.width,I.top),new kt(I.left+I.width,I.top+I.height),new kt(I.left,I.top+I.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new j0(s.value,w),i.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mn(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(v=s.styles.listStyleImage,v.type!==0)return[3,18];x=void 0,y=v.url,k.label=15;case 15:return k.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return x=k.sent(),this.ctx.drawImage(x,s.bounds.left-(x.width+10),s.bounds.top),[3,18];case 17:return k.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:r.listValue&&s.styles.listStyleType!==-1&&(_=this.createFontStyle(i)[0],this.ctx.font=_,this.ctx.fillStyle=yn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",I=new dl(s.bounds.left,s.bounds.top+is(s.styles.paddingTop,s.bounds.width),s.bounds.width,_5(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new j0(r.listValue,I),i.letterSpacing,_5(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),k.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return ma(this,void 0,void 0,function(){var s,a,v,i,o,v,l,c,v,A,d,v,h,f,v,u,p,v,g,w,v;return Yn(this,function(x){switch(x.label){case 0:if(mn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:x.sent(),s=0,a=r.negativeZIndex,x.label=2;case 2:return s<a.length?(v=a[s],[4,this.renderStack(v)]):[3,5];case 3:x.sent(),x.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:x.sent(),i=0,o=r.nonInlineLevel,x.label=7;case 7:return i<o.length?(v=o[i],[4,this.renderNode(v)]):[3,10];case 8:x.sent(),x.label=9;case 9:return i++,[3,7];case 10:l=0,c=r.nonPositionedFloats,x.label=11;case 11:return l<c.length?(v=c[l],[4,this.renderStack(v)]):[3,14];case 12:x.sent(),x.label=13;case 13:return l++,[3,11];case 14:A=0,d=r.nonPositionedInlineLevel,x.label=15;case 15:return A<d.length?(v=d[A],[4,this.renderStack(v)]):[3,18];case 16:x.sent(),x.label=17;case 17:return A++,[3,15];case 18:h=0,f=r.inlineLevel,x.label=19;case 19:return h<f.length?(v=f[h],[4,this.renderNode(v)]):[3,22];case 20:x.sent(),x.label=21;case 21:return h++,[3,19];case 22:u=0,p=r.zeroOrAutoZIndexOrTransformedOrOpacity,x.label=23;case 23:return u<p.length?(v=p[u],[4,this.renderStack(v)]):[3,26];case 24:x.sent(),x.label=25;case 25:return u++,[3,23];case 26:g=0,w=r.positiveZIndex,x.label=27;case 27:return g<w.length?(v=w[g],[4,this.renderStack(v)]):[3,30];case 28:x.sent(),x.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var s=this;r.forEach(function(a,i){var o=yi(a)?a.start:a;i===0?s.ctx.moveTo(o.x,o.y):s.ctx.lineTo(o.x,o.y),yi(a)&&s.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,s,a,i){this.path(r),this.ctx.fillStyle=s,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},t.prototype.resizeImage=function(r,s,a){var i;if(r.width===s&&r.height===a)return r;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,s),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,s,a),l},t.prototype.renderBackgroundImage=function(r){return ma(this,void 0,void 0,function(){var s,a,i,o,l,c;return Yn(this,function(A){switch(A.label){case 0:s=r.styles.backgroundImage.length-1,a=function(d){var h,f,u,R,P,te,D,Q,S,p,R,P,te,D,Q,g,w,v,x,y,_,I,k,T,S,B,R,U,L,D,Q,K,P,te,J,V,ie,Y,N,C,E,O;return Yn(this,function(q){switch(q.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,q.label=1;case 1:return q.trys.push([1,3,,4]),[4,i.context.cache.match(f)];case 2:return h=q.sent(),[3,4];case 3:return q.sent(),i.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(u=Zx(r,s,[h.width,h.height,h.width/h.height]),R=u[0],P=u[1],te=u[2],D=u[3],Q=u[4],S=i.ctx.createPattern(i.resizeImage(h,D,Q),"repeat"),i.renderRepeat(R,S,P,te)),[3,6];case 5:KQ(d)?(p=Zx(r,s,[null,null,null]),R=p[0],P=p[1],te=p[2],D=p[3],Q=p[4],g=OQ(d.angle,D,Q),w=g[0],v=g[1],x=g[2],y=g[3],_=g[4],I=document.createElement("canvas"),I.width=D,I.height=Q,k=I.getContext("2d"),T=k.createLinearGradient(v,y,x,_),w5(d.stops,w).forEach(function(se){return T.addColorStop(se.stop,yn(se.color))}),k.fillStyle=T,k.fillRect(0,0,D,Q),D>0&&Q>0&&(S=i.ctx.createPattern(I,"repeat"),i.renderRepeat(R,S,P,te))):zQ(d)&&(B=Zx(r,s,[null,null,null]),R=B[0],U=B[1],L=B[2],D=B[3],Q=B[4],K=d.position.length===0?[H2]:d.position,P=is(K[0],D),te=is(K[K.length-1],Q),J=PQ(d,P,te,D,Q),V=J[0],ie=J[1],V>0&&ie>0&&(Y=i.ctx.createRadialGradient(U+P,L+te,0,U+P,L+te,V),w5(d.stops,V*2).forEach(function(se){return Y.addColorStop(se.stop,yn(se.color))}),i.path(R),i.ctx.fillStyle=Y,V!==ie?(N=r.bounds.left+.5*r.bounds.width,C=r.bounds.top+.5*r.bounds.height,E=ie/V,O=1/E,i.ctx.save(),i.ctx.translate(N,C),i.ctx.transform(1,0,0,E,0,0),i.ctx.translate(-N,-C),i.ctx.fillRect(U,O*(L-C)+C,D,Q*O),i.ctx.restore()):i.ctx.fill())),q.label=6;case 6:return s--,[2]}})},i=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:A.sent(),A.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,s,a){return ma(this,void 0,void 0,function(){return Yn(this,function(i){return this.path(Y5(a,s)),this.ctx.fillStyle=yn(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,s,a,i){return ma(this,void 0,void 0,function(){var o,l;return Yn(this,function(c){switch(c.label){case 0:return s<3?[4,this.renderSolidBorder(r,a,i)]:[3,2];case 1:return c.sent(),[2];case 2:return o=GR(i,a),this.path(o),this.ctx.fillStyle=yn(r),this.ctx.fill(),l=$R(i,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return ma(this,void 0,void 0,function(){var s,a,i,o,l,c,A,d,h=this;return Yn(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),s=r.container.styles,a=!dc(s.backgroundColor)||s.backgroundImage.length,i=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],o=aM(od(s.backgroundClip,0),r.curves),a||s.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),dc(s.backgroundColor)||(this.ctx.fillStyle=yn(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(u){h.ctx.save();var p=Em(r.curves),g=u.inset?0:rM,w=VR(p,-g+(u.inset?1:-1)*u.spread.number,(u.inset?1:-1)*u.spread.number,u.spread.number*(u.inset?-2:2),u.spread.number*(u.inset?-2:2));u.inset?(h.path(p),h.ctx.clip(),h.mask(w)):(h.mask(p),h.ctx.clip(),h.path(w)),h.ctx.shadowOffsetX=u.offsetX.number+g,h.ctx.shadowOffsetY=u.offsetY.number,h.ctx.shadowColor=yn(u.color),h.ctx.shadowBlur=u.blur.number,h.ctx.fillStyle=u.inset?yn(u.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:l=0,c=0,A=i,f.label=3;case 3:return c<A.length?(d=A[c],d.style!==0&&!dc(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:f.sent(),f.label=11;case 11:l++,f.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,s,a,i,o){return ma(this,void 0,void 0,function(){var l,c,A,d,h,f,u,p,g,w,v,x,y,_,I,k,I,k;return Yn(this,function(T){return this.ctx.save(),l=WR(i,a),c=Y5(i,a),o===2&&(this.path(c),this.ctx.clip()),yi(c[0])?(A=c[0].start.x,d=c[0].start.y):(A=c[0].x,d=c[0].y),yi(c[1])?(h=c[1].end.x,f=c[1].end.y):(h=c[1].x,f=c[1].y),a===0||a===2?u=Math.abs(A-h):u=Math.abs(d-f),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),p=s<3?s*3:s*2,g=s<3?s*2:s,o===3&&(p=s,g=s),w=!0,u<=p*2?w=!1:u<=p*2+g?(v=u/(2*p+g),p*=v,g*=v):(x=Math.floor((u+g)/(p+g)),y=(u-x*p)/(x-1),_=(u-(x+1)*p)/x,g=_<=0||Math.abs(g-y)<Math.abs(g-_)?y:_),w&&(o===3?this.ctx.setLineDash([0,p+g]):this.ctx.setLineDash([p,g])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=yn(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(yi(c[0])&&(I=c[3],k=c[0],this.ctx.beginPath(),this.formatPath([new kt(I.end.x,I.end.y),new kt(k.start.x,k.start.y)]),this.ctx.stroke()),yi(c[1])&&(I=c[1],k=c[2],this.ctx.beginPath(),this.formatPath([new kt(I.end.x,I.end.y),new kt(k.start.x,k.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return ma(this,void 0,void 0,function(){var s;return Yn(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=yn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=qR(r),[4,this.renderStack(s)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(BE),nM=function(e){return e instanceof lE||e instanceof oE?!0:e instanceof q2&&e.type!==Bm&&e.type!==Nm},aM=function(e,t){switch(e){case 0:return Em(t);case 2:return RR(t);case 1:default:return km(t)}},iM=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},oM=["-apple-system","system-ui"],lM=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return oM.indexOf(t)===-1}):e},cM=function(e){ao(t,e);function t(r,s){var a=e.call(this,r,s)||this;return a.canvas=s.canvas?s.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=s,a.canvas.width=Math.floor(s.width*s.scale),a.canvas.height=Math.floor(s.height*s.scale),a.canvas.style.width=s.width+"px",a.canvas.style.height=s.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-s.x,-s.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),a}return t.prototype.render=function(r){return ma(this,void 0,void 0,function(){var s,a;return Yn(this,function(i){switch(i.label){case 0:return s=ny(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,AM(s)];case 1:return a=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=yn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(BE),AM=function(e){return new Promise(function(t,r){var s=new Image;s.onload=function(){t(s)},s.onerror=r,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},dM=function(){function e(t){var r=t.id,s=t.enabled;this.id=r,this.enabled=s,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Qf([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Qf([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Qf([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Qf([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),uM=function(){function e(t,r){var s;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new dM({id:this.instanceName,enabled:t.logging}),this.cache=(s=t.cache)!==null&&s!==void 0?s:new TR(this,t)}return e.instanceCount=1,e}(),$2=function(e,t){return t===void 0&&(t={}),hM(e,t)};typeof window<"u"&&vE.setContext(window);var hM=function(e,t){return ma(void 0,void 0,void 0,function(){var r,s,a,i,o,l,c,A,d,h,f,u,p,g,w,v,x,y,_,I,T,k,T,S,B,R,U,L,D,Q,K,P,te,J,V,ie,Y,N,C,E;return Yn(this,function(O){switch(O.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(s=r.defaultView,!s)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(R=t.useCORS)!==null&&R!==void 0?R:!1},i=Kv({logging:(U=t.logging)!==null&&U!==void 0?U:!0,cache:t.cache},a),o={windowWidth:(L=t.windowWidth)!==null&&L!==void 0?L:s.innerWidth,windowHeight:(D=t.windowHeight)!==null&&D!==void 0?D:s.innerHeight,scrollX:(Q=t.scrollX)!==null&&Q!==void 0?Q:s.pageXOffset,scrollY:(K=t.scrollY)!==null&&K!==void 0?K:s.pageYOffset},l=new dl(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new uM(i,l),A=(P=t.foreignObjectRendering)!==null&&P!==void 0?P:!1,d={allowTaint:(te=t.allowTaint)!==null&&te!==void 0?te:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),h=new W5(c,e,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return u=O.sent(),p=G2(f)||pR(f)?VD(f.ownerDocument):pg(c,f),g=p.width,w=p.height,v=p.left,x=p.top,y=fM(c,f,t.backgroundColor),_={canvas:t.canvas,backgroundColor:y,scale:(V=(J=t.scale)!==null&&J!==void 0?J:s.devicePixelRatio)!==null&&V!==void 0?V:1,x:((ie=t.x)!==null&&ie!==void 0?ie:0)+v,y:((Y=t.y)!==null&&Y!==void 0?Y:0)+x,width:(N=t.width)!==null&&N!==void 0?N:Math.ceil(g),height:(C=t.height)!==null&&C!==void 0?C:Math.ceil(w)},A?(c.logger.debug("Document cloned, using foreign object rendering"),T=new cM(c,_),[4,T.render(f)]):[3,3];case 2:return I=O.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+v+","+x+" with size "+g+"x"+w+" using computed rendering"),c.logger.debug("Starting DOM parsing"),k=dE(c,f),y===k.styles.backgroundColor&&(k.styles.backgroundColor=nl.TRANSPARENT),c.logger.debug("Starting renderer for element at "+_.x+","+_.y+" with size "+_.width+"x"+_.height),T=new sM(c,_),[4,T.render(k)];case 4:I=O.sent(),O.label=5;case 5:return(!((E=t.removeContainer)!==null&&E!==void 0)||E)&&(W5.destroy(u)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,I]}})})},fM=function(e,t,r){var s=t.ownerDocument,a=s.documentElement?B0(e,getComputedStyle(s.documentElement).backgroundColor):nl.TRANSPARENT,i=s.body?B0(e,getComputedStyle(s.body).backgroundColor):nl.TRANSPARENT,o=typeof r=="string"?B0(e,r):r===null?nl.TRANSPARENT:4294967295;return t===s.documentElement?dc(a)?dc(i)?o:i:a:o};const pM=Object.freeze(Object.defineProperty({__proto__:null,default:$2},Symbol.toStringTag,{value:"Module"})),mM="modulepreload",gM=function(e){return"/"+e},e4={},e1=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=gM(c),c in e4)return;e4[c]=!0;const A=c.endsWith(".css"),d=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=A?"stylesheet":mM,A||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),A)return new Promise((f,u)=>{h.addEventListener("load",f),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Mr(e){"@babel/helpers - typeof";return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mr(e)}var so=Uint8Array,ri=Uint16Array,W2=Int32Array,X2=new so([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),J2=new so([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),t4=new so([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),CE=function(e,t){for(var r=new ri(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var a=new W2(r[30]),s=1;s<30;++s)for(var i=r[s];i<r[s+1];++i)a[i]=i-r[s]<<5|s;return{b:r,r:a}},jE=CE(X2,2),xM=jE.b,dy=jE.r;xM[28]=258,dy[258]=28;var vM=CE(J2,0),r4=vM.r,uy=new ri(32768);for(var hs=0;hs<32768;++hs){var Il=(hs&43690)>>1|(hs&21845)<<1;Il=(Il&52428)>>2|(Il&13107)<<2,Il=(Il&61680)>>4|(Il&3855)<<4,uy[hs]=((Il&65280)>>8|(Il&255)<<8)>>1}var k0=function(e,t,r){for(var s=e.length,a=0,i=new ri(t);a<s;++a)e[a]&&++i[e[a]-1];var o=new ri(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new ri(1<<t);var c=15-t;for(a=0;a<s;++a)if(e[a])for(var A=a<<4|e[a],d=t-e[a],h=o[e[a]-1]++<<d,f=h|(1<<d)-1;h<=f;++h)l[uy[h]>>c]=A}else for(l=new ri(s),a=0;a<s;++a)e[a]&&(l[a]=uy[o[e[a]-1]++]>>15-e[a]);return l},fA=new so(288);for(var hs=0;hs<144;++hs)fA[hs]=8;for(var hs=144;hs<256;++hs)fA[hs]=9;for(var hs=256;hs<280;++hs)fA[hs]=7;for(var hs=280;hs<288;++hs)fA[hs]=8;var Fm=new so(32);for(var hs=0;hs<32;++hs)Fm[hs]=5;var yM=k0(fA,9,0),wM=k0(Fm,5,0),EE=function(e){return(e+7)/8|0},bM=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new so(e.subarray(t,r))},qo=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8},$u=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},t1=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var a=r.length,i=r.slice();if(!a)return{t:SE,l:0};if(a==1){var o=new so(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(I,k){return I.f-k.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],A=0,d=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[A].f<r[h].f?A++:h++],c=r[A!=d&&r[A].f<r[h].f?A++:h++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var f=i[0].s,s=1;s<a;++s)i[s].s>f&&(f=i[s].s);var u=new ri(f+1),p=hy(r[d-1],u,0);if(p>t){var s=0,g=0,w=p-t,v=1<<w;for(i.sort(function(k,T){return u[T.s]-u[k.s]||k.f-T.f});s<a;++s){var x=i[s].s;if(u[x]>t)g+=v-(1<<p-u[x]),u[x]=t;else break}for(g>>=w;g>0;){var y=i[s].s;u[y]<t?g-=1<<t-u[y]++-1:++s}for(;s>=0&&g;--s){var _=i[s].s;u[_]==t&&(--u[_],++g)}p=t}return{t:new so(u),l:p}},hy=function(e,t,r){return e.s==-1?Math.max(hy(e.l,t,r+1),hy(e.r,t,r+1)):t[e.s]=r},s4=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ri(++t),s=0,a=e[0],i=1,o=function(c){r[s++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,s),n:t}},Wu=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},kE=function(e,t,r){var s=r.length,a=EE(t+2);e[a]=s&255,e[a+1]=s>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<s;++i)e[a+i+4]=r[i];return(a+4+s)*8},n4=function(e,t,r,s,a,i,o,l,c,A,d){qo(t,d++,r),++a[256];for(var h=t1(a,15),f=h.t,u=h.l,p=t1(i,15),g=p.t,w=p.l,v=s4(f),x=v.c,y=v.n,_=s4(g),I=_.c,k=_.n,T=new ri(19),S=0;S<x.length;++S)++T[x[S]&31];for(var S=0;S<I.length;++S)++T[I[S]&31];for(var B=t1(T,7),R=B.t,U=B.l,L=19;L>4&&!R[t4[L-1]];--L);var D=A+5<<3,Q=Wu(a,fA)+Wu(i,Fm)+o,K=Wu(a,f)+Wu(i,g)+o+14+3*L+Wu(T,R)+2*T[16]+3*T[17]+7*T[18];if(c>=0&&D<=Q&&D<=K)return kE(t,d,e.subarray(c,c+A));var P,te,J,V;if(qo(t,d,1+(K<Q)),d+=2,K<Q){P=k0(f,u,0),te=f,J=k0(g,w,0),V=g;var ie=k0(R,U,0);qo(t,d,y-257),qo(t,d+5,k-1),qo(t,d+10,L-4),d+=14;for(var S=0;S<L;++S)qo(t,d+3*S,R[t4[S]]);d+=3*L;for(var Y=[x,I],N=0;N<2;++N)for(var C=Y[N],S=0;S<C.length;++S){var E=C[S]&31;qo(t,d,ie[E]),d+=R[E],E>15&&(qo(t,d,C[S]>>5&127),d+=C[S]>>12)}}else P=yM,te=fA,J=wM,V=Fm;for(var S=0;S<l;++S){var O=s[S];if(O>255){var E=O>>18&31;$u(t,d,P[E+257]),d+=te[E+257],E>7&&(qo(t,d,O>>23&31),d+=X2[E]);var q=O&31;$u(t,d,J[q]),d+=V[q],q>3&&($u(t,d,O>>5&8191),d+=J2[q])}else $u(t,d,P[O]),d+=te[O]}return $u(t,d,P[256]),d+te[256]},_M=new W2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),SE=new so(0),NM=function(e,t,r,s,a,i){var o=i.z||e.length,l=new so(s+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(s,l.length-a),A=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var h=_M[t-1],f=h>>13,u=h&8191,p=(1<<r)-1,g=i.p||new ri(32768),w=i.h||new ri(p+1),v=Math.ceil(r/3),x=2*v,y=function(Ve){return(e[Ve]^e[Ve+1]<<v^e[Ve+2]<<x)&p},_=new W2(25e3),I=new ri(288),k=new ri(32),T=0,S=0,B=i.i||0,R=0,U=i.w||0,L=0;B+2<o;++B){var D=y(B),Q=B&32767,K=w[D];if(g[Q]=K,w[D]=Q,U<=B){var P=o-B;if((T>7e3||R>24576)&&(P>423||!A)){d=n4(e,c,0,_,I,k,S,R,L,B-L,d),R=T=S=0,L=B;for(var te=0;te<286;++te)I[te]=0;for(var te=0;te<30;++te)k[te]=0}var J=2,V=0,ie=u,Y=Q-K&32767;if(P>2&&D==y(B-Y))for(var N=Math.min(f,P)-1,C=Math.min(32767,B),E=Math.min(258,P);Y<=C&&--ie&&Q!=K;){if(e[B+J]==e[B+J-Y]){for(var O=0;O<E&&e[B+O]==e[B+O-Y];++O);if(O>J){if(J=O,V=Y,O>N)break;for(var q=Math.min(Y,O-2),se=0,te=0;te<q;++te){var ye=B-Y+te&32767,re=g[ye],de=ye-re&32767;de>se&&(se=de,K=ye)}}}Q=K,K=g[Q],Y+=Q-K&32767}if(V){_[R++]=268435456|dy[J]<<18|r4[V];var Ne=dy[J]&31,z=r4[V]&31;S+=X2[Ne]+J2[z],++I[257+Ne],++k[z],U=B+J,++T}else _[R++]=e[B],++I[e[B]]}}for(B=Math.max(B,U);B<o;++B)_[R++]=e[B],++I[e[B]];d=n4(e,c,A,_,I,k,S,R,L,B-L,d),A||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=w,i.p=g,i.i=B,i.w=U)}else{for(var B=i.w||0;B<o+A;B+=65535){var Be=B+65535;Be>=o&&(c[d/8|0]=A,Be=o),d=kE(c,d+1,e.subarray(B,Be))}i.i=o}return bM(l,0,s+EE(d)+a)},FE=function(){var e=1,t=0;return{p:function(r){for(var s=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=s+=r[o];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}e=s,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},BM=function(e,t,r,s,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new so(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return NM(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,s,a)},TE=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},CM=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=FE();a.p(t.dictionary),TE(e,2,a.d())}};function fy(e,t){t||(t={});var r=FE();r.p(e);var s=BM(e,t,t.dictionary?6:2,4);return CM(s,t),TE(s,s.length-4,r.d()),s}var jM=typeof TextDecoder<"u"&&new TextDecoder,EM=0;try{jM.decode(SE,{stream:!0}),EM=1}catch{}function kM(e){if(Array.isArray(e))return e}function SM(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,A=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){A=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(A)throw a}}return l}}function a4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function FM(e,t){if(e){if(typeof e=="string")return a4(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a4(e,t):void 0}}function TM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i4(e,t){return kM(e)||SM(e,t)||FM(e,t)||TM()}function o4(e,t="utf8"){return new TextDecoder(t).decode(e)}const IM=new TextEncoder;function UM(e){return IM.encode(e)}const LM=1024*8,DM=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),r1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Y2{constructor(t=LM,r={}){Rr(this,"buffer");Rr(this,"byteLength");Rr(this,"byteOffset");Rr(this,"length");Rr(this,"offset");Rr(this,"lastWrittenByte");Rr(this,"littleEndian");Rr(this,"_data");Rr(this,"_mark");Rr(this,"_marks");let s=!1;typeof t=="number"?t=new ArrayBuffer(t):(s=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let o=a;(ArrayBuffer.isView(t)||t instanceof Y2)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+a),t=t.buffer),s?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const s=(this.offset+t)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const s=r1[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+s);if(this.littleEndian===DM&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+s));l.reverse();const c=new r1[r](l.buffer);return this.offset+=s,c.reverse(),c}const o=new r1[r](i);return this.offset+=s,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let s=0;s<t;s++)r+=this.readChar();return r}readUtf8(t=1){return o4(this.readBytes(t))}decodeText(t=1,r="utf8"){return o4(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(UM(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ou(e){let t=e.length;for(;--t>=0;)e[t]=0}const QM=3,OM=258,IE=29,PM=256,RM=PM+1+IE,UE=30,MM=512,HM=new Array((RM+2)*2);ou(HM);const KM=new Array(UE*2);ou(KM);const zM=new Array(MM);ou(zM);const VM=new Array(OM-QM+1);ou(VM);const qM=new Array(IE);ou(qM);const GM=new Array(UE);ou(GM);const $M=(e,t,r,s)=>{let a=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+t[s++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var py=$M;const WM=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var s=0;s<8;s++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},XM=new Uint32Array(WM()),JM=(e,t,r,s)=>{const a=XM,i=s+r;e^=-1;for(let o=s;o<i;o++)e=e>>>8^a[(e^t[o])&255];return e^-1};var fo=JM,my={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},LE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const YM=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ZM=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const s in r)YM(r,s)&&(e[s]=r[s])}}return e},eH=e=>{let t=0;for(let s=0,a=e.length;s<a;s++)t+=e[s].length;const r=new Uint8Array(t);for(let s=0,a=0,i=e.length;s<i;s++){let o=e[s];r.set(o,a),a+=o.length}return r},DE={assign:ZM,flattenChunks:eH};let QE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{QE=!1}const gh=new Uint8Array(256);for(let e=0;e<256;e++)gh[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;gh[254]=gh[254]=1;var tH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,s,a,i,o=e.length,l=0;for(a=0;a<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(s=e.charCodeAt(a+1),(s&64512)===56320&&(r=65536+(r-55296<<10)+(s-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,a=0;i<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(s=e.charCodeAt(a+1),(s&64512)===56320&&(r=65536+(r-55296<<10)+(s-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const rH=(e,t)=>{if(t<65534&&e.subarray&&QE)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r};var sH=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let s,a;const i=new Array(r*2);for(a=0,s=0;s<r;){let o=e[s++];if(o<128){i[a++]=o;continue}let l=gh[o];if(l>4){i[a++]=65533,s+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&s<r;)o=o<<6|e[s++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return rH(i,a)},nH=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+gh[e[r]]>t?r:t},gy={string2buf:tH,buf2string:sH,utf8border:nH};function aH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var iH=aH;const ip=16209,oH=16191;var lH=function(t,r){let s,a,i,o,l,c,A,d,h,f,u,p,g,w,v,x,y,_,I,k,T,S,B,R;const U=t.state;s=t.next_in,B=t.input,a=s+(t.avail_in-5),i=t.next_out,R=t.output,o=i-(r-t.avail_out),l=i+(t.avail_out-257),c=U.dmax,A=U.wsize,d=U.whave,h=U.wnext,f=U.window,u=U.hold,p=U.bits,g=U.lencode,w=U.distcode,v=(1<<U.lenbits)-1,x=(1<<U.distbits)-1;e:do{p<15&&(u+=B[s++]<<p,p+=8,u+=B[s++]<<p,p+=8),y=g[u&v];t:for(;;){if(_=y>>>24,u>>>=_,p-=_,_=y>>>16&255,_===0)R[i++]=y&65535;else if(_&16){I=y&65535,_&=15,_&&(p<_&&(u+=B[s++]<<p,p+=8),I+=u&(1<<_)-1,u>>>=_,p-=_),p<15&&(u+=B[s++]<<p,p+=8,u+=B[s++]<<p,p+=8),y=w[u&x];r:for(;;){if(_=y>>>24,u>>>=_,p-=_,_=y>>>16&255,_&16){if(k=y&65535,_&=15,p<_&&(u+=B[s++]<<p,p+=8,p<_&&(u+=B[s++]<<p,p+=8)),k+=u&(1<<_)-1,k>c){t.msg="invalid distance too far back",U.mode=ip;break e}if(u>>>=_,p-=_,_=i-o,k>_){if(_=k-_,_>d&&U.sane){t.msg="invalid distance too far back",U.mode=ip;break e}if(T=0,S=f,h===0){if(T+=A-_,_<I){I-=_;do R[i++]=f[T++];while(--_);T=i-k,S=R}}else if(h<_){if(T+=A+h-_,_-=h,_<I){I-=_;do R[i++]=f[T++];while(--_);if(T=0,h<I){_=h,I-=_;do R[i++]=f[T++];while(--_);T=i-k,S=R}}}else if(T+=h-_,_<I){I-=_;do R[i++]=f[T++];while(--_);T=i-k,S=R}for(;I>2;)R[i++]=S[T++],R[i++]=S[T++],R[i++]=S[T++],I-=3;I&&(R[i++]=S[T++],I>1&&(R[i++]=S[T++]))}else{T=i-k;do R[i++]=R[T++],R[i++]=R[T++],R[i++]=R[T++],I-=3;while(I>2);I&&(R[i++]=R[T++],I>1&&(R[i++]=R[T++]))}}else if(_&64){t.msg="invalid distance code",U.mode=ip;break e}else{y=w[(y&65535)+(u&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){U.mode=oH;break e}else{t.msg="invalid literal/length code",U.mode=ip;break e}else{y=g[(y&65535)+(u&(1<<_)-1)];continue t}break}}while(s<a&&i<l);I=p>>3,s-=I,p-=I<<3,u&=(1<<p)-1,t.next_in=s,t.next_out=i,t.avail_in=s<a?5+(a-s):5-(s-a),t.avail_out=i<l?257+(l-i):257-(i-l),U.hold=u,U.bits=p};const ZA=15,l4=852,c4=592,A4=0,s1=1,d4=2,cH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),AH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),uH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),hH=(e,t,r,s,a,i,o,l)=>{const c=l.bits;let A=0,d=0,h=0,f=0,u=0,p=0,g=0,w=0,v=0,x=0,y,_,I,k,T,S=null,B;const R=new Uint16Array(ZA+1),U=new Uint16Array(ZA+1);let L=null,D,Q,K;for(A=0;A<=ZA;A++)R[A]=0;for(d=0;d<s;d++)R[t[r+d]]++;for(u=c,f=ZA;f>=1&&R[f]===0;f--);if(u>f&&(u=f),f===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<f&&R[h]===0;h++);for(u<h&&(u=h),w=1,A=1;A<=ZA;A++)if(w<<=1,w-=R[A],w<0)return-1;if(w>0&&(e===A4||f!==1))return-1;for(U[1]=0,A=1;A<ZA;A++)U[A+1]=U[A]+R[A];for(d=0;d<s;d++)t[r+d]!==0&&(o[U[t[r+d]]++]=d);if(e===A4?(S=L=o,B=20):e===s1?(S=cH,L=AH,B=257):(S=dH,L=uH,B=0),x=0,d=0,A=h,T=i,p=u,g=0,I=-1,v=1<<u,k=v-1,e===s1&&v>l4||e===d4&&v>c4)return 1;for(;;){D=A-g,o[d]+1<B?(Q=0,K=o[d]):o[d]>=B?(Q=L[o[d]-B],K=S[o[d]-B]):(Q=96,K=0),y=1<<A-g,_=1<<p,h=_;do _-=y,a[T+(x>>g)+_]=D<<24|Q<<16|K|0;while(_!==0);for(y=1<<A-1;x&y;)y>>=1;if(y!==0?(x&=y-1,x+=y):x=0,d++,--R[A]===0){if(A===f)break;A=t[r+o[d]]}if(A>u&&(x&k)!==I){for(g===0&&(g=u),T+=h,p=A-g,w=1<<p;p+g<f&&(w-=R[p+g],!(w<=0));)p++,w<<=1;if(v+=1<<p,e===s1&&v>l4||e===d4&&v>c4)return 1;I=x&k,a[I]=u<<24|p<<16|T-i|0}}return x!==0&&(a[T+x]=A-g<<24|64<<16|0),l.bits=u,0};var S0=hH;const fH=0,OE=1,PE=2,{Z_FINISH:u4,Z_BLOCK:pH,Z_TREES:op,Z_OK:pA,Z_STREAM_END:mH,Z_NEED_DICT:gH,Z_STREAM_ERROR:Ei,Z_DATA_ERROR:RE,Z_MEM_ERROR:ME,Z_BUF_ERROR:xH,Z_DEFLATED:h4}=LE,Bg=16180,f4=16181,p4=16182,m4=16183,g4=16184,x4=16185,v4=16186,y4=16187,w4=16188,b4=16189,Tm=16190,Go=16191,n1=16192,_4=16193,a1=16194,N4=16195,B4=16196,C4=16197,j4=16198,lp=16199,cp=16200,E4=16201,k4=16202,S4=16203,F4=16204,T4=16205,i1=16206,I4=16207,U4=16208,ms=16209,HE=16210,KE=16211,vH=852,yH=592,wH=15,bH=wH,L4=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function _H(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const _A=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Bg||t.mode>KE?1:0},zE=e=>{if(_A(e))return Ei;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Bg,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(vH),t.distcode=t.distdyn=new Int32Array(yH),t.sane=1,t.back=-1,pA},VE=e=>{if(_A(e))return Ei;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,zE(e)},qE=(e,t)=>{let r;if(_A(e))return Ei;const s=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ei:(s.window!==null&&s.wbits!==t&&(s.window=null),s.wrap=r,s.wbits=t,VE(e))},GE=(e,t)=>{if(!e)return Ei;const r=new _H;e.state=r,r.strm=e,r.window=null,r.mode=Bg;const s=qE(e,t);return s!==pA&&(e.state=null),s},NH=e=>GE(e,bH);let D4=!0,o1,l1;const BH=e=>{if(D4){o1=new Int32Array(512),l1=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(S0(OE,e.lens,0,288,o1,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;S0(PE,e.lens,0,32,l1,0,e.work,{bits:5}),D4=!1}e.lencode=o1,e.lenbits=9,e.distcode=l1,e.distbits=5},$E=(e,t,r,s)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),s>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>s&&(a=s),i.window.set(t.subarray(r-s,r-s+a),i.wnext),s-=a,s?(i.window.set(t.subarray(r-s,r),0),i.wnext=s,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},CH=(e,t)=>{let r,s,a,i,o,l,c,A,d,h,f,u,p,g,w=0,v,x,y,_,I,k,T,S;const B=new Uint8Array(4);let R,U;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_A(e)||!e.output||!e.input&&e.avail_in!==0)return Ei;r=e.state,r.mode===Go&&(r.mode=n1),o=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,s=e.input,l=e.avail_in,A=r.hold,d=r.bits,h=l,f=c,S=pA;e:for(;;)switch(r.mode){case Bg:if(r.wrap===0){r.mode=n1;break}for(;d<16;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(r.wrap&2&&A===35615){r.wbits===0&&(r.wbits=15),r.check=0,B[0]=A&255,B[1]=A>>>8&255,r.check=fo(r.check,B,2,0),A=0,d=0,r.mode=f4;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((A&255)<<8)+(A>>8))%31){e.msg="incorrect header check",r.mode=ms;break}if((A&15)!==h4){e.msg="unknown compression method",r.mode=ms;break}if(A>>>=4,d-=4,T=(A&15)+8,r.wbits===0&&(r.wbits=T),T>15||T>r.wbits){e.msg="invalid window size",r.mode=ms;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=A&512?b4:Go,A=0,d=0;break;case f4:for(;d<16;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(r.flags=A,(r.flags&255)!==h4){e.msg="unknown compression method",r.mode=ms;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=ms;break}r.head&&(r.head.text=A>>8&1),r.flags&512&&r.wrap&4&&(B[0]=A&255,B[1]=A>>>8&255,r.check=fo(r.check,B,2,0)),A=0,d=0,r.mode=p4;case p4:for(;d<32;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}r.head&&(r.head.time=A),r.flags&512&&r.wrap&4&&(B[0]=A&255,B[1]=A>>>8&255,B[2]=A>>>16&255,B[3]=A>>>24&255,r.check=fo(r.check,B,4,0)),A=0,d=0,r.mode=m4;case m4:for(;d<16;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}r.head&&(r.head.xflags=A&255,r.head.os=A>>8),r.flags&512&&r.wrap&4&&(B[0]=A&255,B[1]=A>>>8&255,r.check=fo(r.check,B,2,0)),A=0,d=0,r.mode=g4;case g4:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}r.length=A,r.head&&(r.head.extra_len=A),r.flags&512&&r.wrap&4&&(B[0]=A&255,B[1]=A>>>8&255,r.check=fo(r.check,B,2,0)),A=0,d=0}else r.head&&(r.head.extra=null);r.mode=x4;case x4:if(r.flags&1024&&(u=r.length,u>l&&(u=l),u&&(r.head&&(T=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(s.subarray(i,i+u),T)),r.flags&512&&r.wrap&4&&(r.check=fo(r.check,s,u,i)),l-=u,i+=u,r.length-=u),r.length))break e;r.length=0,r.mode=v4;case v4:if(r.flags&2048){if(l===0)break e;u=0;do T=s[i+u++],r.head&&T&&r.length<65536&&(r.head.name+=String.fromCharCode(T));while(T&&u<l);if(r.flags&512&&r.wrap&4&&(r.check=fo(r.check,s,u,i)),l-=u,i+=u,T)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=y4;case y4:if(r.flags&4096){if(l===0)break e;u=0;do T=s[i+u++],r.head&&T&&r.length<65536&&(r.head.comment+=String.fromCharCode(T));while(T&&u<l);if(r.flags&512&&r.wrap&4&&(r.check=fo(r.check,s,u,i)),l-=u,i+=u,T)break e}else r.head&&(r.head.comment=null);r.mode=w4;case w4:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(r.wrap&4&&A!==(r.check&65535)){e.msg="header crc mismatch",r.mode=ms;break}A=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Go;break;case b4:for(;d<32;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}e.adler=r.check=L4(A),A=0,d=0,r.mode=Tm;case Tm:if(r.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=A,r.bits=d,gH;e.adler=r.check=1,r.mode=Go;case Go:if(t===pH||t===op)break e;case n1:if(r.last){A>>>=d&7,d-=d&7,r.mode=i1;break}for(;d<3;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}switch(r.last=A&1,A>>>=1,d-=1,A&3){case 0:r.mode=_4;break;case 1:if(BH(r),r.mode=lp,t===op){A>>>=2,d-=2;break e}break;case 2:r.mode=B4;break;case 3:e.msg="invalid block type",r.mode=ms}A>>>=2,d-=2;break;case _4:for(A>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if((A&65535)!==(A>>>16^65535)){e.msg="invalid stored block lengths",r.mode=ms;break}if(r.length=A&65535,A=0,d=0,r.mode=a1,t===op)break e;case a1:r.mode=N4;case N4:if(u=r.length,u){if(u>l&&(u=l),u>c&&(u=c),u===0)break e;a.set(s.subarray(i,i+u),o),l-=u,i+=u,c-=u,o+=u,r.length-=u;break}r.mode=Go;break;case B4:for(;d<14;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(r.nlen=(A&31)+257,A>>>=5,d-=5,r.ndist=(A&31)+1,A>>>=5,d-=5,r.ncode=(A&15)+4,A>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=ms;break}r.have=0,r.mode=C4;case C4:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}r.lens[L[r.have++]]=A&7,A>>>=3,d-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},S=S0(fH,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,S){e.msg="invalid code lengths set",r.mode=ms;break}r.have=0,r.mode=j4;case j4:for(;r.have<r.nlen+r.ndist;){for(;w=r.lencode[A&(1<<r.lenbits)-1],v=w>>>24,x=w>>>16&255,y=w&65535,!(v<=d);){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(y<16)A>>>=v,d-=v,r.lens[r.have++]=y;else{if(y===16){for(U=v+2;d<U;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(A>>>=v,d-=v,r.have===0){e.msg="invalid bit length repeat",r.mode=ms;break}T=r.lens[r.have-1],u=3+(A&3),A>>>=2,d-=2}else if(y===17){for(U=v+3;d<U;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}A>>>=v,d-=v,T=0,u=3+(A&7),A>>>=3,d-=3}else{for(U=v+7;d<U;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}A>>>=v,d-=v,T=0,u=11+(A&127),A>>>=7,d-=7}if(r.have+u>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=ms;break}for(;u--;)r.lens[r.have++]=T}}if(r.mode===ms)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=ms;break}if(r.lenbits=9,R={bits:r.lenbits},S=S0(OE,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,S){e.msg="invalid literal/lengths set",r.mode=ms;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},S=S0(PE,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,S){e.msg="invalid distances set",r.mode=ms;break}if(r.mode=lp,t===op)break e;case lp:r.mode=cp;case cp:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=A,r.bits=d,lH(e,f),o=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,s=e.input,l=e.avail_in,A=r.hold,d=r.bits,r.mode===Go&&(r.back=-1);break}for(r.back=0;w=r.lencode[A&(1<<r.lenbits)-1],v=w>>>24,x=w>>>16&255,y=w&65535,!(v<=d);){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(x&&!(x&240)){for(_=v,I=x,k=y;w=r.lencode[k+((A&(1<<_+I)-1)>>_)],v=w>>>24,x=w>>>16&255,y=w&65535,!(_+v<=d);){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}A>>>=_,d-=_,r.back+=_}if(A>>>=v,d-=v,r.back+=v,r.length=y,x===0){r.mode=T4;break}if(x&32){r.back=-1,r.mode=Go;break}if(x&64){e.msg="invalid literal/length code",r.mode=ms;break}r.extra=x&15,r.mode=E4;case E4:if(r.extra){for(U=r.extra;d<U;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}r.length+=A&(1<<r.extra)-1,A>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=k4;case k4:for(;w=r.distcode[A&(1<<r.distbits)-1],v=w>>>24,x=w>>>16&255,y=w&65535,!(v<=d);){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(!(x&240)){for(_=v,I=x,k=y;w=r.distcode[k+((A&(1<<_+I)-1)>>_)],v=w>>>24,x=w>>>16&255,y=w&65535,!(_+v<=d);){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}A>>>=_,d-=_,r.back+=_}if(A>>>=v,d-=v,r.back+=v,x&64){e.msg="invalid distance code",r.mode=ms;break}r.offset=y,r.extra=x&15,r.mode=S4;case S4:if(r.extra){for(U=r.extra;d<U;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}r.offset+=A&(1<<r.extra)-1,A>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=ms;break}r.mode=F4;case F4:if(c===0)break e;if(u=f-c,r.offset>u){if(u=r.offset-u,u>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=ms;break}u>r.wnext?(u-=r.wnext,p=r.wsize-u):p=r.wnext-u,u>r.length&&(u=r.length),g=r.window}else g=a,p=o-r.offset,u=r.length;u>c&&(u=c),c-=u,r.length-=u;do a[o++]=g[p++];while(--u);r.length===0&&(r.mode=cp);break;case T4:if(c===0)break e;a[o++]=r.length,c--,r.mode=cp;break;case i1:if(r.wrap){for(;d<32;){if(l===0)break e;l--,A|=s[i++]<<d,d+=8}if(f-=c,e.total_out+=f,r.total+=f,r.wrap&4&&f&&(e.adler=r.check=r.flags?fo(r.check,a,f,o-f):py(r.check,a,f,o-f)),f=c,r.wrap&4&&(r.flags?A:L4(A))!==r.check){e.msg="incorrect data check",r.mode=ms;break}A=0,d=0}r.mode=I4;case I4:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,A+=s[i++]<<d,d+=8}if(r.wrap&4&&A!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=ms;break}A=0,d=0}r.mode=U4;case U4:S=mH;break e;case ms:S=RE;break e;case HE:return ME;case KE:default:return Ei}return e.next_out=o,e.avail_out=c,e.next_in=i,e.avail_in=l,r.hold=A,r.bits=d,(r.wsize||f!==e.avail_out&&r.mode<ms&&(r.mode<i1||t!==u4))&&$E(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,r.total+=f,r.wrap&4&&f&&(e.adler=r.check=r.flags?fo(r.check,a,f,e.next_out-f):py(r.check,a,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Go?128:0)+(r.mode===lp||r.mode===a1?256:0),(h===0&&f===0||t===u4)&&S===pA&&(S=xH),S},jH=e=>{if(_A(e))return Ei;let t=e.state;return t.window&&(t.window=null),e.state=null,pA},EH=(e,t)=>{if(_A(e))return Ei;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,pA):Ei},kH=(e,t)=>{const r=t.length;let s,a,i;return _A(e)||(s=e.state,s.wrap!==0&&s.mode!==Tm)?Ei:s.mode===Tm&&(a=1,a=py(a,t,r,0),a!==s.check)?RE:(i=$E(e,t,r,r),i?(s.mode=HE,ME):(s.havedict=1,pA))};var SH=VE,FH=qE,TH=zE,IH=NH,UH=GE,LH=CH,DH=jH,QH=EH,OH=kH,PH="pako inflate (from Nodeca project)",Jo={inflateReset:SH,inflateReset2:FH,inflateResetKeep:TH,inflateInit:IH,inflateInit2:UH,inflate:LH,inflateEnd:DH,inflateGetHeader:QH,inflateSetDictionary:OH,inflateInfo:PH};function RH(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var MH=RH;const WE=Object.prototype.toString,{Z_NO_FLUSH:HH,Z_FINISH:KH,Z_OK:xh,Z_STREAM_END:c1,Z_NEED_DICT:A1,Z_STREAM_ERROR:zH,Z_DATA_ERROR:Q4,Z_MEM_ERROR:VH}=LE;function Qh(e){this.options=DE.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iH,this.strm.avail_out=0;let r=Jo.inflateInit2(this.strm,t.windowBits);if(r!==xh)throw new Error(my[r]);if(this.header=new MH,Jo.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=gy.string2buf(t.dictionary):WE.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Jo.inflateSetDictionary(this.strm,t.dictionary),r!==xh)))throw new Error(my[r])}Qh.prototype.push=function(e,t){const r=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?KH:HH,WE.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(s),r.next_out=0,r.avail_out=s),i=Jo.inflate(r,o),i===A1&&a&&(i=Jo.inflateSetDictionary(r,a),i===xh?i=Jo.inflate(r,o):i===Q4&&(i=A1));r.avail_in>0&&i===c1&&r.state.wrap>0&&e[r.next_in]!==0;)Jo.inflateReset(r),i=Jo.inflate(r,o);switch(i){case zH:case Q4:case A1:case VH:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===c1))if(this.options.to==="string"){let c=gy.utf8border(r.output,r.next_out),A=r.next_out-c,d=gy.buf2string(r.output,c);r.next_out=A,r.avail_out=s-A,A&&r.output.set(r.output.subarray(c,c+A),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===xh&&l===0)){if(i===c1)return i=Jo.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Qh.prototype.onData=function(e){this.chunks.push(e)};Qh.prototype.onEnd=function(e){e===xh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=DE.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function qH(e,t){const r=new Qh(t);if(r.push(e),r.err)throw r.msg||my[r.err];return r.result}var GH=Qh,$H=qH,WH={Inflate:GH,inflate:$H};const{Inflate:XH,inflate:JH}=WH;var O4=XH,YH=JH;const XE=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;XE[e]=t}const P4=4294967295;function ZH(e,t,r){let s=e;for(let a=0;a<r;a++)s=XE[(s^t[a])&255]^s>>>8;return s}function e9(e,t){return(ZH(P4,e,t)^P4)>>>0}function R4(e,t,r){const s=e.readUint32(),a=e9(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==s)throw new Error(`CRC mismatch for chunk ${r}. Expected ${s}, found ${a}`)}function JE(e,t,r){for(let s=0;s<r;s++)t[s]=e[s]}function YE(e,t,r,s){let a=0;for(;a<s;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-s]&255}function ZE(e,t,r,s){let a=0;if(r.length===0)for(;a<s;a++)t[a]=e[a];else for(;a<s;a++)t[a]=e[a]+r[a]&255}function ek(e,t,r,s,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<s;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<s;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function tk(e,t,r,s,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<s;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<s;i++)t[i]=e[i]+t9(t[i-a],r[i],r[i-a])&255}}function t9(e,t,r){const s=e+t-r,a=Math.abs(s-e),i=Math.abs(s-t),o=Math.abs(s-r);return a<=i&&a<=o?e:i<=o?t:r}function r9(e,t,r,s,a,i){switch(e){case 0:JE(t,r,a);break;case 1:YE(t,r,a,i);break;case 2:ZE(t,r,s,a);break;case 3:ek(t,r,s,a,i);break;case 4:tk(t,r,s,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const s9=new Uint16Array([255]),n9=new Uint8Array(s9.buffer),a9=n9[0]===255;function i9(e){const{data:t,width:r,height:s,channels:a,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(s*r*l);let A=0;for(let d=0;d<7;d++){const h=o[d],f=Math.ceil((r-h.x)/h.xStep),u=Math.ceil((s-h.y)/h.yStep);if(f<=0||u<=0)continue;const p=f*l,g=new Uint8Array(p);for(let w=0;w<u;w++){const v=t[A++],x=t.subarray(A,A+p);A+=p;const y=new Uint8Array(p);r9(v,x,y,g,p,l),g.set(y);for(let _=0;_<f;_++){const I=h.x+_*h.xStep,k=h.y+w*h.yStep;if(!(I>=r||k>=s))for(let T=0;T<l;T++)c[(k*r+I)*l+T]=y[_*l+T]}}}if(i===16){const d=new Uint16Array(c.buffer);if(a9)for(let h=0;h<d.length;h++)d[h]=o9(d[h]);return d}else return c}function o9(e){return(e&255)<<8|e>>8&255}const l9=new Uint16Array([255]),c9=new Uint8Array(l9.buffer),A9=c9[0]===255,d9=new Uint8Array(0);function M4(e){const{data:t,width:r,height:s,channels:a,depth:i}=e,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),c=new Uint8Array(s*l);let A=d9,d=0,h,f;for(let u=0;u<s;u++){switch(h=t.subarray(d+1,d+1+l),f=c.subarray(u*l,(u+1)*l),t[d]){case 0:JE(h,f,l);break;case 1:YE(h,f,l,o);break;case 2:ZE(h,f,A,l);break;case 3:ek(h,f,A,l,o);break;case 4:tk(h,f,A,l,o);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}A=f,d+=l+1}if(i===16){const u=new Uint16Array(c.buffer);if(A9)for(let p=0;p<u.length;p++)u[p]=u9(u[p]);return u}else return c}function u9(e){return(e&255)<<8|e>>8&255}const Rp=Uint8Array.of(137,80,78,71,13,10,26,10);function H4(e){if(!h9(e.readBytes(Rp.length)))throw new Error("wrong PNG signature")}function h9(e){if(e.length<Rp.length)return!1;for(let t=0;t<Rp.length;t++)if(e[t]!==Rp[t])return!1;return!0}const f9="tEXt",p9=0,rk=new TextDecoder("latin1");function m9(e){if(x9(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const g9=/^[\u0000-\u00FF]*$/;function x9(e){if(!g9.test(e))throw new Error("invalid latin1 text")}function v9(e,t,r){const s=sk(t);e[s]=y9(t,r-s.length-1)}function sk(e){for(e.mark();e.readByte()!==p9;);const t=e.offset;e.reset();const r=rk.decode(e.readBytes(t-e.offset-1));return e.skip(1),m9(r),r}function y9(e,t){return rk.decode(e.readBytes(t))}const qa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},d1={UNKNOWN:-1,DEFLATE:0},K4={UNKNOWN:-1,ADAPTIVE:0},u1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ap={NONE:0,BACKGROUND:1,PREVIOUS:2},h1={SOURCE:0,OVER:1};class w9 extends Y2{constructor(r,s={}){super(r);Rr(this,"_checkCrc");Rr(this,"_inflator");Rr(this,"_png");Rr(this,"_apng");Rr(this,"_end");Rr(this,"_hasPalette");Rr(this,"_palette");Rr(this,"_hasTransparency");Rr(this,"_transparency");Rr(this,"_compressionMethod");Rr(this,"_filterMethod");Rr(this,"_interlaceMethod");Rr(this,"_colorType");Rr(this,"_isAnimated");Rr(this,"_numberOfFrames");Rr(this,"_numberOfPlays");Rr(this,"_frames");Rr(this,"_writingDataChunks");const{checkCrc:a=!1}=s;this._checkCrc=a,this._inflator=new O4,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=d1.UNKNOWN,this._filterMethod=K4.UNKNOWN,this._interlaceMethod=u1.UNKNOWN,this._colorType=qa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(H4(this);!this._end;){const r=this.readUint32(),s=this.readChars(4);this.decodeChunk(r,s)}return this.decodeImage(),this._png}decodeApng(){for(H4(this);!this._end;){const r=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(r,s)}return this.decodeApngImage(),this._apng}decodeChunk(r,s){const a=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case f9:v9(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?R4(this,r+4,s):this.skip(4)}decodeApngChunk(r,s){const a=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,s),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?R4(this,r+4,s):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=b9(this.readUint8());const s=this.readUint8();this._colorType=s;let a;switch(s){case qa.GREYSCALE:a=1;break;case qa.TRUECOLOUR:a=3;break;case qa.INDEXED_COLOUR:a=1;break;case qa.GREYSCALE_ALPHA:a=2;break;case qa.TRUECOLOUR_ALPHA:a=4;break;case qa.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==d1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const s=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<s;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const s=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let s=r,a=this.offset+this.byteOffset;if(a+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case qa.GREYSCALE:case qa.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let s=0;s<r/2;s++)this._transparency[s]=this.readUint16();break}case qa.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let s=0;for(;s<r;s++){const a=this.readByte();this._palette[s].push(a)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case qa.UNKNOWN:case qa.GREYSCALE_ALPHA:case qa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const s=sk(this),a=this.readUint8();if(a!==d1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:YH(i)}}decodepHYs(){const r=this.readUint32(),s=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:s,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const s={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=M4({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)s.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,s),this.addFrameDataToCanvas(s,a)}this._apng.frames.push(s)}}return this._apng}disposeFrame(r,s,a){switch(r.disposeOp){case Ap.NONE:break;case Ap.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case Ap.PREVIOUS:a.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,s){const a=1<<this._png.depth,i=(o,l)=>{const c=((o+s.yOffset)*this._png.width+s.xOffset+l)*this._png.channels,A=(o*s.width+l)*this._png.channels;return{index:c,frameIndex:A}};switch(s.blendOp){case h1.SOURCE:for(let o=0;o<s.height;o++)for(let l=0;l<s.width;l++){const{index:c,frameIndex:A}=i(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=s.data[A+d]}break;case h1.OVER:for(let o=0;o<s.height;o++)for(let l=0;l<s.width;l++){const{index:c,frameIndex:A}=i(o,l);for(let d=0;d<this._png.channels;d++){const h=s.data[A+this._png.channels-1]/a,f=d%(this._png.channels-1)===0?1:s.data[A+d],u=Math.floor(h*f+(1-h)*r.data[c+d]);r.data[c+d]+=u}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var s;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((s=this._frames)==null?void 0:s.at(0)).data:this._inflator.result;if(this._filterMethod!==K4.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===u1.NO_INTERLACE)this._png.data=M4({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===u1.ADAM7)this._png.data=i9({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,s=this._frames.at(-1);s?s.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ap.NONE,blendOp:h1.SOURCE,data:r}),this._inflator=new O4,this._writingDataChunks=!1}}function b9(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var z4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(z4||(z4={}));function _9(e,t){return new w9(e,t).decode()}var er=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function f1(){er.console&&typeof er.console.log=="function"&&er.console.log.apply(er.console,arguments)}var es={log:f1,warn:function(e){er.console&&(typeof er.console.warn=="function"?er.console.warn.apply(er.console,arguments):f1.call(null,arguments))},error:function(e){er.console&&(typeof er.console.error=="function"?er.console.error.apply(er.console,arguments):f1(e))}};function p1(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Hc(s.response,t,r)},s.onerror=function(){es.error("could not download file")},s.send()}function V4(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function dp(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Hc=er.saveAs||((typeof window>"u"?"undefined":Mr(window))!=="object"||window!==er?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=er.URL||er.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?V4(a.href)?p1(e,t,r):dp(a,a.target="_blank"):dp(a)):(a.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){dp(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(V4(e))p1(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){dp(s)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Mr(i)!=="object"&&(es.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return p1(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(er.HTMLElement)||er.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Mr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=d:location=d,s=null},l.readAsDataURL(e)}else{var c=er.URL||er.webkitURL,A=c.createObjectURL(e);s?s.location=A:location.href=A,s=null,setTimeout(function(){c.revokeObjectURL(A)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function nk(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],s=0;s<r.length;s++){var a=r[s].re,i=r[s].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),A=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),A.length==1&&(A="0"+A),"#"+l+c+A}}var Mp=er.atob.bind(er),q4=er.btoa.bind(er);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function m1(e,t){var r=e[0],s=e[1],a=e[2],i=e[3];r=Gn(r,s,a,i,t[0],7,-680876936),i=Gn(i,r,s,a,t[1],12,-389564586),a=Gn(a,i,r,s,t[2],17,606105819),s=Gn(s,a,i,r,t[3],22,-1044525330),r=Gn(r,s,a,i,t[4],7,-176418897),i=Gn(i,r,s,a,t[5],12,1200080426),a=Gn(a,i,r,s,t[6],17,-1473231341),s=Gn(s,a,i,r,t[7],22,-45705983),r=Gn(r,s,a,i,t[8],7,1770035416),i=Gn(i,r,s,a,t[9],12,-1958414417),a=Gn(a,i,r,s,t[10],17,-42063),s=Gn(s,a,i,r,t[11],22,-1990404162),r=Gn(r,s,a,i,t[12],7,1804603682),i=Gn(i,r,s,a,t[13],12,-40341101),a=Gn(a,i,r,s,t[14],17,-1502002290),r=$n(r,s=Gn(s,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=$n(i,r,s,a,t[6],9,-1069501632),a=$n(a,i,r,s,t[11],14,643717713),s=$n(s,a,i,r,t[0],20,-373897302),r=$n(r,s,a,i,t[5],5,-701558691),i=$n(i,r,s,a,t[10],9,38016083),a=$n(a,i,r,s,t[15],14,-660478335),s=$n(s,a,i,r,t[4],20,-405537848),r=$n(r,s,a,i,t[9],5,568446438),i=$n(i,r,s,a,t[14],9,-1019803690),a=$n(a,i,r,s,t[3],14,-187363961),s=$n(s,a,i,r,t[8],20,1163531501),r=$n(r,s,a,i,t[13],5,-1444681467),i=$n(i,r,s,a,t[2],9,-51403784),a=$n(a,i,r,s,t[7],14,1735328473),r=Wn(r,s=$n(s,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Wn(i,r,s,a,t[8],11,-2022574463),a=Wn(a,i,r,s,t[11],16,1839030562),s=Wn(s,a,i,r,t[14],23,-35309556),r=Wn(r,s,a,i,t[1],4,-1530992060),i=Wn(i,r,s,a,t[4],11,1272893353),a=Wn(a,i,r,s,t[7],16,-155497632),s=Wn(s,a,i,r,t[10],23,-1094730640),r=Wn(r,s,a,i,t[13],4,681279174),i=Wn(i,r,s,a,t[0],11,-358537222),a=Wn(a,i,r,s,t[3],16,-722521979),s=Wn(s,a,i,r,t[6],23,76029189),r=Wn(r,s,a,i,t[9],4,-640364487),i=Wn(i,r,s,a,t[12],11,-421815835),a=Wn(a,i,r,s,t[15],16,530742520),r=Xn(r,s=Wn(s,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Xn(i,r,s,a,t[7],10,1126891415),a=Xn(a,i,r,s,t[14],15,-1416354905),s=Xn(s,a,i,r,t[5],21,-57434055),r=Xn(r,s,a,i,t[12],6,1700485571),i=Xn(i,r,s,a,t[3],10,-1894986606),a=Xn(a,i,r,s,t[10],15,-1051523),s=Xn(s,a,i,r,t[1],21,-2054922799),r=Xn(r,s,a,i,t[8],6,1873313359),i=Xn(i,r,s,a,t[15],10,-30611744),a=Xn(a,i,r,s,t[6],15,-1560198380),s=Xn(s,a,i,r,t[13],21,1309151649),r=Xn(r,s,a,i,t[4],6,-145523070),i=Xn(i,r,s,a,t[11],10,-1120210379),a=Xn(a,i,r,s,t[2],15,718787259),s=Xn(s,a,i,r,t[9],21,-343485551),e[0]=Yl(r,e[0]),e[1]=Yl(s,e[1]),e[2]=Yl(a,e[2]),e[3]=Yl(i,e[3])}function Cg(e,t,r,s,a,i){return t=Yl(Yl(t,e),Yl(s,i)),Yl(t<<a|t>>>32-a,r)}function Gn(e,t,r,s,a,i,o){return Cg(t&r|~t&s,e,t,a,i,o)}function $n(e,t,r,s,a,i,o){return Cg(t&s|r&~s,e,t,a,i,o)}function Wn(e,t,r,s,a,i,o){return Cg(t^r^s,e,t,a,i,o)}function Xn(e,t,r,s,a,i,o){return Cg(r^(t|~s),e,t,a,i,o)}function ak(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)m1(s,N9(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(m1(s,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,m1(s,a),s}function N9(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var G4="0123456789abcdef".split("");function B9(e){for(var t="",r=0;r<4;r++)t+=G4[e>>8*r+4&15]+G4[e>>8*r&15];return t}function C9(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function xy(e){return ak(e).map(C9).join("")}var j9=function(e){for(var t=0;t<e.length;t++)e[t]=B9(e[t]);return e.join("")}(ak("hello"))!="5d41402abc4b2a76b9719d911017c592";function Yl(e,t){if(j9){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function vy(e,t){var r,s,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var A=0;for(c=0;c<256;c++){var d=l[c];A=(A+d+o.charCodeAt(c))%256,l[c]=l[A],l[A]=d}r=e,s=l}else l=s;var h=t.length,f=0,u=0,p="";for(c=0;c<h;c++)u=(u+(d=l[f=(f+1)%256]))%256,l[f]=l[u],l[u]=d,o=l[(l[f]+l[u])%256],p+=String.fromCharCode(t.charCodeAt(c)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $4={print:4,modify:8,copy:16,"annot-forms":32};function ld(e,t,r,s){this.v=1,this.r=2;var a=192;e.forEach(function(l){if($4.perm!==void 0)throw new Error("Invalid permission: "+l);a+=$4[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=xy(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=vy(this.encryptionKey,this.padding)}function cd(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var a=e.charCodeAt(s);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[s]}return t}function W4(e){if(Mr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,a){if(a=a||!1,typeof r!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[s,!!a],i},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,s)}catch(l){er.console&&es.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Im(e){if(!(this instanceof Im))return new Im(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function ik(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function qc(e,t,r,s,a){if(!(this instanceof qc))return new qc(e,t,r,s,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,ik.call(this,s,a)}function Bd(e,t,r,s,a){if(!(this instanceof Bd))return new Bd(e,t,r,s,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,ik.call(this,s,a)}function Ht(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,A="S",d=null;Mr(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),A=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),s=s||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,f={},u={internal:{},__private__:{}};u.__private__.PubSub=W4;var p="1.3",g=u.__private__.getPdfVersion=function(){return p};u.__private__.setPdfVersion=function(j){p=j};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};u.__private__.getPageFormats=function(){return w};var v=u.__private__.getPageFormat=function(j){return w[j]};a=a||"a4";var x="compat",y="advanced",_=x;function I(){this.saveGraphicsState(),ne(new Rt(nt,0,0,-nt,0,Cc()*nt).toString()+" cm"),this.setFontSize(this.getFontSize()/nt),A="n",_=y}function k(){this.restoreGraphicsState(),A="S",_=x}var T=u.__private__.combineFontStyleAndFontWeight=function(j,G){if(j=="bold"&&G=="normal"||j=="bold"&&G==400||j=="normal"&&G=="italic"||j=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(j=G==400||G==="normal"?j==="italic"?"italic":"normal":G!=700&&G!=="bold"||j!=="normal"?(G==700?"bold":G)+""+j:"bold"),j};u.advancedAPI=function(j){var G=_===x;return G&&I.call(this),typeof j!="function"||(j(this),G&&k.call(this)),this},u.compatAPI=function(j){var G=_===y;return G&&k.call(this),typeof j!="function"||(j(this),G&&I.call(this)),this},u.isAdvancedAPI=function(){return _===y};var S,B=function(j){if(_!==y)throw new Error(j+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=u.roundToPrecision=u.__private__.roundToPrecision=function(j,G){var ve=t||G;if(isNaN(j)||isNaN(ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return j.toFixed(ve).replace(/0+$/,"")};S=u.hpf=u.__private__.hpf=typeof c=="number"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return R(j,c)}:c==="smart"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return R(j,j>-1&&j<1?16:5)}:function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return R(j,16)};var U=u.f2=u.__private__.f2=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f2");return R(j,2)},L=u.__private__.f3=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f3");return R(j,3)},D=u.scale=u.__private__.scale=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.scale");return _===x?j*nt:_===y?j:void 0},Q=function(j){return D(function(G){return _===x?Cc()-G:_===y?G:void 0}(j))};u.__private__.setPrecision=u.setPrecision=function(j){typeof parseInt(j,10)=="number"&&(t=parseInt(j,10))};var K,P="00000000000000000000000000000000",te=u.__private__.getFileId=function(){return P},J=u.__private__.setFileId=function(j){return P=j!==void 0&&/^[a-fA-F0-9]{32}$/.test(j)?j.toUpperCase():P.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Qe=new ld(d.userPermissions,d.userPassword,d.ownerPassword,P)),P};u.setFileId=function(j){return J(j),this},u.getFileId=function(){return te()};var V=u.__private__.convertDateToPDFDate=function(j){var G=j.getTimezoneOffset(),ve=G<0?"+":"-",be=Math.floor(Math.abs(G/60)),ke=Math.abs(G%60),We=[ve,E(be),"'",E(ke),"'"].join("");return["D:",j.getFullYear(),E(j.getMonth()+1),E(j.getDate()),E(j.getHours()),E(j.getMinutes()),E(j.getSeconds()),We].join("")},ie=u.__private__.convertPDFDateToDate=function(j){var G=parseInt(j.substr(2,4),10),ve=parseInt(j.substr(6,2),10)-1,be=parseInt(j.substr(8,2),10),ke=parseInt(j.substr(10,2),10),We=parseInt(j.substr(12,2),10),tt=parseInt(j.substr(14,2),10);return new Date(G,ve,be,ke,We,tt,0)},Y=u.__private__.setCreationDate=function(j){var G;if(j===void 0&&(j=new Date),j instanceof Date)G=V(j);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(j))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=j}return K=G},N=u.__private__.getCreationDate=function(j){var G=K;return j==="jsDate"&&(G=ie(K)),G};u.setCreationDate=function(j){return Y(j),this},u.getCreationDate=function(j){return N(j)};var C,E=u.__private__.padd2=function(j){return("0"+parseInt(j)).slice(-2)},O=u.__private__.padd2Hex=function(j){return("00"+(j=j.toString())).substr(j.length)},q=0,se=[],ye=[],re=0,de=[],Ne=[],z=!1,Be=ye;u.__private__.setCustomOutputDestination=function(j){z=!0,Be=j};var Ve=function(j){z||(Be=j)};u.__private__.resetCustomOutputDestination=function(){z=!1,Be=ye};var ne=u.__private__.out=function(j){return j=j.toString(),re+=j.length+1,Be.push(j),Be},Me=u.__private__.write=function(j){return ne(arguments.length===1?j.toString():Array.prototype.join.call(arguments," "))},Re=u.__private__.getArrayBuffer=function(j){for(var G=j.length,ve=new ArrayBuffer(G),be=new Uint8Array(ve);G--;)be[G]=j.charCodeAt(G);return ve},Ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];u.__private__.getStandardFonts=function(){return Ye};var ze=e.fontSize||16;u.__private__.setFontSize=u.setFontSize=function(j){return ze=_===y?j/nt:j,this};var yt,mt=u.__private__.getFontSize=u.getFontSize=function(){return _===x?ze:ze*nt},at=e.R2L||!1;u.__private__.setR2L=u.setR2L=function(j){return at=j,this},u.__private__.getR2L=u.getR2L=function(){return at};var it,jt=u.__private__.setZoomMode=function(j){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(j))yt=j;else if(isNaN(j)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(j)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+j+'" is not recognized.');yt=j}else yt=parseInt(j,10)};u.__private__.getZoomMode=function(){return yt};var gt,pt=u.__private__.setPageMode=function(j){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(j)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+j+'" is not recognized.');it=j};u.__private__.getPageMode=function(){return it};var ot=u.__private__.setLayoutMode=function(j){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(j)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+j+'" is not recognized.');gt=j};u.__private__.getLayoutMode=function(){return gt},u.__private__.setDisplayMode=u.setDisplayMode=function(j,G,ve){return jt(j),ot(G),pt(ve),this};var Et={title:"",subject:"",author:"",keywords:"",creator:""};u.__private__.getDocumentProperty=function(j){if(Object.keys(Et).indexOf(j)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Et[j]},u.__private__.getDocumentProperties=function(){return Et},u.__private__.setDocumentProperties=u.setProperties=u.setDocumentProperties=function(j){for(var G in Et)Et.hasOwnProperty(G)&&j[G]&&(Et[G]=j[G]);return this},u.__private__.setDocumentProperty=function(j,G){if(Object.keys(Et).indexOf(j)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Et[j]=G};var ht,nt,ee,Se,je,qe={},At={},wt=[],He={},ft={},Je={},dt={},nr=null,Kt=0,xt=[],ir=new W4(u),Dr=e.hotfixes||[],ys={},sn={},Cs=[],Rt=function j(G,ve,be,ke,We,tt){if(!(this instanceof j))return new j(G,ve,be,ke,We,tt);isNaN(G)&&(G=1),isNaN(ve)&&(ve=0),isNaN(be)&&(be=0),isNaN(ke)&&(ke=1),isNaN(We)&&(We=0),isNaN(tt)&&(tt=0),this._matrix=[G,ve,be,ke,We,tt]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(j){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(j)},Rt.prototype.multiply=function(j){var G=j.sx*this.sx+j.shy*this.shx,ve=j.sx*this.shy+j.shy*this.sy,be=j.shx*this.sx+j.sy*this.shx,ke=j.shx*this.shy+j.sy*this.sy,We=j.tx*this.sx+j.ty*this.shx+this.tx,tt=j.tx*this.shy+j.ty*this.sy+this.ty;return new Rt(G,ve,be,ke,We,tt)},Rt.prototype.decompose=function(){var j=this.sx,G=this.shy,ve=this.shx,be=this.sy,ke=this.tx,We=this.ty,tt=Math.sqrt(j*j+G*G),Qt=(j/=tt)*ve+(G/=tt)*be;ve-=j*Qt,be-=G*Qt;var Mt=Math.sqrt(ve*ve+be*be);return Qt/=Mt,j*(be/=Mt)<G*(ve/=Mt)&&(j=-j,G=-G,Qt=-Qt,tt=-tt),{scale:new Rt(tt,0,0,Mt,0,0),translate:new Rt(1,0,0,1,ke,We),rotate:new Rt(j,G,-G,j,0,0),skew:new Rt(1,0,Qt,1,0,0)}},Rt.prototype.toString=function(j){return this.join(" ")},Rt.prototype.inversed=function(){var j=this.sx,G=this.shy,ve=this.shx,be=this.sy,ke=this.tx,We=this.ty,tt=1/(j*be-G*ve),Qt=be*tt,Mt=-G*tt,tr=-ve*tt,or=j*tt;return new Rt(Qt,Mt,tr,or,-Qt*ke-tr*We,-Mt*ke-or*We)},Rt.prototype.applyToPoint=function(j){var G=j.x*this.sx+j.y*this.shx+this.tx,ve=j.x*this.shy+j.y*this.sy+this.ty;return new Io(G,ve)},Rt.prototype.applyToRectangle=function(j){var G=this.applyToPoint(j),ve=this.applyToPoint(new Io(j.x+j.w,j.y+j.h));return new mu(G.x,G.y,ve.x-G.x,ve.y-G.y)},Rt.prototype.clone=function(){var j=this.sx,G=this.shy,ve=this.shx,be=this.sy,ke=this.tx,We=this.ty;return new Rt(j,G,ve,be,ke,We)},u.Matrix=Rt;var Fr=u.matrixMult=function(j,G){return G.multiply(j)},Br=new Rt(1,0,0,1,0,0);u.unitMatrix=u.identityMatrix=Br;var Tr=function(j,G){if(!ft[j]){var ve=(G instanceof qc?"Sh":"P")+(Object.keys(He).length+1).toString(10);G.id=ve,ft[j]=ve,He[ve]=G,ir.publish("addPattern",G)}};u.ShadingPattern=qc,u.TilingPattern=Bd,u.addShadingPattern=function(j,G){return B("addShadingPattern()"),Tr(j,G),this},u.beginTilingPattern=function(j){B("beginTilingPattern()"),gu(j.boundingBox[0],j.boundingBox[1],j.boundingBox[2]-j.boundingBox[0],j.boundingBox[3]-j.boundingBox[1],j.matrix)},u.endTilingPattern=function(j,G){B("endTilingPattern()"),G.stream=Ne[C].join(`
`),Tr(j,G),ir.publish("endTilingPattern",G),Cs.pop().restore()};var Vr,yr=u.__private__.newObject=function(){var j=qr();return Z(j,!0),j},qr=u.__private__.newObjectDeferred=function(){return q++,se[q]=function(){return re},q},Z=function(j,G){return G=typeof G=="boolean"&&G,se[j]=re,G&&ne(j+" 0 obj"),j},pe=u.__private__.newAdditionalObject=function(){var j={objId:qr(),content:""};return de.push(j),j},Ae=qr(),he=qr(),fe=u.__private__.decodeColorString=function(j){var G=j.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length!==5||G[4]!=="k"&&G[4]!=="K"||(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var ve=parseFloat(G[0]);G=[ve,ve,ve,"r"]}for(var be="#",ke=0;ke<3;ke++)be+=("0"+Math.floor(255*parseFloat(G[ke])).toString(16)).slice(-2);return be},xe=u.__private__.encodeColorString=function(j){var G;typeof j=="string"&&(j={ch1:j});var ve=j.ch1,be=j.ch2,ke=j.ch3,We=j.ch4,tt=j.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ve=="string"&&ve.charAt(0)!=="#"){var Qt=new nk(ve);if(Qt.ok)ve=Qt.toHex();else if(!/^\d*\.?\d*$/.test(ve))throw new Error('Invalid color "'+ve+'" passed to jsPDF.encodeColorString.')}if(typeof ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ve)&&(ve="#"+ve[1]+ve[1]+ve[2]+ve[2]+ve[3]+ve[3]),typeof ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ve)){var Mt=parseInt(ve.substr(1),16);ve=Mt>>16&255,be=Mt>>8&255,ke=255&Mt}if(be===void 0||We===void 0&&ve===be&&be===ke)G=typeof ve=="string"?ve+" "+tt[0]:j.precision===2?U(ve/255)+" "+tt[0]:L(ve/255)+" "+tt[0];else if(We===void 0||Mr(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return["1.","1.","1.",tt[1]].join(" ");G=typeof ve=="string"?[ve,be,ke,tt[1]].join(" "):j.precision===2?[U(ve/255),U(be/255),U(ke/255),tt[1]].join(" "):[L(ve/255),L(be/255),L(ke/255),tt[1]].join(" ")}else G=typeof ve=="string"?[ve,be,ke,We,tt[2]].join(" "):j.precision===2?[U(ve),U(be),U(ke),U(We),tt[2]].join(" "):[L(ve),L(be),L(ke),L(We),tt[2]].join(" ");return G},Fe=u.__private__.getFilters=function(){return o},Ke=u.__private__.putStream=function(j){var G=(j=j||{}).data||"",ve=j.filters||Fe(),be=j.alreadyAppliedFilters||[],ke=j.addLength1||!1,We=G.length,tt=j.objectId,Qt=function(ln){return ln};if(d!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Qt=Qe.encryptor(tt,0));var Mt={};ve===!0&&(ve=["FlateEncode"]);var tr=j.additionalKeyValues||[],or=(Mt=Ht.API.processDataByFilters!==void 0?Ht.API.processDataByFilters(G,ve):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Mt.data.length!==0&&(tr.push({key:"Length",value:Mt.data.length}),ke===!0&&tr.push({key:"Length1",value:We})),or.length!=0)if(or.split("/").length-1==1)tr.push({key:"Filter",value:or});else{tr.push({key:"Filter",value:"["+or+"]"});for(var wr=0;wr<tr.length;wr+=1)if(tr[wr].key==="DecodeParms"){for(var ws=[],Ws=0;Ws<Mt.reverseChain.split("/").length-1;Ws+=1)ws.push("null");ws.push(tr[wr].value),tr[wr].value="["+ws.join(" ")+"]"}}ne("<<");for(var ss=0;ss<tr.length;ss++)ne("/"+tr[ss].key+" "+tr[ss].value);ne(">>"),Mt.data.length!==0&&(ne("stream"),ne(Qt(Mt.data)),ne("endstream"))},Ue=u.__private__.putPage=function(j){var G=j.number,ve=j.data,be=j.objId,ke=j.contentsObjId;Z(be,!0),ne("<</Type /Page"),ne("/Parent "+j.rootDictionaryObjId+" 0 R"),ne("/Resources "+j.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(S(j.mediaBox.bottomLeftX))+" "+parseFloat(S(j.mediaBox.bottomLeftY))+" "+S(j.mediaBox.topRightX)+" "+S(j.mediaBox.topRightY)+"]"),j.cropBox!==null&&ne("/CropBox ["+S(j.cropBox.bottomLeftX)+" "+S(j.cropBox.bottomLeftY)+" "+S(j.cropBox.topRightX)+" "+S(j.cropBox.topRightY)+"]"),j.bleedBox!==null&&ne("/BleedBox ["+S(j.bleedBox.bottomLeftX)+" "+S(j.bleedBox.bottomLeftY)+" "+S(j.bleedBox.topRightX)+" "+S(j.bleedBox.topRightY)+"]"),j.trimBox!==null&&ne("/TrimBox ["+S(j.trimBox.bottomLeftX)+" "+S(j.trimBox.bottomLeftY)+" "+S(j.trimBox.topRightX)+" "+S(j.trimBox.topRightY)+"]"),j.artBox!==null&&ne("/ArtBox ["+S(j.artBox.bottomLeftX)+" "+S(j.artBox.bottomLeftY)+" "+S(j.artBox.topRightX)+" "+S(j.artBox.topRightY)+"]"),typeof j.userUnit=="number"&&j.userUnit!==1&&ne("/UserUnit "+j.userUnit),ir.publish("putPage",{objId:be,pageContext:xt[G],pageNumber:G,page:ve}),ne("/Contents "+ke+" 0 R"),ne(">>"),ne("endobj");var We=ve.join(`
`);return _===y&&(We+=`
Q`),Z(ke,!0),Ke({data:We,filters:Fe(),objectId:ke}),ne("endobj"),be},Le=u.__private__.putPages=function(){var j,G,ve=[];for(j=1;j<=Kt;j++)xt[j].objId=qr(),xt[j].contentsObjId=qr();for(j=1;j<=Kt;j++)ve.push(Ue({number:j,data:Ne[j],objId:xt[j].objId,contentsObjId:xt[j].contentsObjId,mediaBox:xt[j].mediaBox,cropBox:xt[j].cropBox,bleedBox:xt[j].bleedBox,trimBox:xt[j].trimBox,artBox:xt[j].artBox,userUnit:xt[j].userUnit,rootDictionaryObjId:Ae,resourceDictionaryObjId:he}));Z(Ae,!0),ne("<</Type /Pages");var be="/Kids [";for(G=0;G<Kt;G++)be+=ve[G]+" 0 R ";ne(be+"]"),ne("/Count "+Kt),ne(">>"),ne("endobj"),ir.publish("postPutPages")},De=function(j){ir.publish("putFont",{font:j,out:ne,newObject:yr,putStream:Ke}),j.isAlreadyPutted!==!0&&(j.objectNumber=yr(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+cd(j.postScriptName)),ne("/Subtype /Type1"),typeof j.encoding=="string"&&ne("/Encoding /"+j.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},st=function(j){j.objectNumber=yr();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[S(j.x),S(j.y),S(j.x+j.width),S(j.y+j.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+j.matrix.toString()+"]"});var ve=j.pages[1].join(`
`);Ke({data:ve,additionalKeyValues:G,objectId:j.objectNumber}),ne("endobj")},vt=function(j,G){G||(G=21);var ve=yr(),be=function(tt,Qt){var Mt,tr=[],or=1/(Qt-1);for(Mt=0;Mt<1;Mt+=or)tr.push(Mt);if(tr.push(1),tt[0].offset!=0){var wr={offset:0,color:tt[0].color};tt.unshift(wr)}if(tt[tt.length-1].offset!=1){var ws={offset:1,color:tt[tt.length-1].color};tt.push(ws)}for(var Ws="",ss=0,ln=0;ln<tr.length;ln++){for(Mt=tr[ln];Mt>tt[ss+1].offset;)ss++;var Xs=tt[ss].offset,jn=(Mt-Xs)/(tt[ss+1].offset-Xs),Do=tt[ss].color,Li=tt[ss+1].color;Ws+=O(Math.round((1-jn)*Do[0]+jn*Li[0]).toString(16))+O(Math.round((1-jn)*Do[1]+jn*Li[1]).toString(16))+O(Math.round((1-jn)*Do[2]+jn*Li[2]).toString(16))}return Ws.trim()}(j.colors,G),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+G+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke({data:be,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ve}),ne("endobj"),j.objectNumber=yr(),ne("<< /ShadingType "+j.type),ne("/ColorSpace /DeviceRGB");var We="/Coords ["+S(parseFloat(j.coords[0]))+" "+S(parseFloat(j.coords[1]))+" ";j.type===2?We+=S(parseFloat(j.coords[2]))+" "+S(parseFloat(j.coords[3])):We+=S(parseFloat(j.coords[2]))+" "+S(parseFloat(j.coords[3]))+" "+S(parseFloat(j.coords[4]))+" "+S(parseFloat(j.coords[5])),ne(We+="]"),j.matrix&&ne("/Matrix ["+j.matrix.toString()+"]"),ne("/Function "+ve+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Bt=function(j,G){var ve=qr(),be=yr();G.push({resourcesOid:ve,objectOid:be}),j.objectNumber=be;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+j.boundingBox.map(S).join(" ")+"]"}),ke.push({key:"XStep",value:S(j.xStep)}),ke.push({key:"YStep",value:S(j.yStep)}),ke.push({key:"Resources",value:ve+" 0 R"}),j.matrix&&ke.push({key:"Matrix",value:"["+j.matrix.toString()+"]"}),Ke({data:j.stream,additionalKeyValues:ke,objectId:j.objectNumber}),ne("endobj")},ct=function(j){for(var G in j.objectNumber=yr(),ne("<<"),j)switch(G){case"opacity":ne("/ca "+U(j[G]));break;case"stroke-opacity":ne("/CA "+U(j[G]))}ne(">>"),ne("endobj")},_t=function(j){Z(j.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var G in ne("/Font <<"),qe)qe.hasOwnProperty(G)&&(h===!1||h===!0&&f.hasOwnProperty(G))&&ne("/"+G+" "+qe[G].objectNumber+" 0 R");ne(">>")}(),function(){if(Object.keys(He).length>0){for(var G in ne("/Shading <<"),He)He.hasOwnProperty(G)&&He[G]instanceof qc&&He[G].objectNumber>=0&&ne("/"+G+" "+He[G].objectNumber+" 0 R");ir.publish("putShadingPatternDict"),ne(">>")}}(),function(G){if(Object.keys(He).length>0){for(var ve in ne("/Pattern <<"),He)He.hasOwnProperty(ve)&&He[ve]instanceof u.TilingPattern&&He[ve].objectNumber>=0&&He[ve].objectNumber<G&&ne("/"+ve+" "+He[ve].objectNumber+" 0 R");ir.publish("putTilingPatternDict"),ne(">>")}}(j.objectOid),function(){if(Object.keys(Je).length>0){var G;for(G in ne("/ExtGState <<"),Je)Je.hasOwnProperty(G)&&Je[G].objectNumber>=0&&ne("/"+G+" "+Je[G].objectNumber+" 0 R");ir.publish("putGStateDict"),ne(">>")}}(),function(){for(var G in ne("/XObject <<"),ys)ys.hasOwnProperty(G)&&ys[G].objectNumber>=0&&ne("/"+G+" "+ys[G].objectNumber+" 0 R");ir.publish("putXobjectDict"),ne(">>")}(),ne(">>"),ne("endobj")},Gt=function(j){At[j.fontName]=At[j.fontName]||{},At[j.fontName][j.fontStyle]=j.id},Cr=function(j,G,ve,be,ke){var We={id:"F"+(Object.keys(qe).length+1).toString(10),postScriptName:j,fontName:G,fontStyle:ve,encoding:be,isStandardFont:ke||!1,metadata:{}};return ir.publish("addFont",{font:We,instance:this}),qe[We.id]=We,Gt(We),We.id},cr=u.__private__.pdfEscape=u.pdfEscape=function(j,G){return function(ve,be){var ke,We,tt,Qt,Mt,tr,or,wr,ws;if(tt=(be=be||{}).sourceEncoding||"Unicode",Mt=be.outputEncoding,(be.autoencode||Mt)&&qe[ht].metadata&&qe[ht].metadata[tt]&&qe[ht].metadata[tt].encoding&&(Qt=qe[ht].metadata[tt].encoding,!Mt&&qe[ht].encoding&&(Mt=qe[ht].encoding),!Mt&&Qt.codePages&&(Mt=Qt.codePages[0]),typeof Mt=="string"&&(Mt=Qt[Mt]),Mt)){for(or=!1,tr=[],ke=0,We=ve.length;ke<We;ke++)(wr=Mt[ve.charCodeAt(ke)])?tr.push(String.fromCharCode(wr)):tr.push(ve[ke]),tr[ke].charCodeAt(0)>>8&&(or=!0);ve=tr.join("")}for(ke=ve.length;or===void 0&&ke!==0;)ve.charCodeAt(ke-1)>>8&&(or=!0),ke--;if(!or)return ve;for(tr=be.noBOM?[]:[254,255],ke=0,We=ve.length;ke<We;ke++){if((ws=(wr=ve.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+ve+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");tr.push(ws),tr.push(wr-(ws<<8))}return String.fromCharCode.apply(void 0,tr)}(j,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qr=u.__private__.beginPage=function(j){Ne[++Kt]=[],xt[Kt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(j[0]),topRightY:Number(j[1])}},Aa(Kt),Ve(Ne[C])},nn=function(j,G){var ve,be,ke;switch(r=G||r,typeof j=="string"&&(ve=v(j.toLowerCase()),Array.isArray(ve)&&(be=ve[0],ke=ve[1])),Array.isArray(j)&&(be=j[0]*nt,ke=j[1]*nt),isNaN(be)&&(be=a[0],ke=a[1]),(be>14400||ke>14400)&&(es.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),ke=Math.min(14400,ke)),a=[be,ke],r.substr(0,1)){case"l":ke>be&&(a=[ke,be]);break;case"p":be>ke&&(a=[ke,be])}Qr(a),Yt(Jr),ne(IA),fu!==0&&ne(fu+" J"),pu!==0&&ne(pu+" j"),ir.publish("addPage",{pageNumber:Kt})},Hn=function(j){j>0&&j<=Kt&&(Ne.splice(j,1),xt.splice(j,1),Kt--,C>Kt&&(C=Kt),this.setPage(C))},Aa=function(j){j>0&&j<=Kt&&(C=j)},an=u.__private__.getNumberOfPages=u.getNumberOfPages=function(){return Ne.length-1},Qa=function(j,G,ve){var be,ke=void 0;return ve=ve||{},j=j!==void 0?j:qe[ht].fontName,G=G!==void 0?G:qe[ht].fontStyle,be=j.toLowerCase(),At[be]!==void 0&&At[be][G]!==void 0?ke=At[be][G]:At[j]!==void 0&&At[j][G]!==void 0?ke=At[j][G]:ve.disableWarning===!1&&es.warn("Unable to look up font label for font '"+j+"', '"+G+"'. Refer to getFontList() for available fonts."),ke||ve.noFallback||(ke=At.times[G])==null&&(ke=At.times.normal),ke},As=u.__private__.putInfo=function(){var j=yr(),G=function(be){return be};for(var ve in d!==null&&(G=Qe.encryptor(j,0)),ne("<<"),ne("/Producer ("+cr(G("jsPDF "+Ht.version))+")"),Et)Et.hasOwnProperty(ve)&&Et[ve]&&ne("/"+ve.substr(0,1).toUpperCase()+ve.substr(1)+" ("+cr(G(Et[ve]))+")");ne("/CreationDate ("+cr(G(K))+")"),ne(">>"),ne("endobj")},ci=u.__private__.putCatalog=function(j){var G=(j=j||{}).rootDictionaryObjId||Ae;switch(yr(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+G+" 0 R"),yt||(yt="fullwidth"),yt){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ve=""+yt;ve.substr(ve.length-1)==="%"&&(yt=parseInt(yt)/100),typeof yt=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+U(yt)+"]")}switch(gt||(gt="continuous"),gt){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}it&&ne("/PageMode /"+it),ir.publish("putCatalog"),ne(">>"),ne("endobj")},Fi=u.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(q+1)),ne("/Root "+q+" 0 R"),ne("/Info "+(q-1)+" 0 R"),d!==null&&ne("/Encrypt "+Qe.oid+" 0 R"),ne("/ID [ <"+P+"> <"+P+"> ]"),ne(">>")},rs=u.__private__.putHeader=function(){ne("%PDF-"+p),ne("%")},Fo=u.__private__.putXRef=function(){var j="0000000000";ne("xref"),ne("0 "+(q+1)),ne("0000000000 65535 f ");for(var G=1;G<=q;G++)typeof se[G]=="function"?ne((j+se[G]()).slice(-10)+" 00000 n "):se[G]!==void 0?ne((j+se[G]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},Kn=u.__private__.buildDocument=function(){var j;q=0,re=0,ye=[],se=[],de=[],Ae=qr(),he=qr(),Ve(ye),ir.publish("buildDocument"),rs(),Le(),function(){ir.publish("putAdditionalObjects");for(var ve=0;ve<de.length;ve++){var be=de[ve];Z(be.objId,!0),ne(be.content),ne("endobj")}ir.publish("postPutAdditionalObjects")}(),j=[],function(){for(var ve in qe)qe.hasOwnProperty(ve)&&(h===!1||h===!0&&f.hasOwnProperty(ve))&&De(qe[ve])}(),function(){var ve;for(ve in Je)Je.hasOwnProperty(ve)&&ct(Je[ve])}(),function(){for(var ve in ys)ys.hasOwnProperty(ve)&&st(ys[ve])}(),function(ve){var be;for(be in He)He.hasOwnProperty(be)&&(He[be]instanceof qc?vt(He[be]):He[be]instanceof Bd&&Bt(He[be],ve))}(j),ir.publish("putResources"),j.forEach(_t),_t({resourcesOid:he,objectOid:Number.MAX_SAFE_INTEGER}),ir.publish("postPutResources"),d!==null&&(Qe.oid=yr(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Qe.v),ne("/R "+Qe.r),ne("/U <"+Qe.toHexString(Qe.U)+">"),ne("/O <"+Qe.toHexString(Qe.O)+">"),ne("/P "+Qe.P),ne(">>"),ne("endobj")),As(),ci();var G=re;return Fo(),Fi(),ne("startxref"),ne(""+G),ne("%%EOF"),Ve(Ne[C]),ye.join(`
`)},Ti=u.__private__.getBlob=function(j){return new Blob([Re(j)],{type:"application/pdf"})},X=u.output=u.__private__.output=(Vr=function(j,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",j){case void 0:return Kn();case"save":u.save(G.filename);break;case"arraybuffer":return Re(Kn());case"blob":return Ti(Kn());case"bloburi":case"bloburl":if(er.URL!==void 0&&typeof er.URL.createObjectURL=="function")return er.URL&&er.URL.createObjectURL(Ti(Kn()))||void 0;es.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ve="",be=Kn();try{ve=q4(be)}catch{ve=q4(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+G.filename+";base64,"+ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(er)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(ke=G.pdfObjectUrl,We="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",Qt=er.open();return Qt!==null&&Qt.document.write(tt),Qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(er)==="[object Window]"){var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',tr=er.open();if(tr!==null){tr.document.write(Mt);var or=this;tr.document.documentElement.querySelector("#pdfViewer").onload=function(){tr.document.title=G.filename,tr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(or.output("bloburl"))}}return tr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(er)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',ws=er.open();if(ws!==null&&(ws.document.write(wr),ws.document.title=G.filename),ws||typeof safari>"u")return ws;break;case"datauri":case"dataurl":return er.document.location.href=this.output("datauristring",G);default:return null}},Vr.foo=function(){try{return Vr.apply(this,arguments)}catch(ve){var j=ve.stack||"";~j.indexOf(" at ")&&(j=j.split(" at ")[1]);var G="Error in function "+j.split(`
`)[0].split("<")[0]+": "+ve.message;if(!er.console)throw new Error(G);er.console.error(G,ve),er.alert&&alert(G)}},Vr.foo.bar=Vr,Vr.foo),Ee=function(j){return Array.isArray(Dr)===!0&&Dr.indexOf(j)>-1};switch(s){case"pt":nt=1;break;case"mm":nt=72/25.4;break;case"cm":nt=72/2.54;break;case"in":nt=72;break;case"px":nt=Ee("px_scaling")==1?.75:96/72;break;case"pc":case"em":nt=12;break;case"ex":nt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);nt=s}var Qe=null;Y(),J();var et=u.__private__.getPageInfo=u.getPageInfo=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xt[j].objId,pageNumber:j,pageContext:xt[j]}},Dt=u.__private__.getPageInfoByObjId=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in xt)if(xt[G].objId===j)break;return et(G)},Tt=u.__private__.getCurrentPageInfo=u.getCurrentPageInfo=function(){return{objId:xt[C].objId,pageNumber:C,pageContext:xt[C]}};u.addPage=function(){return nn.apply(this,arguments),this},u.setPage=function(){return Aa.apply(this,arguments),Ve.call(this,Ne[C]),this},u.insertPage=function(j){return this.addPage(),this.movePage(C,j),this},u.movePage=function(j,G){var ve,be;if(j>G){ve=Ne[j],be=xt[j];for(var ke=j;ke>G;ke--)Ne[ke]=Ne[ke-1],xt[ke]=xt[ke-1];Ne[G]=ve,xt[G]=be,this.setPage(G)}else if(j<G){ve=Ne[j],be=xt[j];for(var We=j;We<G;We++)Ne[We]=Ne[We+1],xt[We]=xt[We+1];Ne[G]=ve,xt[G]=be,this.setPage(G)}return this},u.deletePage=function(){return Hn.apply(this,arguments),this},u.__private__.text=u.text=function(j,G,ve,be,ke){var We,tt,Qt,Mt,tr,or,wr,ws,Ws,ss=(be=be||{}).scope||this;if(typeof j=="number"&&typeof G=="number"&&(typeof ve=="string"||Array.isArray(ve))){var ln=ve;ve=G,G=j,j=ln}if(arguments[3]instanceof Rt==0?(Qt=arguments[4],Mt=arguments[5],Mr(wr=arguments[3])==="object"&&wr!==null||(typeof Qt=="string"&&(Mt=Qt,Qt=null),typeof wr=="string"&&(Mt=wr,wr=null),typeof wr=="number"&&(Qt=wr,wr=null),be={flags:wr,angle:Qt,align:Mt})):(B("The transform parameter of text() with a Matrix value"),Ws=ke),isNaN(G)||isNaN(ve)||j==null)throw new Error("Invalid arguments passed to jsPDF.text");if(j.length===0)return ss;var Xs,jn="",Do=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:Xr,Li=ss.internal.scaleFactor;function Qo(Ir){return Ir=Ir.split("	").join(Array(be.TabLen||9).join(" ")),cr(Ir,wr)}function vu(Ir){for(var Yr,Qs=Ir.concat(),cn=[],Ro=Qs.length;Ro--;)typeof(Yr=Qs.shift())=="string"?cn.push(Yr):Array.isArray(Ir)&&(Yr.length===1||Yr[1]===void 0&&Yr[2]===void 0)?cn.push(Yr[0]):cn.push([Yr[0],Yr[1],Yr[2]]);return cn}function LA(Ir,Yr){var Qs;if(typeof Ir=="string")Qs=Yr(Ir)[0];else if(Array.isArray(Ir)){for(var cn,Ro,ku=Ir.concat(),OA=[],Jh=ku.length;Jh--;)typeof(cn=ku.shift())=="string"?OA.push(Yr(cn)[0]):Array.isArray(cn)&&typeof cn[0]=="string"&&(Ro=Yr(cn[0],cn[1],cn[2]),OA.push([Ro[0],Ro[1],Ro[2]]));Qs=OA}return Qs}var gl=!1,jc=!0;if(typeof j=="string")gl=!0;else if(Array.isArray(j)){var Ec=j.concat();tt=[];for(var xl,En=Ec.length;En--;)(typeof(xl=Ec.shift())!="string"||Array.isArray(xl)&&typeof xl[0]!="string")&&(jc=!1);gl=jc}if(gl===!1)throw new Error('Type of text must be string or Array. "'+j+'" is not recognized.');typeof j=="string"&&(j=j.match(/[\r?\n]/)?j.split(/\r\n|\r|\n/g):[j]);var kc=ze/ss.internal.scaleFactor,Sc=kc*(Do-1);switch(be.baseline){case"bottom":ve-=Sc;break;case"top":ve+=kc-Sc;break;case"hanging":ve+=kc-2*Sc;break;case"middle":ve+=kc/2-Sc}if((or=be.maxWidth||0)>0&&(typeof j=="string"?j=ss.splitTextToSize(j,or):Object.prototype.toString.call(j)==="[object Array]"&&(j=j.reduce(function(Ir,Yr){return Ir.concat(ss.splitTextToSize(Yr,or))},[]))),We={text:j,x:G,y:ve,options:be,mutex:{pdfEscape:cr,activeFontKey:ht,fonts:qe,activeFontSize:ze}},ir.publish("preProcessText",We),j=We.text,Qt=(be=We.options).angle,Ws instanceof Rt==0&&Qt&&typeof Qt=="number"){Qt*=Math.PI/180,be.rotationDirection===0&&(Qt=-Qt),_===y&&(Qt=-Qt);var yu=Math.cos(Qt),wu=Math.sin(Qt);Ws=new Rt(yu,wu,-wu,yu,0,0)}else Qt&&Qt instanceof Rt&&(Ws=Qt);_!==y||Ws||(Ws=Br),(tr=be.charSpace||To)!==void 0&&(jn+=S(D(tr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ws=be.horizontalScale)!==void 0&&(jn+=S(100*ws)+` Tz
`),be.lang;var ua=-1,Oo=be.renderingMode!==void 0?be.renderingMode:be.stroke,DA=ss.internal.getCurrentPageInfo().pageContext;switch(Oo){case 0:case!1:case"fill":ua=0;break;case 1:case!0:case"stroke":ua=1;break;case 2:case"fillThenStroke":ua=2;break;case 3:case"invisible":ua=3;break;case 4:case"fillAndAddForClipping":ua=4;break;case 5:case"strokeAndAddPathForClipping":ua=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ua=6;break;case 7:case"addToPathForClipping":ua=7}var Wh=DA.usedRenderingMode!==void 0?DA.usedRenderingMode:-1;ua!==-1?jn+=ua+` Tr
`:Wh!==-1&&(jn+=`0 Tr
`),ua!==-1&&(DA.usedRenderingMode=ua),Mt=be.align||"left";var Ai,Fc=ze*Do,bu=ss.internal.pageSize.getWidth(),_u=qe[ht];tr=be.charSpace||To,or=be.maxWidth||0,wr=Object.assign({autoencode:!0,noBOM:!0},be.flags);var vl=[],Tc=function(Ir){return ss.getStringUnitWidth(Ir,{font:_u,charSpace:tr,fontSize:ze,doKerning:!1})*ze/Li};if(Object.prototype.toString.call(j)==="[object Array]"){var Oa;tt=vu(j),Mt!=="left"&&(Ai=tt.map(Tc));var Pa,yl=0;if(Mt==="right"){G-=Ai[0],j=[],En=tt.length;for(var Po=0;Po<En;Po++)Po===0?(Pa=Ii(G),Oa=Ui(ve)):(Pa=D(yl-Ai[Po]),Oa=-Fc),j.push([tt[Po],Pa,Oa]),yl=Ai[Po]}else if(Mt==="center"){G-=Ai[0]/2,j=[],En=tt.length;for(var wl=0;wl<En;wl++)wl===0?(Pa=Ii(G),Oa=Ui(ve)):(Pa=D((yl-Ai[wl])/2),Oa=-Fc),j.push([tt[wl],Pa,Oa]),yl=Ai[wl]}else if(Mt==="left"){j=[],En=tt.length;for(var Nu=0;Nu<En;Nu++)j.push(tt[Nu])}else if(Mt==="justify"&&_u.encoding==="Identity-H"){j=[],En=tt.length,or=or!==0?or:bu;for(var QA=0,Ds=0;Ds<En;Ds++)if(Oa=Ds===0?Ui(ve):-Fc,Pa=Ds===0?Ii(G):QA,Ds<En-1){var Xh=D((or-Ai[Ds])/(tt[Ds].split(" ").length-1)),lo=tt[Ds].split(" ");j.push([lo[0]+" ",Pa,Oa]),QA=0;for(var co=1;co<lo.length;co++){var Bu=(Tc(lo[co-1]+" "+lo[co])-Tc(lo[co]))*Li+Xh;co==lo.length-1?j.push([lo[co],Bu,0]):j.push([lo[co]+" ",Bu,0]),QA-=Bu}}else j.push([tt[Ds],Pa,Oa]);j.push(["",QA,0])}else{if(Mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(j=[],En=tt.length,or=or!==0?or:bu,Ds=0;Ds<En;Ds++){Oa=Ds===0?Ui(ve):-Fc,Pa=Ds===0?Ii(G):0;var Cu=tt[Ds].split(" ").length-1,ju=Cu>0?(or-Ai[Ds])/Cu:0;Ds<En-1?vl.push(S(D(ju))):vl.push(0),j.push([tt[Ds],Pa,Oa])}}}(typeof be.R2L=="boolean"?be.R2L:at)===!0&&(j=LA(j,function(Ir,Yr,Qs){return[Ir.split("").reverse().join(""),Yr,Qs]})),We={text:j,x:G,y:ve,options:be,mutex:{pdfEscape:cr,activeFontKey:ht,fonts:qe,activeFontSize:ze}},ir.publish("postProcessText",We),j=We.text,Xs=We.mutex.isHex||!1;var Eu=qe[ht].encoding;Eu!=="WinAnsiEncoding"&&Eu!=="StandardEncoding"||(j=LA(j,function(Ir,Yr,Qs){return[Qo(Ir),Yr,Qs]})),tt=vu(j),j=[];for(var bl,_l,Nl,Ic=Array.isArray(tt[0])?1:0,Bl="",Uc=function(Ir,Yr,Qs){var cn="";return Qs instanceof Rt?(Qs=typeof be.angle=="number"?Fr(Qs,new Rt(1,0,0,1,Ir,Yr)):Fr(new Rt(1,0,0,1,Ir,Yr),Qs),_===y&&(Qs=Fr(new Rt(1,0,0,-1,0,0),Qs)),cn=Qs.join(" ")+` Tm
`):cn=S(Ir)+" "+S(Yr)+` Td
`,cn},di=0;di<tt.length;di++){switch(Bl="",Ic){case 1:Nl=(Xs?"<":"(")+tt[di][0]+(Xs?">":")"),bl=parseFloat(tt[di][1]),_l=parseFloat(tt[di][2]);break;case 0:Nl=(Xs?"<":"(")+tt[di]+(Xs?">":")"),bl=Ii(G),_l=Ui(ve)}vl!==void 0&&vl[di]!==void 0&&(Bl=vl[di]+` Tw
`),di===0?j.push(Bl+Uc(bl,_l,Ws)+Nl):Ic===0?j.push(Bl+Nl):Ic===1&&j.push(Bl+Uc(bl,_l,Ws)+Nl)}j=Ic===0?j.join(` Tj
T* `):j.join(` Tj
`),j+=` Tj
`;var Ao=`BT
/`;return Ao+=ht+" "+ze+` Tf
`,Ao+=S(ze*Do)+` TL
`,Ao+=Nc+`
`,Ao+=jn,Ao+=j,ne(Ao+="ET"),f[ht]=!0,ss};var $t=u.__private__.clip=u.clip=function(j){return ne(j==="evenodd"?"W*":"W"),this};u.clipEvenOdd=function(){return $t("evenodd")},u.__private__.discardPath=u.discardPath=function(){return ne("n"),this};var Ct=u.__private__.isValidStyle=function(j){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(j)!==-1&&(G=!0),G};u.__private__.setDefaultPathOperation=u.setDefaultPathOperation=function(j){return Ct(j)&&(A=j),this};var ur=u.__private__.getStyle=u.getStyle=function(j){var G=A;switch(j){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=j}return G},js=u.close=function(){return ne("h"),this};u.stroke=function(){return ne("S"),this},u.fill=function(j){return Er("f",j),this},u.fillEvenOdd=function(j){return Er("f*",j),this},u.fillStroke=function(j){return Er("B",j),this},u.fillStrokeEvenOdd=function(j){return Er("B*",j),this};var Er=function(j,G){Mr(G)==="object"?oe(G,j):ne(j)},Ls=function(j){j===null||_===y&&j===void 0||(j=ur(j),ne(j))};function jr(j,G,ve,be,ke){var We=new Bd(G||this.boundingBox,ve||this.xStep,be||this.yStep,this.gState,ke||this.matrix);We.stream=this.stream;var tt=j+"$$"+this.cloneIndex+++"$$";return Tr(tt,We),We}var oe=function(j,G){var ve=ft[j.key],be=He[ve];if(be instanceof qc)ne("q"),ne(Ie(G)),be.gState&&u.setGState(be.gState),ne(j.matrix.toString()+" cm"),ne("/"+ve+" sh"),ne("Q");else if(be instanceof Bd){var ke=new Rt(1,0,0,-1,0,Cc());j.matrix&&(ke=ke.multiply(j.matrix||Br),ve=jr.call(be,j.key,j.boundingBox,j.xStep,j.yStep,ke).id),ne("q"),ne("/Pattern cs"),ne("/"+ve+" scn"),be.gState&&u.setGState(be.gState),ne(G),ne("Q")}},Ie=function(j){switch(j){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ze=u.moveTo=function(j,G){return ne(S(D(j))+" "+S(Q(G))+" m"),this},bt=u.lineTo=function(j,G){return ne(S(D(j))+" "+S(Q(G))+" l"),this},St=u.curveTo=function(j,G,ve,be,ke,We){return ne([S(D(j)),S(Q(G)),S(D(ve)),S(Q(be)),S(D(ke)),S(Q(We)),"c"].join(" ")),this};u.__private__.line=u.line=function(j,G,ve,be,ke){if(isNaN(j)||isNaN(G)||isNaN(ve)||isNaN(be)||!Ct(ke))throw new Error("Invalid arguments passed to jsPDF.line");return _===x?this.lines([[ve-j,be-G]],j,G,[1,1],ke||"S"):this.lines([[ve-j,be-G]],j,G,[1,1]).stroke()},u.__private__.lines=u.lines=function(j,G,ve,be,ke,We){var tt,Qt,Mt,tr,or,wr,ws,Ws,ss,ln,Xs,jn;if(typeof j=="number"&&(jn=ve,ve=G,G=j,j=jn),be=be||[1,1],We=We||!1,isNaN(G)||isNaN(ve)||!Array.isArray(j)||!Array.isArray(be)||!Ct(ke)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ze(G,ve),tt=be[0],Qt=be[1],tr=j.length,ln=G,Xs=ve,Mt=0;Mt<tr;Mt++)(or=j[Mt]).length===2?(ln=or[0]*tt+ln,Xs=or[1]*Qt+Xs,bt(ln,Xs)):(wr=or[0]*tt+ln,ws=or[1]*Qt+Xs,Ws=or[2]*tt+ln,ss=or[3]*Qt+Xs,ln=or[4]*tt+ln,Xs=or[5]*Qt+Xs,St(wr,ws,Ws,ss,ln,Xs));return We&&js(),Ls(ke),this},u.path=function(j){for(var G=0;G<j.length;G++){var ve=j[G],be=ve.c;switch(ve.op){case"m":Ze(be[0],be[1]);break;case"l":bt(be[0],be[1]);break;case"c":St.apply(this,be);break;case"h":js()}}return this},u.__private__.rect=u.rect=function(j,G,ve,be,ke){if(isNaN(j)||isNaN(G)||isNaN(ve)||isNaN(be)||!Ct(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return _===x&&(be=-be),ne([S(D(j)),S(Q(G)),S(D(ve)),S(D(be)),"re"].join(" ")),Ls(ke),this},u.__private__.triangle=u.triangle=function(j,G,ve,be,ke,We,tt){if(isNaN(j)||isNaN(G)||isNaN(ve)||isNaN(be)||isNaN(ke)||isNaN(We)||!Ct(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ve-j,be-G],[ke-ve,We-be],[j-ke,G-We]],j,G,[1,1],tt,!0),this},u.__private__.roundedRect=u.roundedRect=function(j,G,ve,be,ke,We,tt){if(isNaN(j)||isNaN(G)||isNaN(ve)||isNaN(be)||isNaN(ke)||isNaN(We)||!Ct(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*ve),We=Math.min(We,.5*be),this.lines([[ve-2*ke,0],[ke*Qt,0,ke,We-We*Qt,ke,We],[0,be-2*We],[0,We*Qt,-ke*Qt,We,-ke,We],[2*ke-ve,0],[-ke*Qt,0,-ke,-We*Qt,-ke,-We],[0,2*We-be],[0,-We*Qt,ke*Qt,-We,ke,-We]],j+ke,G,[1,1],tt,!0),this},u.__private__.ellipse=u.ellipse=function(j,G,ve,be,ke){if(isNaN(j)||isNaN(G)||isNaN(ve)||isNaN(be)||!Ct(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*ve,tt=4/3*(Math.SQRT2-1)*be;return Ze(j+ve,G),St(j+ve,G-tt,j+We,G-be,j,G-be),St(j-We,G-be,j-ve,G-tt,j-ve,G),St(j-ve,G+tt,j-We,G+be,j,G+be),St(j+We,G+be,j+ve,G+tt,j+ve,G),Ls(ke),this},u.__private__.circle=u.circle=function(j,G,ve,be){if(isNaN(j)||isNaN(G)||isNaN(ve)||!Ct(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(j,G,ve,ve,be)},u.setFont=function(j,G,ve){return ve&&(G=T(G,ve)),ht=Qa(j,G,{disableWarning:!1}),this};var da=u.__private__.getFont=u.getFont=function(){return qe[Qa.apply(u,arguments)]};u.__private__.getFontList=u.getFontList=function(){var j,G,ve={};for(j in At)if(At.hasOwnProperty(j))for(G in ve[j]=[],At[j])At[j].hasOwnProperty(G)&&ve[j].push(G);return ve},u.addFont=function(j,G,ve,be,ke){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(ve=T(ve,be)),Cr.call(this,j,G,ve,ke=ke||"Identity-H")};var Xr,Jr=e.lineWidth||.200025,du=u.__private__.getLineWidth=u.getLineWidth=function(){return Jr},Yt=u.__private__.setLineWidth=u.setLineWidth=function(j){return Jr=j,ne(S(D(j))+" w"),this};u.__private__.setLineDash=Ht.API.setLineDash=Ht.API.setLineDashPattern=function(j,G){if(j=j||[],G=G||0,isNaN(G)||!Array.isArray(j))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return j=j.map(function(ve){return S(D(ve))}).join(" "),G=S(D(G)),ne("["+j+"] "+G+" d"),this};var FA=u.__private__.getLineHeight=u.getLineHeight=function(){return ze*Xr};u.__private__.getLineHeight=u.getLineHeight=function(){return ze*Xr};var TA=u.__private__.setLineHeightFactor=u.setLineHeightFactor=function(j){return typeof(j=j||1.15)=="number"&&(Xr=j),this},uu=u.__private__.getLineHeightFactor=u.getLineHeightFactor=function(){return Xr};TA(e.lineHeight);var Ii=u.__private__.getHorizontalCoordinate=function(j){return D(j)},Ui=u.__private__.getVerticalCoordinate=function(j){return _===y?j:xt[C].mediaBox.topRightY-xt[C].mediaBox.bottomLeftY-D(j)},on=u.__private__.getHorizontalCoordinateString=u.getHorizontalCoordinateString=function(j){return S(Ii(j))},Ca=u.__private__.getVerticalCoordinateString=u.getVerticalCoordinateString=function(j){return S(Ui(j))},IA=e.strokeColor||"0 G";u.__private__.getStrokeColor=u.getDrawColor=function(){return fe(IA)},u.__private__.setStrokeColor=u.setDrawColor=function(j,G,ve,be){return IA=xe({ch1:j,ch2:G,ch3:ve,ch4:be,pdfColorType:"draw",precision:2}),ne(IA),this};var hu=e.fillColor||"0 g";u.__private__.getFillColor=u.getFillColor=function(){return fe(hu)},u.__private__.setFillColor=u.setFillColor=function(j,G,ve,be){return hu=xe({ch1:j,ch2:G,ch3:ve,ch4:be,pdfColorType:"fill",precision:2}),ne(hu),this};var Nc=e.textColor||"0 g",Fg=u.__private__.getTextColor=u.getTextColor=function(){return fe(Nc)};u.__private__.setTextColor=u.setTextColor=function(j,G,ve,be){return Nc=xe({ch1:j,ch2:G,ch3:ve,ch4:be,pdfColorType:"text",precision:3}),this};var To=e.charSpace,Tg=u.__private__.getCharSpace=u.getCharSpace=function(){return parseFloat(To||0)};u.__private__.setCharSpace=u.setCharSpace=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return To=j,this};var fu=0;u.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},u.__private__.setLineCap=u.setLineCap=function(j){var G=u.CapJoinStyles[j];if(G===void 0)throw new Error("Line cap style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fu=G,ne(G+" J"),this};var pu=0;u.__private__.setLineJoin=u.setLineJoin=function(j){var G=u.CapJoinStyles[j];if(G===void 0)throw new Error("Line join style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pu=G,ne(G+" j"),this},u.__private__.setLineMiterLimit=u.__private__.setMiterLimit=u.setLineMiterLimit=u.setMiterLimit=function(j){if(j=j||0,isNaN(j))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(S(D(j))+" M"),this},u.GState=Im,u.setGState=function(j){(j=typeof j=="string"?Je[dt[j]]:zh(null,j)).equals(nr)||(ne("/"+j.id+" gs"),nr=j)};var zh=function(j,G){if(!j||!dt[j]){var ve=!1;for(var be in Je)if(Je.hasOwnProperty(be)&&Je[be].equals(G)){ve=!0;break}if(ve)G=Je[be];else{var ke="GS"+(Object.keys(Je).length+1).toString(10);Je[ke]=G,G.id=ke}return j&&(dt[j]=G.id),ir.publish("addGState",G),G}};u.addGState=function(j,G){return zh(j,G),this},u.saveGraphicsState=function(){return ne("q"),wt.push({key:ht,size:ze,color:Nc}),this},u.restoreGraphicsState=function(){ne("Q");var j=wt.pop();return ht=j.key,ze=j.size,Nc=j.color,nr=null,this},u.setCurrentTransformationMatrix=function(j){return ne(j.toString()+" cm"),this},u.comment=function(j){return ne("#"+j),this};var Io=function(j,G){var ve=j||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ve},set:function(We){isNaN(We)||(ve=parseFloat(We))}});var be=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(We){isNaN(We)||(be=parseFloat(We))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(We){ke=We.toString()}}),this},mu=function(j,G,ve,be){Io.call(this,j,G),this.type="rect";var ke=ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(tt){isNaN(tt)||(ke=parseFloat(tt))}});var We=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(tt){isNaN(tt)||(We=parseFloat(tt))}}),this},UA=function(){this.page=Kt,this.currentPage=C,this.pages=Ne.slice(0),this.pagesContext=xt.slice(0),this.x=ee,this.y=Se,this.matrix=je,this.width=xu(C),this.height=qh(C),this.outputDestination=Be,this.id="",this.objectNumber=-1};UA.prototype.restore=function(){Kt=this.page,C=this.currentPage,xt=this.pagesContext,Ne=this.pages,ee=this.x,Se=this.y,je=this.matrix,Vh(C,this.width),Uo(C,this.height),Be=this.outputDestination};var gu=function(j,G,ve,be,ke){Cs.push(new UA),Kt=C=0,Ne=[],ee=j,Se=G,je=ke,Qr([ve,be])};for(var Bc in u.beginFormObject=function(j,G,ve,be,ke){return gu(j,G,ve,be,ke),this},u.endFormObject=function(j){return function(G){if(sn[G])Cs.pop().restore();else{var ve=new UA,be="Xo"+(Object.keys(ys).length+1).toString(10);ve.id=be,sn[G]=be,ys[be]=ve,ir.publish("addFormObject",ve),Cs.pop().restore()}}(j),this},u.doFormObject=function(j,G){var ve=ys[sn[j]];return ne("q"),ne(G.toString()+" cm"),ne("/"+ve.id+" Do"),ne("Q"),this},u.getFormObject=function(j){var G=ys[sn[j]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},u.save=function(j,G){return j=j||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?(Hc(Ti(Kn()),j),typeof Hc.unload=="function"&&er.setTimeout&&setTimeout(Hc.unload,911),this):new Promise(function(ve,be){try{var ke=Hc(Ti(Kn()),j);typeof Hc.unload=="function"&&er.setTimeout&&setTimeout(Hc.unload,911),ve(ke)}catch(We){be(We.message)}})},Ht.API)Ht.API.hasOwnProperty(Bc)&&(Bc==="events"&&Ht.API.events.length?function(j,G){var ve,be,ke;for(ke=G.length-1;ke!==-1;ke--)ve=G[ke][0],be=G[ke][1],j.subscribe.apply(j,[ve].concat(typeof be=="function"?[be]:be))}(ir,Ht.API.events):u[Bc]=Ht.API[Bc]);function xu(j){return xt[j].mediaBox.topRightX-xt[j].mediaBox.bottomLeftX}function Vh(j,G){xt[j].mediaBox.topRightX=G+xt[j].mediaBox.bottomLeftX}function qh(j){return xt[j].mediaBox.topRightY-xt[j].mediaBox.bottomLeftY}function Uo(j,G){xt[j].mediaBox.topRightY=G+xt[j].mediaBox.bottomLeftY}var Lo=u.getPageWidth=function(j){return xu(j=j||C)/nt},Gh=u.setPageWidth=function(j,G){Vh(j,G*nt)},Cc=u.getPageHeight=function(j){return qh(j=j||C)/nt},$h=u.setPageHeight=function(j,G){Uo(j,G*nt)};return u.internal={pdfEscape:cr,getStyle:ur,getFont:da,getFontSize:mt,getCharSpace:Tg,getTextColor:Fg,getLineHeight:FA,getLineHeightFactor:uu,getLineWidth:du,write:Me,getHorizontalCoordinate:Ii,getVerticalCoordinate:Ui,getCoordinateString:on,getVerticalCoordinateString:Ca,collections:{},newObject:yr,newAdditionalObject:pe,newObjectDeferred:qr,newObjectDeferredBegin:Z,getFilters:Fe,putStream:Ke,events:ir,scaleFactor:nt,pageSize:{getWidth:function(){return Lo(C)},setWidth:function(j){Gh(C,j)},getHeight:function(){return Cc(C)},setHeight:function(j){$h(C,j)}},encryptionOptions:d,encryption:Qe,getEncryptor:function(j){return d!==null?Qe.encryptor(j,0):function(G){return G}},output:X,getNumberOfPages:an,get pages(){return Ne},out:ne,f2:U,f3:L,getPageInfo:et,getPageInfoByObjId:Dt,getCurrentPageInfo:Tt,getPDFVersion:g,Point:Io,Rectangle:mu,Matrix:Rt,hasHotfix:Ee},Object.defineProperty(u.internal.pageSize,"width",{get:function(){return Lo(C)},set:function(j){Gh(C,j)},enumerable:!0,configurable:!0}),Object.defineProperty(u.internal.pageSize,"height",{get:function(){return Cc(C)},set:function(j){$h(C,j)},enumerable:!0,configurable:!0}),(function(j){for(var G=0,ve=Ye.length;G<ve;G++){var be=Cr.call(this,j[G][0],j[G][1],j[G][2],Ye[G][3],!0);h===!1&&(f[be]=!0);var ke=j[G][0].split("-");Gt({id:be,fontName:ke[0],fontStyle:ke[1]||""})}ir.publish("addFonts",{fonts:qe,dictionary:At})}).call(u,Ye),ht="F1",nn(a,r),ir.publish("initialized"),u}ld.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},ld.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ld.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},ld.prototype.processOwnerPassword=function(e,t){return vy(xy(t).substr(0,5),e)},ld.prototype.encryptor=function(e,t){var r=xy(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return vy(r,s)}},Im.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Mr(e)!==Mr(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Ht.API={events:[]},Ht.version="4.0.0";var Ss=Ht.API,Z2=1,NA=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ed=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rr=function(e){return e.toFixed(2)},Ul=function(e){return e.toFixed(5)};Ss.__acroform__={};var Da=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},X4=function(e){return e*Z2},mo=function(e){var t=new lk,r=Lt.internal.getHeight(e)||0,s=Lt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(rr(s)),Number(rr(r))],t},E9=Ss.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},k9=Ss.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},S9=Ss.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},zs=Ss.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return S9(e,t-1)},Vs=Ss.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return E9(e,t-1)},qs=Ss.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return k9(e,t-1)},F9=Ss.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=s(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=s(i)||0,[Number(rr(c.lowerLeft_X)),Number(rr(c.lowerLeft_Y)),Number(rr(c.upperRight_X)),Number(rr(c.upperRight_Y))]},T9=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=yy(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+rr(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=mo(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},yy=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(U){return U.split(`
`)}):a.map(function(U){return[U]});var i=r,o=Lt.internal.getHeight(e)||0;o=o<0?-o:o;var l=Lt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(U,L,D){if(U+1<a.length){var Q=L+" "+a[U+1][0];return up(Q,e,D).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var A,d,h=up("3",e,i).height,f=e.multiline?o-i:(o-h)/2,u=f+=2,p=0,g=0,w=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+up(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",x=0,y=0;y<a.length;y++)if(a.hasOwnProperty(y)){var _=!1;if(a[y].length!==1&&w!==a[y].length-1){if((h+2)*(x+2)+2>o)continue e;v+=a[y][w],_=!0,g=y,y--}else{v=(v+=a[y][w]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var I=parseInt(y),k=c(I,v,i),T=y>=a.length-1;if(k&&!T){v+=" ",w=0;continue}if(k||T){if(T)g=I;else if(e.multiline&&(h+2)*(x+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(x+2)+2>o)continue e;g=I}}for(var S="",B=p;B<=g;B++){var R=a[B];if(e.multiline){if(B===g){S+=R[w]+" ",w=(w+1)%R.length;continue}if(B===p){S+=R[R.length-1]+" ";continue}}S+=R[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=up(S,e,i).width,e.textAlign){case"right":A=l-d-2;break;case"center":A=(l-d)/2;break;default:A=2}t+=rr(A)+" "+rr(u)+` Td
`,t+="("+NA(S)+`) Tj
`,t+=-rr(A)+` 0 Td
`,u=-(i+2),d=0,p=_?g:g+1,x++,v=""}break}return s.text=t,s.fontSize=i,s},up=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},I9={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},U9=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},L9=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(io.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(I9)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Z2=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ck,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];i.objId=void 0,i.hasAnnotation&&U9(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,a){var i=!s;for(var o in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var l=s[o],c=[],A=l.Rect;if(l.Rect&&(l.Rect=F9(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Lt.createDefaultAppearanceStream(l),Mr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=A,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=T9(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var u=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var o in u)if(u.hasOwnProperty(o)){var p=u[o];typeof p=="function"&&(p=p.call(a,l)),h+="/"+o+" "+p+" ",a.internal.acroformPlugin.xForms.indexOf(p)>=0||a.internal.acroformPlugin.xForms.push(p)}}else typeof(p=u)=="function"&&(p=p.call(a,l)),h+="/"+o+" "+p,a.internal.acroformPlugin.xForms.indexOf(p)>=0||a.internal.acroformPlugin.xForms.push(p);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&function(g,w){for(var v in g)if(g.hasOwnProperty(v)){var x=v,y=g[v];w.internal.newObjectDeferredBegin(y.objId,!0),Mr(y)==="object"&&typeof y.putStream=="function"&&y.putStream(),delete g[x]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},ok=Ss.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Mr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),a+="("+NA(s(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},g1=function(e,t,r){var s=function(a){return a};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+NA(s(e))+")"},yo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};yo.prototype.toString=function(){return this.objId+" 0 R"},yo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},yo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],a=this[s];a&&(Array.isArray(a)?e.push({key:s,value:ok(a,this.objId,this.scope)}):a instanceof yo?(a.scope=this.scope,e.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:s,value:a}))}return e};var lk=function(){yo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Da(lk,yo);var ck=function(){yo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+NA(r(e))+")"}},set:function(r){e=r}})};Da(ck,yo);var io=function e(){yo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zs(t,3)},set:function(v){v?this.F=Vs(t,3):this.F=qs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(v){s=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(v){s[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(v){s[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(v){s[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(v){s[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Um)return;i="FieldObject"+e.FieldNum++}var v=function(x){return x};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+NA(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return A===void 0?50/Z2:A},set:function(v){A=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Um||this instanceof aA))return g1(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=v}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof _n==0?g1(f,this.objId,this.scope):f},set:function(v){v=v.toString(),f=this instanceof _n==0?v.substr(0,1)==="("?ed(v.substr(1,v.length-2)):ed(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _n==1?ed(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof _n==1?"/"+v:v}});var u=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(u)return u},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof _n==0?g1(u,this.objId,this.scope):u},set:function(v){v=v.toString(),u=this instanceof _n==0?v.substr(0,1)==="("?ed(v.substr(1,v.length-2)):ed(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _n==1?ed(u.substr(1,u.length-1)):u},set:function(v){v=v.toString(),u=this instanceof _n==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(v){p=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,1)},set:function(v){v?this.Ff=Vs(this.Ff,1):this.Ff=qs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,2)},set:function(v){v?this.Ff=Vs(this.Ff,2):this.Ff=qs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,3)},set:function(v){v?this.Ff=Vs(this.Ff,3):this.Ff=qs(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');w=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(w){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};Da(io,yo);var Dd=function(){io.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ok(t,this.objId,this.scope)},set:function(r){var s,a;a=[],typeof(s=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,A=[];c=o.exec(i);)A.push(c[l]);return A}(s,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,18)},set:function(r){r?this.Ff=Vs(this.Ff,18):this.Ff=qs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Vs(this.Ff,19):this.Ff=qs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,20)},set:function(r){r?(this.Ff=Vs(this.Ff,20),t.sort()):this.Ff=qs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,22)},set:function(r){r?this.Ff=Vs(this.Ff,22):this.Ff=qs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(r){r?this.Ff=Vs(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,27)},set:function(r){r?this.Ff=Vs(this.Ff,27):this.Ff=qs(this.Ff,27)}}),this.hasAppearanceStream=!1};Da(Dd,io);var Qd=function(){Dd.call(this),this.fontName="helvetica",this.combo=!1};Da(Qd,Dd);var Od=function(){Qd.call(this),this.combo=!0};Da(Od,Qd);var Hp=function(){Od.call(this),this.edit=!0};Da(Hp,Od);var _n=function(){io.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,15)},set:function(r){r?this.Ff=Vs(this.Ff,15):this.Ff=qs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,16)},set:function(r){r?this.Ff=Vs(this.Ff,16):this.Ff=qs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,17)},set:function(r){r?this.Ff=Vs(this.Ff,17):this.Ff=qs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(r){r?this.Ff=Vs(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,a=[];for(s in a.push("<<"),t)a.push("/"+s+" ("+NA(r(t[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Mr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Da(_n,io);var Kp=function(){_n.call(this),this.pushButton=!0};Da(Kp,_n);var Pd=function(){_n.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Da(Pd,_n);var Um=function(){var e,t;io.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),s)o.push("/"+i+" ("+NA(a(s[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Mr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Da(Um,io),Pd.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Pd.prototype.createOption=function(e){var t=new Um;return t.Parent=this,t.optionName=e,this.Kids.push(t),D9.call(this.scope,t),t};var zp=function(){_n.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lt.CheckBox.createAppearanceStream()};Da(zp,_n);var aA=function(){io.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,13)},set:function(t){t?this.Ff=Vs(this.Ff,13):this.Ff=qs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,21)},set:function(t){t?this.Ff=Vs(this.Ff,21):this.Ff=qs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(t){t?this.Ff=Vs(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,24)},set:function(t){t?this.Ff=Vs(this.Ff,24):this.Ff=qs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,25)},set:function(t){t?this.Ff=Vs(this.Ff,25):this.Ff=qs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(t){t?this.Ff=Vs(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Da(aA,io);var Vp=function(){aA.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,14)},set:function(e){e?this.Ff=Vs(this.Ff,14):this.Ff=qs(this.Ff,14)}}),this.password=!0};Da(Vp,aA);var Lt={CheckBox:{createAppearanceStream:function(){return{N:{On:Lt.CheckBox.YesNormal},D:{On:Lt.CheckBox.YesPushDown,Off:Lt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=mo(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=yy(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+rr(Lt.internal.getWidth(e))+" "+rr(Lt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+rr(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=mo(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=[],i=Lt.internal.getHeight(e),o=Lt.internal.getWidth(e),l=yy(e,e.caption);return a.push("1 g"),a.push("0 0 "+rr(o)+" "+rr(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+rr(o-1)+" "+rr(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+rr(l.fontSize)+" Tf "+s),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=mo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+rr(Lt.internal.getWidth(e))+" "+rr(Lt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Lt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Lt.RadioButton.Circle.YesNormal,t.D[e]=Lt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=mo(e);t.scope=e.scope;var r=[],s=Lt.internal.getWidth(e)<=Lt.internal.getHeight(e)?Lt.internal.getWidth(e)/4:Lt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Lt.internal.Bezier_C,i=Number((s*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ul(Lt.internal.getWidth(e)/2)+" "+Ul(Lt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=mo(e);t.scope=e.scope;var r=[],s=Lt.internal.getWidth(e)<=Lt.internal.getHeight(e)?Lt.internal.getWidth(e)/4:Lt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*Lt.internal.Bezier_C).toFixed(5)),o=Number((s*Lt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ul(Lt.internal.getWidth(e)/2)+" "+Ul(Lt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ul(Lt.internal.getWidth(e)/2)+" "+Ul(Lt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=mo(e);t.scope=e.scope;var r=[],s=Lt.internal.getWidth(e)<=Lt.internal.getHeight(e)?Lt.internal.getWidth(e)/4:Lt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*Lt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ul(Lt.internal.getWidth(e)/2)+" "+Ul(Lt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Lt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Lt.RadioButton.Cross.YesNormal,t.D[e]=Lt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=mo(e);t.scope=e.scope;var r=[],s=Lt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+rr(Lt.internal.getWidth(e)-2)+" "+rr(Lt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(rr(s.x1.x)+" "+rr(s.x1.y)+" m"),r.push(rr(s.x2.x)+" "+rr(s.x2.y)+" l"),r.push(rr(s.x4.x)+" "+rr(s.x4.y)+" m"),r.push(rr(s.x3.x)+" "+rr(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=mo(e);t.scope=e.scope;var r=Lt.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+rr(Lt.internal.getWidth(e))+" "+rr(Lt.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+rr(Lt.internal.getWidth(e)-2)+" "+rr(Lt.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(rr(r.x1.x)+" "+rr(r.x1.y)+" m"),s.push(rr(r.x2.x)+" "+rr(r.x2.y)+" l"),s.push(rr(r.x4.x)+" "+rr(r.x4.y)+" m"),s.push(rr(r.x3.x)+" "+rr(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=mo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+rr(Lt.internal.getWidth(e))+" "+rr(Lt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Lt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Lt.internal.getWidth(e),r=Lt.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},Lt.internal.getWidth=function(e){var t=0;return Mr(e)==="object"&&(t=X4(e.Rect[2])),t},Lt.internal.getHeight=function(e){var t=0;return Mr(e)==="object"&&(t=X4(e.Rect[3])),t};var D9=Ss.addField=function(e){if(L9(this,e),!(e instanceof io))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ss.AcroFormChoiceField=Dd,Ss.AcroFormListBox=Qd,Ss.AcroFormComboBox=Od,Ss.AcroFormEditBox=Hp,Ss.AcroFormButton=_n,Ss.AcroFormPushButton=Kp,Ss.AcroFormRadioButton=Pd,Ss.AcroFormCheckBox=zp,Ss.AcroFormTextField=aA,Ss.AcroFormPasswordField=Vp,Ss.AcroFormAppearance=Lt,Ss.AcroForm={ChoiceField:Dd,ListBox:Qd,ComboBox:Od,EditBox:Hp,Button:_n,PushButton:Kp,RadioButton:Pd,CheckBox:zp,TextField:aA,PasswordField:Vp,Appearance:Lt},Ht.AcroForm={ChoiceField:Dd,ListBox:Qd,ComboBox:Od,EditBox:Hp,Button:_n,PushButton:Kp,RadioButton:Pd,CheckBox:zp,TextField:aA,PasswordField:Vp,Appearance:Lt};Ht.AcroForm;function Ak(e){return e.reduce(function(t,r,s){return t[r]=s,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(U,L){var D,Q,K,P,te,J=r;if((L=L||r)==="RGBA"||U.data!==void 0&&U.data instanceof Uint8ClampedArray&&"height"in U&&"width"in U)return"RGBA";if(k(U))for(te in s)for(K=s[te],D=0;D<K.length;D+=1){for(P=!0,Q=0;Q<K[D].length;Q+=1)if(K[D][Q]!==void 0&&K[D][Q]!==U[Q]){P=!1;break}if(P===!0){J=te;break}}else for(te in s)for(K=s[te],D=0;D<K.length;D+=1){for(P=!0,Q=0;Q<K[D].length;Q+=1)if(K[D][Q]!==void 0&&K[D][Q]!==U.charCodeAt(Q)){P=!1;break}if(P===!0){J=te;break}}return J===r&&L!==r&&(J=L),J},i=function U(L){for(var D=this.internal.write,Q=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var P=[];if(P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Image"}),P.push({key:"Width",value:L.width}),P.push({key:"Height",value:L.height}),L.colorSpace===v.INDEXED?P.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(P.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===v.DEVICE_CMYK&&P.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),P.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&P.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var te="",J=0,V=L.transparency.length;J<V;J++)te+=L.transparency[J]+" "+L.transparency[J]+" ";P.push({key:"Mask",value:"["+te+"]"})}L.sMask!==void 0&&P.push({key:"SMask",value:L.objectId+1+" 0 R"});var ie=L.filter!==void 0?["/"+L.filter]:void 0;if(Q({data:L.data,additionalKeyValues:P,alreadyAppliedFilters:ie,objectId:L.objectId}),D("endobj"),"sMask"in L&&L.sMask!==void 0){var Y,N=(Y=L.sMaskBitsPerComponent)!==null&&Y!==void 0?Y:L.bitsPerComponent,C={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:N,data:L.sMask};"filter"in L&&(C.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(N," /Columns ").concat(L.width),C.filter=L.filter),U.call(this,C)}if(L.colorSpace===v.INDEXED){var E=this.internal.newObject();Q({data:S(new Uint8Array(L.palette)),objectId:E}),D("endobj")}},o=function(){var U=this.internal.collections[t+"images"];for(var L in U)i.call(this,U[L])},l=function(){var U,L=this.internal.collections[t+"images"],D=this.internal.write;for(var Q in L)D("/I"+(U=L[Q]).index,U.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},A=function(){var U=this.internal.collections[t+"images"];return c.call(this),U},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},h=function(U){return typeof e["process"+U.toUpperCase()]=="function"},f=function(U){return Mr(U)==="object"&&U.nodeType===1},u=function(U,L){if(U.nodeName==="IMG"&&U.hasAttribute("src")){var D=""+U.getAttribute("src");if(D.indexOf("data:image/")===0)return Mp(unescape(D).split("base64,").pop());var Q=e.loadFile(D,!0);if(Q!==void 0)return Q}if(U.nodeName==="CANVAS"){if(U.width===0||U.height===0)throw new Error("Given canvas must have data. Canvas width: "+U.width+", height: "+U.height);var K;switch(L){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;default:K="image/jpeg"}return Mp(U.toDataURL(K,1).split("base64,").pop())}},p=function(U){var L=this.internal.collections[t+"images"];if(L){for(var D in L)if(U===L[D].alias)return L[D]}},g=function(U,L,D){return U||L||(U=-96,L=-96),U<0&&(U=-1*D.width*72/U/this.internal.scaleFactor),L<0&&(L=-1*D.height*72/L/this.internal.scaleFactor),U===0&&(U=L*D.width/D.height),L===0&&(L=U*D.height/D.width),[U,L]},w=function(U,L,D,Q,K,P){var te=g.call(this,D,Q,K),J=this.internal.getCoordinateString,V=this.internal.getVerticalCoordinateString,ie=A.call(this);if(D=te[0],Q=te[1],ie[K.index]=K,P){P*=Math.PI/180;var Y=Math.cos(P),N=Math.sin(P),C=function(O){return O.toFixed(4)},E=[C(Y),C(N),C(-1*N),C(Y),0,0,"cm"]}this.internal.write("q"),P?(this.internal.write([1,"0","0",1,J(U),V(L+Q),"cm"].join(" ")),this.internal.write(E.join(" ")),this.internal.write([J(D),"0","0",J(Q),"0","0","cm"].join(" "))):this.internal.write([J(D),"0","0",J(Q),J(U),V(L+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(U){var L,D,Q=0;if(typeof U=="string")for(D=U.length,L=0;L<D;L++)Q=(Q<<5)-Q+U.charCodeAt(L),Q|=0;else if(k(U))for(D=U.byteLength/2,L=0;L<D;L++)Q=(Q<<5)-Q+U[L],Q|=0;return Q},_=e.__addimage__.validateStringAsBase64=function(U){(U=U||"").toString().trim();var L=!0;return U.length===0&&(L=!1),U.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(U.substr(0,U.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(U.substr(-2))===!1&&(L=!1),L},I=e.__addimage__.extractImageFromDataUrl=function(U){if(U==null||!(U=U.trim()).startsWith("data:"))return null;var L=U.indexOf(",");return L<0?null:U.substring(0,L).trim().endsWith("base64")?U.substring(L+1):null};e.__addimage__.isArrayBuffer=function(U){return U instanceof ArrayBuffer};var k=e.__addimage__.isArrayBufferView=function(U){return U instanceof Int8Array||U instanceof Uint8Array||U instanceof Uint8ClampedArray||U instanceof Int16Array||U instanceof Uint16Array||U instanceof Int32Array||U instanceof Uint32Array||U instanceof Float32Array||U instanceof Float64Array},T=e.__addimage__.binaryStringToUint8Array=function(U){for(var L=U.length,D=new Uint8Array(L),Q=0;Q<L;Q++)D[Q]=U.charCodeAt(Q);return D},S=e.__addimage__.arrayBufferToBinaryString=function(U){for(var L="",D=k(U)?U:new Uint8Array(U),Q=0;Q<D.length;Q+=8192)L+=String.fromCharCode.apply(null,D.subarray(Q,Q+8192));return L};e.addImage=function(){var U,L,D,Q,K,P,te,J,V;if(typeof arguments[1]=="number"?(L=r,D=arguments[1],Q=arguments[2],K=arguments[3],P=arguments[4],te=arguments[5],J=arguments[6],V=arguments[7]):(L=arguments[1],D=arguments[2],Q=arguments[3],K=arguments[4],P=arguments[5],te=arguments[6],J=arguments[7],V=arguments[8]),Mr(U=arguments[0])==="object"&&!f(U)&&"imageData"in U){var ie=U;U=ie.imageData,L=ie.format||L||r,D=ie.x||D||0,Q=ie.y||Q||0,K=ie.w||ie.width||K,P=ie.h||ie.height||P,te=ie.alias||te,J=ie.compression||J,V=ie.rotation||ie.angle||V}var Y=this.internal.getFilters();if(J===void 0&&Y.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(D)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var N=B.call(this,U,L,te,J);return w.call(this,D,Q,K,P,N,V),this};var B=function(U,L,D,Q){var K,P,te;if(typeof U=="string"&&a(U)===r){U=unescape(U);var J=R(U,!1);(J!==""||(J=e.loadFile(U,!0))!==void 0)&&(U=J)}if(f(U)&&(U=u(U,L)),L=a(U,L),!h(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((te=D)==null||te.length===0)&&(D=function(V){return typeof V=="string"||k(V)?y(V):k(V.data)?y(V.data):null}(U)),(K=p.call(this,D))||(U instanceof Uint8Array||L==="RGBA"||(P=U,U=T(U)),K=this["process"+L.toUpperCase()](U,d.call(this),D,function(V){return V&&typeof V=="string"&&(V=V.toUpperCase()),V in e.image_compression?V:x.NONE}(Q),P)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},R=e.__addimage__.convertBase64ToBinaryString=function(U,L){L=typeof L!="boolean"||L;var D,Q="";if(typeof U=="string"){var K;D=(K=I(U))!==null&&K!==void 0?K:U;try{Q=Mp(D)}catch(P){if(L)throw _(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+P.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};e.getImageProperties=function(U){var L,D,Q="";if(f(U)&&(U=u(U)),typeof U=="string"&&a(U)===r&&((Q=R(U,!1))===""&&(Q=e.loadFile(U)||""),U=Q),D=a(U),!h(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(U instanceof Uint8Array||(U=T(U)),!(L=this["process"+D.toUpperCase()](U)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=D,L}})(Ht.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ht.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),A=r.pageContext.annotations,d=!1,h=0;h<A.length&&!d;h++)switch((s=A[h]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var f=0;f<A.length;f++){s=A[f];var u=this.internal.pdfEscape,p=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),x=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y)+"] ")+"/Contents ("+u(v(s.contents))+")",i+=" /Popup "+w.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+u(v(x))+") >>",g.content=i;var y=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(s.bounds.x+30)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+l(s.bounds.y)+"] ")+" /Parent "+y,s.open&&(i+=" /Open true"),i+=" >>",w.content=i,this.internal.write(g.objId,"0 R",w.objId,"0 R");break;case"freetext":a="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y+s.bounds.h)+"] ";var _=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+u(p(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var I=this.annotations._nameMap[s.options.name];s.options.pageNumber=I.page,s.options.top=I.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+u(p(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;default:var k=l(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+k+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:A(s),w:c(r+a),h:A(s+i)},options:o,type:"link"})},e.textWithLink=function(r,s,a,i){var o,l,c=this.getTextWidth(r),A=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(A*d)}else l=c,o=A;return this.text(r,s,a,i),a+=.2*A,i.align==="center"&&(s-=c/2),i.align==="right"&&(s-=c),this.link(s,a-A,l,o,i),c},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Ht.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var A=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var w=0,v=r,x="",y=0;for(w=0;w<g.length;w+=1)v[g.charCodeAt(w)]!==void 0?(y++,typeof(v=v[g.charCodeAt(w)])=="number"&&(x+=String.fromCharCode(v),v=r,y=0),w===g.length-1&&(v=r,x+=g.charAt(w-(y-1)),w-=y-1,y=0)):(v=r,x+=g.charAt(w-y),w-=y,y=0);return x};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&s[g.charCodeAt(0)]!==void 0};var f=e.__arabicParser__.getCorrectForm=function(g,w,v){return o(g)?i(g)===!1?-1:!A(g)||!o(w)&&!o(v)||!o(v)&&l(w)||l(g)&&!o(w)||l(g)&&c(w)||l(g)&&l(w)?0:d(g)&&o(w)&&!l(w)&&o(v)&&A(v)?3:l(g)||!o(v)?1:2:-1},u=function(g){var w=0,v=0,x=0,y="",_="",I="",k=(g=g||"").split("\\s+"),T=[];for(w=0;w<k.length;w+=1){for(T.push(""),v=0;v<k[w].length;v+=1)y=k[w][v],_=k[w][v-1],I=k[w][v+1],o(y)?(x=f(y,_,I),T[w]+=x!==-1?String.fromCharCode(t[y.charCodeAt(0)][x]):y):T[w]+=y;T[w]=h(T[w])}return T.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var g,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(w)){var x=0;for(v=[],x=0;x<w.length;x+=1)Array.isArray(w[x])?v.push([u(w[x][0]),w[x][1],w[x][2]]):v.push([u(w[x])]);g=v}else g=u(w);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",p])}(Ht.API),Ht.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var a;if((r=r||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ht.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var A=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return A},set:function(g){A=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var u=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(g){p=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,A){s.call(this);var d=(A=A||{}).fontSize||this.getFontSize(),h=A.font||this.getFont(),f=A.scaleFactor||this.internal.scaleFactor,u=0,p=0,g=0,w=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=A.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(y,_){return y.concat(w.splitTextToSize(_,v))},[])):c=Array.isArray(c)?c:[c];for(var x=0;x<c.length;x++)u<(g=this.getStringUnitWidth(c[x],{font:h})*d)&&(u=g);return u!==0&&(p=c.length),{w:u/=f,h:Math.max((p*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/f,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var A=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return A.lineNumber!==void 0&&(A.lineNumber===c.lineNumber?(c.x=(A.x||0)+(A.width||0),c.y=A.y||0):A.y+A.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,u&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=A.y+A.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,A,d,h,f){if(s.call(this),!d)throw new Error("No data for PDF table.");var u,p,g,w,v=[],x=[],y=[],_={},I={},k=[],T=[],S=(f=f||{}).autoSize||!1,B=f.printHeaders!==!1,R=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,U=f.margins||Object.assign({width:this.getPageWidth()},t),L=typeof f.padding=="number"?f.padding:3,D=f.headerBackgroundColor||"#c8c8c8",Q=f.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=U,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=Q,this.setFontSize(R),h==null)x=v=Object.keys(d[0]),y=v.map(function(){return"left"});else if(Array.isArray(h)&&Mr(h[0])==="object")for(v=h.map(function(ie){return ie.name}),x=h.map(function(ie){return ie.prompt||ie.name||""}),y=h.map(function(ie){return ie.align||"left"}),u=0;u<h.length;u+=1)I[h[u].name]=.7499990551181103*h[u].width;else Array.isArray(h)&&typeof h[0]=="string"&&(x=v=h,y=v.map(function(){return"left"}));if(S||Array.isArray(h)&&typeof h[0]=="string")for(u=0;u<v.length;u+=1){for(_[w=v[u]]=d.map(function(ie){return ie[w]}),this.setFont(void 0,"bold"),k.push(this.getTextDimensions(x[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=_[w],this.setFont(void 0,"normal"),g=0;g<p.length;g+=1)k.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);I[w]=Math.max.apply(null,k)+L+L,k=[]}if(B){var K={};for(u=0;u<v.length;u+=1)K[v[u]]={},K[v[u]].text=x[u],K[v[u]].align=y[u];var P=l.call(this,K,I);T=v.map(function(ie){return new i(c,A,I[ie],P,K[ie].text,void 0,K[ie].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var te=h.reduce(function(ie,Y){return ie[Y.name]=Y.align,ie},{});for(u=0;u<d.length;u+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:u,data:d[u]},this);var J=l.call(this,d[u],I);for(g=0;g<v.length;g+=1){var V=d[u][v[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:u,col:g,data:V},this),o.call(this,new i(c,A,I[v[g]],J,V,u+2,te[v[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=A,this};var l=function(c,A){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(u){var p=c[u];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,A[u]-d-d)},this).map(function(u){return this.getLineHeightFactor()*u.length*h/f+d+d},this).reduce(function(u,p){return Math.max(u,p)},0)};e.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,A){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){d=this.internal.__cell__.tableHeaderRow[u].clone(),A&&(d.y=this.internal.__cell__.margins.top||0,f.push(d)),d.lineNumber=c;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(p)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(Ht.API);var dk={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uk=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],wy=Ak(uk),hk=[100,200,300,400,500,600,700,800,900],Q9=Ak(hk);function x1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return dk[i=i||"normal"]?i:"normal"}(e.style),s=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof wy[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:s,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,s].join(" ")}}}function J4(e,t,r,s){var a;for(a=r;a>=0&&a<t.length;a+=s)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=s)if(e[t[a]])return e[t[a]]}var O9={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Y4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Z4(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function eN(e){return e.trimLeft()}function P9(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function R9(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var hp,tN,rN,td,fp,sN,nN,aN,v1=["times"];function iN(e,t,r,s,a){var i=4,o=lN;switch(a){case Ht.API.image_compression.FAST:i=1,o=oN;break;case Ht.API.image_compression.MEDIUM:i=6,o=cN;break;case Ht.API.image_compression.SLOW:i=9,o=AN}e=function(c,A,d,h){for(var f,u=c.length/A,p=new Uint8Array(c.length+u),g=[M9,oN,lN,cN,AN],w=0;w<u;w+=1){var v=w*A,x=c.subarray(v,v+A);if(h)p.set(h(x,d,f),v+w);else{for(var y=g.length,_=[],I=0;I<y;I+=1)_[I]=g[I](x,d,f);var k=K9(_.concat());p.set(_[k],v+w)}f=x}return p}(e,t,Math.ceil(r*s/8),o);var l=fy(e,{level:i});return Ht.API.__addimage__.arrayBufferToBinaryString(l)}function M9(e){var t=Array.apply([],e);return t.unshift(0),t}function oN(e,t){var r=e.length,s=[];s[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;s[a+1]=e[a]-i+256&255}return s}function lN(e,t,r){var s=e.length,a=[];a[0]=2;for(var i=0;i<s;i+=1){var o=r&&r[i]||0;a[i+1]=e[i]-o+256&255}return a}function cN(e,t,r){var s=e.length,a=[];a[0]=3;for(var i=0;i<s;i+=1){var o=e[i-t]||0,l=r&&r[i]||0;a[i+1]=e[i]+256-(o+l>>>1)&255}return a}function AN(e,t,r){var s=e.length,a=[];a[0]=4;for(var i=0;i<s;i+=1){var o=H9(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-o+256&255}return a}function H9(e,t,r){if(e===t&&t===r)return e;var s=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return s<=a&&s<=i?e:a<=i?t:r}function K9(e){var t=e.map(function(r){return r.reduce(function(s,a){return s+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function y1(e,t,r){var s=t*r,a=Math.floor(s/8),i=16-(s-8*a+r),o=(1<<r)-1;return fk(e,a)>>i&o}function dN(e,t,r,s){var a=r*s,i=Math.floor(a/8),o=16-(a-8*i+s),l=(1<<s)-1,c=(t&l)<<o;(function(A,d,h){if(d+1<A.byteLength)A.setUint16(d,h,!1);else{var f=h>>8&255;A.setUint8(d,f)}})(e,i,fk(e,i)&~(l<<o)&65535|c)}function fk(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function z9(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<1+(7&a);e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var A=!0,d=[],h=0,f=null,u=0,p=null;for(this.width=r,this.height=s;A&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((U=e[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,f=e[t++],1&g||(f=null),u=g>>2&7,t++;break;case 254:for(;;){if(!((U=e[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var w=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,_=e[t++],I=_>>6&1,k=1<<1+(7&_),T=l,S=c,B=!1;_>>7&&(B=!0,T=t,S=k,t+=3*k);var R=t;for(t++;;){var U;if(!((U=e[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}d.push({x:w,y:v,width:x,height:y,has_local_palette:B,palette_offset:T,palette_size:S,data_offset:R,data_length:t-R,transparent_index:f,interlaced:!!I,delay:h,disposal:u});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return p},this.frameInfo=function(L){if(L<0||L>=d.length)throw new Error("Frame index out of range.");return d[L]},this.decodeAndBlitFrameBGRA=function(L,D){var Q=this.frameInfo(L),K=Q.width*Q.height,P=new Uint8Array(K);uN(e,Q.data_offset,P,K);var te=Q.palette_offset,J=Q.transparent_index;J===null&&(J=256);var V=Q.width,ie=r-V,Y=V,N=4*(Q.y*r+Q.x),C=4*((Q.y+Q.height)*r+Q.x),E=N,O=4*ie;Q.interlaced===!0&&(O+=4*r*7);for(var q=8,se=0,ye=P.length;se<ye;++se){var re=P[se];if(Y===0&&(Y=V,(E+=O)>=C&&(O=4*ie+4*r*(q-1),E=N+(V+ie)*(q<<1),q>>=1)),re===J)E+=4;else{var de=e[te+3*re],Ne=e[te+3*re+1],z=e[te+3*re+2];D[E++]=z,D[E++]=Ne,D[E++]=de,D[E++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(L,D){var Q=this.frameInfo(L),K=Q.width*Q.height,P=new Uint8Array(K);uN(e,Q.data_offset,P,K);var te=Q.palette_offset,J=Q.transparent_index;J===null&&(J=256);var V=Q.width,ie=r-V,Y=V,N=4*(Q.y*r+Q.x),C=4*((Q.y+Q.height)*r+Q.x),E=N,O=4*ie;Q.interlaced===!0&&(O+=4*r*7);for(var q=8,se=0,ye=P.length;se<ye;++se){var re=P[se];if(Y===0&&(Y=V,(E+=O)>=C&&(O=4*ie+4*r*(q-1),E=N+(V+ie)*(q<<1),q>>=1)),re===J)E+=4;else{var de=e[te+3*re],Ne=e[te+3*re+1],z=e[te+3*re+2];D[E++]=de,D[E++]=Ne,D[E++]=z,D[E++]=255}--Y}}}function uN(e,t,r,s){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,A=(1<<c)-1,d=0,h=0,f=0,u=e[t++],p=new Int32Array(4096),g=null;;){for(;d<16&&u!==0;)h|=e[t++]<<d,d+=8,u===1?u=e[t++]:--u;if(d<c)break;var w=h&A;if(h>>=c,d-=c,w!==i){if(w===o)break;for(var v=w<l?w:g,x=0,y=v;y>i;)y=p[y]>>8,++x;var _=y;if(f+x+(v!==w?1:0)>s)return void es.log("Warning, gif stream longer than expected.");r[f++]=_;var I=f+=x;for(v!==w&&(r[f++]=_),y=v;x--;)y=p[y],r[--I]=255&y,y>>=8;g!==null&&l<4096&&(p[l++]=g<<8|_,l>=A+1&&c<12&&(++c,A=A<<1|1)),g=w}else l=o+1,A=(1<<(c=a+1))-1,g=null}return f!==s&&es.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function w1(e){var t,r,s,a,i,o=Math.floor,l=new Array(64),c=new Array(64),A=new Array(64),d=new Array(64),h=new Array(65535),f=new Array(65535),u=new Array(64),p=new Array(64),g=[],w=0,v=7,x=new Array(64),y=new Array(64),_=new Array(64),I=new Array(256),k=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function P(N,C){for(var E=0,O=0,q=new Array,se=1;se<=16;se++){for(var ye=1;ye<=N[se];ye++)q[C[O]]=[],q[C[O]][0]=E,q[C[O]][1]=se,O++,E++;E*=2}return q}function te(N){for(var C=N[0],E=N[1]-1;E>=0;)C&1<<E&&(w|=1<<v),E--,--v<0&&(w==255?(J(255),J(0)):J(w),v=7,w=0)}function J(N){g.push(N)}function V(N){J(N>>8&255),J(255&N)}function ie(N,C,E,O,q){for(var se,ye=q[0],re=q[240],de=function(ze,yt){var mt,at,it,jt,gt,pt,ot,Et,ht,nt,ee=0;for(ht=0;ht<8;++ht){mt=ze[ee],at=ze[ee+1],it=ze[ee+2],jt=ze[ee+3],gt=ze[ee+4],pt=ze[ee+5],ot=ze[ee+6];var Se=mt+(Et=ze[ee+7]),je=mt-Et,qe=at+ot,At=at-ot,wt=it+pt,He=it-pt,ft=jt+gt,Je=jt-gt,dt=Se+ft,nr=Se-ft,Kt=qe+wt,xt=qe-wt;ze[ee]=dt+Kt,ze[ee+4]=dt-Kt;var ir=.707106781*(xt+nr);ze[ee+2]=nr+ir,ze[ee+6]=nr-ir;var Dr=.382683433*((dt=Je+He)-(xt=At+je)),ys=.5411961*dt+Dr,sn=1.306562965*xt+Dr,Cs=.707106781*(Kt=He+At),Rt=je+Cs,Fr=je-Cs;ze[ee+5]=Fr+ys,ze[ee+3]=Fr-ys,ze[ee+1]=Rt+sn,ze[ee+7]=Rt-sn,ee+=8}for(ee=0,ht=0;ht<8;++ht){mt=ze[ee],at=ze[ee+8],it=ze[ee+16],jt=ze[ee+24],gt=ze[ee+32],pt=ze[ee+40],ot=ze[ee+48];var Br=mt+(Et=ze[ee+56]),Tr=mt-Et,Vr=at+ot,yr=at-ot,qr=it+pt,Z=it-pt,pe=jt+gt,Ae=jt-gt,he=Br+pe,fe=Br-pe,xe=Vr+qr,Fe=Vr-qr;ze[ee]=he+xe,ze[ee+32]=he-xe;var Ke=.707106781*(Fe+fe);ze[ee+16]=fe+Ke,ze[ee+48]=fe-Ke;var Ue=.382683433*((he=Ae+Z)-(Fe=yr+Tr)),Le=.5411961*he+Ue,De=1.306562965*Fe+Ue,st=.707106781*(xe=Z+yr),vt=Tr+st,Bt=Tr-st;ze[ee+40]=Bt+Le,ze[ee+24]=Bt-Le,ze[ee+8]=vt+De,ze[ee+56]=vt-De,ee++}for(ht=0;ht<64;++ht)nt=ze[ht]*yt[ht],u[ht]=nt>0?nt+.5|0:nt-.5|0;return u}(N,C),Ne=0;Ne<64;++Ne)p[T[Ne]]=de[Ne];var z=p[0]-E;E=p[0],z==0?te(O[0]):(te(O[f[se=32767+z]]),te(h[se]));for(var Be=63;Be>0&&p[Be]==0;)Be--;if(Be==0)return te(ye),E;for(var Ve,ne=1;ne<=Be;){for(var Me=ne;p[ne]==0&&ne<=Be;)++ne;var Re=ne-Me;if(Re>=16){Ve=Re>>4;for(var Ye=1;Ye<=Ve;++Ye)te(re);Re&=15}se=32767+p[ne],te(q[(Re<<4)+f[se]]),te(h[se]),ne++}return Be!=63&&te(ye),E}function Y(N){N=Math.min(Math.max(N,1),100),i!=N&&(function(C){for(var E=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],O=0;O<64;O++){var q=o((E[O]*C+50)/100);q=Math.min(Math.max(q,1),255),l[T[O]]=q}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var re=o((se[ye]*C+50)/100);re=Math.min(Math.max(re,1),255),c[T[ye]]=re}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,z=0;z<8;z++)for(var Be=0;Be<8;Be++)A[Ne]=1/(l[T[Ne]]*de[z]*de[Be]*8),d[Ne]=1/(c[T[Ne]]*de[z]*de[Be]*8),Ne++}(N<50?Math.floor(5e3/N):Math.floor(200-2*N)),i=N)}this.encode=function(N,C){C&&Y(C),g=new Array,w=0,v=7,V(65496),V(65504),V(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),V(1),V(1),J(0),J(0),function(){V(65499),V(132),J(0);for(var at=0;at<64;at++)J(l[at]);J(1);for(var it=0;it<64;it++)J(c[it])}(),function(at,it){V(65472),V(17),J(8),V(it),V(at),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(N.width,N.height),function(){V(65476),V(418),J(0);for(var at=0;at<16;at++)J(S[at+1]);for(var it=0;it<=11;it++)J(B[it]);J(16);for(var jt=0;jt<16;jt++)J(R[jt+1]);for(var gt=0;gt<=161;gt++)J(U[gt]);J(1);for(var pt=0;pt<16;pt++)J(L[pt+1]);for(var ot=0;ot<=11;ot++)J(D[ot]);J(17);for(var Et=0;Et<16;Et++)J(Q[Et+1]);for(var ht=0;ht<=161;ht++)J(K[ht])}(),V(65498),V(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var E=0,O=0,q=0;w=0,v=7,this.encode.displayName="_encode_";for(var se,ye,re,de,Ne,z,Be,Ve,ne,Me=N.data,Re=N.width,Ye=N.height,ze=4*Re,yt=0;yt<Ye;){for(se=0;se<ze;){for(Ne=ze*yt+se,Be=-1,Ve=0,ne=0;ne<64;ne++)z=Ne+(Ve=ne>>3)*ze+(Be=4*(7&ne)),yt+Ve>=Ye&&(z-=ze*(yt+1+Ve-Ye)),se+Be>=ze&&(z-=se+Be-ze+4),ye=Me[z++],re=Me[z++],de=Me[z++],x[ne]=(k[ye]+k[re+256|0]+k[de+512|0]>>16)-128,y[ne]=(k[ye+768|0]+k[re+1024|0]+k[de+1280|0]>>16)-128,_[ne]=(k[ye+1280|0]+k[re+1536|0]+k[de+1792|0]>>16)-128;E=ie(x,A,E,t,s),O=ie(y,d,O,r,a),q=ie(_,d,q,r,a),se+=32}yt+=8}if(v>=0){var mt=[];mt[1]=v+1,mt[0]=(1<<v+1)-1,te(mt)}return V(65497),new Uint8Array(g)},e=e||50,function(){for(var N=String.fromCharCode,C=0;C<256;C++)I[C]=N(C)}(),t=P(S,B),r=P(L,D),s=P(R,U),a=P(Q,K),function(){for(var N=1,C=2,E=1;E<=15;E++){for(var O=N;O<C;O++)f[32767+O]=E,h[32767+O]=[],h[32767+O][1]=E,h[32767+O][0]=O;for(var q=-(C-1);q<=-N;q++)f[32767+q]=E,h[32767+q]=[],h[32767+q][1]=E,h[32767+q][0]=C-1+q;N<<=1,C<<=1}}(),function(){for(var N=0;N<256;N++)k[N]=19595*N,k[N+256|0]=38470*N,k[N+512|0]=7471*N+32768,k[N+768|0]=-11059*N,k[N+1024|0]=-21709*N,k[N+1280|0]=32768*N+8421375,k[N+1536|0]=-27439*N,k[N+1792|0]=-5329*N}(),Y(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ri(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function hN(e){function t(B){if(!B)throw Error("assert :P")}function r(B,R,U){for(var L=0;4>L;L++)if(B[R+L]!=U.charCodeAt(L))return!0;return!1}function s(B,R,U,L,D){for(var Q=0;Q<D;Q++)B[R+Q]=U[L+Q]}function a(B,R,U,L){for(var D=0;D<L;D++)B[R+D]=U}function i(B){return new Int32Array(B)}function o(B,R){for(var U=[],L=0;L<B;L++)U.push(new R);return U}function l(B,R){var U=[];return function L(D,Q,K){for(var P=K[Q],te=0;te<P&&(D.push(K.length>Q+1?[]:new R),!(K.length<Q+1));te++)L(D[te],Q+1,K)}(U,0,B),U}var c=function(){var B=this;function R(m,b){for(var F=1<<b-1>>>0;m&F;)F>>>=1;return F?(m&F-1)+F:m}function U(m,b,F,M,W){t(!(M%F));do m[b+(M-=F)]=W;while(0<M)}function L(m,b,F,M,W){if(t(2328>=W),512>=W)var ae=i(512);else if((ae=i(W))==null)return 0;return function(le,ce,ue,me,_e,Pe){var ge,Ce,Te=ce,Ge=1<<ue,Oe=i(16),$e=i(16);for(t(_e!=0),t(me!=null),t(le!=null),t(0<ue),Ce=0;Ce<_e;++Ce){if(15<me[Ce])return 0;++Oe[me[Ce]]}if(Oe[0]==_e)return 0;for($e[1]=0,ge=1;15>ge;++ge){if(Oe[ge]>1<<ge)return 0;$e[ge+1]=$e[ge]+Oe[ge]}for(Ce=0;Ce<_e;++Ce)ge=me[Ce],0<me[Ce]&&(Pe[$e[ge]++]=Ce);if($e[15]==1)return(me=new D).g=0,me.value=Pe[0],U(le,Te,1,Ge,me),Ge;var Xe,lt=-1,rt=Ge-1,zt=0,Ut=1,Ar=1,Ot=1<<ue;for(Ce=0,ge=1,_e=2;ge<=ue;++ge,_e<<=1){if(Ut+=Ar<<=1,0>(Ar-=Oe[ge]))return 0;for(;0<Oe[ge];--Oe[ge])(me=new D).g=ge,me.value=Pe[Ce++],U(le,Te+zt,_e,Ot,me),zt=R(zt,ge)}for(ge=ue+1,_e=2;15>=ge;++ge,_e<<=1){if(Ut+=Ar<<=1,0>(Ar-=Oe[ge]))return 0;for(;0<Oe[ge];--Oe[ge]){if(me=new D,(zt&rt)!=lt){for(Te+=Ot,Xe=1<<(lt=ge)-ue;15>lt&&!(0>=(Xe-=Oe[lt]));)++lt,Xe<<=1;Ge+=Ot=1<<(Xe=lt-ue),le[ce+(lt=zt&rt)].g=Xe+ue,le[ce+lt].value=Te-ce-lt}me.g=ge-ue,me.value=Pe[Ce++],U(le,Te+(zt>>ue),_e,Ot,me),zt=R(zt,ge)}}return Ut!=2*$e[15]-1?0:Ge}(m,b,F,M,W,ae)}function D(){this.value=this.g=0}function Q(){this.value=this.g=0}function K(){this.G=o(5,D),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Tc,Q)}function P(m,b,F,M){t(m!=null),t(b!=null),t(2147483648>M),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=b,m.pa=F,m.Jd=b,m.Yc=F+M,m.Zc=4<=M?F+M-4+1:F,ye(m)}function te(m,b){for(var F=0;0<b--;)F|=de(m,128)<<b;return F}function J(m,b){var F=te(m,b);return re(m)?-F:F}function V(m,b,F,M){var W,ae=0;for(t(m!=null),t(b!=null),t(4294967288>M),m.Sb=M,m.Ra=0,m.u=0,m.h=0,4<M&&(M=4),W=0;W<M;++W)ae+=b[F+W]<<8*W;m.Ra=ae,m.bb=M,m.oa=b,m.pa=F}function ie(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<yl-8>>>0,++m.bb,m.u-=8;O(m)&&(m.h=1,m.u=0)}function Y(m,b){if(t(0<=b),!m.h&&b<=Pa){var F=E(m)&Oa[b];return m.u+=b,ie(m),F}return m.h=1,m.u=0}function N(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function E(m){return m.Ra>>>(m.u&yl-1)>>>0}function O(m){return t(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>yl}function q(m,b){m.u=b,m.h=O(m)}function se(m){m.u>=Po&&(t(m.u>=Po),ie(m))}function ye(m){t(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(t(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function re(m){return te(m,1)}function de(m,b){var F=m.Ca;0>m.b&&ye(m);var M=m.b,W=F*b>>>8,ae=(m.I>>>M>W)+0;for(ae?(F-=W,m.I-=W+1<<M>>>0):F=W+1,M=F,W=0;256<=M;)W+=8,M>>=8;return M=7^W+wl[M],m.b-=M,m.Ca=(F<<M)-1,ae}function Ne(m,b,F){m[b+0]=F>>24&255,m[b+1]=F>>16&255,m[b+2]=F>>8&255,m[b+3]=255&F}function z(m,b){return m[b+0]|m[b+1]<<8}function Be(m,b){return z(m,b)|m[b+2]<<16}function Ve(m,b){return z(m,b)|z(m,b+2)<<16}function ne(m,b){var F=1<<b;return t(m!=null),t(0<b),m.X=i(F),m.X==null?0:(m.Mb=32-b,m.Xa=b,1)}function Me(m,b){t(m!=null),t(b!=null),t(m.Xa==b.Xa),s(b.X,0,m.X,0,1<<b.Xa)}function Re(){this.X=[],this.Xa=this.Mb=0}function Ye(m,b,F,M){t(F!=null),t(M!=null);var W=F[0],ae=M[0];return W==0&&(W=(m*ae+b/2)/b),ae==0&&(ae=(b*W+m/2)/m),0>=W||0>=ae?0:(F[0]=W,M[0]=ae,1)}function ze(m,b){return m+(1<<b)-1>>>b}function yt(m,b){return((4278255360&m)+(4278255360&b)>>>0&4278255360)+((16711935&m)+(16711935&b)>>>0&16711935)>>>0}function mt(m,b){B[b]=function(F,M,W,ae,le,ce,ue){var me;for(me=0;me<le;++me){var _e=B[m](ce[ue+me-1],W,ae+me);ce[ue+me]=yt(F[M+me],_e)}}}function at(){this.ud=this.hd=this.jd=0}function it(m,b){return((4278124286&(m^b))>>>1)+(m&b)>>>0}function jt(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function gt(m,b){return jt(m+(m-b+.5>>1))}function pt(m,b,F){return Math.abs(b-F)-Math.abs(m-F)}function ot(m,b,F,M,W,ae,le){for(M=ae[le-1],F=0;F<W;++F)ae[le+F]=M=yt(m[b+F],M)}function Et(m,b,F,M,W){var ae;for(ae=0;ae<F;++ae){var le=m[b+ae],ce=le>>8&255,ue=16711935&(ue=(ue=16711935&le)+((ce<<16)+ce));M[W+ae]=(4278255360&le)+ue>>>0}}function ht(m,b){b.jd=255&m,b.hd=m>>8&255,b.ud=m>>16&255}function nt(m,b,F,M,W,ae){var le;for(le=0;le<M;++le){var ce=b[F+le],ue=ce>>>8,me=ce,_e=255&(_e=(_e=ce>>>16)+((m.jd<<24>>24)*(ue<<24>>24)>>>5));me=255&(me=(me+=(m.hd<<24>>24)*(ue<<24>>24)>>>5)+((m.ud<<24>>24)*(_e<<24>>24)>>>5)),W[ae+le]=(4278255360&ce)+(_e<<16)+me}}function ee(m,b,F,M,W){B[b]=function(ae,le,ce,ue,me,_e,Pe,ge,Ce){for(ue=Pe;ue<ge;++ue)for(Pe=0;Pe<Ce;++Pe)me[_e++]=W(ce[M(ae[le++])])},B[m]=function(ae,le,ce,ue,me,_e,Pe){var ge=8>>ae.b,Ce=ae.Ea,Te=ae.K[0],Ge=ae.w;if(8>ge)for(ae=(1<<ae.b)-1,Ge=(1<<ge)-1;le<ce;++le){var Oe,$e=0;for(Oe=0;Oe<Ce;++Oe)Oe&ae||($e=M(ue[me++])),_e[Pe++]=W(Te[$e&Ge]),$e>>=ge}else B["VP8LMapColor"+F](ue,me,Te,Ge,_e,Pe,le,ce,Ce)}}function Se(m,b,F,M,W){for(F=b+F;b<F;){var ae=m[b++];M[W++]=ae>>16&255,M[W++]=ae>>8&255,M[W++]=255&ae}}function je(m,b,F,M,W){for(F=b+F;b<F;){var ae=m[b++];M[W++]=ae>>16&255,M[W++]=ae>>8&255,M[W++]=255&ae,M[W++]=ae>>24&255}}function qe(m,b,F,M,W){for(F=b+F;b<F;){var ae=(le=m[b++])>>16&240|le>>12&15,le=240&le|le>>28&15;M[W++]=ae,M[W++]=le}}function At(m,b,F,M,W){for(F=b+F;b<F;){var ae=(le=m[b++])>>16&248|le>>13&7,le=le>>5&224|le>>3&31;M[W++]=ae,M[W++]=le}}function wt(m,b,F,M,W){for(F=b+F;b<F;){var ae=m[b++];M[W++]=255&ae,M[W++]=ae>>8&255,M[W++]=ae>>16&255}}function He(m,b,F,M,W,ae){if(ae==0)for(F=b+F;b<F;)Ne(M,((ae=m[b++])[0]>>24|ae[1]>>8&65280|ae[2]<<8&16711680|ae[3]<<24)>>>0),W+=32;else s(M,W,m,b,F)}function ft(m,b){B[b][0]=B[m+"0"],B[b][1]=B[m+"1"],B[b][2]=B[m+"2"],B[b][3]=B[m+"3"],B[b][4]=B[m+"4"],B[b][5]=B[m+"5"],B[b][6]=B[m+"6"],B[b][7]=B[m+"7"],B[b][8]=B[m+"8"],B[b][9]=B[m+"9"],B[b][10]=B[m+"10"],B[b][11]=B[m+"11"],B[b][12]=B[m+"12"],B[b][13]=B[m+"13"],B[b][14]=B[m+"0"],B[b][15]=B[m+"0"]}function Je(m){return m==Lg||m==Dg||m==sf||m==Qg}function dt(){this.eb=[],this.size=this.A=this.fb=0}function nr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Kt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new dt,this.f.kb=new nr,this.sd=null}function xt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ir(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dr(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function ys(m,b){var F=m.T,M=b.ba.f.RGBA,W=M.eb,ae=M.fb+m.ka*M.A,le=hi[b.ba.S],ce=m.y,ue=m.O,me=m.f,_e=m.N,Pe=m.ea,ge=m.W,Ce=b.cc,Te=b.dc,Ge=b.Mc,Oe=b.Nc,$e=m.ka,Xe=m.ka+m.T,lt=m.U,rt=lt+1>>1;for($e==0?le(ce,ue,null,null,me,_e,Pe,ge,me,_e,Pe,ge,W,ae,null,null,lt):(le(b.ec,b.fc,ce,ue,Ce,Te,Ge,Oe,me,_e,Pe,ge,W,ae-M.A,W,ae,lt),++F);$e+2<Xe;$e+=2)Ce=me,Te=_e,Ge=Pe,Oe=ge,_e+=m.Rc,ge+=m.Rc,ae+=2*M.A,le(ce,(ue+=2*m.fa)-m.fa,ce,ue,Ce,Te,Ge,Oe,me,_e,Pe,ge,W,ae-M.A,W,ae,lt);return ue+=m.fa,m.j+Xe<m.o?(s(b.ec,b.fc,ce,ue,lt),s(b.cc,b.dc,me,_e,rt),s(b.Mc,b.Nc,Pe,ge,rt),F--):1&Xe||le(ce,ue,null,null,me,_e,Pe,ge,me,_e,Pe,ge,W,ae+M.A,null,null,lt),F}function sn(m,b,F){var M=m.F,W=[m.J];if(M!=null){var ae=m.U,le=b.ba.S,ce=le==rf||le==sf;b=b.ba.f.RGBA;var ue=[0],me=m.ka;ue[0]=m.T,m.Kb&&(me==0?--ue[0]:(--me,W[0]-=m.width),m.j+m.ka+m.T==m.o&&(ue[0]=m.o-m.j-me));var _e=b.eb;me=b.fb+me*b.A,m=Uw(M,W[0],m.width,ae,ue,_e,me+(ce?0:3),b.A),t(F==ue),m&&Je(le)&&Su(_e,me,ce,ae,ue,b.A)}return 0}function Cs(m){var b=m.ma,F=b.ba.S,M=11>F,W=F==ef||F==tf||F==rf||F==Ug||F==12||Je(F);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!bu(b.Oa,m,W?11:12))return 0;if(W&&Je(F)&&vu(),m.da)alert("todo:use_scaling");else{if(M){if(b.Ib=Dr,m.Kb){if(F=m.U+1>>1,b.memory=i(m.U+2*F),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+m.U,b.Mc=b.cc,b.Nc=b.dc+F,b.Ib=ys,vu()}}else alert("todo:EmitYUV");W&&(b.Jb=sn,M&&Li())}if(M&&!Xw){for(m=0;256>m;++m)pF[m]=89858*(m-128)+af>>nf,xF[m]=-22014*(m-128)+af,gF[m]=-45773*(m-128),mF[m]=113618*(m-128)+af>>nf;for(m=Tu;m<Rg;++m)b=76283*(m-16)+af>>nf,vF[m-Tu]=As(b,255),yF[m-Tu]=As(b+8>>4,15);Xw=1}return 1}function Rt(m){var b=m.ma,F=m.U,M=m.T;return t(!(1&m.ka)),0>=F||0>=M?0:(F=b.Ib(m,b),b.Jb!=null&&b.Jb(m,b,F),b.Dc+=F,1)}function Fr(m){m.ma.memory=null}function Br(m,b,F,M){return Y(m,8)!=47?0:(b[0]=Y(m,14)+1,F[0]=Y(m,14)+1,M[0]=Y(m,1),Y(m,3)!=0?0:!m.h)}function Tr(m,b){if(4>m)return m+1;var F=m-2>>1;return(2+(1&m)<<F)+Y(b,F)+1}function Vr(m,b){return 120<b?b-120:1<=(F=((F=tF[b-1])>>4)*m+(8-(15&F)))?F:1;var F}function yr(m,b,F){var M=E(F),W=m[b+=255&M].g-8;return 0<W&&(q(F,F.u+8),M=E(F),b+=m[b].value,b+=M&(1<<W)-1),q(F,F.u+m[b].g),m[b].value}function qr(m,b,F){return F.g+=m.g,F.value+=m.value<<b>>>0,t(8>=F.g),m.g}function Z(m,b,F){var M=m.xc;return t((b=M==0?0:m.vc[m.md*(F>>M)+(b>>M)])<m.Wb),m.Ya[b]}function pe(m,b,F,M){var W=m.ab,ae=m.c*b,le=m.C;b=le+b;var ce=F,ue=M;for(M=m.Ta,F=m.Ua;0<W--;){var me=m.gc[W],_e=le,Pe=b,ge=ce,Ce=ue,Te=(ue=M,ce=F,me.Ea);switch(t(_e<Pe),t(Pe<=me.nc),me.hc){case 2:Ds(ge,Ce,(Pe-_e)*Te,ue,ce);break;case 0:var Ge=_e,Oe=Pe,$e=ue,Xe=ce,lt=(Ot=me).Ea;Ge==0&&(Nu(ge,Ce,null,null,1,$e,Xe),ot(ge,Ce+1,0,0,lt-1,$e,Xe+1),Ce+=lt,Xe+=lt,++Ge);for(var rt=1<<Ot.b,zt=rt-1,Ut=ze(lt,Ot.b),Ar=Ot.K,Ot=Ot.w+(Ge>>Ot.b)*Ut;Ge<Oe;){var pr=Ar,An=Ot,dr=1;for(QA(ge,Ce,$e,Xe-lt,1,$e,Xe);dr<lt;){var Pt=(dr&~zt)+rt;Pt>lt&&(Pt=lt),(0,Cu[pr[An++]>>8&15])(ge,Ce+ +dr,$e,Xe+dr-lt,Pt-dr,$e,Xe+dr),dr=Pt}Ce+=lt,Xe+=lt,++Ge&zt||(Ot+=Ut)}Pe!=me.nc&&s(ue,ce-Te,ue,ce+(Pe-_e-1)*Te,Te);break;case 1:for(Te=ge,Oe=Ce,lt=(ge=me.Ea)-(Xe=ge&~($e=(Ce=1<<me.b)-1)),Ge=ze(ge,me.b),rt=me.K,me=me.w+(_e>>me.b)*Ge;_e<Pe;){for(zt=rt,Ut=me,Ar=new at,Ot=Oe+Xe,pr=Oe+ge;Oe<Ot;)ht(zt[Ut++],Ar),ju(Ar,Te,Oe,Ce,ue,ce),Oe+=Ce,ce+=Ce;Oe<pr&&(ht(zt[Ut++],Ar),ju(Ar,Te,Oe,lt,ue,ce),Oe+=lt,ce+=lt),++_e&$e||(me+=Ge)}break;case 3:if(ge==ue&&Ce==ce&&0<me.b){for(Oe=ue,ge=Te=ce+(Pe-_e)*Te-(Xe=(Pe-_e)*ze(me.Ea,me.b)),Ce=ue,$e=ce,Ge=[],Xe=(lt=Xe)-1;0<=Xe;--Xe)Ge[Xe]=Ce[$e+Xe];for(Xe=lt-1;0<=Xe;--Xe)Oe[ge+Xe]=Ge[Xe];Xh(me,_e,Pe,ue,Te,ue,ce)}else Xh(me,_e,Pe,ge,Ce,ue,ce)}ce=M,ue=F}ue!=F&&s(M,F,ce,ue,ae)}function Ae(m,b){var F=m.V,M=m.Ba+m.c*m.C,W=b-m.C;if(t(b<=m.l.o),t(16>=W),0<W){var ae=m.l,le=m.Ta,ce=m.Ua,ue=ae.width;if(pe(m,W,F,M),W=ce=[ce],t((F=m.C)<(M=b)),t(ae.v<ae.va),M>ae.o&&(M=ae.o),F<ae.j){var me=ae.j-F;F=ae.j,W[0]+=me*ue}if(F>=M?F=0:(W[0]+=4*ae.v,ae.ka=F-ae.j,ae.U=ae.va-ae.v,ae.T=M-F,F=1),F){if(ce=ce[0],11>(F=m.ca).S){var _e=F.f.RGBA,Pe=(M=F.S,W=ae.U,ae=ae.T,me=_e.eb,_e.A),ge=ae;for(_e=_e.fb+m.Ma*_e.A;0<ge--;){var Ce=le,Te=ce,Ge=W,Oe=me,$e=_e;switch(M){case Zh:Eu(Ce,Te,Ge,Oe,$e);break;case ef:bl(Ce,Te,Ge,Oe,$e);break;case Lg:bl(Ce,Te,Ge,Oe,$e),Su(Oe,$e,0,Ge,1,0);break;case Mw:Ic(Ce,Te,Ge,Oe,$e);break;case tf:He(Ce,Te,Ge,Oe,$e,1);break;case Dg:He(Ce,Te,Ge,Oe,$e,1),Su(Oe,$e,0,Ge,1,0);break;case rf:He(Ce,Te,Ge,Oe,$e,0);break;case sf:He(Ce,Te,Ge,Oe,$e,0),Su(Oe,$e,1,Ge,1,0);break;case Ug:_l(Ce,Te,Ge,Oe,$e);break;case Qg:_l(Ce,Te,Ge,Oe,$e),Iw(Oe,$e,Ge,1,0);break;case Hw:Nl(Ce,Te,Ge,Oe,$e);break;default:t(0)}ce+=ue,_e+=Pe}m.Ma+=ae}else alert("todo:EmitRescaledRowsYUVA");t(m.Ma<=F.height)}}m.C=b,t(m.C<=m.i)}function he(m){var b;if(0<m.ua)return 0;for(b=0;b<m.Wb;++b){var F=m.Ya[b].G,M=m.Ya[b].H;if(0<F[1][M[1]+0].g||0<F[2][M[2]+0].g||0<F[3][M[3]+0].g)return 0}return 1}function fe(m,b,F,M,W,ae){if(m.Z!=0){var le=m.qd,ce=m.rd;for(t(jl[m.Z]!=null);b<F;++b)jl[m.Z](le,ce,M,W,M,W,ae),le=M,ce=W,W+=ae;m.qd=le,m.rd=ce}}function xe(m,b){var F=m.l.ma,M=F.Z==0||F.Z==1?m.l.j:m.C;if(M=m.C<M?M:m.C,t(b<=m.l.o),b>M){var W=m.l.width,ae=F.ca,le=F.tb+W*M,ce=m.V,ue=m.Ba+m.c*M,me=m.gc;t(m.ab==1),t(me[0].hc==3),co(me[0],M,b,ce,ue,ae,le),fe(F,M,b,ae,le,W)}m.C=m.Ma=b}function Fe(m,b,F,M,W,ae,le){var ce=m.$/M,ue=m.$%M,me=m.m,_e=m.s,Pe=F+m.$,ge=Pe;W=F+M*W;var Ce=F+M*ae,Te=280+_e.ua,Ge=m.Pb?ce:16777216,Oe=0<_e.ua?_e.Wa:null,$e=_e.wc,Xe=Pe<Ce?Z(_e,ue,ce):null;t(m.C<ae),t(Ce<=W);var lt=!1;e:for(;;){for(;lt||Pe<Ce;){var rt=0;if(ce>=Ge){var zt=Pe-F;t((Ge=m).Pb),Ge.wd=Ge.m,Ge.xd=zt,0<Ge.s.ua&&Me(Ge.s.Wa,Ge.s.vb),Ge=ce+sF}if(ue&$e||(Xe=Z(_e,ue,ce)),t(Xe!=null),Xe.Qb&&(b[Pe]=Xe.qb,lt=!0),!lt)if(se(me),Xe.jc){rt=me,zt=b;var Ut=Pe,Ar=Xe.pd[E(rt)&Tc-1];t(Xe.jc),256>Ar.g?(q(rt,rt.u+Ar.g),zt[Ut]=Ar.value,rt=0):(q(rt,rt.u+Ar.g-256),t(256<=Ar.value),rt=Ar.value),rt==0&&(lt=!0)}else rt=yr(Xe.G[0],Xe.H[0],me);if(me.h)break;if(lt||256>rt){if(!lt)if(Xe.nd)b[Pe]=(Xe.qb|rt<<8)>>>0;else{if(se(me),lt=yr(Xe.G[1],Xe.H[1],me),se(me),zt=yr(Xe.G[2],Xe.H[2],me),Ut=yr(Xe.G[3],Xe.H[3],me),me.h)break;b[Pe]=(Ut<<24|lt<<16|rt<<8|zt)>>>0}if(lt=!1,++Pe,++ue>=M&&(ue=0,++ce,le!=null&&ce<=ae&&!(ce%16)&&le(m,ce),Oe!=null))for(;ge<Pe;)rt=b[ge++],Oe.X[(506832829*rt&4294967295)>>>Oe.Mb]=rt}else if(280>rt){if(rt=Tr(rt-256,me),zt=yr(Xe.G[4],Xe.H[4],me),se(me),zt=Vr(M,zt=Tr(zt,me)),me.h)break;if(Pe-F<zt||W-Pe<rt)break e;for(Ut=0;Ut<rt;++Ut)b[Pe+Ut]=b[Pe+Ut-zt];for(Pe+=rt,ue+=rt;ue>=M;)ue-=M,++ce,le!=null&&ce<=ae&&!(ce%16)&&le(m,ce);if(t(Pe<=W),ue&$e&&(Xe=Z(_e,ue,ce)),Oe!=null)for(;ge<Pe;)rt=b[ge++],Oe.X[(506832829*rt&4294967295)>>>Oe.Mb]=rt}else{if(!(rt<Te))break e;for(lt=rt-280,t(Oe!=null);ge<Pe;)rt=b[ge++],Oe.X[(506832829*rt&4294967295)>>>Oe.Mb]=rt;rt=Pe,t(!(lt>>>(zt=Oe).Xa)),b[rt]=zt.X[lt],lt=!0}lt||t(me.h==O(me))}if(m.Pb&&me.h&&Pe<W)t(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Me(m.s.vb,m.s.Wa);else{if(me.h)break e;le!=null&&le(m,ce>ae?ae:ce),m.a=0,m.$=Pe-F}return 1}return m.a=3,0}function Ke(m){t(m!=null),m.vc=null,m.yc=null,m.Ya=null;var b=m.Wa;b!=null&&(b.X=null),m.vb=null,t(m!=null)}function Ue(){var m=new tr;return m==null?null:(m.a=0,m.xb=Vw,ft("Predictor","VP8LPredictors"),ft("Predictor","VP8LPredictors_C"),ft("PredictorAdd","VP8LPredictorsAdd"),ft("PredictorAdd","VP8LPredictorsAdd_C"),Ds=Et,ju=nt,Eu=Se,bl=je,_l=qe,Nl=At,Ic=wt,B.VP8LMapColor32b=lo,B.VP8LMapColor8b=Bu,m)}function Le(m,b,F,M,W){var ae=1,le=[m],ce=[b],ue=M.m,me=M.s,_e=null,Pe=0;e:for(;;){if(F)for(;ae&&Y(ue,1);){var ge=le,Ce=ce,Te=M,Ge=1,Oe=Te.m,$e=Te.gc[Te.ab],Xe=Y(Oe,2);if(Te.Oc&1<<Xe)ae=0;else{switch(Te.Oc|=1<<Xe,$e.hc=Xe,$e.Ea=ge[0],$e.nc=Ce[0],$e.K=[null],++Te.ab,t(4>=Te.ab),Xe){case 0:case 1:$e.b=Y(Oe,3)+2,Ge=Le(ze($e.Ea,$e.b),ze($e.nc,$e.b),0,Te,$e.K),$e.K=$e.K[0];break;case 3:var lt,rt=Y(Oe,8)+1,zt=16<rt?0:4<rt?1:2<rt?2:3;if(ge[0]=ze($e.Ea,zt),$e.b=zt,lt=Ge=Le(rt,1,0,Te,$e.K)){var Ut,Ar=rt,Ot=$e,pr=1<<(8>>Ot.b),An=i(pr);if(An==null)lt=0;else{var dr=Ot.K[0],Pt=Ot.w;for(An[0]=Ot.K[0][0],Ut=1;Ut<1*Ar;++Ut)An[Ut]=yt(dr[Pt+Ut],An[Ut-1]);for(;Ut<4*pr;++Ut)An[Ut]=0;Ot.K[0]=null,Ot.K[0]=An,lt=1}}Ge=lt;break;case 2:break;default:t(0)}ae=Ge}}if(le=le[0],ce=ce[0],ae&&Y(ue,1)&&!(ae=1<=(Pe=Y(ue,4))&&11>=Pe)){M.a=3;break e}var Nt;if(Nt=ae)t:{var Os,ar,gr,ds=M,kn=le,ha=ce,Es=Pe,zn=F,fa=ds.m,dn=ds.s,br=[null],Or=1,ks=0,Pr=rF[Es];r:for(;;){if(zn&&Y(fa,1)){var Sn=Y(fa,3)+2,Qi=ze(kn,Sn),Ps=ze(ha,Sn),ja=Qi*Ps;if(!Le(Qi,Ps,0,ds,br))break r;for(br=br[0],dn.xc=Sn,Os=0;Os<ja;++Os){var Zr=br[Os]>>8&65535;br[Os]=Zr,Zr>=Or&&(Or=Zr+1)}}if(fa.h)break r;for(ar=0;5>ar;++ar){var un=Kw[ar];!ar&&0<Es&&(un+=1<<Es),ks<un&&(ks=un)}var Ma=o(Or*Pr,D),pa=Or,Ha=o(pa,K);if(Ha==null)var Ka=null;else t(65536>=pa),Ka=Ha;var Ea=i(ks);if(Ka==null||Ea==null||Ma==null){ds.a=1;break r}var za=Ma;for(Os=gr=0;Os<Or;++Os){var ns=Ka[Os],Va=ns.G,Oi=ns.H,Lc=0,Ho=1,Fn=0;for(ar=0;5>ar;++ar){un=Kw[ar],Va[ar]=za,Oi[ar]=gr,!ar&&0<Es&&(un+=1<<Es);n:{var lf,Mg=un,cf=ds,Iu=Ea,_F=za,NF=gr,Hg=0,El=cf.m,BF=Y(El,1);if(a(Iu,0,0,Mg),BF){var CF=Y(El,1)+1,jF=Y(El,1),Zw=Y(El,jF==0?1:8);Iu[Zw]=1,CF==2&&(Iu[Zw=Y(El,8)]=1);var Af=1}else{var eb=i(19),tb=Y(El,4)+4;if(19<tb){cf.a=3;var df=0;break n}for(lf=0;lf<tb;++lf)eb[eF[lf]]=Y(El,3);var Kg=void 0,Uu=void 0,rb=cf,EF=eb,uf=Mg,sb=Iu,zg=0,kl=rb.m,nb=8,ab=o(128,D);s:for(;L(ab,0,7,EF,19);){if(Y(kl,1)){var kF=2+2*Y(kl,3);if((Kg=2+Y(kl,kF))>uf)break s}else Kg=uf;for(Uu=0;Uu<uf&&Kg--;){se(kl);var ib=ab[0+(127&E(kl))];q(kl,kl.u+ib.g);var PA=ib.value;if(16>PA)sb[Uu++]=PA,PA!=0&&(nb=PA);else{var SF=PA==16,ob=PA-16,FF=YS[ob],lb=Y(kl,JS[ob])+FF;if(Uu+lb>uf)break s;for(var TF=SF?nb:0;0<lb--;)sb[Uu++]=TF}}zg=1;break s}zg||(rb.a=3),Af=zg}(Af=Af&&!El.h)&&(Hg=L(_F,NF,8,Iu,Mg)),Af&&Hg!=0?df=Hg:(cf.a=3,df=0)}if(df==0)break r;if(Ho&&ZS[ar]==1&&(Ho=za[gr].g==0),Lc+=za[gr].g,gr+=df,3>=ar){var Lu,Vg=Ea[0];for(Lu=1;Lu<un;++Lu)Ea[Lu]>Vg&&(Vg=Ea[Lu]);Fn+=Vg}}if(ns.nd=Ho,ns.Qb=0,Ho&&(ns.qb=(Va[3][Oi[3]+0].value<<24|Va[1][Oi[1]+0].value<<16|Va[2][Oi[2]+0].value)>>>0,Lc==0&&256>Va[0][Oi[0]+0].value&&(ns.Qb=1,ns.qb+=Va[0][Oi[0]+0].value<<8)),ns.jc=!ns.Qb&&6>Fn,ns.jc){var hf,Ko=ns;for(hf=0;hf<Tc;++hf){var Sl=hf,Fl=Ko.pd[Sl],ff=Ko.G[0][Ko.H[0]+Sl];256<=ff.value?(Fl.g=ff.g+256,Fl.value=ff.value):(Fl.g=0,Fl.value=0,Sl>>=qr(ff,8,Fl),Sl>>=qr(Ko.G[1][Ko.H[1]+Sl],16,Fl),Sl>>=qr(Ko.G[2][Ko.H[2]+Sl],0,Fl),qr(Ko.G[3][Ko.H[3]+Sl],24,Fl))}}}dn.vc=br,dn.Wb=Or,dn.Ya=Ka,dn.yc=Ma,Nt=1;break t}Nt=0}if(!(ae=Nt)){M.a=3;break e}if(0<Pe){if(me.ua=1<<Pe,!ne(me.Wa,Pe)){M.a=1,ae=0;break e}}else me.ua=0;var qg=M,cb=le,IF=ce,Gg=qg.s,$g=Gg.xc;if(qg.c=cb,qg.i=IF,Gg.md=ze(cb,$g),Gg.wc=$g==0?-1:(1<<$g)-1,F){M.xb=AF;break e}if((_e=i(le*ce))==null){M.a=1,ae=0;break e}ae=(ae=Fe(M,_e,0,le,ce,ce,null))&&!ue.h;break e}return ae?(W!=null?W[0]=_e:(t(_e==null),t(F)),M.$=0,F||Ke(me)):Ke(me),ae}function De(m,b){var F=m.c*m.i,M=F+b+16*b;return t(m.c<=b),m.V=i(M),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+F+b,1)}function st(m,b){var F=m.C,M=b-F,W=m.V,ae=m.Ba+m.c*F;for(t(b<=m.l.o);0<M;){var le=16<M?16:M,ce=m.l.ma,ue=m.l.width,me=ue*le,_e=ce.ca,Pe=ce.tb+ue*F,ge=m.Ta,Ce=m.Ua;pe(m,le,W,ae),Lw(ge,Ce,_e,Pe,me),fe(ce,F,F+le,_e,Pe,ue),M-=le,W+=le*m.c,F+=le}t(F==b),m.C=m.Ma=b}function vt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function _t(){this.Yb=function(){var m=[];return function b(F,M,W){for(var ae=W[M],le=0;le<ae&&(F.push(W.length>M+1?[]:0),!(W.length<M+1));le++)b(F[le],M+1,W)}(m,0,[3,11]),m}()}function Gt(){this.jb=i(3),this.Wc=l([4,8],_t),this.Xc=l([4,17],_t)}function Cr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function cr(){this.ld=this.La=this.dd=this.tc=0}function Qr(){this.Na=this.la=0}function nn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hn(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Aa(){this.uc=this.M=this.Nb=0,this.wa=Array(new cr),this.Y=0,this.ya=Array(new Hn),this.aa=0,this.l=new ci}function an(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Qa(){this.cb=this.a=0,this.sc="",this.m=new N,this.Od=new vt,this.Kc=new Bt,this.ed=new Cr,this.Qa=new ct,this.Ic=this.$c=this.Aa=0,this.D=new Aa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,N),this.ia=0,this.pb=o(4,nn),this.Pa=new Gt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new an),this.Hd=0,this.rb=Array(new Qr),this.sb=0,this.wa=Array(new cr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hn),this.L=this.aa=0,this.gd=l([4,2],cr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function As(m,b){return 0>m?0:m>b?b:m}function ci(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fi(){var m=new Qa;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Fu||(Fu=Ti)),m}function rs(m,b,F){return m.a==0&&(m.a=b,m.sc=F,m.cb=0),0}function Fo(m,b,F){return 3<=F&&m[b+0]==157&&m[b+1]==1&&m[b+2]==42}function Kn(m,b){if(m==null)return 0;if(m.a=0,m.sc="OK",b==null)return rs(m,2,"null VP8Io passed to VP8GetHeaders()");var F=b.data,M=b.w,W=b.ha;if(4>W)return rs(m,7,"Truncated header.");var ae=F[M+0]|F[M+1]<<8|F[M+2]<<16,le=m.Od;if(le.Rb=!(1&ae),le.td=ae>>1&7,le.yd=ae>>4&1,le.ub=ae>>5,3<le.td)return rs(m,3,"Incorrect keyframe parameters.");if(!le.yd)return rs(m,4,"Frame not displayable.");M+=3,W-=3;var ce=m.Kc;if(le.Rb){if(7>W)return rs(m,7,"cannot parse picture header");if(!Fo(F,M,W))return rs(m,3,"Bad code word");ce.c=16383&(F[M+4]<<8|F[M+3]),ce.Td=F[M+4]>>6,ce.i=16383&(F[M+6]<<8|F[M+5]),ce.Ud=F[M+6]>>6,M+=7,W-=7,m.za=ce.c+15>>4,m.Ub=ce.i+15>>4,b.width=ce.c,b.height=ce.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,a((ae=m.Pa).jb,0,255,ae.jb.length),t((ae=m.Qa)!=null),ae.Cb=0,ae.Bb=0,ae.Fb=1,a(ae.Zb,0,0,ae.Zb.length),a(ae.Lb,0,0,ae.Lb)}if(le.ub>W)return rs(m,7,"bad partition length");P(ae=m.m,F,M,le.ub),M+=le.ub,W-=le.ub,le.Rb&&(ce.Ld=re(ae),ce.Kd=re(ae)),ce=m.Qa;var ue,me=m.Pa;if(t(ae!=null),t(ce!=null),ce.Cb=re(ae),ce.Cb){if(ce.Bb=re(ae),re(ae)){for(ce.Fb=re(ae),ue=0;4>ue;++ue)ce.Zb[ue]=re(ae)?J(ae,7):0;for(ue=0;4>ue;++ue)ce.Lb[ue]=re(ae)?J(ae,6):0}if(ce.Bb)for(ue=0;3>ue;++ue)me.jb[ue]=re(ae)?te(ae,8):255}else ce.Bb=0;if(ae.Ka)return rs(m,3,"cannot parse segment header");if((ce=m.ed).zd=re(ae),ce.Tb=te(ae,6),ce.wb=te(ae,3),ce.Pc=re(ae),ce.Pc&&re(ae)){for(me=0;4>me;++me)re(ae)&&(ce.vd[me]=J(ae,6));for(me=0;4>me;++me)re(ae)&&(ce.od[me]=J(ae,6))}if(m.L=ce.Tb==0?0:ce.zd?1:2,ae.Ka)return rs(m,3,"cannot parse filter header");var _e=W;if(W=ue=M,M=ue+_e,ce=_e,m.Xb=(1<<te(m.m,2))-1,_e<3*(me=m.Xb))F=7;else{for(ue+=3*me,ce-=3*me,_e=0;_e<me;++_e){var Pe=F[W+0]|F[W+1]<<8|F[W+2]<<16;Pe>ce&&(Pe=ce),P(m.Jc[+_e],F,ue,Pe),ue+=Pe,ce-=Pe,W+=3}P(m.Jc[+me],F,ue,ce),F=ue<M?0:5}if(F!=0)return rs(m,F,"cannot parse partitions");for(F=te(ue=m.m,7),W=re(ue)?J(ue,4):0,M=re(ue)?J(ue,4):0,ce=re(ue)?J(ue,4):0,me=re(ue)?J(ue,4):0,ue=re(ue)?J(ue,4):0,_e=m.Qa,Pe=0;4>Pe;++Pe){if(_e.Cb){var ge=_e.Zb[Pe];_e.Fb||(ge+=F)}else{if(0<Pe){m.pb[Pe]=m.pb[0];continue}ge=F}var Ce=m.pb[Pe];Ce.Sc[0]=Og[As(ge+W,127)],Ce.Sc[1]=Pg[As(ge+0,127)],Ce.Eb[0]=2*Og[As(ge+M,127)],Ce.Eb[1]=101581*Pg[As(ge+ce,127)]>>16,8>Ce.Eb[1]&&(Ce.Eb[1]=8),Ce.Qc[0]=Og[As(ge+me,117)],Ce.Qc[1]=Pg[As(ge+ue,127)],Ce.lc=ge+ue}if(!le.Rb)return rs(m,4,"Not a key frame.");for(re(ae),le=m.Pa,F=0;4>F;++F){for(W=0;8>W;++W)for(M=0;3>M;++M)for(ce=0;11>ce;++ce)me=de(ae,lF[F][W][M][ce])?te(ae,8):iF[F][W][M][ce],le.Wc[F][W].Yb[M][ce]=me;for(W=0;17>W;++W)le.Xc[F][W]=le.Wc[F][cF[W]]}return m.kc=re(ae),m.kc&&(m.Bd=te(ae,8)),m.cb=1}function Ti(m,b,F,M,W,ae,le){var ce=b[W].Yb[F];for(F=0;16>W;++W){if(!de(m,ce[F+0]))return W;for(;!de(m,ce[F+1]);)if(ce=b[++W].Yb[0],F=0,W==16)return 16;var ue=b[W+1].Yb;if(de(m,ce[F+2])){var me=m,_e=0;if(de(me,(ge=ce)[(Pe=F)+3]))if(de(me,ge[Pe+6])){for(ce=0,Pe=2*(_e=de(me,ge[Pe+8]))+(ge=de(me,ge[Pe+9+_e])),_e=0,ge=nF[Pe];ge[ce];++ce)_e+=_e+de(me,ge[ce]);_e+=3+(8<<Pe)}else de(me,ge[Pe+7])?(_e=7+2*de(me,165),_e+=de(me,145)):_e=5+de(me,159);else _e=de(me,ge[Pe+4])?3+de(me,ge[Pe+5]):2;ce=ue[2]}else _e=1,ce=ue[1];ue=le+aF[W],0>(me=m).b&&ye(me);var Pe,ge=me.b,Ce=(Pe=me.Ca>>1)-(me.I>>ge)>>31;--me.b,me.Ca+=Ce,me.Ca|=1,me.I-=(Pe+1&Ce)<<ge,ae[ue]=((_e^Ce)-Ce)*M[(0<W)+0]}return 16}function X(m){var b=m.rb[m.sb-1];b.la=0,b.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function Ee(m,b,F,M,W){W=m[b+F+32*M]+(W>>3),m[b+F+32*M]=-256&W?0>W?0:255:W}function Qe(m,b,F,M,W,ae){Ee(m,b,0,F,M+W),Ee(m,b,1,F,M+ae),Ee(m,b,2,F,M-ae),Ee(m,b,3,F,M-W)}function et(m){return(20091*m>>16)+m}function Dt(m,b,F,M){var W,ae=0,le=i(16);for(W=0;4>W;++W){var ce=m[b+0]+m[b+8],ue=m[b+0]-m[b+8],me=(35468*m[b+4]>>16)-et(m[b+12]),_e=et(m[b+4])+(35468*m[b+12]>>16);le[ae+0]=ce+_e,le[ae+1]=ue+me,le[ae+2]=ue-me,le[ae+3]=ce-_e,ae+=4,b++}for(W=ae=0;4>W;++W)ce=(m=le[ae+0]+4)+le[ae+8],ue=m-le[ae+8],me=(35468*le[ae+4]>>16)-et(le[ae+12]),Ee(F,M,0,0,ce+(_e=et(le[ae+4])+(35468*le[ae+12]>>16))),Ee(F,M,1,0,ue+me),Ee(F,M,2,0,ue-me),Ee(F,M,3,0,ce-_e),ae++,M+=32}function Tt(m,b,F,M){var W=m[b+0]+4,ae=35468*m[b+4]>>16,le=et(m[b+4]),ce=35468*m[b+1]>>16;Qe(F,M,0,W+le,m=et(m[b+1]),ce),Qe(F,M,1,W+ae,m,ce),Qe(F,M,2,W-ae,m,ce),Qe(F,M,3,W-le,m,ce)}function $t(m,b,F,M,W){Dt(m,b,F,M),W&&Dt(m,b+16,F,M+4)}function Ct(m,b,F,M){Uc(m,b+0,F,M,1),Uc(m,b+32,F,M+128,1)}function ur(m,b,F,M){var W;for(m=m[b+0]+4,W=0;4>W;++W)for(b=0;4>b;++b)Ee(F,M,b,W,m)}function js(m,b,F,M){m[b+0]&&Ir(m,b+0,F,M),m[b+16]&&Ir(m,b+16,F,M+4),m[b+32]&&Ir(m,b+32,F,M+128),m[b+48]&&Ir(m,b+48,F,M+128+4)}function Er(m,b,F,M){var W,ae=i(16);for(W=0;4>W;++W){var le=m[b+0+W]+m[b+12+W],ce=m[b+4+W]+m[b+8+W],ue=m[b+4+W]-m[b+8+W],me=m[b+0+W]-m[b+12+W];ae[0+W]=le+ce,ae[8+W]=le-ce,ae[4+W]=me+ue,ae[12+W]=me-ue}for(W=0;4>W;++W)le=(m=ae[0+4*W]+3)+ae[3+4*W],ce=ae[1+4*W]+ae[2+4*W],ue=ae[1+4*W]-ae[2+4*W],me=m-ae[3+4*W],F[M+0]=le+ce>>3,F[M+16]=me+ue>>3,F[M+32]=le-ce>>3,F[M+48]=me-ue>>3,M+=64}function Ls(m,b,F){var M,W=b-32,ae=Ra,le=255-m[W-1];for(M=0;M<F;++M){var ce,ue=ae,me=le+m[b-1];for(ce=0;ce<F;++ce)m[b+ce]=ue[me+m[W+ce]];b+=32}}function jr(m,b){Ls(m,b,4)}function oe(m,b){Ls(m,b,8)}function Ie(m,b){Ls(m,b,16)}function Ze(m,b){var F;for(F=0;16>F;++F)s(m,b+32*F,m,b-32,16)}function bt(m,b){var F;for(F=16;0<F;--F)a(m,b,m[b-1],16),b+=32}function St(m,b,F){var M;for(M=0;16>M;++M)a(b,F+32*M,m,16)}function da(m,b){var F,M=16;for(F=0;16>F;++F)M+=m[b-1+32*F]+m[b+F-32];St(M>>5,m,b)}function Xr(m,b){var F,M=8;for(F=0;16>F;++F)M+=m[b-1+32*F];St(M>>4,m,b)}function Jr(m,b){var F,M=8;for(F=0;16>F;++F)M+=m[b+F-32];St(M>>4,m,b)}function du(m,b){St(128,m,b)}function Yt(m,b,F){return m+2*b+F+2>>2}function FA(m,b){var F,M=b-32;for(M=new Uint8Array([Yt(m[M-1],m[M+0],m[M+1]),Yt(m[M+0],m[M+1],m[M+2]),Yt(m[M+1],m[M+2],m[M+3]),Yt(m[M+2],m[M+3],m[M+4])]),F=0;4>F;++F)s(m,b+32*F,M,0,M.length)}function TA(m,b){var F=m[b-1],M=m[b-1+32],W=m[b-1+64],ae=m[b-1+96];Ne(m,b+0,16843009*Yt(m[b-1-32],F,M)),Ne(m,b+32,16843009*Yt(F,M,W)),Ne(m,b+64,16843009*Yt(M,W,ae)),Ne(m,b+96,16843009*Yt(W,ae,ae))}function uu(m,b){var F,M=4;for(F=0;4>F;++F)M+=m[b+F-32]+m[b-1+32*F];for(M>>=3,F=0;4>F;++F)a(m,b+32*F,M,4)}function Ii(m,b){var F=m[b-1+0],M=m[b-1+32],W=m[b-1+64],ae=m[b-1-32],le=m[b+0-32],ce=m[b+1-32],ue=m[b+2-32],me=m[b+3-32];m[b+0+96]=Yt(M,W,m[b-1+96]),m[b+1+96]=m[b+0+64]=Yt(F,M,W),m[b+2+96]=m[b+1+64]=m[b+0+32]=Yt(ae,F,M),m[b+3+96]=m[b+2+64]=m[b+1+32]=m[b+0+0]=Yt(le,ae,F),m[b+3+64]=m[b+2+32]=m[b+1+0]=Yt(ce,le,ae),m[b+3+32]=m[b+2+0]=Yt(ue,ce,le),m[b+3+0]=Yt(me,ue,ce)}function Ui(m,b){var F=m[b+1-32],M=m[b+2-32],W=m[b+3-32],ae=m[b+4-32],le=m[b+5-32],ce=m[b+6-32],ue=m[b+7-32];m[b+0+0]=Yt(m[b+0-32],F,M),m[b+1+0]=m[b+0+32]=Yt(F,M,W),m[b+2+0]=m[b+1+32]=m[b+0+64]=Yt(M,W,ae),m[b+3+0]=m[b+2+32]=m[b+1+64]=m[b+0+96]=Yt(W,ae,le),m[b+3+32]=m[b+2+64]=m[b+1+96]=Yt(ae,le,ce),m[b+3+64]=m[b+2+96]=Yt(le,ce,ue),m[b+3+96]=Yt(ce,ue,ue)}function on(m,b){var F=m[b-1+0],M=m[b-1+32],W=m[b-1+64],ae=m[b-1-32],le=m[b+0-32],ce=m[b+1-32],ue=m[b+2-32],me=m[b+3-32];m[b+0+0]=m[b+1+64]=ae+le+1>>1,m[b+1+0]=m[b+2+64]=le+ce+1>>1,m[b+2+0]=m[b+3+64]=ce+ue+1>>1,m[b+3+0]=ue+me+1>>1,m[b+0+96]=Yt(W,M,F),m[b+0+64]=Yt(M,F,ae),m[b+0+32]=m[b+1+96]=Yt(F,ae,le),m[b+1+32]=m[b+2+96]=Yt(ae,le,ce),m[b+2+32]=m[b+3+96]=Yt(le,ce,ue),m[b+3+32]=Yt(ce,ue,me)}function Ca(m,b){var F=m[b+0-32],M=m[b+1-32],W=m[b+2-32],ae=m[b+3-32],le=m[b+4-32],ce=m[b+5-32],ue=m[b+6-32],me=m[b+7-32];m[b+0+0]=F+M+1>>1,m[b+1+0]=m[b+0+64]=M+W+1>>1,m[b+2+0]=m[b+1+64]=W+ae+1>>1,m[b+3+0]=m[b+2+64]=ae+le+1>>1,m[b+0+32]=Yt(F,M,W),m[b+1+32]=m[b+0+96]=Yt(M,W,ae),m[b+2+32]=m[b+1+96]=Yt(W,ae,le),m[b+3+32]=m[b+2+96]=Yt(ae,le,ce),m[b+3+64]=Yt(le,ce,ue),m[b+3+96]=Yt(ce,ue,me)}function IA(m,b){var F=m[b-1+0],M=m[b-1+32],W=m[b-1+64],ae=m[b-1+96];m[b+0+0]=F+M+1>>1,m[b+2+0]=m[b+0+32]=M+W+1>>1,m[b+2+32]=m[b+0+64]=W+ae+1>>1,m[b+1+0]=Yt(F,M,W),m[b+3+0]=m[b+1+32]=Yt(M,W,ae),m[b+3+32]=m[b+1+64]=Yt(W,ae,ae),m[b+3+64]=m[b+2+64]=m[b+0+96]=m[b+1+96]=m[b+2+96]=m[b+3+96]=ae}function hu(m,b){var F=m[b-1+0],M=m[b-1+32],W=m[b-1+64],ae=m[b-1+96],le=m[b-1-32],ce=m[b+0-32],ue=m[b+1-32],me=m[b+2-32];m[b+0+0]=m[b+2+32]=F+le+1>>1,m[b+0+32]=m[b+2+64]=M+F+1>>1,m[b+0+64]=m[b+2+96]=W+M+1>>1,m[b+0+96]=ae+W+1>>1,m[b+3+0]=Yt(ce,ue,me),m[b+2+0]=Yt(le,ce,ue),m[b+1+0]=m[b+3+32]=Yt(F,le,ce),m[b+1+32]=m[b+3+64]=Yt(M,F,le),m[b+1+64]=m[b+3+96]=Yt(W,M,F),m[b+1+96]=Yt(ae,W,M)}function Nc(m,b){var F;for(F=0;8>F;++F)s(m,b+32*F,m,b-32,8)}function Fg(m,b){var F;for(F=0;8>F;++F)a(m,b,m[b-1],8),b+=32}function To(m,b,F){var M;for(M=0;8>M;++M)a(b,F+32*M,m,8)}function Tg(m,b){var F,M=8;for(F=0;8>F;++F)M+=m[b+F-32]+m[b-1+32*F];To(M>>4,m,b)}function fu(m,b){var F,M=4;for(F=0;8>F;++F)M+=m[b+F-32];To(M>>3,m,b)}function pu(m,b){var F,M=4;for(F=0;8>F;++F)M+=m[b-1+32*F];To(M>>3,m,b)}function zh(m,b){To(128,m,b)}function Io(m,b,F){var M=m[b-F],W=m[b+0],ae=3*(W-M)+Ig[1020+m[b-2*F]-m[b+F]],le=Yh[112+(ae+4>>3)];m[b-F]=Ra[255+M+Yh[112+(ae+3>>3)]],m[b+0]=Ra[255+W-le]}function mu(m,b,F,M){var W=m[b+0],ae=m[b+F];return ui[255+m[b-2*F]-m[b-F]]>M||ui[255+ae-W]>M}function UA(m,b,F,M){return 4*ui[255+m[b-F]-m[b+0]]+ui[255+m[b-2*F]-m[b+F]]<=M}function gu(m,b,F,M,W){var ae=m[b-3*F],le=m[b-2*F],ce=m[b-F],ue=m[b+0],me=m[b+F],_e=m[b+2*F],Pe=m[b+3*F];return 4*ui[255+ce-ue]+ui[255+le-me]>M?0:ui[255+m[b-4*F]-ae]<=W&&ui[255+ae-le]<=W&&ui[255+le-ce]<=W&&ui[255+Pe-_e]<=W&&ui[255+_e-me]<=W&&ui[255+me-ue]<=W}function Bc(m,b,F,M){var W=2*M+1;for(M=0;16>M;++M)UA(m,b+M,F,W)&&Io(m,b+M,F)}function xu(m,b,F,M){var W=2*M+1;for(M=0;16>M;++M)UA(m,b+M*F,1,W)&&Io(m,b+M*F,1)}function Vh(m,b,F,M){var W;for(W=3;0<W;--W)Bc(m,b+=4*F,F,M)}function qh(m,b,F,M){var W;for(W=3;0<W;--W)xu(m,b+=4,F,M)}function Uo(m,b,F,M,W,ae,le,ce){for(ae=2*ae+1;0<W--;){if(gu(m,b,F,ae,le))if(mu(m,b,F,ce))Io(m,b,F);else{var ue=m,me=b,_e=F,Pe=ue[me-2*_e],ge=ue[me-_e],Ce=ue[me+0],Te=ue[me+_e],Ge=ue[me+2*_e],Oe=27*(Xe=Ig[1020+3*(Ce-ge)+Ig[1020+Pe-Te]])+63>>7,$e=18*Xe+63>>7,Xe=9*Xe+63>>7;ue[me-3*_e]=Ra[255+ue[me-3*_e]+Xe],ue[me-2*_e]=Ra[255+Pe+$e],ue[me-_e]=Ra[255+ge+Oe],ue[me+0]=Ra[255+Ce-Oe],ue[me+_e]=Ra[255+Te-$e],ue[me+2*_e]=Ra[255+Ge-Xe]}b+=M}}function Lo(m,b,F,M,W,ae,le,ce){for(ae=2*ae+1;0<W--;){if(gu(m,b,F,ae,le))if(mu(m,b,F,ce))Io(m,b,F);else{var ue=m,me=b,_e=F,Pe=ue[me-_e],ge=ue[me+0],Ce=ue[me+_e],Te=Yh[112+(4+(Ge=3*(ge-Pe))>>3)],Ge=Yh[112+(Ge+3>>3)],Oe=Te+1>>1;ue[me-2*_e]=Ra[255+ue[me-2*_e]+Oe],ue[me-_e]=Ra[255+Pe+Ge],ue[me+0]=Ra[255+ge-Te],ue[me+_e]=Ra[255+Ce-Oe]}b+=M}}function Gh(m,b,F,M,W,ae){Uo(m,b,F,1,16,M,W,ae)}function Cc(m,b,F,M,W,ae){Uo(m,b,1,F,16,M,W,ae)}function $h(m,b,F,M,W,ae){var le;for(le=3;0<le;--le)Lo(m,b+=4*F,F,1,16,M,W,ae)}function j(m,b,F,M,W,ae){var le;for(le=3;0<le;--le)Lo(m,b+=4,1,F,16,M,W,ae)}function G(m,b,F,M,W,ae,le,ce){Uo(m,b,W,1,8,ae,le,ce),Uo(F,M,W,1,8,ae,le,ce)}function ve(m,b,F,M,W,ae,le,ce){Uo(m,b,1,W,8,ae,le,ce),Uo(F,M,1,W,8,ae,le,ce)}function be(m,b,F,M,W,ae,le,ce){Lo(m,b+4*W,W,1,8,ae,le,ce),Lo(F,M+4*W,W,1,8,ae,le,ce)}function ke(m,b,F,M,W,ae,le,ce){Lo(m,b+4,1,W,8,ae,le,ce),Lo(F,M+4,1,W,8,ae,le,ce)}function We(){this.ba=new Kt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ir,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function tt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Mt(){this.ua=0,this.Wa=new Re,this.vb=new Re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new D}function tr(){this.xb=this.a=0,this.l=new ci,this.ca=new Kt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Mt,this.ab=0,this.gc=o(4,Qt),this.Oc=0}function or(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ci,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wr(m,b,F,M,W,ae,le){for(m=m==null?0:m[b+0],b=0;b<le;++b)W[ae+b]=m+F[M+b]&255,m=W[ae+b]}function ws(m,b,F,M,W,ae,le){var ce;if(m==null)wr(null,null,F,M,W,ae,le);else for(ce=0;ce<le;++ce)W[ae+ce]=m[b+ce]+F[M+ce]&255}function Ws(m,b,F,M,W,ae,le){if(m==null)wr(null,null,F,M,W,ae,le);else{var ce,ue=m[b+0],me=ue,_e=ue;for(ce=0;ce<le;++ce)me=_e+(ue=m[b+ce])-me,_e=F[M+ce]+(-256&me?0>me?0:255:me)&255,me=ue,W[ae+ce]=_e}}function ss(m,b,F,M){var W=b.width,ae=b.o;if(t(m!=null&&b!=null),0>F||0>=M||F+M>ae)return null;if(!m.Cc){if(m.ga==null){var le;if(m.ga=new or,(le=m.ga==null)||(le=b.width*b.o,t(m.Gb.length==0),m.Gb=i(le),m.Uc=0,m.Gb==null?le=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,le=1),le=!le),!le){le=m.ga;var ce=m.Fa,ue=m.P,me=m.qc,_e=m.mb,Pe=m.nb,ge=ue+1,Ce=me-1,Te=le.l;if(t(ce!=null&&_e!=null&&b!=null),jl[0]=null,jl[1]=wr,jl[2]=ws,jl[3]=Ws,le.ca=_e,le.tb=Pe,le.c=b.width,le.i=b.height,t(0<le.c&&0<le.i),1>=me)b=0;else if(le.$a=3&ce[ue+0],le.Z=ce[ue+0]>>2&3,le.Lc=ce[ue+0]>>4&3,ue=ce[ue+0]>>6&3,0>le.$a||1<le.$a||4<=le.Z||1<le.Lc||ue)b=0;else if(Te.put=Rt,Te.ac=Cs,Te.bc=Fr,Te.ma=le,Te.width=b.width,Te.height=b.height,Te.Da=b.Da,Te.v=b.v,Te.va=b.va,Te.j=b.j,Te.o=b.o,le.$a)e:{t(le.$a==1),b=Ue();t:for(;;){if(b==null){b=0;break e}if(t(le!=null),le.mc=b,b.c=le.c,b.i=le.i,b.l=le.l,b.l.ma=le,b.l.width=le.c,b.l.height=le.i,b.a=0,V(b.m,ce,ge,Ce),!Le(le.c,le.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&he(b.s)?(le.ic=1,ce=b.c*b.i,b.Ta=null,b.Ua=0,b.V=i(ce),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(le.ic=0,b=De(b,le.c)),!b))break t;b=1;break e}le.mc=null,b=0}else b=Ce>=le.c*le.i;le=!b}if(le)return null;m.ga.Lc!=1?m.Ga=0:M=ae-F}t(m.ga!=null),t(F+M<=ae);e:{if(b=(ce=m.ga).c,ae=ce.l.o,ce.$a==0){if(ge=m.rc,Ce=m.Vc,Te=m.Fa,ue=m.P+1+F*b,me=m.mb,_e=m.nb+F*b,t(ue<=m.P+m.qc),ce.Z!=0)for(t(jl[ce.Z]!=null),le=0;le<M;++le)jl[ce.Z](ge,Ce,Te,ue,me,_e,b),ge=me,Ce=_e,_e+=b,ue+=b;else for(le=0;le<M;++le)s(me,_e,Te,ue,b),ge=me,Ce=_e,_e+=b,ue+=b;m.rc=ge,m.Vc=Ce}else{if(t(ce.mc!=null),b=F+M,t((le=ce.mc)!=null),t(b<=le.i),le.C>=b)b=1;else if(ce.ic||Li(),ce.ic){ce=le.V,ge=le.Ba,Ce=le.c;var Ge=le.i,Oe=(Te=1,ue=le.$/Ce,me=le.$%Ce,_e=le.m,Pe=le.s,le.$),$e=Ce*Ge,Xe=Ce*b,lt=Pe.wc,rt=Oe<Xe?Z(Pe,me,ue):null;t(Oe<=$e),t(b<=Ge),t(he(Pe));t:for(;;){for(;!_e.h&&Oe<Xe;){if(me&lt||(rt=Z(Pe,me,ue)),t(rt!=null),se(_e),256>(Ge=yr(rt.G[0],rt.H[0],_e)))ce[ge+Oe]=Ge,++Oe,++me>=Ce&&(me=0,++ue<=b&&!(ue%16)&&xe(le,ue));else{if(!(280>Ge)){Te=0;break t}Ge=Tr(Ge-256,_e);var zt,Ut=yr(rt.G[4],rt.H[4],_e);if(se(_e),!(Oe>=(Ut=Vr(Ce,Ut=Tr(Ut,_e)))&&$e-Oe>=Ge)){Te=0;break t}for(zt=0;zt<Ge;++zt)ce[ge+Oe+zt]=ce[ge+Oe+zt-Ut];for(Oe+=Ge,me+=Ge;me>=Ce;)me-=Ce,++ue<=b&&!(ue%16)&&xe(le,ue);Oe<Xe&&me&lt&&(rt=Z(Pe,me,ue))}t(_e.h==O(_e))}xe(le,ue>b?b:ue);break t}!Te||_e.h&&Oe<$e?(Te=0,le.a=_e.h?5:3):le.$=Oe,b=Te}else b=Fe(le,le.V,le.Ba,le.c,le.i,b,st);if(!b){M=0;break e}}F+M>=ae&&(m.Cc=1),M=1}if(!M)return null;if(m.Cc&&((M=m.ga)!=null&&(M.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+F*W}function ln(m,b,F,M,W,ae){for(;0<W--;){var le,ce=m,ue=b+(F?1:0),me=m,_e=b+(F?0:3);for(le=0;le<M;++le){var Pe=me[_e+4*le];Pe!=255&&(Pe*=32897,ce[ue+4*le+0]=ce[ue+4*le+0]*Pe>>23,ce[ue+4*le+1]=ce[ue+4*le+1]*Pe>>23,ce[ue+4*le+2]=ce[ue+4*le+2]*Pe>>23)}b+=ae}}function Xs(m,b,F,M,W){for(;0<M--;){var ae;for(ae=0;ae<F;++ae){var le=m[b+2*ae+0],ce=15&(me=m[b+2*ae+1]),ue=4369*ce,me=(240&me|me>>4)*ue>>16;m[b+2*ae+0]=(240&le|le>>4)*ue>>16&240|(15&le|le<<4)*ue>>16>>4&15,m[b+2*ae+1]=240&me|ce}b+=W}}function jn(m,b,F,M,W,ae,le,ce){var ue,me,_e=255;for(me=0;me<W;++me){for(ue=0;ue<M;++ue){var Pe=m[b+ue];ae[le+4*ue]=Pe,_e&=Pe}b+=F,le+=ce}return _e!=255}function Do(m,b,F,M,W){var ae;for(ae=0;ae<W;++ae)F[M+ae]=m[b+ae]>>8}function Li(){Su=ln,Iw=Xs,Uw=jn,Lw=Do}function Qo(m,b,F){B[m]=function(M,W,ae,le,ce,ue,me,_e,Pe,ge,Ce,Te,Ge,Oe,$e,Xe,lt){var rt,zt=lt-1>>1,Ut=ce[ue+0]|me[_e+0]<<16,Ar=Pe[ge+0]|Ce[Te+0]<<16;t(M!=null);var Ot=3*Ut+Ar+131074>>2;for(b(M[W+0],255&Ot,Ot>>16,Ge,Oe),ae!=null&&(Ot=3*Ar+Ut+131074>>2,b(ae[le+0],255&Ot,Ot>>16,$e,Xe)),rt=1;rt<=zt;++rt){var pr=ce[ue+rt]|me[_e+rt]<<16,An=Pe[ge+rt]|Ce[Te+rt]<<16,dr=Ut+pr+Ar+An+524296,Pt=dr+2*(pr+Ar)>>3;Ot=Pt+Ut>>1,Ut=(dr=dr+2*(Ut+An)>>3)+pr>>1,b(M[W+2*rt-1],255&Ot,Ot>>16,Ge,Oe+(2*rt-1)*F),b(M[W+2*rt-0],255&Ut,Ut>>16,Ge,Oe+(2*rt-0)*F),ae!=null&&(Ot=dr+Ar>>1,Ut=Pt+An>>1,b(ae[le+2*rt-1],255&Ot,Ot>>16,$e,Xe+(2*rt-1)*F),b(ae[le+2*rt+0],255&Ut,Ut>>16,$e,Xe+(2*rt+0)*F)),Ut=pr,Ar=An}1&lt||(Ot=3*Ut+Ar+131074>>2,b(M[W+lt-1],255&Ot,Ot>>16,Ge,Oe+(lt-1)*F),ae!=null&&(Ot=3*Ar+Ut+131074>>2,b(ae[le+lt-1],255&Ot,Ot>>16,$e,Xe+(lt-1)*F)))}}function vu(){hi[Zh]=dF,hi[ef]=qw,hi[Mw]=uF,hi[tf]=Gw,hi[rf]=$w,hi[Ug]=Ww,hi[Hw]=hF,hi[Lg]=qw,hi[Dg]=Gw,hi[sf]=$w,hi[Qg]=Ww}function LA(m){return m&-16384?0>m?0:255:m>>fF}function gl(m,b){return LA((19077*m>>8)+(26149*b>>8)-14234)}function jc(m,b,F){return LA((19077*m>>8)-(6419*b>>8)-(13320*F>>8)+8708)}function Ec(m,b){return LA((19077*m>>8)+(33050*b>>8)-17685)}function xl(m,b,F,M,W){M[W+0]=gl(m,F),M[W+1]=jc(m,b,F),M[W+2]=Ec(m,b)}function En(m,b,F,M,W){M[W+0]=Ec(m,b),M[W+1]=jc(m,b,F),M[W+2]=gl(m,F)}function kc(m,b,F,M,W){var ae=jc(m,b,F);b=ae<<3&224|Ec(m,b)>>3,M[W+0]=248&gl(m,F)|ae>>5,M[W+1]=b}function Sc(m,b,F,M,W){var ae=240&Ec(m,b)|15;M[W+0]=240&gl(m,F)|jc(m,b,F)>>4,M[W+1]=ae}function yu(m,b,F,M,W){M[W+0]=255,xl(m,b,F,M,W+1)}function wu(m,b,F,M,W){En(m,b,F,M,W),M[W+3]=255}function ua(m,b,F,M,W){xl(m,b,F,M,W),M[W+3]=255}function Oo(m,b,F){B[m]=function(M,W,ae,le,ce,ue,me,_e,Pe){for(var ge=_e+(-2&Pe)*F;_e!=ge;)b(M[W+0],ae[le+0],ce[ue+0],me,_e),b(M[W+1],ae[le+0],ce[ue+0],me,_e+F),W+=2,++le,++ue,_e+=2*F;1&Pe&&b(M[W+0],ae[le+0],ce[ue+0],me,_e)}}function DA(m,b,F){return F==0?m==0?b==0?6:5:b==0?4:0:F}function Wh(m,b,F,M,W){switch(m>>>30){case 3:Uc(b,F,M,W,0);break;case 2:di(b,F,M,W);break;case 1:Ir(b,F,M,W)}}function Ai(m,b){var F,M,W=b.M,ae=b.Nb,le=m.oc,ce=m.pc+40,ue=m.oc,me=m.pc+584,_e=m.oc,Pe=m.pc+600;for(F=0;16>F;++F)le[ce+32*F-1]=129;for(F=0;8>F;++F)ue[me+32*F-1]=129,_e[Pe+32*F-1]=129;for(0<W?le[ce-1-32]=ue[me-1-32]=_e[Pe-1-32]=129:(a(le,ce-32-1,127,21),a(ue,me-32-1,127,9),a(_e,Pe-32-1,127,9)),M=0;M<m.za;++M){var ge=b.ya[b.aa+M];if(0<M){for(F=-1;16>F;++F)s(le,ce+32*F-4,le,ce+32*F+12,4);for(F=-1;8>F;++F)s(ue,me+32*F-4,ue,me+32*F+4,4),s(_e,Pe+32*F-4,_e,Pe+32*F+4,4)}var Ce=m.Gd,Te=m.Hd+M,Ge=ge.ad,Oe=ge.Hc;if(0<W&&(s(le,ce-32,Ce[Te].y,0,16),s(ue,me-32,Ce[Te].f,0,8),s(_e,Pe-32,Ce[Te].ea,0,8)),ge.Za){var $e=le,Xe=ce-32+16;for(0<W&&(M>=m.za-1?a($e,Xe,Ce[Te].y[15],4):s($e,Xe,Ce[Te+1].y,0,4)),F=0;4>F;F++)$e[Xe+128+F]=$e[Xe+256+F]=$e[Xe+384+F]=$e[Xe+0+F];for(F=0;16>F;++F,Oe<<=2)$e=le,Xe=ce+Jw[F],Di[ge.Ob[F]]($e,Xe),Wh(Oe,Ge,16*+F,$e,Xe)}else if($e=DA(M,W,ge.Ob[0]),Cl[$e](le,ce),Oe!=0)for(F=0;16>F;++F,Oe<<=2)Wh(Oe,Ge,16*+F,le,ce+Jw[F]);for(F=ge.Gc,$e=DA(M,W,ge.Dd),Mo[$e](ue,me),Mo[$e](_e,Pe),Oe=Ge,$e=ue,Xe=me,255&(ge=0|F)&&(170&ge?Ao(Oe,256,$e,Xe):Yr(Oe,256,$e,Xe)),ge=_e,Oe=Pe,255&(F>>=8)&&(170&F?Ao(Ge,320,ge,Oe):Yr(Ge,320,ge,Oe)),W<m.Ub-1&&(s(Ce[Te].y,0,le,ce+480,16),s(Ce[Te].f,0,ue,me+224,8),s(Ce[Te].ea,0,_e,Pe+224,8)),F=8*ae*m.B,Ce=m.sa,Te=m.ta+16*M+16*ae*m.R,Ge=m.qa,ge=m.ra+8*M+F,Oe=m.Ha,$e=m.Ia+8*M+F,F=0;16>F;++F)s(Ce,Te+F*m.R,le,ce+32*F,16);for(F=0;8>F;++F)s(Ge,ge+F*m.B,ue,me+32*F,8),s(Oe,$e+F*m.B,_e,Pe+32*F,8)}}function Fc(m,b,F,M,W,ae,le,ce,ue){var me=[0],_e=[0],Pe=0,ge=ue!=null?ue.kd:0,Ce=ue??new tt;if(m==null||12>F)return 7;Ce.data=m,Ce.w=b,Ce.ha=F,b=[b],F=[F],Ce.gb=[Ce.gb];e:{var Te=b,Ge=F,Oe=Ce.gb;if(t(m!=null),t(Ge!=null),t(Oe!=null),Oe[0]=0,12<=Ge[0]&&!r(m,Te[0],"RIFF")){if(r(m,Te[0]+8,"WEBP")){Oe=3;break e}var $e=Ve(m,Te[0]+4);if(12>$e||4294967286<$e){Oe=3;break e}if(ge&&$e>Ge[0]-8){Oe=7;break e}Oe[0]=$e,Te[0]+=12,Ge[0]-=12}Oe=0}if(Oe!=0)return Oe;for($e=0<Ce.gb[0],F=F[0];;){e:{var Xe=m;Ge=b,Oe=F;var lt=me,rt=_e,zt=Te=[0];if((Ot=Pe=[Pe])[0]=0,8>Oe[0])Oe=7;else{if(!r(Xe,Ge[0],"VP8X")){if(Ve(Xe,Ge[0]+4)!=10){Oe=3;break e}if(18>Oe[0]){Oe=7;break e}var Ut=Ve(Xe,Ge[0]+8),Ar=1+Be(Xe,Ge[0]+12);if(2147483648<=Ar*(Xe=1+Be(Xe,Ge[0]+15))){Oe=3;break e}zt!=null&&(zt[0]=Ut),lt!=null&&(lt[0]=Ar),rt!=null&&(rt[0]=Xe),Ge[0]+=18,Oe[0]-=18,Ot[0]=1}Oe=0}}if(Pe=Pe[0],Te=Te[0],Oe!=0)return Oe;if(Ge=!!(2&Te),!$e&&Pe)return 3;if(ae!=null&&(ae[0]=!!(16&Te)),le!=null&&(le[0]=Ge),ce!=null&&(ce[0]=0),le=me[0],Te=_e[0],Pe&&Ge&&ue==null){Oe=0;break}if(4>F){Oe=7;break}if($e&&Pe||!$e&&!Pe&&!r(m,b[0],"ALPH")){F=[F],Ce.na=[Ce.na],Ce.P=[Ce.P],Ce.Sa=[Ce.Sa];e:{Ut=m,Oe=b,$e=F;var Ot=Ce.gb;lt=Ce.na,rt=Ce.P,zt=Ce.Sa,Ar=22,t(Ut!=null),t($e!=null),Xe=Oe[0];var pr=$e[0];for(t(lt!=null),t(zt!=null),lt[0]=null,rt[0]=null,zt[0]=0;;){if(Oe[0]=Xe,$e[0]=pr,8>pr){Oe=7;break e}var An=Ve(Ut,Xe+4);if(4294967286<An){Oe=3;break e}var dr=8+An+1&-2;if(Ar+=dr,0<Ot&&Ar>Ot){Oe=3;break e}if(!r(Ut,Xe,"VP8 ")||!r(Ut,Xe,"VP8L")){Oe=0;break e}if(pr[0]<dr){Oe=7;break e}r(Ut,Xe,"ALPH")||(lt[0]=Ut,rt[0]=Xe+8,zt[0]=An),Xe+=dr,pr-=dr}}if(F=F[0],Ce.na=Ce.na[0],Ce.P=Ce.P[0],Ce.Sa=Ce.Sa[0],Oe!=0)break}F=[F],Ce.Ja=[Ce.Ja],Ce.xa=[Ce.xa];e:if(Ot=m,Oe=b,$e=F,lt=Ce.gb[0],rt=Ce.Ja,zt=Ce.xa,Ut=Oe[0],Xe=!r(Ot,Ut,"VP8 "),Ar=!r(Ot,Ut,"VP8L"),t(Ot!=null),t($e!=null),t(rt!=null),t(zt!=null),8>$e[0])Oe=7;else{if(Xe||Ar){if(Ot=Ve(Ot,Ut+4),12<=lt&&Ot>lt-12){Oe=3;break e}if(ge&&Ot>$e[0]-8){Oe=7;break e}rt[0]=Ot,Oe[0]+=8,$e[0]-=8,zt[0]=Ar}else zt[0]=5<=$e[0]&&Ot[Ut+0]==47&&!(Ot[Ut+4]>>5),rt[0]=$e[0];Oe=0}if(F=F[0],Ce.Ja=Ce.Ja[0],Ce.xa=Ce.xa[0],b=b[0],Oe!=0)break;if(4294967286<Ce.Ja)return 3;if(ce==null||Ge||(ce[0]=Ce.xa?2:1),le=[le],Te=[Te],Ce.xa){if(5>F){Oe=7;break}ce=le,ge=Te,Ge=ae,m==null||5>F?m=0:5<=F&&m[b+0]==47&&!(m[b+4]>>5)?($e=[0],Ot=[0],lt=[0],V(rt=new C,m,b,F),Br(rt,$e,Ot,lt)?(ce!=null&&(ce[0]=$e[0]),ge!=null&&(ge[0]=Ot[0]),Ge!=null&&(Ge[0]=lt[0]),m=1):m=0):m=0}else{if(10>F){Oe=7;break}ce=Te,m==null||10>F||!Fo(m,b+3,F-3)?m=0:(ge=m[b+0]|m[b+1]<<8|m[b+2]<<16,Ge=16383&(m[b+7]<<8|m[b+6]),m=16383&(m[b+9]<<8|m[b+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=Ce.Ja||!Ge||!m?m=0:(le&&(le[0]=Ge),ce&&(ce[0]=m),m=1))}if(!m||(le=le[0],Te=Te[0],Pe&&(me[0]!=le||_e[0]!=Te)))return 3;ue!=null&&(ue[0]=Ce,ue.offset=b-ue.w,t(4294967286>b-ue.w),t(ue.offset==ue.ha-F));break}return Oe==0||Oe==7&&Pe&&ue==null?(ae!=null&&(ae[0]|=Ce.na!=null&&0<Ce.na.length),M!=null&&(M[0]=le),W!=null&&(W[0]=Te),0):Oe}function bu(m,b,F){var M=b.width,W=b.height,ae=0,le=0,ce=M,ue=W;if(b.Da=m!=null&&0<m.Da,b.Da&&(ce=m.cd,ue=m.bd,ae=m.v,le=m.j,11>F||(ae&=-2,le&=-2),0>ae||0>le||0>=ce||0>=ue||ae+ce>M||le+ue>W))return 0;if(b.v=ae,b.j=le,b.va=ae+ce,b.o=le+ue,b.U=ce,b.T=ue,b.da=m!=null&&0<m.da,b.da){if(!Ye(ce,ue,F=[m.ib],ae=[m.hb]))return 0;b.ib=F[0],b.hb=ae[0]}return b.ob=m!=null&&m.ob,b.Kb=m==null||!m.Sd,b.da&&(b.ob=b.ib<3*M/4&&b.hb<3*W/4,b.Kb=0),1}function _u(m){if(m==null)return 2;if(11>m.S){var b=m.f.RGBA;b.fb+=(m.height-1)*b.A,b.A=-b.A}else b=m.f.kb,m=m.height,b.O+=(m-1)*b.fa,b.fa=-b.fa,b.N+=(m-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(m-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(m-1)*b.lb,b.lb=-b.lb);return 0}function vl(m,b,F,M){if(M==null||0>=m||0>=b)return 2;if(F!=null){if(F.Da){var W=F.cd,ae=F.bd,le=-2&F.v,ce=-2&F.j;if(0>le||0>ce||0>=W||0>=ae||le+W>m||ce+ae>b)return 2;m=W,b=ae}if(F.da){if(!Ye(m,b,W=[F.ib],ae=[F.hb]))return 2;m=W[0],b=ae[0]}}M.width=m,M.height=b;e:{var ue=M.width,me=M.height;if(m=M.S,0>=ue||0>=me||!(m>=Zh&&13>m))m=2;else{if(0>=M.Rd&&M.sd==null){le=ae=W=b=0;var _e=(ce=ue*Yw[m])*me;if(11>m||(ae=(me+1)/2*(b=(ue+1)/2),m==12&&(le=(W=ue)*me)),(me=i(_e+2*ae+le))==null){m=1;break e}M.sd=me,11>m?((ue=M.f.RGBA).eb=me,ue.fb=0,ue.A=ce,ue.size=_e):((ue=M.f.kb).y=me,ue.O=0,ue.fa=ce,ue.Fd=_e,ue.f=me,ue.N=0+_e,ue.Ab=b,ue.Cd=ae,ue.ea=me,ue.W=0+_e+ae,ue.Db=b,ue.Ed=ae,m==12&&(ue.F=me,ue.J=0+_e+2*ae),ue.Tc=le,ue.lb=W)}if(b=1,W=M.S,ae=M.width,le=M.height,W>=Zh&&13>W)if(11>W)m=M.f.RGBA,b&=(ce=Math.abs(m.A))*(le-1)+ae<=m.size,b&=ce>=ae*Yw[W],b&=m.eb!=null;else{m=M.f.kb,ce=(ae+1)/2,_e=(le+1)/2,ue=Math.abs(m.fa),me=Math.abs(m.Ab);var Pe=Math.abs(m.Db),ge=Math.abs(m.lb),Ce=ge*(le-1)+ae;b&=ue*(le-1)+ae<=m.Fd,b&=me*(_e-1)+ce<=m.Cd,b=(b&=Pe*(_e-1)+ce<=m.Ed)&ue>=ae&me>=ce&Pe>=ce,b&=m.y!=null,b&=m.f!=null,b&=m.ea!=null,W==12&&(b&=ge>=ae,b&=Ce<=m.Tc,b&=m.F!=null)}else b=0;m=b?0:2}}return m!=0||F!=null&&F.fd&&(m=_u(M)),m}var Tc=64,Oa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pa=24,yl=32,Po=8,wl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];mt("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(m){return m},B.Predictor2=function(m,b,F){return b[F+0]},B.Predictor3=function(m,b,F){return b[F+1]},B.Predictor4=function(m,b,F){return b[F-1]},B.Predictor5=function(m,b,F){return it(it(m,b[F+1]),b[F+0])},B.Predictor6=function(m,b,F){return it(m,b[F-1])},B.Predictor7=function(m,b,F){return it(m,b[F+0])},B.Predictor8=function(m,b,F){return it(b[F-1],b[F+0])},B.Predictor9=function(m,b,F){return it(b[F+0],b[F+1])},B.Predictor10=function(m,b,F){return it(it(m,b[F-1]),it(b[F+0],b[F+1]))},B.Predictor11=function(m,b,F){var M=b[F+0];return 0>=pt(M>>24&255,m>>24&255,(b=b[F-1])>>24&255)+pt(M>>16&255,m>>16&255,b>>16&255)+pt(M>>8&255,m>>8&255,b>>8&255)+pt(255&M,255&m,255&b)?M:m},B.Predictor12=function(m,b,F){var M=b[F+0];return(jt((m>>24&255)+(M>>24&255)-((b=b[F-1])>>24&255))<<24|jt((m>>16&255)+(M>>16&255)-(b>>16&255))<<16|jt((m>>8&255)+(M>>8&255)-(b>>8&255))<<8|jt((255&m)+(255&M)-(255&b)))>>>0},B.Predictor13=function(m,b,F){var M=b[F-1];return(gt((m=it(m,b[F+0]))>>24&255,M>>24&255)<<24|gt(m>>16&255,M>>16&255)<<16|gt(m>>8&255,M>>8&255)<<8|gt(255&m,255&M))>>>0};var Nu=B.PredictorAdd0;B.PredictorAdd1=ot,mt("Predictor2","PredictorAdd2"),mt("Predictor3","PredictorAdd3"),mt("Predictor4","PredictorAdd4"),mt("Predictor5","PredictorAdd5"),mt("Predictor6","PredictorAdd6"),mt("Predictor7","PredictorAdd7"),mt("Predictor8","PredictorAdd8"),mt("Predictor9","PredictorAdd9"),mt("Predictor10","PredictorAdd10"),mt("Predictor11","PredictorAdd11"),mt("Predictor12","PredictorAdd12"),mt("Predictor13","PredictorAdd13");var QA=B.PredictorAdd2;ee("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),ee("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Ds,Xh=B.ColorIndexInverseTransform,lo=B.MapARGB,co=B.VP8LColorIndexInverseTransformAlpha,Bu=B.MapAlpha,Cu=B.VP8LPredictorsAdd=[];Cu.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var ju,Eu,bl,_l,Nl,Ic,Bl,Uc,di,Ao,Ir,Yr,Qs,cn,Ro,ku,OA,Jh,jw,Ew,kw,Sw,Fw,Tw,Su,Iw,Uw,Lw,Dw=i(511),Qw=i(2041),Ow=i(225),Pw=i(767),Rw=0,Ig=Qw,Yh=Ow,Ra=Pw,ui=Dw,Zh=0,ef=1,Mw=2,tf=3,rf=4,Ug=5,Hw=6,Lg=7,Dg=8,sf=9,Qg=10,JS=[2,3,7],YS=[3,3,11],Kw=[280,256,256,256,40],ZS=[0,1,1,1,0],eF=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tF=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],rF=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],sF=8,Og=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Pg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fu=null,nF=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],aF=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],iF=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oF=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lF=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cF=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Cl=[],Di=[],Mo=[],AF=1,Vw=2,jl=[],hi=[];Qo("UpsampleRgbLinePair",xl,3),Qo("UpsampleBgrLinePair",En,3),Qo("UpsampleRgbaLinePair",ua,4),Qo("UpsampleBgraLinePair",wu,4),Qo("UpsampleArgbLinePair",yu,4),Qo("UpsampleRgba4444LinePair",Sc,2),Qo("UpsampleRgb565LinePair",kc,2);var dF=B.UpsampleRgbLinePair,uF=B.UpsampleBgrLinePair,qw=B.UpsampleRgbaLinePair,Gw=B.UpsampleBgraLinePair,$w=B.UpsampleArgbLinePair,Ww=B.UpsampleRgba4444LinePair,hF=B.UpsampleRgb565LinePair,nf=16,af=1<<nf-1,Tu=-227,Rg=482,fF=6,Xw=0,pF=i(256),mF=i(256),gF=i(256),xF=i(256),vF=i(Rg-Tu),yF=i(Rg-Tu);Oo("YuvToRgbRow",xl,3),Oo("YuvToBgrRow",En,3),Oo("YuvToRgbaRow",ua,4),Oo("YuvToBgraRow",wu,4),Oo("YuvToArgbRow",yu,4),Oo("YuvToRgba4444Row",Sc,2),Oo("YuvToRgb565Row",kc,2);var Jw=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],of=[0,2,8],wF=[8,7,6,4,4,2,2,2,1,1,1,1],bF=1;this.WebPDecodeRGBA=function(m,b,F,M,W){var ae=ef,le=new We,ce=new Kt;le.ba=ce,ce.S=ae,ce.width=[ce.width],ce.height=[ce.height];var ue=ce.width,me=ce.height,_e=new xt;if(_e==null||m==null)var Pe=2;else t(_e!=null),Pe=Fc(m,b,F,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Pe!=0?ue=0:(ue!=null&&(ue[0]=_e.width[0]),me!=null&&(me[0]=_e.height[0]),ue=1),ue){ce.width=ce.width[0],ce.height=ce.height[0],M!=null&&(M[0]=ce.width),W!=null&&(W[0]=ce.height);e:{if(M=new ci,(W=new tt).data=m,W.w=b,W.ha=F,W.kd=1,b=[0],t(W!=null),((m=Fc(W.data,W.w,W.ha,null,null,null,b,null,W))==0||m==7)&&b[0]&&(m=4),(b=m)==0){if(t(le!=null),M.data=W.data,M.w=W.w+W.offset,M.ha=W.ha-W.offset,M.put=Rt,M.ac=Cs,M.bc=Fr,M.ma=le,W.xa){if((m=Ue())==null){le=1;break e}if(function(ge,Ce){var Te=[0],Ge=[0],Oe=[0];t:for(;;){if(ge==null)return 0;if(Ce==null)return ge.a=2,0;if(ge.l=Ce,ge.a=0,V(ge.m,Ce.data,Ce.w,Ce.ha),!Br(ge.m,Te,Ge,Oe)){ge.a=3;break t}if(ge.xb=Vw,Ce.width=Te[0],Ce.height=Ge[0],!Le(Te[0],Ge[0],1,ge,null))break t;return 1}return t(ge.a!=0),0}(m,M)){if(M=(b=vl(M.width,M.height,le.Oa,le.ba))==0){t:{M=m;r:for(;;){if(M==null){M=0;break t}if(t(M.s.yc!=null),t(M.s.Ya!=null),t(0<M.s.Wb),t((F=M.l)!=null),t((W=F.ma)!=null),M.xb!=0){if(M.ca=W.ba,M.tb=W.tb,t(M.ca!=null),!bu(W.Oa,F,tf)){M.a=2;break r}if(!De(M,F.width)||F.da)break r;if((F.da||Je(M.ca.S))&&Li(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&Li()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!ne(M.s.vb,M.s.Wa.Xa)){M.a=1;break r}M.xb=0}if(!Fe(M,M.V,M.Ba,M.c,M.i,F.o,Ae))break r;W.Dc=M.Ma,M=1;break t}t(M.a!=0),M=0}M=!M}M&&(b=m.a)}else b=m.a}else{if((m=new Fi)==null){le=1;break e}if(m.Fa=W.na,m.P=W.P,m.qc=W.Sa,Kn(m,M)){if((b=vl(M.width,M.height,le.Oa,le.ba))==0){if(m.Aa=0,F=le.Oa,t((W=m)!=null),F!=null){if(0<(ue=0>(ue=F.Md)?0:100<ue?255:255*ue/100)){for(me=_e=0;4>me;++me)12>(Pe=W.pb[me]).lc&&(Pe.ia=ue*wF[0>Pe.lc?0:Pe.lc]>>3),_e|=Pe.ia;_e&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=F.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}(function(ge,Ce){if(ge==null)return 0;if(Ce==null)return rs(ge,2,"NULL VP8Io parameter in VP8Decode().");if(!ge.cb&&!Kn(ge,Ce))return 0;if(t(ge.cb),Ce.ac==null||Ce.ac(Ce)){Ce.ob&&(ge.L=0);var Te=of[ge.L];if(ge.L==2?(ge.yb=0,ge.zb=0):(ge.yb=Ce.v-Te>>4,ge.zb=Ce.j-Te>>4,0>ge.yb&&(ge.yb=0),0>ge.zb&&(ge.zb=0)),ge.Va=Ce.o+15+Te>>4,ge.Hb=Ce.va+15+Te>>4,ge.Hb>ge.za&&(ge.Hb=ge.za),ge.Va>ge.Ub&&(ge.Va=ge.Ub),0<ge.L){var Ge=ge.ed;for(Te=0;4>Te;++Te){var Oe;if(ge.Qa.Cb){var $e=ge.Qa.Lb[Te];ge.Qa.Fb||($e+=Ge.Tb)}else $e=Ge.Tb;for(Oe=0;1>=Oe;++Oe){var Xe=ge.gd[Te][Oe],lt=$e;if(Ge.Pc&&(lt+=Ge.vd[0],Oe&&(lt+=Ge.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var rt=lt;0<Ge.wb&&(rt=4<Ge.wb?rt>>2:rt>>1)>9-Ge.wb&&(rt=9-Ge.wb),1>rt&&(rt=1),Xe.dd=rt,Xe.tc=2*lt+rt,Xe.ld=40<=lt?2:15<=lt?1:0}else Xe.tc=0;Xe.La=Oe}}}Te=0}else rs(ge,6,"Frame setup failed"),Te=ge.a;if(Te=Te==0){if(Te){ge.$c=0,0<ge.Aa||(ge.Ic=bF);t:{Te=ge.Ic,Ge=4*(rt=ge.za);var zt=32*rt,Ut=rt+1,Ar=0<ge.L?rt*(0<ge.Aa?2:1):0,Ot=(ge.Aa==2?2:1)*rt;if((Xe=Ge+832+(Oe=3*(16*Te+of[ge.L])/2*zt)+($e=ge.Fa!=null&&0<ge.Fa.length?ge.Kc.c*ge.Kc.i:0))!=Xe)Te=0;else{if(Xe>ge.Vb){if(ge.Vb=0,ge.Ec=i(Xe),ge.Fc=0,ge.Ec==null){Te=rs(ge,1,"no memory during frame initialization.");break t}ge.Vb=Xe}Xe=ge.Ec,lt=ge.Fc,ge.Ac=Xe,ge.Bc=lt,lt+=Ge,ge.Gd=o(zt,an),ge.Hd=0,ge.rb=o(Ut+1,Qr),ge.sb=1,ge.wa=Ar?o(Ar,cr):null,ge.Y=0,ge.D.Nb=0,ge.D.wa=ge.wa,ge.D.Y=ge.Y,0<ge.Aa&&(ge.D.Y+=rt),t(!0),ge.oc=Xe,ge.pc=lt,lt+=832,ge.ya=o(Ot,Hn),ge.aa=0,ge.D.ya=ge.ya,ge.D.aa=ge.aa,ge.Aa==2&&(ge.D.aa+=rt),ge.R=16*rt,ge.B=8*rt,rt=(zt=of[ge.L])*ge.R,zt=zt/2*ge.B,ge.sa=Xe,ge.ta=lt+rt,ge.qa=ge.sa,ge.ra=ge.ta+16*Te*ge.R+zt,ge.Ha=ge.qa,ge.Ia=ge.ra+8*Te*ge.B+zt,ge.$c=0,lt+=Oe,ge.mb=$e?Xe:null,ge.nb=$e?lt:null,t(lt+$e<=ge.Fc+ge.Vb),X(ge),a(ge.Ac,ge.Bc,0,Ge),Te=1}}if(Te){if(Ce.ka=0,Ce.y=ge.sa,Ce.O=ge.ta,Ce.f=ge.qa,Ce.N=ge.ra,Ce.ea=ge.Ha,Ce.Vd=ge.Ia,Ce.fa=ge.R,Ce.Rc=ge.B,Ce.F=null,Ce.J=0,!Rw){for(Te=-255;255>=Te;++Te)Dw[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)Qw[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)Ow[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)Pw[255+Te]=0>Te?0:255<Te?255:Te;Rw=1}Bl=Er,Uc=$t,Ao=Ct,Ir=ur,Yr=js,di=Tt,Qs=Gh,cn=Cc,Ro=G,ku=ve,OA=$h,Jh=j,jw=be,Ew=ke,kw=Bc,Sw=xu,Fw=Vh,Tw=qh,Di[0]=uu,Di[1]=jr,Di[2]=FA,Di[3]=TA,Di[4]=Ii,Di[5]=on,Di[6]=Ui,Di[7]=Ca,Di[8]=hu,Di[9]=IA,Cl[0]=da,Cl[1]=Ie,Cl[2]=Ze,Cl[3]=bt,Cl[4]=Xr,Cl[5]=Jr,Cl[6]=du,Mo[0]=Tg,Mo[1]=oe,Mo[2]=Nc,Mo[3]=Fg,Mo[4]=pu,Mo[5]=fu,Mo[6]=zh,Te=1}else Te=0}Te&&(Te=function(pr,An){for(pr.M=0;pr.M<pr.Va;++pr.M){var dr,Pt=pr.Jc[pr.M&pr.Xb],Nt=pr.m,Os=pr;for(dr=0;dr<Os.za;++dr){var ar=Nt,gr=Os,ds=gr.Ac,kn=gr.Bc+4*dr,ha=gr.zc,Es=gr.ya[gr.aa+dr];if(gr.Qa.Bb?Es.$b=de(ar,gr.Pa.jb[0])?2+de(ar,gr.Pa.jb[2]):de(ar,gr.Pa.jb[1]):Es.$b=0,gr.kc&&(Es.Ad=de(ar,gr.Bd)),Es.Za=!de(ar,145)+0,Es.Za){var zn=Es.Ob,fa=0;for(gr=0;4>gr;++gr){var dn,br=ha[0+gr];for(dn=0;4>dn;++dn){br=oF[ds[kn+dn]][br];for(var Or=zw[de(ar,br[0])];0<Or;)Or=zw[2*Or+de(ar,br[Or])];br=-Or,ds[kn+dn]=br}s(zn,fa,ds,kn,4),fa+=4,ha[0+gr]=br}}else br=de(ar,156)?de(ar,128)?1:3:de(ar,163)?2:0,Es.Ob[0]=br,a(ds,kn,br,4),a(ha,0,br,4);Es.Dd=de(ar,142)?de(ar,114)?de(ar,183)?1:3:2:0}if(Os.m.Ka)return rs(pr,7,"Premature end-of-partition0 encountered.");for(;pr.ja<pr.za;++pr.ja){if(Os=Pt,ar=(Nt=pr).rb[Nt.sb-1],ds=Nt.rb[Nt.sb+Nt.ja],dr=Nt.ya[Nt.aa+Nt.ja],kn=Nt.kc?dr.Ad:0)ar.la=ds.la=0,dr.Za||(ar.Na=ds.Na=0),dr.Hc=0,dr.Gc=0,dr.ia=0;else{var ks,Pr;if(ar=ds,ds=Os,kn=Nt.Pa.Xc,ha=Nt.ya[Nt.aa+Nt.ja],Es=Nt.pb[ha.$b],gr=ha.ad,zn=0,fa=Nt.rb[Nt.sb-1],br=dn=0,a(gr,zn,0,384),ha.Za)var Sn=0,Qi=kn[3];else{Or=i(16);var Ps=ar.Na+fa.Na;if(Ps=Fu(ds,kn[1],Ps,Es.Eb,0,Or,0),ar.Na=fa.Na=(0<Ps)+0,1<Ps)Bl(Or,0,gr,zn);else{var ja=Or[0]+3>>3;for(Or=0;256>Or;Or+=16)gr[zn+Or]=ja}Sn=1,Qi=kn[0]}var Zr=15&ar.la,un=15&fa.la;for(Or=0;4>Or;++Or){var Ma=1&un;for(ja=Pr=0;4>ja;++ja)Zr=Zr>>1|(Ma=(Ps=Fu(ds,Qi,Ps=Ma+(1&Zr),Es.Sc,Sn,gr,zn))>Sn)<<7,Pr=Pr<<2|(3<Ps?3:1<Ps?2:gr[zn+0]!=0),zn+=16;Zr>>=4,un=un>>1|Ma<<7,dn=(dn<<8|Pr)>>>0}for(Qi=Zr,Sn=un>>4,ks=0;4>ks;ks+=2){for(Pr=0,Zr=ar.la>>4+ks,un=fa.la>>4+ks,Or=0;2>Or;++Or){for(Ma=1&un,ja=0;2>ja;++ja)Ps=Ma+(1&Zr),Zr=Zr>>1|(Ma=0<(Ps=Fu(ds,kn[2],Ps,Es.Qc,0,gr,zn)))<<3,Pr=Pr<<2|(3<Ps?3:1<Ps?2:gr[zn+0]!=0),zn+=16;Zr>>=2,un=un>>1|Ma<<5}br|=Pr<<4*ks,Qi|=Zr<<4<<ks,Sn|=(240&un)<<ks}ar.la=Qi,fa.la=Sn,ha.Hc=dn,ha.Gc=br,ha.ia=43690&br?0:Es.ia,kn=!(dn|br)}if(0<Nt.L&&(Nt.wa[Nt.Y+Nt.ja]=Nt.gd[dr.$b][dr.Za],Nt.wa[Nt.Y+Nt.ja].La|=!kn),Os.Ka)return rs(pr,7,"Premature end-of-file encountered.")}if(X(pr),Nt=An,Os=1,dr=(Pt=pr).D,ar=0<Pt.L&&Pt.M>=Pt.zb&&Pt.M<=Pt.Va,Pt.Aa==0)t:{if(dr.M=Pt.M,dr.uc=ar,Ai(Pt,dr),Os=1,dr=(Pr=Pt.D).Nb,ar=(br=of[Pt.L])*Pt.R,ds=br/2*Pt.B,Or=16*dr*Pt.R,ja=8*dr*Pt.B,kn=Pt.sa,ha=Pt.ta-ar+Or,Es=Pt.qa,gr=Pt.ra-ds+ja,zn=Pt.Ha,fa=Pt.Ia-ds+ja,un=(Zr=Pr.M)==0,dn=Zr>=Pt.Va-1,Pt.Aa==2&&Ai(Pt,Pr),Pr.uc)for(Ma=(Ps=Pt).D.M,t(Ps.D.uc),Pr=Ps.yb;Pr<Ps.Hb;++Pr){Sn=Pr,Qi=Ma;var pa=(Ha=(Fn=Ps).D).Nb;ks=Fn.R;var Ha=Ha.wa[Ha.Y+Sn],Ka=Fn.sa,Ea=Fn.ta+16*pa*ks+16*Sn,za=Ha.dd,ns=Ha.tc;if(ns!=0)if(t(3<=ns),Fn.L==1)0<Sn&&Sw(Ka,Ea,ks,ns+4),Ha.La&&Tw(Ka,Ea,ks,ns),0<Qi&&kw(Ka,Ea,ks,ns+4),Ha.La&&Fw(Ka,Ea,ks,ns);else{var Va=Fn.B,Oi=Fn.qa,Lc=Fn.ra+8*pa*Va+8*Sn,Ho=Fn.Ha,Fn=Fn.Ia+8*pa*Va+8*Sn;pa=Ha.ld,0<Sn&&(cn(Ka,Ea,ks,ns+4,za,pa),ku(Oi,Lc,Ho,Fn,Va,ns+4,za,pa)),Ha.La&&(Jh(Ka,Ea,ks,ns,za,pa),Ew(Oi,Lc,Ho,Fn,Va,ns,za,pa)),0<Qi&&(Qs(Ka,Ea,ks,ns+4,za,pa),Ro(Oi,Lc,Ho,Fn,Va,ns+4,za,pa)),Ha.La&&(OA(Ka,Ea,ks,ns,za,pa),jw(Oi,Lc,Ho,Fn,Va,ns,za,pa))}}if(Pt.ia&&alert("todo:DitherRow"),Nt.put!=null){if(Pr=16*Zr,Zr=16*(Zr+1),un?(Nt.y=Pt.sa,Nt.O=Pt.ta+Or,Nt.f=Pt.qa,Nt.N=Pt.ra+ja,Nt.ea=Pt.Ha,Nt.W=Pt.Ia+ja):(Pr-=br,Nt.y=kn,Nt.O=ha,Nt.f=Es,Nt.N=gr,Nt.ea=zn,Nt.W=fa),dn||(Zr-=br),Zr>Nt.o&&(Zr=Nt.o),Nt.F=null,Nt.J=null,Pt.Fa!=null&&0<Pt.Fa.length&&Pr<Zr&&(Nt.J=ss(Pt,Nt,Pr,Zr-Pr),Nt.F=Pt.mb,Nt.F==null&&Nt.F.length==0)){Os=rs(Pt,3,"Could not decode alpha data.");break t}Pr<Nt.j&&(br=Nt.j-Pr,Pr=Nt.j,t(!(1&br)),Nt.O+=Pt.R*br,Nt.N+=Pt.B*(br>>1),Nt.W+=Pt.B*(br>>1),Nt.F!=null&&(Nt.J+=Nt.width*br)),Pr<Zr&&(Nt.O+=Nt.v,Nt.N+=Nt.v>>1,Nt.W+=Nt.v>>1,Nt.F!=null&&(Nt.J+=Nt.v),Nt.ka=Pr-Nt.j,Nt.U=Nt.va-Nt.v,Nt.T=Zr-Pr,Os=Nt.put(Nt))}dr+1!=Pt.Ic||dn||(s(Pt.sa,Pt.ta-ar,kn,ha+16*Pt.R,ar),s(Pt.qa,Pt.ra-ds,Es,gr+8*Pt.B,ds),s(Pt.Ha,Pt.Ia-ds,zn,fa+8*Pt.B,ds))}if(!Os)return rs(pr,6,"Output aborted.")}return 1}(ge,Ce)),Ce.bc!=null&&Ce.bc(Ce),Te&=1}return Te?(ge.cb=0,Te):0})(m,M)||(b=m.a)}}else b=m.a}b==0&&le.Oa!=null&&le.Oa.fd&&(b=_u(le.ba))}le=b}ae=le!=0?null:11>ae?ce.f.RGBA.eb:ce.f.kb.y}else ae=null;return ae};var Yw=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(B,R){for(var U="",L=0;L<4;L++)U+=String.fromCharCode(B[R++]);return U}function d(B,R){return B[R+0]|B[R+1]<<8}function h(B,R){return(B[R+0]|B[R+1]<<8|B[R+2]<<16)>>>0}function f(B,R){return(B[R+0]|B[R+1]<<8|B[R+2]<<16|B[R+3]<<24)>>>0}new c;var u=[0],p=[0],g=[],w=new c,v=e,x=function(B,R){var U={},L=0,D=!1,Q=0,K=0;if(U.frames=[],!function(N,C){for(var E=0;E<4;E++)if(N[C+E]!="RIFF".charCodeAt(E))return!0;return!1}(B,R)){for(f(B,R+=4),R+=8;R<B.length;){var P=A(B,R),te=f(B,R+=4);R+=4;var J=te+(1&te);switch(P){case"VP8 ":case"VP8L":U.frames[L]===void 0&&(U.frames[L]={}),(Y=U.frames[L]).src_off=D?K:R-8,Y.src_size=Q+te+8,L++,D&&(D=!1,Q=0,K=0);break;case"VP8X":(Y=U.header={}).feature_flags=B[R];var V=R+4;Y.canvas_width=1+h(B,V),V+=3,Y.canvas_height=1+h(B,V),V+=3;break;case"ALPH":D=!0,Q=J+8,K=R-8;break;case"ANIM":(Y=U.header).bgcolor=f(B,R),V=R+4,Y.loop_count=d(B,V),V+=2;break;case"ANMF":var ie,Y;(Y=U.frames[L]={}).offset_x=2*h(B,R),R+=3,Y.offset_y=2*h(B,R),R+=3,Y.width=1+h(B,R),R+=3,Y.height=1+h(B,R),R+=3,Y.duration=h(B,R),R+=3,ie=B[R++],Y.dispose=1&ie,Y.blend=ie>>1&1}P!="ANMF"&&(R+=J)}return U}}(v,0);x.response=v,x.rgbaoutput=!0,x.dataurl=!1;var y=x.header?x.header:null,_=x.frames?x.frames:null;if(y){y.loop_counter=y.loop_count,u=[y.canvas_height],p=[y.canvas_width];for(var I=0;I<_.length&&_[I].blend!=0;I++);}var k=_[0],T=w.WebPDecodeRGBA(v,k.src_off,k.src_size,p,u);k.rgba=T,k.imgwidth=p[0],k.imgheight=u[0];for(var S=0;S<p[0]*u[0]*4;S++)g[S]=T[S];return this.width=p,this.height=u,this.data=g,this}(function(e){var t,r,s,a,i,o,l,c,A,d=function(N){return N=N||{},this.isStrokeTransparent=N.isStrokeTransparent||!1,this.strokeOpacity=N.strokeOpacity||1,this.strokeStyle=N.strokeStyle||"#000000",this.fillStyle=N.fillStyle||"#000000",this.isFillTransparent=N.isFillTransparent||!1,this.fillOpacity=N.fillOpacity||1,this.font=N.font||"10px sans-serif",this.textBaseline=N.textBaseline||"alphabetic",this.textAlign=N.textAlign||"left",this.lineWidth=N.lineWidth||1,this.lineJoin=N.lineJoin||"miter",this.lineCap=N.lineCap||"butt",this.path=N.path||[],this.transform=N.transform!==void 0?N.transform.clone():new c,this.globalCompositeOperation=N.globalCompositeOperation||"normal",this.globalAlpha=N.globalAlpha||1,this.clip_path=N.clip_path||[],this.currentPoint=N.currentPoint||new o,this.miterLimit=N.miterLimit||10,this.lastPoint=N.lastPoint||new o,this.lineDashOffset=N.lineDashOffset||0,this.lineDash=N.lineDash||[],this.margin=N.margin||[0,0,0,0],this.prevPageLastElemOffset=N.prevPageLastElemOffset||0,this.ignoreClearRect=typeof N.ignoreClearRect!="boolean"||N.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,A=new d}]);var h=function(N){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var C=N;Object.defineProperty(this,"pdf",{get:function(){return C}});var E=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return E},set:function(ne){E=!!ne}});var O=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return O},set:function(ne){O=!!ne}});var q=0;Object.defineProperty(this,"posX",{get:function(){return q},set:function(ne){isNaN(ne)||(q=ne)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(ne){isNaN(ne)||(se=ne)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(ne){var Me;typeof ne=="number"?Me=[ne,ne,ne,ne]:((Me=new Array(4))[0]=ne[0],Me[1]=ne.length>=2?ne[1]:Me[0],Me[2]=ne.length>=3?ne[2]:Me[0],Me[3]=ne.length>=4?ne[3]:Me[1]),A.margin=Me}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(ne){ye=ne}});var re=0;Object.defineProperty(this,"lastBreak",{get:function(){return re},set:function(ne){re=ne}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(ne){de=ne}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(ne){ne instanceof d&&(A=ne)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(ne){A.path=ne}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(ne){Ne=ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ne){var Me;Me=f(ne),this.ctx.fillStyle=Me.style,this.ctx.isFillTransparent=Me.a===0,this.ctx.fillOpacity=Me.a,this.pdf.setFillColor(Me.r,Me.g,Me.b,{a:Me.a}),this.pdf.setTextColor(Me.r,Me.g,Me.b,{a:Me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ne){var Me=f(ne);this.ctx.strokeStyle=Me.style,this.ctx.isStrokeTransparent=Me.a===0,this.ctx.strokeOpacity=Me.a,Me.a===0?this.pdf.setDrawColor(255,255,255):(Me.a,this.pdf.setDrawColor(Me.r,Me.g,Me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ne){["butt","round","square"].indexOf(ne)!==-1&&(this.ctx.lineCap=ne,this.pdf.setLineCap(ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ne){isNaN(ne)||(this.ctx.lineWidth=ne,this.pdf.setLineWidth(ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ne){["bevel","round","miter"].indexOf(ne)!==-1&&(this.ctx.lineJoin=ne,this.pdf.setLineJoin(ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ne){isNaN(ne)||(this.ctx.miterLimit=ne,this.pdf.setMiterLimit(ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ne){this.ctx.textBaseline=ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ne){["right","end","center","left","start"].indexOf(ne)!==-1&&(this.ctx.textAlign=ne)}});var z=null,Be=null,Ve=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ve},set:function(ne){z=null,Be=null,Ve=ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ne){var Me;if(this.ctx.font=ne,(Me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ne))!==null){var Re=Me[1];Me[2];var Ye=Me[3],ze=Me[4];Me[5];var yt=Me[6],mt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(mt==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:mt==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var at=function(ee){var Se,je,qe=[],At=ee.trim();if(At==="")return v1;if(At in Y4)return[Y4[At]];for(;At!=="";){switch(je=null,Se=(At=eN(At)).charAt(0)){case'"':case"'":je=P9(At.substring(1),Se);break;default:je=R9(At)}if(je===null||(qe.push(je[0]),(At=eN(je[1]))!==""&&At.charAt(0)!==","))return v1;At=At.replace(/^,/,"")}return qe}(yt);if(this.fontFaces){var it=function(ee,Se){var je=ee.getFontList(),qe=JSON.stringify(je);if(z===null||Be!==qe){var At=function(wt){var He=[];return Object.keys(wt).forEach(function(ft){wt[ft].forEach(function(Je){var dt=null;switch(Je){case"bold":dt={family:ft,weight:"bold"};break;case"italic":dt={family:ft,style:"italic"};break;case"bolditalic":dt={family:ft,weight:"bold",style:"italic"};break;case"":case"normal":dt={family:ft}}dt!==null&&(dt.ref={name:ft,style:Je},He.push(dt))})}),He}(je);z=function(wt){for(var He={},ft=0;ft<wt.length;++ft){var Je=x1(wt[ft]),dt=Je.family,nr=Je.stretch,Kt=Je.style,xt=Je.weight;He[dt]=He[dt]||{},He[dt][nr]=He[dt][nr]||{},He[dt][nr][Kt]=He[dt][nr][Kt]||{},He[dt][nr][Kt][xt]=Je}return He}(At.concat(Se)),Be=qe}return z}(this.pdf,this.fontFaces),jt=at.map(function(ee){return{family:ee,stretch:"normal",weight:Ye,style:Re}}),gt=function(ee,Se,je){for(var qe=(je=je||{}).defaultFontFamily||"times",At=Object.assign({},O9,je.genericFontFamilies||{}),wt=null,He=null,ft=0;ft<Se.length;++ft)if(At[(wt=x1(Se[ft])).family]&&(wt.family=At[wt.family]),ee.hasOwnProperty(wt.family)){He=ee[wt.family];break}if(!(He=He||ee[qe]))throw new Error("Could not find a font-family for the rule '"+Z4(wt)+"' and default family '"+qe+"'.");if(He=function(Je,dt){if(dt[Je])return dt[Je];var nr=wy[Je],Kt=nr<=wy.normal?-1:1,xt=J4(dt,uk,nr,Kt);if(!xt)throw new Error("Could not find a matching font-stretch value for "+Je);return xt}(wt.stretch,He),He=function(Je,dt){if(dt[Je])return dt[Je];for(var nr=dk[Je],Kt=0;Kt<nr.length;++Kt)if(dt[nr[Kt]])return dt[nr[Kt]];throw new Error("Could not find a matching font-style for "+Je)}(wt.style,He),!(He=function(Je,dt){if(dt[Je])return dt[Je];if(Je===400&&dt[500])return dt[500];if(Je===500&&dt[400])return dt[400];var nr=Q9[Je],Kt=J4(dt,hk,nr,Je<400?-1:1);if(!Kt)throw new Error("Could not find a matching font-weight for value "+Je);return Kt}(wt.weight,He)))throw new Error("Failed to resolve a font for the rule '"+Z4(wt)+"'.");return He}(it,jt);this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var pt="";(Ye==="bold"||parseInt(Ye,10)>=700||Re==="bold")&&(pt="bold"),Re==="italic"&&(pt+="italic"),pt.length===0&&(pt="normal");for(var ot="",Et={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ht=0;ht<at.length;ht++){if(this.pdf.internal.getFont(at[ht],pt,{noFallback:!0,disableWarning:!0})!==void 0){ot=at[ht];break}if(pt==="bolditalic"&&this.pdf.internal.getFont(at[ht],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=at[ht],pt="bold";else if(this.pdf.internal.getFont(at[ht],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=at[ht],pt="normal";break}}if(ot===""){for(var nt=0;nt<at.length;nt++)if(Et[at[nt]]){ot=Et[at[nt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ne){this.ctx.globalCompositeOperation=ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ne){this.ctx.globalAlpha=ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ne){this.ctx.lineDashOffset=ne,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ne){this.ctx.lineDash=ne,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ne){this.ctx.ignoreClearRect=!!ne}})};h.prototype.setLineDash=function(N){this.lineDash=N},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){_.call(this,"fill",!1)},h.prototype.stroke=function(){_.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(N,C){if(isNaN(N)||isNaN(C))throw es.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var E=this.ctx.transform.applyToPoint(new o(N,C));this.path.push({type:"mt",x:E.x,y:E.y}),this.ctx.lastPoint=new o(N,C)},h.prototype.closePath=function(){var N=new o(0,0),C=0;for(C=this.path.length-1;C!==-1;C--)if(this.path[C].type==="begin"&&Mr(this.path[C+1])==="object"&&typeof this.path[C+1].x=="number"){N=new o(this.path[C+1].x,this.path[C+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(N.x,N.y)},h.prototype.lineTo=function(N,C){if(isNaN(N)||isNaN(C))throw es.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var E=this.ctx.transform.applyToPoint(new o(N,C));this.path.push({type:"lt",x:E.x,y:E.y}),this.ctx.lastPoint=new o(E.x,E.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},h.prototype.quadraticCurveTo=function(N,C,E,O){if(isNaN(E)||isNaN(O)||isNaN(N)||isNaN(C))throw es.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var q=this.ctx.transform.applyToPoint(new o(E,O)),se=this.ctx.transform.applyToPoint(new o(N,C));this.path.push({type:"qct",x1:se.x,y1:se.y,x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},h.prototype.bezierCurveTo=function(N,C,E,O,q,se){if(isNaN(q)||isNaN(se)||isNaN(N)||isNaN(C)||isNaN(E)||isNaN(O))throw es.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new o(q,se)),re=this.ctx.transform.applyToPoint(new o(N,C)),de=this.ctx.transform.applyToPoint(new o(E,O));this.path.push({type:"bct",x1:re.x,y1:re.y,x2:de.x,y2:de.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ye.x,ye.y)},h.prototype.arc=function(N,C,E,O,q,se){if(isNaN(N)||isNaN(C)||isNaN(E)||isNaN(O)||isNaN(q))throw es.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new o(N,C));N=ye.x,C=ye.y;var re=this.ctx.transform.applyToPoint(new o(0,E)),de=this.ctx.transform.applyToPoint(new o(0,0));E=Math.sqrt(Math.pow(re.x-de.x,2)+Math.pow(re.y-de.y,2))}Math.abs(q-O)>=2*Math.PI&&(O=0,q=2*Math.PI),this.path.push({type:"arc",x:N,y:C,radius:E,startAngle:O,endAngle:q,counterclockwise:se})},h.prototype.arcTo=function(N,C,E,O,q){throw new Error("arcTo not implemented.")},h.prototype.rect=function(N,C,E,O){if(isNaN(N)||isNaN(C)||isNaN(E)||isNaN(O))throw es.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(N,C),this.lineTo(N+E,C),this.lineTo(N+E,C+O),this.lineTo(N,C+O),this.lineTo(N,C),this.lineTo(N+E,C),this.lineTo(N,C)},h.prototype.fillRect=function(N,C,E,O){if(isNaN(N)||isNaN(C)||isNaN(E)||isNaN(O))throw es.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!u.call(this)){var q={};this.lineCap!=="butt"&&(q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(N,C,E,O),this.fill(),q.hasOwnProperty("lineCap")&&(this.lineCap=q.lineCap),q.hasOwnProperty("lineJoin")&&(this.lineJoin=q.lineJoin)}},h.prototype.strokeRect=function(N,C,E,O){if(isNaN(N)||isNaN(C)||isNaN(E)||isNaN(O))throw es.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(N,C,E,O),this.stroke())},h.prototype.clearRect=function(N,C,E,O){if(isNaN(N)||isNaN(C)||isNaN(E)||isNaN(O))throw es.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(N,C,E,O))},h.prototype.save=function(N){N=typeof N!="boolean"||N;for(var C=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("q");if(this.pdf.setPage(C),N){this.ctx.fontSize=this.pdf.internal.getFontSize();var O=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=O}},h.prototype.restore=function(N){N=typeof N!="boolean"||N;for(var C=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("Q");this.pdf.setPage(C),N&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(N){var C,E,O,q;if(N.isCanvasGradient===!0&&(N=N.getColor()),!N)return{r:0,g:0,b:0,a:0,style:N};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(N))C=0,E=0,O=0,q=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(N);if(se!==null)C=parseInt(se[1]),E=parseInt(se[2]),O=parseInt(se[3]),q=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(N))!==null)C=parseInt(se[1]),E=parseInt(se[2]),O=parseInt(se[3]),q=parseFloat(se[4]);else{if(q=1,typeof N=="string"&&N.charAt(0)!=="#"){var ye=new nk(N);N=ye.ok?ye.toHex():"#000000"}N.length===4?(C=N.substring(1,2),C+=C,E=N.substring(2,3),E+=E,O=N.substring(3,4),O+=O):(C=N.substring(1,3),E=N.substring(3,5),O=N.substring(5,7)),C=parseInt(C,16),E=parseInt(E,16),O=parseInt(O,16)}}return{r:C,g:E,b:O,a:q,style:N}},u=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(N,C,E,O){if(isNaN(C)||isNaN(E)||typeof N!="string")throw es.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(O=isNaN(O)?void 0:O,!u.call(this)){var q=J(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;L.call(this,{text:N,x:C,y:E,scale:se,angle:q,align:this.textAlign,maxWidth:O})}},h.prototype.strokeText=function(N,C,E,O){if(isNaN(C)||isNaN(E)||typeof N!="string")throw es.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){O=isNaN(O)?void 0:O;var q=J(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;L.call(this,{text:N,x:C,y:E,scale:se,renderingMode:"stroke",angle:q,align:this.textAlign,maxWidth:O})}},h.prototype.measureText=function(N){if(typeof N!="string")throw es.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var C=this.pdf,E=this.pdf.internal.scaleFactor,O=C.internal.getFontSize(),q=C.getStringUnitWidth(N)*O/C.internal.scaleFactor;return new function(se){var ye=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this}({width:q*=Math.round(96*E/72*1e4)/1e4})},h.prototype.scale=function(N,C){if(isNaN(N)||isNaN(C))throw es.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var E=new c(N,0,0,C,0,0);this.ctx.transform=this.ctx.transform.multiply(E)},h.prototype.rotate=function(N){if(isNaN(N))throw es.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var C=new c(Math.cos(N),Math.sin(N),-Math.sin(N),Math.cos(N),0,0);this.ctx.transform=this.ctx.transform.multiply(C)},h.prototype.translate=function(N,C){if(isNaN(N)||isNaN(C))throw es.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var E=new c(1,0,0,1,N,C);this.ctx.transform=this.ctx.transform.multiply(E)},h.prototype.transform=function(N,C,E,O,q,se){if(isNaN(N)||isNaN(C)||isNaN(E)||isNaN(O)||isNaN(q)||isNaN(se))throw es.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new c(N,C,E,O,q,se);this.ctx.transform=this.ctx.transform.multiply(ye)},h.prototype.setTransform=function(N,C,E,O,q,se){N=isNaN(N)?1:N,C=isNaN(C)?0:C,E=isNaN(E)?0:E,O=isNaN(O)?1:O,q=isNaN(q)?0:q,se=isNaN(se)?0:se,this.ctx.transform=new c(N,C,E,O,q,se)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(N,C,E,O,q,se,ye,re,de){var Ne=this.pdf.getImageProperties(N),z=1,Be=1,Ve=1,ne=1;O!==void 0&&re!==void 0&&(Ve=re/O,ne=de/q,z=Ne.width/O*re/O,Be=Ne.height/q*de/q),se===void 0&&(se=C,ye=E,C=0,E=0),O!==void 0&&re===void 0&&(re=O,de=q),O===void 0&&re===void 0&&(re=Ne.width,de=Ne.height);var Me=this.ctx.transform.decompose(),Re=J(Me.rotate.shx),Ye=new c,ze=(Ye=(Ye=(Ye=Ye.multiply(Me.translate)).multiply(Me.skew)).multiply(Me.scale)).applyToRectangle(new l(se-C*Ve,ye-E*ne,O*z,q*Be));if(this.autoPaging){for(var yt,mt=w.call(this,ze),at=[],it=0;it<mt.length;it+=1)at.indexOf(mt[it])===-1&&at.push(mt[it]);y(at);for(var jt=at[0],gt=at[at.length-1],pt=jt;pt<gt+1;pt++){this.pdf.setPage(pt);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=pt===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ee=pt===1?0:ht+(pt-2)*nt;if(this.ctx.clip_path.length!==0){var Se=this.path;yt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(yt,this.posX+this.margin[3],-ee+Et+this.ctx.prevPageLastElemOffset),I.call(this,"fill",!0),this.path=Se}var je=JSON.parse(JSON.stringify(ze));je=x([je],this.posX+this.margin[3],-ee+Et+this.ctx.prevPageLastElemOffset)[0];var qe=(pt>jt||pt<gt)&&g.call(this);qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,nt,null).clip().discardPath()),this.pdf.addImage(N,"JPEG",je.x,je.y,je.w,je.h,null,null,Re),qe&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(N,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,Re)};var w=function(N,C,E){var O=[];C=C||this.pdf.internal.pageSize.width,E=E||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var q=this.posY+this.ctx.prevPageLastElemOffset;switch(N.type){default:case"mt":case"lt":O.push(Math.floor((N.y+q)/E)+1);break;case"arc":O.push(Math.floor((N.y+q-N.radius)/E)+1),O.push(Math.floor((N.y+q+N.radius)/E)+1);break;case"qct":var se=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x,N.y);O.push(Math.floor((se.y+q)/E)+1),O.push(Math.floor((se.y+se.h+q)/E)+1);break;case"bct":var ye=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);O.push(Math.floor((ye.y+q)/E)+1),O.push(Math.floor((ye.y+ye.h+q)/E)+1);break;case"rect":O.push(Math.floor((N.y+q)/E)+1),O.push(Math.floor((N.y+N.h+q)/E)+1)}for(var re=0;re<O.length;re+=1)for(;this.pdf.internal.getNumberOfPages()<O[re];)v.call(this);return O},v=function(){var N=this.fillStyle,C=this.strokeStyle,E=this.font,O=this.lineCap,q=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=N,this.strokeStyle=C,this.font=E,this.lineCap=O,this.lineWidth=q,this.lineJoin=se},x=function(N,C,E){for(var O=0;O<N.length;O++)switch(N[O].type){case"bct":N[O].x2+=C,N[O].y2+=E;case"qct":N[O].x1+=C,N[O].y1+=E;default:N[O].x+=C,N[O].y+=E}return N},y=function(N){return N.sort(function(C,E){return C-E})},_=function(N,C){var E=this.fillStyle,O=this.strokeStyle,q=this.lineCap,se=this.lineWidth,ye=Math.abs(se*this.ctx.transform.scaleX),re=this.lineJoin;if(this.autoPaging){for(var de,Ne,z=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),Ve=[],ne=0;ne<Be.length;ne++)if(Be[ne].x!==void 0)for(var Me=w.call(this,Be[ne]),Re=0;Re<Me.length;Re+=1)Ve.indexOf(Me[Re])===-1&&Ve.push(Me[Re]);for(var Ye=0;Ye<Ve.length;Ye++)for(;this.pdf.internal.getNumberOfPages()<Ve[Ye];)v.call(this);y(Ve);for(var ze=Ve[0],yt=Ve[Ve.length-1],mt=ze;mt<yt+1;mt++){this.pdf.setPage(mt),this.fillStyle=E,this.strokeStyle=O,this.lineCap=q,this.lineWidth=ye,this.lineJoin=re;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=mt===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=mt===1?0:jt+(mt-2)*gt;if(this.ctx.clip_path.length!==0){var ot=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(de,this.posX+this.margin[3],-pt+it+this.ctx.prevPageLastElemOffset),I.call(this,N,!0),this.path=ot}if(Ne=JSON.parse(JSON.stringify(z)),this.path=x(Ne,this.posX+this.margin[3],-pt+it+this.ctx.prevPageLastElemOffset),C===!1||mt===0){var Et=(mt>ze||mt<yt)&&g.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,gt,null).clip().discardPath()),I.call(this,N,C),Et&&this.pdf.restoreGraphicsState()}this.lineWidth=se}this.path=z}else this.lineWidth=ye,I.call(this,N,C),this.lineWidth=se},I=function(N,C){if((N!=="stroke"||C||!p.call(this))&&(N==="stroke"||C||!u.call(this))){for(var E,O,q=[],se=this.path,ye=0;ye<se.length;ye++){var re=se[ye];switch(re.type){case"begin":q.push({begin:!0});break;case"close":q.push({close:!0});break;case"mt":q.push({start:re,deltas:[],abs:[]});break;case"lt":var de=q.length;if(se[ye-1]&&!isNaN(se[ye-1].x)&&(E=[re.x-se[ye-1].x,re.y-se[ye-1].y],de>0)){for(;de>=0;de--)if(q[de-1].close!==!0&&q[de-1].begin!==!0){q[de-1].deltas.push(E),q[de-1].abs.push(re);break}}break;case"bct":E=[re.x1-se[ye-1].x,re.y1-se[ye-1].y,re.x2-se[ye-1].x,re.y2-se[ye-1].y,re.x-se[ye-1].x,re.y-se[ye-1].y],q[q.length-1].deltas.push(E);break;case"qct":var Ne=se[ye-1].x+2/3*(re.x1-se[ye-1].x),z=se[ye-1].y+2/3*(re.y1-se[ye-1].y),Be=re.x+2/3*(re.x1-re.x),Ve=re.y+2/3*(re.y1-re.y),ne=re.x,Me=re.y;E=[Ne-se[ye-1].x,z-se[ye-1].y,Be-se[ye-1].x,Ve-se[ye-1].y,ne-se[ye-1].x,Me-se[ye-1].y],q[q.length-1].deltas.push(E);break;case"arc":q.push({deltas:[],abs:[],arc:!0}),Array.isArray(q[q.length-1].abs)&&q[q.length-1].abs.push(re)}}O=C?null:N==="stroke"?"stroke":"fill";for(var Re=!1,Ye=0;Ye<q.length;Ye++)if(q[Ye].arc)for(var ze=q[Ye].abs,yt=0;yt<ze.length;yt++){var mt=ze[yt];mt.type==="arc"?S.call(this,mt.x,mt.y,mt.radius,mt.startAngle,mt.endAngle,mt.counterclockwise,void 0,C,!Re):D.call(this,mt.x,mt.y),Re=!0}else if(q[Ye].close===!0)this.pdf.internal.out("h"),Re=!1;else if(q[Ye].begin!==!0){var at=q[Ye].start.x,it=q[Ye].start.y;Q.call(this,q[Ye].deltas,at,it),Re=!0}O&&B.call(this,O),C&&R.call(this)}},k=function(N){var C=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,E=C*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return N-E;case"top":return N+C-E;case"hanging":return N+C-2*E;case"middle":return N+C/2-E;default:return N}},T=function(N){return N+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var N=function(){};return N.colorStops=[],N.addColorStop=function(C,E){this.colorStops.push([C,E])},N.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},N.isCanvasGradient=!0,N},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(N,C,E,O,q,se,ye,re,de){for(var Ne=P.call(this,E,O,q,se),z=0;z<Ne.length;z++){var Be=Ne[z];z===0&&(de?U.call(this,Be.x1+N,Be.y1+C):D.call(this,Be.x1+N,Be.y1+C)),K.call(this,N,C,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}re?R.call(this):B.call(this,ye)},B=function(N){switch(N){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},U=function(N,C){this.pdf.internal.out(r(N)+" "+s(C)+" m")},L=function(N){var C;switch(N.align){case"right":case"end":C="right";break;case"center":C="center";break;default:C="left"}var E,O,q,se=this.pdf.getTextDimensions(N.text),ye=k.call(this,N.y),re=T.call(this,ye)-se.h,de=this.ctx.transform.applyToPoint(new o(N.x,ye));if(this.autoPaging){var Ne=this.ctx.transform.decompose(),z=new c;z=(z=(z=z.multiply(Ne.translate)).multiply(Ne.skew)).multiply(Ne.scale);for(var Be=this.ctx.transform.applyToRectangle(new l(N.x,ye,se.w,se.h)),Ve=z.applyToRectangle(new l(N.x,re,se.w,se.h)),ne=w.call(this,Ve),Me=[],Re=0;Re<ne.length;Re+=1)Me.indexOf(ne[Re])===-1&&Me.push(ne[Re]);y(Me);for(var Ye=Me[0],ze=Me[Me.length-1],yt=Ye;yt<ze+1;yt++){this.pdf.setPage(yt);var mt=yt===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[2],jt=it-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],pt=gt-this.margin[3],ot=yt===1?0:at+(yt-2)*jt;if(this.ctx.clip_path.length!==0){var Et=this.path;E=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(E,this.posX+this.margin[3],-1*ot+mt),I.call(this,"fill",!0),this.path=Et}var ht=x([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-ot+mt+this.ctx.prevPageLastElemOffset)[0];N.scale>=.01&&(O=this.pdf.internal.getFontSize(),this.pdf.setFontSize(O*N.scale),q=this.lineWidth,this.lineWidth=q*N.scale);var nt=this.autoPaging!=="text";if(nt||ht.y+ht.h<=it){if(nt||ht.y>=mt&&ht.x<=gt){var ee=nt?N.text:this.pdf.splitTextToSize(N.text,N.maxWidth||gt-ht.x)[0],Se=x([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-ot+mt+this.ctx.prevPageLastElemOffset)[0],je=nt&&(yt>Ye||yt<ze)&&g.call(this);je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,jt,null).clip().discardPath()),this.pdf.text(ee,Se.x,Se.y,{angle:N.angle,align:C,renderingMode:N.renderingMode}),je&&this.pdf.restoreGraphicsState()}}else ht.y<it&&(this.ctx.prevPageLastElemOffset+=it-ht.y);N.scale>=.01&&(this.pdf.setFontSize(O),this.lineWidth=q)}}else N.scale>=.01&&(O=this.pdf.internal.getFontSize(),this.pdf.setFontSize(O*N.scale),q=this.lineWidth,this.lineWidth=q*N.scale),this.pdf.text(N.text,de.x+this.posX,de.y+this.posY,{angle:N.angle,align:C,renderingMode:N.renderingMode,maxWidth:N.maxWidth}),N.scale>=.01&&(this.pdf.setFontSize(O),this.lineWidth=q)},D=function(N,C,E,O){E=E||0,O=O||0,this.pdf.internal.out(r(N+E)+" "+s(C+O)+" l")},Q=function(N,C,E){return this.pdf.lines(N,C,E,null,null)},K=function(N,C,E,O,q,se,ye,re){this.pdf.internal.out([t(a(E+N)),t(i(O+C)),t(a(q+N)),t(i(se+C)),t(a(ye+N)),t(i(re+C)),"c"].join(" "))},P=function(N,C,E,O){for(var q=2*Math.PI,se=Math.PI/2;C>E;)C-=q;var ye=Math.abs(E-C);ye<q&&O&&(ye=q-ye);for(var re=[],de=O?-1:1,Ne=C;ye>1e-5;){var z=Ne+de*Math.min(ye,se);re.push(te.call(this,N,Ne,z)),ye-=Math.abs(z-Ne),Ne=z}return re},te=function(N,C,E){var O=(E-C)/2,q=N*Math.cos(O),se=N*Math.sin(O),ye=q,re=-se,de=ye*ye+re*re,Ne=de+ye*q+re*se,z=4/3*(Math.sqrt(2*de*Ne)-Ne)/(ye*se-re*q),Be=ye-z*re,Ve=re+z*ye,ne=Be,Me=-Ve,Re=O+C,Ye=Math.cos(Re),ze=Math.sin(Re);return{x1:N*Math.cos(C),y1:N*Math.sin(C),x2:Be*Ye-Ve*ze,y2:Be*ze+Ve*Ye,x3:ne*Ye-Me*ze,y3:ne*ze+Me*Ye,x4:N*Math.cos(E),y4:N*Math.sin(E)}},J=function(N){return 180*N/Math.PI},V=function(N,C,E,O,q,se){var ye=N+.5*(E-N),re=C+.5*(O-C),de=q+.5*(E-q),Ne=se+.5*(O-se),z=Math.min(N,q,ye,de),Be=Math.max(N,q,ye,de),Ve=Math.min(C,se,re,Ne),ne=Math.max(C,se,re,Ne);return new l(z,Ve,Be-z,ne-Ve)},ie=function(N,C,E,O,q,se,ye,re){var de,Ne,z,Be,Ve,ne,Me,Re,Ye,ze,yt,mt,at,it,jt=E-N,gt=O-C,pt=q-E,ot=se-O,Et=ye-q,ht=re-se;for(Ne=0;Ne<41;Ne++)Ye=(Me=(z=N+(de=Ne/40)*jt)+de*((Ve=E+de*pt)-z))+de*(Ve+de*(q+de*Et-Ve)-Me),ze=(Re=(Be=C+de*gt)+de*((ne=O+de*ot)-Be))+de*(ne+de*(se+de*ht-ne)-Re),Ne==0?(yt=Ye,mt=ze,at=Ye,it=ze):(yt=Math.min(yt,Ye),mt=Math.min(mt,ze),at=Math.max(at,Ye),it=Math.max(it,ze));return new l(Math.round(yt),Math.round(mt),Math.round(at-yt),Math.round(it-mt))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var N,C,E=(N=this.ctx.lineDash,C=this.ctx.lineDashOffset,JSON.stringify({lineDash:N,lineDashOffset:C}));this.prevLineDash!==E&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=E)}}})(Ht.API),function(e){var t=function(o){var l,c,A,d,h,f,u,p,g,w;for(c=[],A=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>A;A+=4)(h=(o.charCodeAt(A)<<24)+(o.charCodeAt(A+1)<<16)+(o.charCodeAt(A+2)<<8)+o.charCodeAt(A+3))!==0?(f=(h=((h=((h=((h=(h-(w=h%85))/85)-(g=h%85))/85)-(p=h%85))/85)-(u=h%85))/85)%85,c.push(f+33,u+33,p+33,g+33,w+33)):c.push(122);return function(v,x){for(var y=x;y>0;y--)v.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,A,d,h,f=String,u="length",p=255,g="charCodeAt",w="slice",v="replace";for(o[w](-2),o=o[w](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),A=[],d=0,h=(o+=l="uuuuu"[w](o[u]%5||5))[u];h>d;d+=5)c=52200625*(o[g](d)-33)+614125*(o[g](d+1)-33)+7225*(o[g](d+2)-33)+85*(o[g](d+3)-33)+(o[g](d+4)-33),A.push(p&c>>24,p&c>>16,p&c>>8,p&c);return function(x,y){for(var _=y;_>0;_--)x.pop()}(A,l[u]),f.fromCharCode.apply(f,A)},s=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",A=0;A<o.length;A+=2)c+=String.fromCharCode("0x"+(o[A]+o[A+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=fy(l)).reduce(function(A,d){return A+String.fromCharCode(d)},"")};e.processDataByFilters=function(o,l){var c=0,A=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":A=r(A),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=t(A),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=a(A),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=s(A),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=i(A),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:A,reverseChain:d.reverse().join(" ")}}}(Ht.API),function(e){e.loadFile=function(t,r,s){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,A,d){var h=new XMLHttpRequest,f=0,u=function(p){var g=p.length,w=[],v=String.fromCharCode;for(f=0;f<g;f+=1)w.push(v(255&p.charCodeAt(f)));return w.join("")};if(h.open("GET",c,!A),h.overrideMimeType("text/plain; charset=x-user-defined"),A===!1&&(h.onload=function(){h.status===200?d(u(this.responseText)):d(void 0)}),h.send(null),A&&h.status===200)return u(h.responseText)}(a,i,o)}catch{}return l}(t,r,s)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile}(Ht.API),function(e){function t(){return(er.html2canvas?Promise.resolve(er.html2canvas):e1(()=>Promise.resolve().then(()=>pM),void 0)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(er.DOMPurify?Promise.resolve(er.DOMPurify):e1(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var s=function(l){var c=Mr(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var A=document.createElement(l);for(var d in c.className&&(A.className=c.className),c.innerHTML&&c.dompurify&&(A.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)A.style[d]=c.style[d];return A},i=function l(c,A){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)A!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,A));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var A=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),A);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(A){switch(s(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(A){return this.set({src:a("div",{innerHTML:l,dompurify:A})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,c(this.prop.container,A)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var A=this.opt.jsPDF,d=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=d,d)for(var u=0;u<d.length;++u){var p=d[u],g=p.src.find(function(w){return w.format==="truetype"});g&&A.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,A.context2d.save(!0),c(this.prop.container,f)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(s(l)!=="object")return this;var c=Object.keys(l||{}).map(function(A){if(A in o.template.prop)return function(){this.prop[A]=l[A]};switch(A){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[A]=l[A]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var A=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(A):A})},o.prototype.setMargin=function(l){return this.then(function(){switch(s(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(A,d){return Math.floor(A*d/72*96)}return this.then(function(){(l=l||Ht.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,A,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),A!=null&&(this.progress.n=A),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,A,d){return this.setProgress(l?this.progress.val+l:null,c||null,A?this.progress.n+A:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var A=this;return this.thenCore(l,c,function(d,h){return A.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(f){return A.updateProgress(null,d),f}).then(d,h).then(function(f){return A.updateProgress(1),f})})},o.prototype.thenCore=function(l,c,A){A=A||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),f=A.call(h,l,c);return o.convert(f,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(A){c=c.thenCore(A)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Ht.getPageSize=function(l,c,A){if(Mr(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,A=d.format||A}c=c||"mm",A=A||"a4",l=(""+(l||"P")).toLowerCase();var h,f=(""+A).toLowerCase(),u={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var p,g=0,w=0;if(u.hasOwnProperty(f))g=u[f][1]/h,w=u[f][0]/h;else try{g=A[1],w=A[0]}catch{throw new Error("Invalid format: "+A)}if(l==="p"||l==="portrait")l="p",w>g&&(p=w,w=g,g=p);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",g>w&&(p=w,w=g,g=p)}return{width:w,height:g,unit:c,k:h,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(x1):null;var A=new o(c);return c.worker?A:A.from(l).doCallback()}}(Ht.API),Ht.API.addJS=function(e){return rN=e,this.internal.events.subscribe("postPutResources",function(){hp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(hp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),tN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+rN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){hp!==void 0&&tN!==void 0&&this.internal.out("/Names <</JavaScript "+hp+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=s.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var A=this.internal.pages.length,d=[];for(i=0;i<A;i++){var h=r.internal.newObject();d.push(h);var f=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var u=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+u+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,a,i){var o={title:a,options:i,children:[]};return s==null&&(s=this.root),s.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var o=s.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var A=0;A<s.children.length;A++)this.renderItems(s.children[A])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,a){for(var i=0;i<a.children.length;i++)s.count++,this.count_r(s,a.children[i]);return s.count}}])}(Ht.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,a,i,o,l){var c,A=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(h){for(var f,u=256*h.charCodeAt(4)+h.charCodeAt(5),p=h.length,g={width:0,height:0,numcomponents:1},w=4;w<p;w+=2){if(w+=u,t.indexOf(h.charCodeAt(w+1))!==-1){f=256*h.charCodeAt(w+5)+h.charCodeAt(w+6),g={width:256*h.charCodeAt(w+7)+h.charCodeAt(w+8),height:f,numcomponents:h.charCodeAt(w+9)};break}u=256*h.charCodeAt(w+2)+h.charCodeAt(w+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:A,index:s,alias:a}}return d}}(Ht.API),Ht.API.processPNG=function(e,t,r,s){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=_9(e,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,A=i.palette,d=i.depth;a=A&&c===1?function(S){for(var B=S.width,R=S.height,U=S.data,L=S.palette,D=S.depth,Q=!1,K=[],P=[],te=void 0,J=!1,V=0,ie=0;ie<L.length;ie++){var Y=i4(L[ie],4),N=Y[0],C=Y[1],E=Y[2],O=Y[3];K.push(N,C,E),O!=null&&(O===0?(V++,P.length<1&&P.push(ie)):O<255&&(J=!0))}if(J||V>1){Q=!0,P=void 0;var q=B*R;te=new Uint8Array(q);for(var se=new DataView(U.buffer),ye=0;ye<q;ye++){var re=y1(se,ye,D),de=i4(L[re],4)[3];te[ye]=de}}else V===0&&(P=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Q?8:void 0,colorBytes:U,alphaBytes:te,needSMask:Q,palette:K,mask:P}}(i):c===2||c===4?function(S){for(var B=S.data,R=S.width,U=S.height,L=S.channels,D=S.depth,Q=L===2?"DeviceGray":"DeviceRGB",K=L-1,P=R*U,te=K,J=P*te,V=1*P,ie=Math.ceil(J*D/8),Y=Math.ceil(V*D/8),N=new Uint8Array(ie),C=new Uint8Array(Y),E=new DataView(B.buffer),O=new DataView(N.buffer),q=new DataView(C.buffer),se=!1,ye=0;ye<P;ye++){for(var re=ye*L,de=0;de<te;de++)dN(O,y1(E,re+de,D),ye*te+de,D);var Ne=y1(E,re+te,D);Ne<(1<<D)-1&&(se=!0),dN(q,Ne,1*ye,D)}return{colorSpace:Q,colorsPerPixel:K,sMaskBitsPerComponent:se?D:void 0,colorBytes:N,alphaBytes:C,needSMask:se}}(i):function(S){var B=S.data,R=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:B instanceof Uint16Array?function(U){for(var L=U.length,D=new Uint8Array(2*L),Q=new DataView(D.buffer,D.byteOffset,D.byteLength),K=0;K<L;K++)Q.setUint16(2*K,U[K],!1);return D}(B):B,needSMask:!1}}(i);var h,f,u,p=a,g=p.colorSpace,w=p.colorsPerPixel,v=p.sMaskBitsPerComponent,x=p.colorBytes,y=p.alphaBytes,_=p.needSMask,I=p.palette,k=p.mask,T=null;return s!==Ht.API.image_compression.NONE&&typeof fy=="function"?(T=function(S){var B;switch(S){case Ht.API.image_compression.FAST:B=11;break;case Ht.API.image_compression.MEDIUM:B=13;break;case Ht.API.image_compression.SLOW:B=14;break;default:B=12}return B}(s),h=this.decode.FLATE_DECODE,f="/Predictor ".concat(T," /Colors ").concat(w," /BitsPerComponent ").concat(d," /Columns ").concat(o),e=iN(x,Math.ceil(o*w*d/8),w,d,s),_&&(u=iN(y,Math.ceil(o*v/8),1,v,s))):(h=void 0,f=void 0,e=x,_&&(u=y)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(u&&this.__addimage__.isArrayBuffer(u)||this.__addimage__.isArrayBufferView(u))&&(u=this.__addimage__.arrayBufferToBinaryString(u)),{alias:r,data:e,index:t,filter:h,decodeParameters:f,transparency:k,palette:I,sMask:u,predictor:T,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:g}}},function(e){e.processGIF89A=function(t,r,s,a){var i=new z9(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var A={data:c,width:o,height:l},d=new w1(100).encode(A,100);return e.processJPEG.call(this,d,r,s,a)},e.processGIF87A=e.processGIF89A}(Ht.API),Ri.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:s,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ri.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){es.log("bit decode error:"+r)}},Ri.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Ri.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*a*4,l=i>>4,c=15&i,A=this.palette[l];if(this.data[o]=A.blue,this.data[o+1]=A.green,this.data[o+2]=A.red,this.data[o+3]=255,2*a+1>=this.width)break;A=this.palette[c],this.data[o+4]=A.blue,this.data[o+4+1]=A.green,this.data[o+4+2]=A.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ri.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*s;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Ri.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,A=i>>15?255:0,d=s*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=A}this.pos+=e}},Ri.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,A=(o>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=A,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Ri.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},Ri.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=s,this.data[l+3]=o}},Ri.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,s,a){var i=new Ri(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},A=new w1(100).encode(c,100);return e.processJPEG.call(this,A,r,s,a)}}(Ht.API),hN.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,s,a){var i=new hN(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},A=new w1(100).encode(c,100);return e.processJPEG.call(this,A,r,s,a)}}(Ht.API),Ht.API.processRGBA=function(e,t,r){for(var s=e.data,a=s.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,A=0;A<a;A+=4){var d=s[A],h=s[A+1],f=s[A+2],u=s[A+3];i[l++]=d,i[l++]=h,i[l++]=f,o[c++]=u}var p=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ht.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},td=Ht.API,fp=td.getCharWidthsArray=function(e,t){var r,s,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,A=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=A.fof?A.fof:1,h=t.doKerning!==!1,f=0,u=e.length,p=0,g=l[0]||c,w=[];for(r=0;r<u;r++)s=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?w.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+o*(1e3/i)||0)/1e3):(f=h&&Mr(A[s])==="object"&&!isNaN(parseInt(A[s][p],10))?A[s][p]/d:0,w.push((l[s]||g)/c+f)),p=s;return w},sN=td.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return td.processArabic&&(e=td.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,a)/r:fp.apply(this,arguments).reduce(function(i,o){return i+o},0)},nN=function(e,t,r,s){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>s&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},aN=function(e,t,r){r||(r={});var s,a,i,o,l,c,A,d=[],h=[d],f=r.textIndent||0,u=0,p=0,g=e.split(" "),w=fp.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),x=[];g.map(function(_){(_=_.split(/\s*\n/)).length>1?x=x.concat(_.map(function(I,k){return(k&&I.length?`
`:"")+I})):x.push(_[0])}),g=x,c=sN.apply(this,[v,r])}for(i=0,o=g.length;i<o;i++){var y=0;if(s=g[i],c&&s[0]==`
`&&(s=s.substr(1),y=1),f+u+(p=(a=fp.apply(this,[s,r])).reduce(function(_,I){return _+I},0))>t||y){if(p>t){for(l=nN.apply(this,[s,a,t-(f+u),t]),d.push(l.shift()),d=[l.pop()];l.length;)h.push([l.shift()]);p=a.slice(s.length-(d[0]?d[0].length:0)).reduce(function(_,I){return _+I},0)}else d=[s];h.push(d),f=p+c,u=w}else d.push(s),f+=u+p,u=w}return A=c?function(_,I){return(I?v:"")+_.join(" ")}:function(_){return _.join(" ")},h.map(A)},td.splitTextToSize=function(e,t,r){var s,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle),f="Unicode";return h.metadata[f]?{widths:h.metadata[f].widths||{0:1},kerning:h.metadata[f].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,A=[];for(l=0,c=s.length;l<c;l++)A=A.concat(aN.apply(this,[s[l],o,i]));return A},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",s={},a={},i=0;i<16;i++)s[r[i]]=t[i],a[t[i]]=r[i];var o=function(f){return"0x"+parseInt(f,10).toString(16)},l=e.__fontmetrics__.compress=function(f){var u,p,g,w,v=["{"];for(var x in f){if(u=f[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=o(x).slice(2)).slice(0,-1)+a[p.slice(-1)]),typeof u=="number")u<0?(g=o(u).slice(3),w="-"):(g=o(u).slice(2),w=""),g=w+g.slice(0,-1)+a[g.slice(-1)];else{if(Mr(u)!=="object")throw new Error("Don't know what to do with value type "+Mr(u)+".");g=l(u)}v.push(p+g)}return v.push("}"),v.join("")},c=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var u,p,g,w,v={},x=1,y=v,_=[],I="",k="",T=f.length-1,S=1;S<T;S+=1)(w=f[S])=="'"?u?(g=u.join(""),u=void 0):u=[]:u?u.push(w):w=="{"?(_.push([y,g]),y={},g=void 0):w=="}"?((p=_.pop())[0][p[1]]=y,g=void 0,y=p[0]):w=="-"?x=-1:g===void 0?s.hasOwnProperty(w)?(I+=s[w],g=parseInt(I,16)*x,x=1,I=""):I+=w:s.hasOwnProperty(w)?(k+=s[w],y[g]=parseInt(k,16)*x,x=1,g=void 0,k=""):k+=w;return v},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var u=f.font,p=h.Unicode[u.postScriptName];p&&(u.metadata.Unicode={},u.metadata.Unicode.widths=p.widths,u.metadata.Unicode.kerning=p.kerning);var g=d.Unicode[u.postScriptName];g&&(u.metadata.Unicode.encoding=g,u.encoding=g.codePages[0])}])}(Ht.API),function(e){var t=function(r){for(var s=r.length,a=new Uint8Array(s),i=0;i<s;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var s=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Mp(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,s)}}])}(Ht),Ht.API.addSvgAsImage=function(e,t,r,s,a,i,o,l){if(isNaN(t)||isNaN(r))throw es.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw es.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=a;var A=c.getContext("2d");A.fillStyle="#fff",A.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(er.canvg?Promise.resolve(er.canvg):e1(()=>import("./index.es-CfYTnCHQ.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load canvg: "+f))}).then(function(f){return f.default?f.default:f}).then(function(f){return f.fromString(A,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(f){return f.render(d)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),t,r,s,a,o,l)})},Ht.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(t,r);return this},Ht.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],A=0,d=0,h=0;function f(p,g){var w,v=!1;for(w=0;w<p.length;w+=1)p[w]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var u=l.length;for(h=0;h<u;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Mr(e)==="object"){for(a in e)if(i=e[a],f(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&f(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(A=0;A<i.length;A+=1)if(s=!0,i[A].length===1&&typeof i[A][0]=="number")c.push(String(i[A]-1));else if(i[A].length>1){for(d=0;d<i[A].length;d+=1)typeof i[A][d]!="number"&&(s=!1);s===!0&&c.push([i[A][0]-1,i[A][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,g=[];for(p in r)r[p].explicitSet===!0&&(r[p].type==="name"?g.push("/"+p+" /"+r[p].value):g.push("/"+p+" "+r[p].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),A=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+A+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Ht.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,A=["","0","00","000","0000"],d=[""],h=0,f=i.length;h<f;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(A[4-l.length],l)}return d.join("")},s=function(i){var o,l,c,A,d,h,f;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(i).sort(function(u,p){return u-p})).length;h<f;h++)o=l[h],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(A=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+A+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,A=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),u="",p=0;p<f.length;p++)u+=String.fromCharCode(f[p]);var g=A();d({data:u,addLength1:!0,objectId:g}),c("endobj");var w=A();d({data:s(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var v=A();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+cd(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var x=A();c("<<"),c("/Type /Font"),c("/BaseFont /"+cd(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=A(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+w+" 0 R"),c("/BaseFont /"+cd(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+x+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,A=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",u=0;u<h.length;u++)f+=String.fromCharCode(h[u]);var p=A();d({data:f,addLength1:!0,objectId:p}),c("endobj");var g=A();d({data:s(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var w=A();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+p+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+cd(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=A();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+cd(l.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,A=i.y,d=i.options||{},h=i.mutex||{},f=h.pdfEscape,u=h.activeFontKey,p=h.fonts,g=u,w="",v=0,x="",y=p[g].encoding;if(p[g].encoding!=="Identity-H")return{text:l,x:c,y:A,options:d,mutex:h};for(x=l,g=u,Array.isArray(l)&&(x=l[0]),v=0;v<x.length;v+=1)p[g].metadata.hasOwnProperty("cmap")&&(o=p[g].metadata.cmap.unicode.codeMap[x[v].charCodeAt(0)]),o||x[v].charCodeAt(0)<256&&p[g].metadata.hasOwnProperty("Unicode")?w+=x[v]:w+="";var _="";return parseInt(g.slice(1))<14||y==="WinAnsiEncoding"?_=f(w,g).split("").map(function(I){return I.charCodeAt(0).toString(16)}).join(""):y==="Identity-H"&&(_=r(w,p[g])),h.isHex=!0,{text:_,x:c,y:A,options:d,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var A=0;for(A=0;A<o.length;A+=1)Array.isArray(o[A])&&o[A].length===3?l.push([a(Object.assign({},c,{text:o[A][0]})).text,o[A][1],o[A][2]]):l.push(a(Object.assign({},c,{text:o[A]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(Ht),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ht.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var a,i,o,l,c,A,d,h=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,y=0;this.__bidiEngine__={};var _=function(U){var L=U.charCodeAt(),D=L>>8,Q=g[D];return Q!==void 0?h[256*Q+(255&L)]:D===252||D===253?"AL":v.test(D)?"L":D===8?"R":"N"},I=function(U){for(var L,D=0;D<U.length;D++){if((L=_(U.charAt(D)))==="L")return!1;if(L==="R")return!0}return!1},k=function(U,L,D,Q){var K,P,te,J,V=L[Q];switch(V){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(V="AN");break;case"AL":x=!0,V="R";break;case"WS":case"BN":V="N";break;case"CS":Q<1||Q+1>=L.length||(K=D[Q-1])!=="EN"&&K!=="AN"||(P=L[Q+1])!=="EN"&&P!=="AN"?V="N":x&&(P="AN"),V=P===K?P:"N";break;case"ES":V=(K=Q>0?D[Q-1]:"B")==="EN"&&Q+1<L.length&&L[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&D[Q-1]==="EN"){V="EN";break}if(x){V="N";break}for(te=Q+1,J=L.length;te<J&&L[te]==="ET";)te++;V=te<J&&L[te]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(J=L.length,te=Q+1;te<J&&L[te]==="NSM";)te++;if(te<J){var ie=U[Q],Y=ie>=1425&&ie<=2303||ie===64286;if(K=L[te],Y&&(K==="R"||K==="AL")){V="R";break}}}V=Q<1||(K=L[Q-1])==="B"?"N":D[Q-1];break;case"B":x=!1,a=!0,V=y;break;case"S":i=!0,V="N"}return V},T=function(U,L,D){var Q=U.split("");return D&&S(Q,D,{hiLevel:y}),Q.reverse(),L&&L.reverse(),Q.join("")},S=function(U,L,D){var Q,K,P,te,J,V=-1,ie=U.length,Y=0,N=[],C=y?u:f,E=[];for(x=!1,a=!1,i=!1,K=0;K<ie;K++)E[K]=_(U[K]);for(P=0;P<ie;P++){if(J=Y,N[P]=k(U,E,N,P),Q=240&(Y=C[J][p[N[P]]]),Y&=15,L[P]=te=C[Y][5],Q>0)if(Q===16){for(K=V;K<P;K++)L[K]=1;V=-1}else V=-1;if(C[Y][6])V===-1&&(V=P);else if(V>-1){for(K=V;K<P;K++)L[K]=te;V=-1}E[P]==="B"&&(L[P]=0),D.hiLevel|=te}i&&function(O,q,se){for(var ye=0;ye<se;ye++)if(O[ye]==="S"){q[ye]=y;for(var re=ye-1;re>=0&&O[re]==="WS";re--)q[re]=y}}(E,L,ie)},B=function(U,L,D,Q,K){if(!(K.hiLevel<U)){if(U===1&&y===1&&!a)return L.reverse(),void(D&&D.reverse());for(var P,te,J,V,ie=L.length,Y=0;Y<ie;){if(Q[Y]>=U){for(J=Y+1;J<ie&&Q[J]>=U;)J++;for(V=Y,te=J-1;V<te;V++,te--)P=L[V],L[V]=L[te],L[te]=P,D&&(P=D[V],D[V]=D[te],D[te]=P);Y=J}Y++}}},R=function(U,L,D){var Q=U.split(""),K={hiLevel:y};return D||(D=[]),S(Q,D,K),function(P,te,J){if(J.hiLevel!==0&&d)for(var V,ie=0;ie<P.length;ie++)te[ie]===1&&(V=w.indexOf(P[ie]))>=0&&(P[ie]=w[V+1])}(Q,D,K),B(2,Q,L,D,K),B(1,Q,L,D,K),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(U,L,D){if(function(K,P){if(P)for(var te=0;te<K.length;te++)P[te]=te;l===void 0&&(l=I(K)),A===void 0&&(A=I(K))}(U,L),o||!c||A)if(o&&c&&l^A)y=l?1:0,U=T(U,L,D);else if(!o&&c&&A)y=l?1:0,U=R(U,L,D),U=T(U,L);else if(!o||l||c||A){if(o&&!c&&l^A)U=T(U,L),l?(y=0,U=R(U,L,D)):(y=1,U=R(U,L,D),U=T(U,L));else if(o&&l&&!c&&A)y=1,U=R(U,L,D),U=T(U,L);else if(!o&&!c&&l^A){var Q=d;l?(y=1,U=R(U,L,D),y=0,d=!1,U=R(U,L,D),d=Q):(y=0,U=R(U,L,D),U=T(U,L),y=1,d=!1,U=R(U,L,D),d=Q,U=T(U,L))}}else y=0,U=R(U,L,D);else y=l?1:0,U=R(U,L,D);return U},this.__bidiEngine__.setOptions=function(U){U&&(o=U.isInputVisual,c=U.isOutputVisual,l=U.isInputRtl,A=U.isOutputRtl,d=U.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var i=s.options||{};s.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);s.text=o}else s.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Ht),Ht.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new mc(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new aK(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new V9(this.contents),this.head=new G9(this),this.name=new Y9(this),this.cmap=new pk(this),this.toUnicode={},this.hhea=new $9(this),this.maxp=new Z9(this),this.hmtx=new eK(this),this.post=new X9(this),this.os2=new W9(this),this.loca=new nK(this),this.glyf=new tK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,A;for(A=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],A.push(Math.round(t*this.scaleFactor));return A}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var oo,mc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,a;for(a=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,a,i;for(i=[],s=0,a=t.length;s<a;s++)r=t[s],i.push(this.writeByte(r));return i},e}(),V9=function(){var e;function t(r){var s,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,a,i,o,l,c,A,d,h,f,u,p,g;for(g in u=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(u)/c),o=Math.floor(h/c),d=16*u-h,(a=new mc).writeInt(this.scalarType),a.writeShort(u),a.writeShort(h),a.writeShort(o),a.writeShort(d),i=16*u,A=a.pos+i,l=null,p=[],r)for(f=r[g],a.writeString(g),a.writeInt(e(f)),a.writeInt(A),a.writeInt(f.length),p=p.concat(f),g==="head"&&(l=A),A+=f.length;A%4;)p.push(0),A++;return a.write(p),s=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(s),a.data},e=function(r){var s,a,i,o;for(r=mk.call(r);r.length%4;)r.push(0);for(i=new mc(r),a=0,s=0,o=r.length;s<o;s=s+=4)a+=i.readUInt32();return 4294967295&a},t}(),q9={}.hasOwnProperty,Eo=function(e,t){for(var r in t)q9.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};oo=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var G9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new mc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),fN=function(){function e(t,r){var s,a,i,o,l,c,A,d,h,f,u,p,g,w,v,x,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(u=t.readUInt16(),f=u/2,t.pos+=6,i=function(){var _,I;for(I=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)I.push(t.readUInt16());return I}(),t.pos+=2,g=function(){var _,I;for(I=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)I.push(t.readUInt16());return I}(),A=function(){var _,I;for(I=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)I.push(t.readUInt16());return I}(),d=function(){var _,I;for(I=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)I.push(t.readUInt16());return I}(),a=(this.length-t.pos+this.offset)/2,l=function(){var _,I;for(I=[],c=_=0;0<=a?_<a:_>a;c=0<=a?++_:--_)I.push(t.readUInt16());return I}(),c=v=0,y=i.length;v<y;c=++v)for(w=i[c],s=x=p=g[c];p<=w?x<=w:x>=w;s=p<=w?++x:--x)d[c]===0?o=s+A[c]:(o=l[d[c]/2+(s-p)-(f-c)]||0)!==0&&(o+=A[c]),this.codeMap[s]=65535&o}t.pos=h}return e.encode=function(t,r){var s,a,i,o,l,c,A,d,h,f,u,p,g,w,v,x,y,_,I,k,T,S,B,R,U,L,D,Q,K,P,te,J,V,ie,Y,N,C,E,O,q,se,ye,re,de,Ne,z;switch(Q=new mc,o=Object.keys(t).sort(function(Be,Ve){return Be-Ve}),r){case"macroman":for(g=0,w=function(){var Be=[];for(p=0;p<256;++p)Be.push(0);return Be}(),x={0:0},i={},K=0,V=o.length;K<V;K++)x[re=t[a=o[K]]]==null&&(x[re]=++g),i[a]={old:t[a],new:x[t[a]]},w[a]=x[t[a]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(w),{charMap:i,subtable:Q.data,maxGlyphID:g+1};case"unicode":for(L=[],h=[],y=0,x={},s={},v=A=null,P=0,ie=o.length;P<ie;P++)x[I=t[a=o[P]]]==null&&(x[I]=++y),s[a]={old:I,new:x[I]},l=x[I]-a,v!=null&&l===A||(v&&h.push(v),L.push(a),A=l),v=a;for(v&&h.push(v),h.push(65535),L.push(65535),R=2*(B=L.length),S=2*Math.pow(Math.log(B)/Math.LN2,2),f=Math.log(S/2)/Math.LN2,T=2*B-S,c=[],k=[],u=[],p=te=0,Y=L.length;te<Y;p=++te){if(U=L[p],d=h[p],U===65535){c.push(0),k.push(0);break}if(U-(D=s[U].new)>=32768)for(c.push(0),k.push(2*(u.length+B-p)),a=J=U;U<=d?J<=d:J>=d;a=U<=d?++J:--J)u.push(s[a].new);else c.push(D-U),k.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*B+2*u.length),Q.writeUInt16(0),Q.writeUInt16(R),Q.writeUInt16(S),Q.writeUInt16(f),Q.writeUInt16(T),se=0,N=h.length;se<N;se++)a=h[se],Q.writeUInt16(a);for(Q.writeUInt16(0),ye=0,C=L.length;ye<C;ye++)a=L[ye],Q.writeUInt16(a);for(de=0,E=c.length;de<E;de++)l=c[de],Q.writeUInt16(l);for(Ne=0,O=k.length;Ne<O;Ne++)_=k[Ne],Q.writeUInt16(_);for(z=0,q=u.length;z<q;z++)g=u[z],Q.writeUInt16(g);return{charMap:s,subtable:Q.data,maxGlyphID:y+1}}},e}(),pk=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,s,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r=new fN(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var s,a;return r==null&&(r="macroman"),s=fN.encode(t,r),(a=new mc).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),$9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),W9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(t.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),X9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="post",e.prototype.parse=function(t){var r,s,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(s=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 262144:return this.map=(function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),J9=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Y9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="name",e.prototype.parse=function(t){var r,s,a,i,o,l,c,A,d,h,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},i=d=0,h=s.length;d<h;i=++d)a=s[i],t.pos=a.offset,A=t.readString(a.length),o=new J9(A,a),c[f=a.nameID]==null&&(c[f]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Z9=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),eK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,s,a,i,o,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var A,d;for(d=[],r=A=0;0<=a?A<a:A>a;r=0<=a?++A:--A)d.push(t.readInt16());return d}(),this.widths=(function(){var A,d,h,f;for(f=[],A=0,d=(h=this.metrics).length;A<d;A++)i=h[A],f.push(i.advance);return f}).call(this),s=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),mk=[].slice,tK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,s,a,i,o,l,c,A,d,h;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+s,o=(l=new mc(r.read(a))).readShort(),A=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=o===-1?new sK(l,A,h,c,d):new rK(l,o,A,h,c,d),this.cache[t]))},e.prototype.encode=function(t,r,s){var a,i,o,l,c;for(o=[],i=[],l=0,c=r.length;l<c;l++)a=t[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),rK=function(){function e(t,r,s,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),sK=function(){function e(t,r,s,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new mc(mk.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),nK=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,oo),e.prototype.tag="loca",e.prototype.parse=function(t){var r,s;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<r.length&&r[i]==o){++i,s[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var A=new Array(4*s.length),d=0;d<s.length;++d)A[4*d+3]=255&s[d],A[4*d+2]=(65280&s[d])>>8,A[4*d+1]=(16711680&s[d])>>16,A[4*d]=(4278190080&s[d])>>24;return A},e}(),aK=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)s=i[r],t[r]=a[s];return t},e.prototype.glyphsFor=function(t){var r,s,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(s=a[i])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))s=c[i],a[i]=s;return a},e.prototype.encode=function(t,r){var s,a,i,o,l,c,A,d,h,f,u,p,g,w,v;for(a in s=pk.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),u={0:0},v=s.charMap)u[(c=v[a]).old]=c.new;for(p in f=s.maxGlyphID,o)p in u||(u[p]=f++);return d=function(x){var y,_;for(y in _={},x)_[x[y]]=y;return _}(u),h=Object.keys(d).sort(function(x,y){return x-y}),g=function(){var x,y,_;for(_=[],x=0,y=h.length;x<y;x++)l=h[x],_.push(d[l]);return _}(),i=this.font.glyf.encode(o,g,u),A=this.font.loca.encode(i.offsets,g),w={cmap:this.font.cmap.raw(),glyf:i.table,loca:A,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},e}();Ht.API.PDFObject=function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,A;for(A=[],l=0,c=r.length;l<c;l++)s=r[l],A.push(t.convert(s));return A}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function pN(){const e=Lr(),{id:t}=Hj(),[r,s]=H.useState(null),[a,i]=H.useState(!1),[o,l]=H.useState(!1),[c,A]=H.useState("cash"),[d,h]=H.useState(null),[f,u]=H.useState(null),[p,g]=H.useState(null),[w,v]=H.useState(!1),[x,y]=H.useState("cash"),[_,I]=H.useState({bank_name_ar:"",check_number:"",check_date:"",credit_due_date:""}),[k,T]=H.useState(!1),[S,B]=H.useState(null),[R,U]=H.useState({invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],clientInfo:{name:"",phone:"",address:""},items:[],subtotal:0,taxRate:0,taxAmount:0,discountAmount:0,totalAmount:0,notes:""});H.useEffect(()=>{if(Q(),t){u(t),D(t);return}K()},[]);const L=!!(r&&r.status==="delivered"&&r.payment_status==="paid");H.useEffect(()=>{L&&a&&i(!1)},[L,a]);const D=async E=>{try{const{data:O,error:q}=await we.from("invoices").select("*").eq("id",E).single();if(q)throw q;const se=O;g(se),(se.company_name||se.company_name_ar)&&h({company_name:se.company_name,company_name_ar:se.company_name_ar,address:se.company_address,address_ar:se.company_address_ar,phone:se.company_phone,email:se.company_email,website:se.company_website,ice:se.company_ice,tax_id:se.company_tax_id,logo_url:se.company_logo_url});const re=(Array.isArray(se.items)?se.items:[]).map(de=>({description:String(de.description??de.description_ar??""),quantity:Number(de.quantity??0),unitPrice:Number(de.unitPrice??de.unit_price??0),total:Number(de.total??de.line_total??0)}));if(U(de=>({...de,invoiceNumber:se.invoice_number||"",invoiceDate:se.invoice_date||de.invoiceDate,dueDate:se.due_date||de.dueDate,clientInfo:{name:se.client_name||"",phone:se.client_phone||"",address:se.client_address||""},items:re,subtotal:Number(se.subtotal??0),taxRate:Number(se.tax_rate??de.taxRate),taxAmount:Number(se.tax_amount??0),discountAmount:Number(se.discount_amount??0),totalAmount:Number(se.total_amount??0),notes:se.notes||""})),se.order_id){const{data:de,error:Ne}=await we.from("orders").select("id, order_number, client_id, status, payment_status, payment_method, order_date, total_amount, discount_amount, tax_amount").eq("id",se.order_id).maybeSingle();Ne?console.error("Error loading order for invoice lock:",Ne):de&&s(de)}}catch(O){console.error("Error loading invoice:",O),alert("  "),e("/invoices")}},Q=async()=>{try{const{data:E,error:O}=await we.from("company_info").select("*").order("updated_at",{ascending:!1}).limit(1).maybeSingle();if(E&&!O){h(E),localStorage.setItem("companyInfo",JSON.stringify(E));return}const q=localStorage.getItem("companyInfo");h(q?JSON.parse(q):null)}catch(E){console.error("Error fetching company info:",E)}},K=async()=>{var O,q,se,ye,re;const E=sessionStorage.getItem("invoiceOrderData");if(E){let de=JSON.parse(E);if(!de.client&&(de.client_id||(O=de.client)!=null&&O.id)){const Re=de.client_id||((q=de.client)==null?void 0:q.id);try{const{data:Ye,error:ze}=await we.from("clients").select("id, company_name_ar, company_name_en, contact_person_phone, address, city").eq("id",Re).maybeSingle();ze?console.error("Error fetching client for invoice:",ze):Ye&&(de.client=Ye)}catch(Ye){console.error("Unexpected error fetching client for invoice:",Ye)}}if(!de.items||de.items.length===0)try{const{data:Re,error:Ye}=await we.from("order_items").select(`
              id,
              product_id,
              product_name_ar,
              product_sku,
              quantity,
              unit_price,
              line_total,
              product:products(id, name_ar, sku, image_url)
            `).eq("order_id",de.id);Ye?console.error("Error fetching order items:",Ye):de.items=Re||[]}catch(Re){console.error("Error fetching order items:",Re)}s(de);const Ne=((se=de.items)==null?void 0:se.map(Re=>{var Ye;return{description:((Ye=Re.product)==null?void 0:Ye.name_ar)||Re.product_name_ar||Re.name_ar||Re.description||"Produit sans nom",quantity:Re.quantity,unitPrice:Re.unit_price,total:Re.line_total}}))||[],z=Ne.reduce((Re,Ye)=>Re+Ye.total,0),Be=(r==null?void 0:r.tva_rate)||0,Ve=(r==null?void 0:r.tax_amount)||z*(Be/100),ne=(r==null?void 0:r.final_amount)||z+Ve-((r==null?void 0:r.discount_amount)||0);let Me="";(ye=de.client)!=null&&ye.address?(Me=de.client.address,(re=de.client)!=null&&re.city&&(Me=`${Me}, ${de.client.city}`)):de.shipping_address?(Me=[de.shipping_address.street,de.shipping_address.city,de.shipping_address.postal_code,de.shipping_address.country].filter(Ye=>Ye&&Ye.trim()!=="").join(", "),!Me&&de.delivery_address&&(Me=de.delivery_address)):de.delivery_address&&(Me=de.delivery_address),U(Re=>{var Ye,ze,yt;return{...Re,invoiceNumber:`FAC-${de.order_number}`,clientInfo:{name:((Ye=de.client)==null?void 0:Ye.company_name_ar)||((ze=de.client)==null?void 0:ze.company_name_en)||"",phone:((yt=de.client)==null?void 0:yt.contact_person_phone)||de.phone||"",address:Me},items:Ne,subtotal:z,taxAmount:Ve,taxRate:Be,discountAmount:(r==null?void 0:r.discount_amount)||0,totalAmount:ne,notes:(r==null?void 0:r.notes)||""}})}},P=(E,O,q)=>{const se=[...R.items];se[E]={...se[E],[O]:q};const ye=se.reduce((Ne,z)=>Ne+z.total,0),re=ye*(R.taxRate/100),de=ye+re-R.discountAmount;U(Ne=>({...Ne,items:se,subtotal:ye,taxAmount:re,totalAmount:de}))},te=()=>{const E={description:"",quantity:1,unitPrice:0,total:0},O=[...R.items,E];U(q=>({...q,items:O}))},J=E=>{const O=R.items.filter((re,de)=>de!==E),q=O.reduce((re,de)=>re+de.total,0),se=q*(R.taxRate/100),ye=q+se-R.discountAmount;U(re=>({...re,items:O,subtotal:q,taxAmount:se,totalAmount:ye}))},V=E=>{const O=R.subtotal*(E/100),q=R.subtotal+O-R.discountAmount;U(se=>({...se,taxRate:E,taxAmount:O,totalAmount:q}))},ie=()=>{const E=`
      @media print {
        @page {
          size: portrait;
          margin: 3mm;
        }
        body * {
          visibility: hidden;
        }
        #invoice-content, #invoice-content * {
          visibility: visible;
        }
        #invoice-content {
          position: absolute;
          right: 3mm;
          top: 3mm;
          bottom: auto;
          width: calc(100% - 6mm);
        }
      }
    `,O=document.createElement("style");O.innerHTML=E,document.head.appendChild(O),window.print(),setTimeout(()=>{document.head.removeChild(O)},1e3)},Y=async()=>{const E=document.getElementById("invoice-content");if(E)try{const O=E.style.cssText;E.style.cssText=`
        transform: scale(1.45);
        transform-origin: top right;
        width: calc(100% + 40px);
        max-width: 235mm;
        margin: 0 auto;
        padding: 1mm;
        box-sizing: border-box;
        background: white;
        position: relative;
        left: 50px;
        top: 0;
        right: 0;
        bottom: auto;
        transform-origin: top right;
      `;const q=await $2(E,{scale:3,useCORS:!0,allowTaint:!0,width:834,height:1123,windowWidth:834,windowHeight:1123,backgroundColor:"#ffffff",scrollX:0,scrollY:0,x:0,y:0});E.style.cssText=O;const se=q.toDataURL("image/png",1),ye=new Ht("p","mm","a4"),re=ye.internal.pageSize.getWidth(),de=ye.internal.pageSize.getHeight(),Ne=re+10.6,z=de*.95,Be=re-Ne+13.3;ye.addImage(se,"PNG",Be,10,Ne,z,"","FAST"),ye.save(`facture_${R.invoiceNumber}.pdf`)}catch(O){console.error("Error generating PDF:",O),alert("     PDF")}},N=E=>{B(E),T(!0)},C=async()=>{var E,O,q,se,ye;if(L){alert("          ");return}try{if(!d){alert("    ");return}let re=R.clientInfo.name||"";if(!re){if(re=((E=r==null?void 0:r.client)==null?void 0:E.company_name_ar)||((O=r==null?void 0:r.client)==null?void 0:O.company_name_en)||"",!re){const jt=(r==null?void 0:r.client_id)||((q=r==null?void 0:r.client)==null?void 0:q.id);if(jt)try{const{data:gt}=await we.from("clients").select("company_name_ar, company_name_en").eq("id",jt).maybeSingle();re=(gt==null?void 0:gt.company_name_ar)||(gt==null?void 0:gt.company_name_en)||""}catch{}}if(re)U(jt=>({...jt,clientInfo:{...jt.clientInfo,name:re}}));else{alert("   ");return}}if(R.items.length===0||R.items.every(it=>!it.description)){alert("   ");return}const de=!!f,Ne=de&&(p==null?void 0:p.currency)||"MAD",z=de?(p==null?void 0:p.client_id)||(r==null?void 0:r.client_id)||((se=r==null?void 0:r.client)==null?void 0:se.id)||"00000000-0000-0000-0000-000000000000":(r==null?void 0:r.client_id)||((ye=r==null?void 0:r.client)==null?void 0:ye.id)||"00000000-0000-0000-0000-000000000000",Be=x,Ve=x==="credit"?"unpaid":"paid",ne=x==="credit"?"sent":"paid",Me={invoice_number:R.invoiceNumber,invoice_date:R.invoiceDate,due_date:R.dueDate,client_id:z,client_name:re,client_phone:R.clientInfo.phone,client_address:R.clientInfo.address,company_name:d.company_name,company_name_ar:d.company_name_ar,company_address:d.address,company_address_ar:d.address_ar,company_phone:d.phone,company_email:d.email},Re={invoice_number:R.invoiceNumber,invoice_date:R.invoiceDate,due_date:R.dueDate,client_id:z,client_name:re||null,client_phone:R.clientInfo.phone,client_address:R.clientInfo.address,subtotal:R.subtotal,tax_rate:R.taxRate,tax_amount:R.taxAmount,discount_amount:R.discountAmount,total_amount:R.totalAmount,notes:R.notes,status:ne,payment_method:Be,items:R.items,created_at:new Date().toISOString()};r!=null&&r.id&&(Re.order_id=r.id,Re.order_number=r.order_number),x==="check"&&(Re.bank_name=_.bank_name_ar,Re.check_number=_.check_number,Re.check_date=_.check_date),x==="credit"&&(Re.credit_due_date=_.credit_due_date);const Ye=async it=>await we.from("invoices").insert(it).select().single();let{data:ze,error:yt}=await Ye(Re);if(yt){const it=String((yt==null?void 0:yt.message)||""),jt=String((yt==null?void 0:yt.code)||"");if(jt==="PGRST204"||jt==="42703"||it.includes("Could not find the '")){const pt={...Re};delete pt.items,delete pt.payment_method,delete pt.discount_amount,delete pt.created_at,delete pt.bank_name,delete pt.check_number,delete pt.check_date,delete pt.credit_due_date,{data:ze,error:yt}=await Ye(pt)}}if(yt)throw console.error("Error saving invoice:",yt),yt;if(ze!=null&&ze.id)try{const jt=x==="cash"||x==="check"?{paid_amount:R.totalAmount,remaining_amount:0,payment_status:"paid"}:{paid_amount:0,remaining_amount:R.totalAmount,payment_status:"credit"},gt=async ot=>await we.from("invoices").update(ot).eq("id",ze.id);let{error:pt}=await gt(jt);if(pt){const ot=String((pt==null?void 0:pt.message)||""),Et=String((pt==null?void 0:pt.code)||"");if(Et==="PGRST204"||Et==="42703"||ot.includes("Could not find the '")){const nt={...jt};delete nt.paid_amount,delete nt.remaining_amount,delete nt.payment_status,{error:pt}=await gt(nt)}}pt&&console.warn("Could not update invoice payment fields:",pt)}catch(it){console.warn("Could not update invoice payment fields:",it)}let mt=r==null?void 0:r.id,at=r==null?void 0:r.order_number;if(!mt){const it=sessionStorage.getItem("invoiceOrderData");if(it){const jt=JSON.parse(it);mt=jt.id,at=jt.order_number}}if(mt)try{const it={payment_status:Ve,payment_method:Be},jt=async pt=>await we.from("orders").update(pt).eq("id",mt);let{error:gt}=await jt(it);if(gt){const pt=String((gt==null?void 0:gt.message)||""),ot=String((gt==null?void 0:gt.code)||"");(ot==="PGRST204"||ot==="42703"||pt.includes("Could not find the '"))&&(gt=(await jt({payment_status:Ve})).error)}if(gt)throw console.error(" Error updating order:",gt),gt}catch(it){console.warn("Could not update order from invoice confirmation:",it)}else if(at)try{const it={payment_status:Ve,payment_method:Be},jt=async pt=>await we.from("orders").update(pt).eq("order_number",at);let{error:gt}=await jt(it);if(gt){const pt=String((gt==null?void 0:gt.message)||""),ot=String((gt==null?void 0:gt.code)||"");(ot==="PGRST204"||ot==="42703"||pt.includes("Could not find the '"))&&(gt=(await jt({payment_status:Ve})).error)}if(gt)throw console.error(" Error updating order by order_number:",gt),gt}catch(it){console.warn("Could not update order by order_number from invoice confirmation:",it)}else console.warn(" No order ID or order_number found - cannot update order payment status");if(x!=="credit")try{const it={order_id:mt||null,invoice_id:ze.id,payment_number:`PAY-${Date.now()}`,client_id:z,amount:R.totalAmount,payment_method:Be,payment_date:new Date().toISOString().split("T")[0],status:"completed"};x==="check"&&_.check_number&&(it.check_bank=_.bank_name_ar,it.check_number=_.check_number,it.check_deposit_date=_.check_date),await we.from("payments").insert(it)}catch(it){console.warn("Could not insert payment from invoice confirmation:",it)}v(!1),window.dispatchEvent(new CustomEvent("payment-updated",{detail:{orderId:mt||null,invoiceId:ze.id,paymentStatus:Ve,paymentMethod:Be}})),window.dispatchEvent(new CustomEvent("order-payment-updated",{detail:{orderId:mt||null,invoiceId:ze.id,paymentStatus:Ve,paymentMethod:Be}})),alert("   "),e("/orders")}catch(re){console.error("Error confirming sale:",re),alert(`    : ${(re==null?void 0:re.message)||"  "}`)}};return!r&&!t?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-500 mb-4",children:"   "}),n.jsx("button",{onClick:()=>e("/orders"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:" "})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>e(t?"/invoices":"/orders"),className:"p-2 text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-100",children:n.jsx(Cn,{size:20})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:L?" ":t?" ":" "})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[!L&&(a?n.jsxs("button",{onClick:()=>i(!1),className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[n.jsx(rl,{size:16}),n.jsx("span",{children:""})]}):n.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[n.jsx(w3,{size:16}),n.jsx("span",{children:""})]})),!L&&n.jsxs("button",{onClick:()=>{y("cash"),v(!0)},className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[n.jsx(rl,{size:16}),n.jsx("span",{children:" "})]}),n.jsxs("button",{onClick:Y,className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:[n.jsx(P2,{size:16}),n.jsx("span",{children:" PDF"})]}),n.jsxs("button",{onClick:ie,className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:[n.jsx(hg,{size:16}),n.jsx("span",{children:""})]})]})]})})}),n.jsx("div",{className:"max-w-5xl mx-auto p-2",children:n.jsxs("div",{id:"invoice-content",className:"bg-white rounded-lg shadow-lg p-4",style:{direction:"rtl",fontSize:"12px"},children:[n.jsx("div",{className:"border-b-4 border-blue-600 pb-3 mb-3",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-1",children:""}),n.jsxs("p",{className:"text-gray-600 text-sm",children:[" : ",R.invoiceNumber]})]}),n.jsx("div",{className:"text-left bg-blue-50 p-2 rounded-lg",children:n.jsxs("p",{className:"text-gray-700 font-semibold text-xs",children:[": ",R.invoiceDate]})})]})}),n.jsx("div",{className:"mb-4 bg-gray-50 p-2 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-bold text-gray-900 mb-1",children:" "}),n.jsxs("div",{className:"flex items-start space-x-2",children:[(d==null?void 0:d.logo_url)&&n.jsx("img",{src:d.logo_url,alt:"Company Logo",className:"w-10 h-10 object-contain rounded"}),n.jsxs("div",{className:"text-xs",children:[n.jsx("p",{className:"text-gray-700 font-semibold",children:(d==null?void 0:d.company_name_ar)||""}),n.jsx("p",{className:"text-gray-600",children:(d==null?void 0:d.address_ar)||""}),n.jsxs("p",{className:"text-gray-600",children:[": ",(d==null?void 0:d.phone)||""]}),n.jsxs("p",{className:"text-gray-600",children:[": ",(d==null?void 0:d.email)||""]}),(d==null?void 0:d.website)&&n.jsxs("p",{className:"text-gray-600",children:[": ",d.website]}),(d==null?void 0:d.ice)&&n.jsxs("p",{className:"text-gray-600",children:["ICE: ",d.ice]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:" "}),a?n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{type:"text",value:R.clientInfo.name,onChange:E=>U(O=>({...O,clientInfo:{...O.clientInfo,name:E.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}),n.jsx("input",{type:"text",value:R.clientInfo.phone,onChange:E=>U(O=>({...O,clientInfo:{...O.clientInfo,phone:E.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}),n.jsx("input",{type:"text",value:R.clientInfo.address,onChange:E=>U(O=>({...O,clientInfo:{...O.clientInfo,address:E.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:""})]}):n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-gray-700 font-semibold",children:R.clientInfo.name}),n.jsx("p",{className:"text-gray-600",children:R.clientInfo.phone}),n.jsx("p",{className:"text-gray-600",children:R.clientInfo.address})]})]})]})}),a&&n.jsx("div",{className:"mb-4 bg-gray-50 p-3 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[n.jsx("label",{className:"text-sm font-semibold text-gray-700",children:" :"}),n.jsxs("select",{value:R.taxRate,onChange:E=>V(Number(E.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[n.jsx("option",{value:0,children:"  (0%)"}),n.jsx("option",{value:7,children:" 7%"}),n.jsx("option",{value:10,children:" 10%"}),n.jsx("option",{value:20,children:" 20%"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:["(",(R.subtotal*(R.taxRate/100)).toFixed(2)," MAD)"]})]})}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h3",{className:"text-base font-bold text-gray-900",children:" "}),a&&n.jsx("button",{onClick:te,className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700 transition",children:"+  "})]}),n.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border border-gray-300 px-2 py-1 text-right font-bold text-gray-900",children:""}),n.jsx("th",{className:"border border-gray-300 px-2 py-1 text-center font-bold text-gray-900",children:""}),n.jsx("th",{className:"border border-gray-300 px-2 py-1 text-right font-bold text-gray-900",children:" (MAD)"}),n.jsx("th",{className:"border border-gray-300 px-2 py-1 text-right font-bold text-gray-900",children:" (MAD)"}),a&&n.jsx("th",{className:"border border-gray-300 px-2 py-1 text-center font-bold text-gray-900",children:""})]})}),n.jsx("tbody",{children:R.items.map((E,O)=>n.jsxs("tr",{className:`hover:bg-gray-50 ${a?"":"cursor-pointer"}`,onClick:()=>!a&&N(E),children:[n.jsx("td",{className:"border border-gray-300 px-2 py-1",children:a?n.jsx("input",{type:"text",value:E.description,onChange:q=>P(O,"description",q.target.value),className:"w-full px-1 py-0 border border-gray-200 rounded text-xs"}):n.jsx("span",{className:"font-medium text-xs",children:E.description})}),n.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center",children:a?n.jsx("input",{type:"number",value:E.quantity,onChange:q=>{const se=parseInt(q.target.value)||0,ye=se*E.unitPrice;P(O,"quantity",se),P(O,"total",ye)},className:"w-12 px-1 py-0 border border-gray-200 rounded text-center text-xs"}):n.jsx("span",{className:"font-semibold text-xs",children:E.quantity})}),n.jsx("td",{className:"border border-gray-300 px-2 py-1 text-right",children:a?n.jsx("input",{type:"number",value:E.unitPrice,onChange:q=>{const se=parseFloat(q.target.value)||0,ye=E.quantity*se;P(O,"unitPrice",se),P(O,"total",ye)},className:"w-16 px-1 py-0 border border-gray-200 rounded text-right text-xs"}):n.jsx("span",{className:"font-semibold text-xs",children:E.unitPrice.toFixed(2)})}),n.jsx("td",{className:"border border-gray-300 px-2 py-1 text-right font-bold text-xs",children:E.total.toFixed(2)}),a&&n.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center",children:n.jsx("button",{onClick:q=>{q.stopPropagation(),J(O)},className:"text-red-600 hover:text-red-800 font-semibold text-xs",children:""})})]},O))})]})})]}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"flex justify-end",children:n.jsx("div",{className:"w-full md:w-1/3",children:n.jsxs("div",{className:"bg-gray-50 p-2 rounded space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsxs("span",{className:"font-semibold",children:[R.subtotal.toFixed(2)," MAD"]})]}),R.taxRate>0&&n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsxs("span",{className:"text-gray-600",children:["   (",R.taxRate,"%):"]}),n.jsxs("span",{className:"font-semibold",children:[R.taxAmount.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-semibold",children:["-",R.discountAmount.toFixed(2)," MAD"]})]}),n.jsx("div",{className:"border-t pt-1",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-bold text-sm",children:":"}),n.jsxs("span",{className:"font-bold text-sm text-blue-600",children:[R.totalAmount.toFixed(2)," MAD"]})]})})]})})})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-base font-semibold mb-1",children:""}),a?n.jsx("textarea",{value:R.notes,onChange:E=>U(O=>({...O,notes:E.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-xs",rows:1}):n.jsx("div",{className:"bg-gray-50 p-2 rounded",children:n.jsx("p",{className:"text-gray-700 text-xs",children:R.notes})})]}),n.jsx("div",{className:"mt-4 pt-2 border-t border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 font-semibold text-xs",children:"  !"}),n.jsxs("p",{className:"text-gray-500 text-xs mt-0",children:["       ",(d==null?void 0:d.company_name_ar)||""]})]}),(d==null?void 0:d.bank_name)&&n.jsxs("div",{className:"text-left text-xs",children:[n.jsx("p",{className:"font-semibold text-gray-700 mb-0",children:" :"}),n.jsxs("p",{className:"text-gray-600",children:[": ",d.bank_name]}),d.bank_iban&&n.jsxs("p",{className:"text-gray-600",children:["IBAN: ",d.bank_iban]}),d.bank_account&&n.jsxs("p",{className:"text-gray-600",children:[": ",d.bank_account]})]})]})})]})}),w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",onClick:()=>v(!1),children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[420px] max-w-[92vw] p-6",onClick:E=>E.stopPropagation(),children:[n.jsx("div",{className:"text-center mb-6",children:n.jsx("span",{className:"inline-block bg-gray-200 text-gray-800 font-bold px-4 py-2 rounded-md",children:" "})}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("button",{onClick:()=>{y("cash"),I({bank_name_ar:"",check_number:"",check_date:"",credit_due_date:""})},className:`w-full py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3 ${x==="cash"?"bg-green-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:[n.jsx(Sr,{size:20}),""]}),n.jsxs("button",{onClick:()=>{y("check"),I({bank_name_ar:"",check_number:"",check_date:"",credit_due_date:""})},className:`w-full py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3 ${x==="check"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:[n.jsx(Gs,{size:20}),""]}),n.jsxs("button",{onClick:()=>{y("credit"),I({bank_name_ar:"",check_number:"",check_date:"",credit_due_date:""})},className:`w-full py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3 ${x==="credit"?"bg-orange-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:[n.jsx(Hr,{size:20})," ()"]})]}),x==="check"&&n.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),n.jsxs("select",{value:_.bank_name_ar,onChange:E=>I({..._,bank_name_ar:E.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",children:[n.jsx("option",{value:"",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:"  ",children:"  "}),n.jsx("option",{value:"  ",children:"  "}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:"   ",children:"   "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:"HSBC",children:"HSBC"}),n.jsx("option",{value:"BMCE",children:"BMCE"}),n.jsx("option",{value:"CIH",children:"CIH"}),n.jsx("option",{value:" ",children:" "})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:_.check_number,onChange:E=>I({..._,check_number:E.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"  "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"date",value:_.check_date,onChange:E=>I({..._,check_date:E.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]})]}),x==="credit"&&n.jsx("div",{className:"space-y-4 mb-6 p-4 bg-orange-50 rounded-lg",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"  "}),n.jsx("input",{type:"date",value:_.credit_due_date,onChange:E=>I({..._,credit_due_date:E.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:outline-none"})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>{if(x==="check"&&(!_.bank_name_ar||!_.check_number||!_.check_date)){alert("    ");return}if(x==="credit"&&!_.credit_due_date){alert("    ");return}v(!1),C()},className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3",children:[n.jsx(Jd,{size:20})," "]}),n.jsxs("button",{onClick:()=>v(!1),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-4 rounded-lg font-bold text-lg transition-colors flex items-center justify-center gap-3",children:[n.jsx(Xa,{size:20}),""]})]})]})}),k&&S&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",onClick:()=>T(!1),children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[400px] max-w-[92vw] p-6",onClick:E=>E.stopPropagation(),children:[n.jsx("div",{className:"text-center mb-6",children:n.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 font-bold px-4 py-2 rounded-md",children:" "})}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:S.description})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),n.jsx("p",{className:"text-xl font-bold text-blue-600",children:S.quantity})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"  (MAD)"}),n.jsx("p",{className:"text-xl font-bold text-green-600",children:S.unitPrice.toFixed(2)})]})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border-2 border-blue-200",children:[n.jsx("label",{className:"block text-sm font-bold text-blue-700 mb-2",children:" (MAD)"}),n.jsx("p",{className:"text-2xl font-bold text-blue-800",children:S.total.toFixed(2)})]})]}),n.jsx("div",{className:"flex gap-3",children:n.jsx("button",{onClick:()=>T(!1),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold text-lg transition-colors",children:""})})]})})]})}function iK(){const e=Lr(),[t,r]=H.useState(null),[s,a]=H.useState(!1),[i,o]=H.useState(null),[l,c]=H.useState({noteNumber:"",deliveryDate:new Date().toISOString().split("T")[0],clientInfo:{name:"",phone:"",address:""},items:[],notes:"     ",deliveredBy:"",receivedBy:""});H.useEffect(()=>{A(),d()},[]);const A=async()=>{try{const{data:v,error:x}=await we.from("company_info").select("*").order("updated_at",{ascending:!1}).limit(1).maybeSingle();if(v&&!x){o(v),localStorage.setItem("companyInfo",JSON.stringify(v));return}const y=localStorage.getItem("companyInfo");o(y?JSON.parse(y):null)}catch(v){console.error("Error fetching company info:",v)}},d=()=>{var x;const v=sessionStorage.getItem("deliveryNoteOrderData");if(v){const y=JSON.parse(v);r(y);const _=((x=y.items)==null?void 0:x.map(I=>({description:I.product_sku?`${I.product_sku} - ${I.product_name_ar}`:I.product_name_ar||"",quantity:I.quantity,unit:"",condition:""})))||[];c(I=>{var k,T;return{...I,noteNumber:`BL-${y.order_number}`,clientInfo:{name:((k=y.client)==null?void 0:k.company_name_ar)||"",phone:y.phone||((T=y.client)==null?void 0:T.contact_person_phone)||"",address:""},items:_}})}},h=(v,x,y)=>{const _=[...l.items];_[v]={..._[v],[x]:y},c(I=>({...I,items:_}))},f=()=>{const v={description:"",quantity:1,unit:"",condition:""};c(x=>({...x,items:[...x.items,v]}))},u=v=>{const x=l.items.filter((y,_)=>_!==v);c(y=>({...y,items:x}))},p=()=>{const v=`
      @media print {
        @page {
          size: portrait;
          margin: 5mm;
        }
        body * {
          visibility: hidden;
        }
        .bg-white.rounded-lg.shadow-lg.p-8, .bg-white.rounded-lg.shadow-lg.p-8 * {
          visibility: visible;
        }
        .bg-white.rounded-lg.shadow-lg.p-8 {
          position: absolute;
          right: 5mm;
          top: 5mm;
          left: 5mm;
          width: calc(100% - 10mm);
          box-shadow: none;
          border-radius: 0;
        }
        /* Hide buttons during print */
        button {
          display: none !important;
        }
        /* Ensure proper text direction */
        .bg-white.rounded-lg.shadow-lg.p-8 {
          direction: rtl;
        }
      }
    `,x=document.createElement("style");x.innerHTML=v,document.head.appendChild(x),window.print(),setTimeout(()=>{document.head.removeChild(x)},1e3)},g=async()=>{if(!i){alert("    ");return}if(!l.clientInfo.name){alert("   ");return}if(l.items.length===0||l.items.every(v=>!v.description)){alert("   ");return}try{const v={note_number:l.noteNumber,delivery_date:l.deliveryDate,client_name:l.clientInfo.name,client_phone:l.clientInfo.phone,client_address:l.clientInfo.address,company_name:i.company_name,company_name_ar:i.company_name_ar,company_address:i.address,company_address_ar:i.address_ar,company_phone:i.phone,company_email:i.email,company_website:i.website,company_ice:i.ice,company_logo_url:i.logo_url,order_id:(t==null?void 0:t.id)||null,order_number:(t==null?void 0:t.order_number)||null,items:l.items,notes:l.notes,status:"draft"},{error:x}=await we.from("delivery_notes").insert([v]);if(x)throw x;alert("    "),e("/delivery-notes")}catch(v){console.error("Error saving delivery note:",v),alert("   : "+(v.message||"  "))}},w=async()=>{const v=document.querySelector(".bg-white.rounded-lg.shadow-lg.p-8");if(v)try{const x=document.querySelector('button[class*="bg-purple-600"]'),y=(x==null?void 0:x.innerHTML)||"";x&&(x.innerHTML='<span class="animate-spin"></span>  ...',x.disabled=!0);const _=v.style.cssText;v.style.cssText=`
        width: 210mm;
        max-width: 210mm;
        margin: 0;
        padding: 15mm;
        box-sizing: border-box;
        background: white;
        box-shadow: none;
        border-radius: 0;
        overflow: visible;
      `,await new Promise(L=>setTimeout(L,100));const I=await $2(v,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:794,height:1123,windowWidth:794,windowHeight:1123,scrollX:0,scrollY:0});v.style.cssText=_;const k=I.toDataURL("image/png",.95),T=new Ht("p","mm","a4"),S=T.internal.pageSize.getWidth(),B=T.internal.pageSize.getHeight(),R=S,U=I.height*S/I.width;if(U>B){const L=Math.ceil(U/B);for(let D=0;D<L;D++){D>0&&T.addPage();const Q=-D*B;T.addImage(k,"PNG",0,Q,S,U,void 0,"FAST")}}else{const L=(B-U)/2;T.addImage(k,"PNG",0,L,S,U,void 0,"FAST")}T.save(`bon_livraison_${l.noteNumber}.pdf`),x&&(x.innerHTML=y,x.disabled=!1)}catch(x){console.error("Error generating PDF:",x),alert("     PDF");const y=document.querySelector('button[class*="bg-purple-600"]');y&&(y.innerHTML=originalContent,y.disabled=!1)}};return t?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>e("/orders"),className:"p-2 text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-100",children:n.jsx(Cn,{size:20})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[s?n.jsxs("button",{onClick:()=>{g(),a(!1)},className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[n.jsx(rl,{size:16}),n.jsx("span",{children:""})]}):n.jsxs("button",{onClick:()=>a(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[n.jsx(w3,{size:16}),n.jsx("span",{children:""})]}),n.jsxs("button",{onClick:g,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[n.jsx(rl,{size:16}),n.jsx("span",{children:""})]}),n.jsxs("button",{onClick:p,className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:[n.jsx(hg,{size:16}),n.jsx("span",{children:""})]}),n.jsxs("button",{onClick:w,className:"flex items-center space-x-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",children:[n.jsx(P2,{size:16}),n.jsx("span",{children:""})]})]})]})})}),n.jsx("div",{className:"max-w-4xl mx-auto p-8",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[n.jsx("div",{className:"border-b-4 border-green-600 pb-6 mb-6",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-2",children:" "}),n.jsxs("p",{className:"text-gray-600 text-lg",children:[" : ",l.noteNumber]})]}),n.jsx("div",{className:"text-left bg-green-50 p-4 rounded-lg",children:n.jsxs("p",{className:"text-gray-700 font-semibold mb-1",children:[": ",l.deliveryDate]})})]})}),n.jsx("div",{className:"mb-8 bg-gray-50 p-4 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:" "}),n.jsxs("div",{className:"flex items-start space-x-4",children:[(i==null?void 0:i.logo_url)&&n.jsx("img",{src:i.logo_url,alt:"Company Logo",className:"w-16 h-16 object-contain rounded"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-700 font-semibold",children:(i==null?void 0:i.company_name_ar)||""}),n.jsx("p",{className:"text-gray-600",children:(i==null?void 0:i.address_ar)||""}),n.jsxs("p",{className:"text-gray-600",children:[": ",(i==null?void 0:i.phone)||""]}),n.jsxs("p",{className:"text-gray-600",children:[": ",(i==null?void 0:i.email)||""]}),(i==null?void 0:i.website)&&n.jsxs("p",{className:"text-gray-600",children:[": ",i.website]}),(i==null?void 0:i.ice)&&n.jsxs("p",{className:"text-gray-600",children:["ICE: ",i.ice]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:" "}),s?n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{type:"text",value:l.clientInfo.name,onChange:v=>c(x=>({...x,clientInfo:{...x.clientInfo,name:v.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}),n.jsx("input",{type:"text",value:l.clientInfo.phone,onChange:v=>c(x=>({...x,clientInfo:{...x.clientInfo,phone:v.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}),n.jsx("input",{type:"text",value:l.clientInfo.address,onChange:v=>c(x=>({...x,clientInfo:{...x.clientInfo,address:v.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:""})]}):n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-gray-700 font-semibold",children:l.clientInfo.name}),n.jsx("p",{className:"text-gray-600",children:l.clientInfo.phone}),n.jsx("p",{className:"text-gray-600",children:l.clientInfo.address})]})]})]})}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:" "}),s&&n.jsx("button",{onClick:f,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition",children:"+  "})]}),n.jsx("div",{className:"overflow-x-auto border-2 border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border border-gray-300 px-4 py-3 text-right font-bold text-gray-900",children:""}),n.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-gray-900",children:""}),n.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-gray-900",children:""}),n.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-gray-900",children:""}),s&&n.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-gray-900",children:""})]})}),n.jsx("tbody",{children:l.items.map((v,x)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 px-4 py-3",children:s?n.jsx("input",{type:"text",value:v.description,onChange:y=>h(x,"description",y.target.value),className:"w-full px-2 py-2 border border-gray-200 rounded"}):n.jsx("span",{className:"font-medium",children:v.description})}),n.jsx("td",{className:"border border-gray-300 px-4 py-3 text-center",children:s?n.jsx("input",{type:"number",value:v.quantity,onChange:y=>h(x,"quantity",parseInt(y.target.value)||0),className:"w-20 px-2 py-2 border border-gray-200 rounded text-center"}):n.jsx("span",{className:"font-semibold",children:v.quantity})}),n.jsx("td",{className:"border border-gray-300 px-4 py-3 text-center",children:s?n.jsx("input",{type:"text",value:v.unit,onChange:y=>h(x,"unit",y.target.value),className:"w-20 px-2 py-2 border border-gray-200 rounded text-center"}):n.jsx("span",{children:v.unit})}),n.jsx("td",{className:"border border-gray-300 px-4 py-3 text-center",children:s?n.jsxs("select",{value:v.condition,onChange:y=>h(x,"condition",y.target.value),className:"w-24 px-2 py-2 border border-gray-200 rounded text-center",children:[n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"",children:""})]}):n.jsx("span",{className:"font-medium",children:v.condition})}),s&&n.jsx("td",{className:"border border-gray-300 px-4 py-3 text-center",children:n.jsx("button",{onClick:()=>u(x),className:"text-red-600 hover:text-red-800 font-semibold",children:""})})]},x))})]})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),s?n.jsx("textarea",{value:l.notes,onChange:v=>c(x=>({...x,notes:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3}):n.jsx("p",{className:"text-gray-600",children:l.notes})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  :"}),s?n.jsx("input",{type:"text",value:l.deliveredBy,onChange:v=>c(x=>({...x,deliveredBy:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}):n.jsx("div",{className:"border-b-2 border-gray-300 pb-2",children:n.jsx("p",{className:"text-gray-600",children:l.deliveredBy||"___________________"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  :"}),s?n.jsx("input",{type:"text",value:l.receivedBy,onChange:v=>c(x=>({...x,receivedBy:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}):n.jsx("div",{className:"border-b-2 border-gray-300 pb-2",children:n.jsx("p",{className:"text-gray-600",children:l.receivedBy||"___________________"})})]})]})]}),n.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-200 text-center",children:[n.jsx("p",{className:"text-gray-600 font-semibold",children:"  !"}),n.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:["       ",(i==null?void 0:i.company_name_ar)||""]})]})]})})]}):n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-500 mb-4",children:"   "}),n.jsx("button",{onClick:()=>e("/orders"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:" "})]})})}function oK(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(!0),[i,o]=H.useState(""),[l,c]=H.useState("all"),[A,d]=H.useState("all"),[h,f]=H.useState(null),[u,p]=H.useState(!1);H.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0);const{data:k,error:T}=await we.from("delivery_notes").select(`
          *,
          order:orders(
            id,
            order_number,
            status,
            payment_status
          )
        `).order("created_at",{ascending:!1});if(T)throw T;r(k||[])}catch(k){console.error("Error fetching delivery notes:",k)}finally{a(!1)}},w=t.filter(k=>{var R;const T=k.note_number.toLowerCase().includes(i.toLowerCase())||k.client_name.toLowerCase().includes(i.toLowerCase())||k.company_name_ar.toLowerCase().includes(i.toLowerCase()),S=l==="all"||k.status===l,B=A==="all"||((R=k.order)==null?void 0:R.payment_status)===A;return T&&S&&B}),v=k=>{switch(k){case"pending":return"bg-red-100 text-red-800";case"partial":return"bg-orange-100 text-orange-800";case"paid":return"bg-green-100 text-green-800";case"refunded":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},x=k=>{switch(k){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"processing":return"bg-purple-100 text-purple-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=k=>{switch(k){case"pending":return n.jsx(Hr,{className:"w-4 h-4"});case"confirmed":return n.jsx(Kr,{className:"w-4 h-4"});case"processing":return n.jsx(kr,{className:"w-4 h-4"});case"shipped":return n.jsx(ym,{className:"w-4 h-4"});case"delivered":return n.jsx(Kr,{className:"w-4 h-4"});case"cancelled":return n.jsx(sl,{className:"w-4 h-4"});default:return null}},_=k=>{const T={draft:{label:"",color:"bg-gray-100 text-gray-800"},sent:{label:"",color:"bg-blue-100 text-blue-800"},delivered:{label:"",color:"bg-green-100 text-green-800"},cancelled:{label:"",color:"bg-red-100 text-red-800"}},S=T[k]||T.draft;return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${S.color}`,children:S.label})},I=k=>{f(k),p(!0)};return s?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "})}),n.jsxs("button",{onClick:()=>e("/delivery-notes/create"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[n.jsx(ts,{size:20}),n.jsx("span",{children:"  "})]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"   ...",value:i,onChange:k=>o(k.target.value),className:"w-full pr-10 pl-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("select",{value:l,onChange:k=>c(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"pending",children:" "}),n.jsx("option",{value:"confirmed",children:""}),n.jsx("option",{value:"processing",children:" "}),n.jsx("option",{value:"shipped",children:" "}),n.jsx("option",{value:"delivered",children:" "}),n.jsx("option",{value:"cancelled",children:""})]}),n.jsxs("select",{value:A,onChange:k=>d(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"pending",children:" "}),n.jsx("option",{value:"partial",children:" "}),n.jsx("option",{value:"paid",children:""}),n.jsx("option",{value:"refunded",children:""})]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:" "}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:" "}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[n.jsx(Gs,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{children:"   "})]})}):w.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k.note_number}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(k.delivery_date).toLocaleDateString("ar-MA")}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.client_name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.company_name_ar}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.order?n.jsxs("span",{className:`px-2 py-1 text-xs rounded-full flex items-center gap-1 w-fit ${x(k.order.status)}`,children:[y(k.order.status),k.order.status==="pending"?" ":k.order.status==="confirmed"?"":k.order.status==="processing"?" ":k.order.status==="shipped"?" ":k.order.status==="delivered"?" ":k.order.status==="cancelled"?"":k.order.status]}):n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:"  "})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.order?n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v(k.order.payment_status)}`,children:k.order.payment_status==="pending"?" ":k.order.payment_status==="partial"?" ":k.order.payment_status==="paid"?"":k.order.payment_status==="refunded"?"":k.order.payment_status}):n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:"  "})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("div",{className:"flex items-left space-x-2 space-x-reverse",children:n.jsx("button",{onClick:()=>I(k),className:"text-blue-600 hover:text-blue-900",title:" ",children:n.jsx(la,{size:16})})})})]},k.id))})]})})}),u&&h&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  "}),n.jsxs("p",{className:"text-gray-600",children:[": ",h.note_number]})]}),n.jsxs("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:[n.jsx("span",{className:"sr-only",children:""}),n.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:" "}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",h.client_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",h.client_phone||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",h.client_address||""]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:" "}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",h.company_name_ar]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",new Date(h.delivery_date).toLocaleDateString("ar-MA")]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:":"})," ",_(h.status)]})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.items.map((k,T)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 text-sm",children:k.description}),n.jsx("td",{className:"px-4 py-2 text-sm",children:k.quantity}),n.jsx("td",{className:"px-4 py-2 text-sm",children:k.unit}),n.jsx("td",{className:"px-4 py-2 text-sm",children:k.condition})]},T))})]})})]}),h.notes&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),n.jsx("p",{className:"text-sm text-gray-600",children:h.notes})]})]})})})]})}function lK(){const e=Lr(),[t,r]=H.useState({company_name:"",company_name_ar:"",logo_url:"",ice:"",address:"",address_ar:"",phone:"",email:"",website:"",tax_id:"",bank_name:"",bank_iban:"",bank_account:""}),[s,a]=H.useState(!1),[i,o]=H.useState(!0),[l,c]=H.useState(!1),[A,d]=H.useState(null),[h,f]=H.useState("");H.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:x,error:y}=await we.from("company_info").select("*").single();if(y&&y.code!=="PGRST116")throw y;x&&(r(x),f(x.logo_url||""))}catch(x){console.error("Error fetching company info:",x)}finally{o(!1)}},p=x=>{var _;const y=(_=x.target.files)==null?void 0:_[0];if(y){d(y);const I=new FileReader;I.onloadend=()=>{f(I.result)},I.readAsDataURL(y)}},g=async x=>{const y=x.name.split(".").pop(),_=`company-logo-${Date.now()}.${y}`,{error:I}=await we.storage.from("logos").upload(_,x);if(I)throw I;const{data:{publicUrl:k}}=we.storage.from("logos").getPublicUrl(_);return k},w=async()=>{try{c(!0);let x=t.logo_url;A&&(x=await g(A));const y={...t,logo_url:x,updated_at:new Date().toISOString()};if(t.id){const{error:_}=await we.from("company_info").update(y).eq("id",t.id);if(_)throw _}else{const{error:_}=await we.from("company_info").insert(y);if(_)throw _}localStorage.setItem("companyInfo",JSON.stringify(y)),a(!1),d(null),alert("   ")}catch(x){console.error("Error saving company info:",x),alert("    ")}finally{c(!1)}},v=()=>{a(!1),d(null),u()};return i?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>e("/"),className:"p-2 text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-100",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "})]}),n.jsx("div",{className:"flex items-center space-x-2",children:s?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:v,className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:""}),n.jsxs("button",{onClick:w,disabled:l,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50",children:[n.jsx(rl,{size:16}),n.jsx("span",{children:l?" ...":""})]})]}):n.jsxs("button",{onClick:()=>a(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[n.jsx(no,{size:16}),n.jsx("span",{children:""})]})})]})})}),n.jsx("div",{className:"max-w-4xl mx-auto p-8",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[n.jsx("div",{className:"mb-8 text-center",children:n.jsxs("div",{className:"relative inline-block",children:[h?n.jsx("img",{src:h,alt:"Company Logo",className:"w-32 h-32 object-contain rounded-lg border-2 border-gray-200"}):n.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:n.jsx(rA,{className:"w-12 h-12 text-gray-400"})}),s&&n.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full cursor-pointer hover:bg-blue-700",children:[n.jsx(O2,{size:16}),n.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"hidden"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n.jsx(rA,{className:"w-5 h-5 ml-2"})," "]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),s?n.jsx("input",{type:"text",value:t.company_name_ar,onChange:x=>r(y=>({...y,company_name_ar:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"  "}):n.jsx("p",{className:"text-gray-900",children:t.company_name_ar||" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),s?n.jsx("input",{type:"text",value:t.company_name,onChange:x=>r(y=>({...y,company_name:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Nom de l'entreprise"}):n.jsx("p",{className:"text-gray-900",children:t.company_name||" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"   (ICE)"}),s?n.jsx("input",{type:"text",value:t.ice,onChange:x=>r(y=>({...y,ice:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"ICE"}):n.jsx("p",{className:"text-gray-900",children:t.ice||" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),s?n.jsx("input",{type:"text",value:t.tax_id,onChange:x=>r(y=>({...y,tax_id:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}):n.jsx("p",{className:"text-gray-900",children:t.tax_id||" "})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n.jsx(Uh,{className:"w-5 h-5 ml-2"})," "]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),s?n.jsx("input",{type:"tel",value:t.phone,onChange:x=>r(y=>({...y,phone:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"06xxxxxxxx"}):n.jsx("p",{className:"text-gray-900",children:t.phone||" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),s?n.jsx("input",{type:"email",value:t.email,onChange:x=>r(y=>({...y,email:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"email@company.com"}):n.jsx("p",{className:"text-gray-900",children:t.email||" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),s?n.jsx("input",{type:"url",value:t.website,onChange:x=>r(y=>({...y,website:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"https://www.company.com"}):n.jsx("p",{className:"text-gray-900",children:t.website||" "})]})]})]})]}),n.jsxs("div",{className:"mt-8",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n.jsx(bA,{className:"w-5 h-5 ml-2"}),""]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),s?n.jsx("textarea",{value:t.address_ar,onChange:x=>r(y=>({...y,address_ar:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:" "}):n.jsx("p",{className:"text-gray-900",children:t.address_ar||" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),s?n.jsx("textarea",{value:t.address,onChange:x=>r(y=>({...y,address:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"Adresse en franais"}):n.jsx("p",{className:"text-gray-900",children:t.address||" "})]})]})]}),n.jsxs("div",{className:"mt-8",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n.jsx(hA,{className:"w-5 h-5 ml-2"})," "]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),s?n.jsx("input",{type:"text",value:t.bank_name,onChange:x=>r(y=>({...y,bank_name:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}):n.jsx("p",{className:"text-gray-900",children:t.bank_name||" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IBAN"}),s?n.jsx("input",{type:"text",value:t.bank_iban,onChange:x=>r(y=>({...y,bank_iban:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"IBAN"}):n.jsx("p",{className:"text-gray-900",children:t.bank_name||" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),s?n.jsx("input",{type:"text",value:t.bank_account,onChange:x=>r(y=>({...y,bank_account:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:" "}):n.jsx("p",{className:"text-gray-900",children:t.bank_account||" "})]})]})]})]})})]})}function cK(){const[e,t]=H.useState([]),[r,s]=H.useState([]),[a,i]=H.useState([]),[o,l]=H.useState(!0),[c,A]=H.useState(""),[d,h]=H.useState(null),[f,u]=H.useState(!1),[p,g]=H.useState(!1),[w,v]=H.useState(!1),[x,y]=H.useState(null),[_,I]=H.useState({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"cash",notes:""});H.useEffect(()=>{k()},[]);const k=async()=>{try{l(!0);const{data:D}=await we.from("suppliers").select("*").order("name_ar"),{data:Q}=await we.from("purchases").select("*").eq("status","received").order("purchase_date",{ascending:!1}),{data:K}=await we.from("supplier_payments").select("*").order("payment_date",{ascending:!1});t(D||[]),s(Q||[]),i(K||[])}catch(D){console.error("Error loading data:",D)}finally{l(!1)}},T=H.useMemo(()=>e.map(D=>{const Q=r.filter(Y=>Y.supplier_id===D.id),K=a.filter(Y=>Y.supplier_id===D.id),P=Q.reduce((Y,N)=>Y+(N.total_amount||0),0),te=K.reduce((Y,N)=>Y+(N.amount||0),0),J=P-te;let V="no-debt";P>0&&(te===0?V="debt":te<P?V="partial":te>=P&&(V="paid"));const ie=K.sort((Y,N)=>new Date(N.payment_date).getTime()-new Date(Y.payment_date).getTime())[0];return{supplier:D,totalPurchases:P,totalPaid:te,remainingAmount:J,status:V,purchaseCount:Q.length,lastPaymentDate:ie==null?void 0:ie.payment_date}}).filter(D=>D.totalPurchases>0||D.totalPaid>0),[e,r,a]),S=H.useMemo(()=>c?T.filter(D=>{var Q;return D.supplier.name_ar.toLowerCase().includes(c.toLowerCase())||((Q=D.supplier.name_en)==null?void 0:Q.toLowerCase().includes(c.toLowerCase()))}):T,[T,c]),B=D=>{switch(D){case"debt":return n.jsxs("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(vs,{size:14}),""]});case"partial":return n.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(Hr,{size:14})," "]});case"paid":return n.jsxs("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(Kr,{size:14}),""]});default:return n.jsx("span",{className:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full font-bold text-sm",children:"  "})}},R=async()=>{if(!d||!_.amount){alert("   ");return}try{const{error:D}=await we.from("supplier_payments").insert({supplier_id:d.id,amount:parseFloat(_.amount),payment_date:_.payment_date,payment_method:_.payment_method,notes:_.notes});if(D)throw D;u(!1),h(null),I({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"cash",notes:""}),await k(),alert("    ")}catch(D){console.error("Error recording payment:",D),alert("     ")}},U=async(D,Q,K)=>{try{const P=r.find(Y=>Y.id===D);if(!P)return;const te=P.total_amount||0,J=K||0,V=Math.max(0,te-J),{error:ie}=await we.from("purchases").update({paid_amount:J,remaining_amount:V}).eq("id",D);if(ie){console.error("Error updating purchase status:",ie),alert("    ");return}if(J>0){const{error:Y}=await we.from("supplier_payments").insert({supplier_id:P.supplier_id,amount:J,payment_date:new Date().toISOString().split("T")[0],payment_method:"check",notes:`Purchase ${P.purchase_number} - Cheque payment`});if(Y)throw Y}s(Y=>Y.map(N=>N.id===D?{...N,payment_status:Q==="unpaid"?"pending":Q,paid_amount:J,remaining_amount:V}:N)),v(!1),await k(),alert("    ")}catch(P){console.error("Error updating cheque status:",P),alert("    ")}},L=H.useMemo(()=>{const D=S.reduce((te,J)=>J.status==="debt"||J.status==="partial"?te+J.remainingAmount:te,0),Q=S.reduce((te,J)=>te+J.totalPaid,0),K=S.filter(te=>te.status==="debt"||te.status==="partial").length,P=S.filter(te=>te.status==="paid").length;return{totalDebt:D,totalPaid:Q,debtSuppliers:K,paidSuppliers:P}},[S]);return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(hA,{className:"text-white",size:36})," "]}),n.jsx("p",{className:"text-white mt-2",children:"    "})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-100 text-sm",children:"  "}),n.jsxs("p",{className:"text-2xl font-bold",children:[L.totalDebt.toFixed(2)," MAD"]})]}),n.jsx(Sr,{className:"w-8 h-8 text-red-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-100 text-sm",children:" "}),n.jsxs("p",{className:"text-2xl font-bold",children:[L.totalPaid.toFixed(2)," MAD"]})]}),n.jsx(Kr,{className:"w-8 h-8 text-green-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-100 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:L.debtSuppliers})]}),n.jsx(vs,{className:"w-8 h-8 text-yellow-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-100 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:L.paidSuppliers})]}),n.jsx(Kr,{className:"w-8 h-8 text-blue-200"})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"  ...",value:c,onChange:D=>A(D.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:S.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"   "})}):S.map(D=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:D.supplier.name_ar}),n.jsxs("p",{className:"text-sm text-gray-500",children:[D.purchaseCount," "]})]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:"font-bold text-blue-600",children:[D.totalPurchases.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:"font-bold text-green-600",children:[D.totalPaid.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:`font-bold ${D.remainingAmount>0?"text-red-600":"text-gray-600"}`,children:[D.remainingAmount.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-4",children:B(D.status)}),n.jsx("td",{className:"px-4 py-4 text-gray-600",children:D.lastPaymentDate?new Date(D.lastPaymentDate).toLocaleDateString("ar-DZ"):" "}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{h(D.supplier),g(!0)},className:"text-blue-600 hover:text-blue-800",title:" ",children:n.jsx(la,{className:"w-4 h-4"})}),(D.status==="debt"||D.status==="partial")&&n.jsx("button",{onClick:()=>{h(D.supplier),u(!0)},className:"text-green-600 hover:text-green-800",title:" ",children:n.jsx(Sr,{className:"w-4 h-4"})})]})})]},D.supplier.id))})]})})}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(Gs,{size:24}),"  "]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(()=>{const D=r.filter(te=>te.payment_type==="check"&&te.status==="received"),Q=D.reduce((te,J)=>te+(J.total_amount||0),0),K=D.reduce((te,J)=>te+(J.paid_amount||0),0),P=Q-K;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:[n.jsx("p",{className:"text-orange-100 text-sm mb-1",children:"  "}),n.jsxs("p",{className:"text-2xl font-bold",children:[Q.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:[n.jsx("p",{className:"text-orange-100 text-sm mb-1",children:" "}),n.jsxs("p",{className:"text-2xl font-bold",children:[P.toFixed(2)," MAD"]})]})]})})()})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 text-white px-6 py-4",children:n.jsx("h3",{className:"text-lg font-bold",children:"   "})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:(()=>{const D=r.filter(Q=>Q.payment_type==="check"&&Q.status==="received");return D.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"    "})}):D.map(Q=>{const K=e.find(P=>P.id===Q.supplier_id);return n.jsxs("tr",{className:"hover:bg-orange-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"font-bold text-gray-800",children:Q.purchase_number})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-gray-700",children:(K==null?void 0:K.name_ar)||" "})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"font-bold text-orange-600",children:[(Q.total_amount||0).toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1 text-orange-700 font-semibold mb-1",children:[n.jsx(Gs,{size:12}),""]}),Q.bank_name&&n.jsxs("p",{className:"text-gray-600 text-xs",children:[": ",Q.bank_name]}),Q.check_number&&n.jsxs("p",{className:"text-gray-600 text-xs",children:[": ",Q.check_number]}),Q.check_date&&n.jsxs("p",{className:"text-gray-600 text-xs",children:[" : ",new Date(Q.check_date).toLocaleDateString("ar-DZ")]}),Q.check_deposit_date&&n.jsxs("p",{className:"text-gray-600 text-xs",children:[" : ",new Date(Q.check_deposit_date).toLocaleDateString("ar-DZ")]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${(Q.paid_amount||0)>=(Q.total_amount||0)?"bg-green-100 text-green-700":(Q.paid_amount||0)>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:(Q.paid_amount||0)>=(Q.total_amount||0)?"":(Q.paid_amount||0)>0?" ":" "}),(Q.paid_amount||0)>0&&(Q.paid_amount||0)<(Q.total_amount||0)&&n.jsxs("span",{className:"text-xs text-gray-600",children:[": ",((Q.total_amount||0)-(Q.paid_amount||0)).toFixed(2)," MAD"]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"flex gap-1",children:n.jsx("button",{onClick:()=>{y(Q),v(!0)},className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 rounded text-xs font-bold transition-colors",children:" "})})})]},Q.id)})})()})]})})]}),f&&d&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),n.jsx("div",{className:"mb-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:[": ",n.jsx("span",{className:"font-bold",children:d.name_ar})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("input",{type:"number",step:"0.01",required:!0,value:_.amount,onChange:D=>I({..._,amount:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"date",required:!0,value:_.payment_date,onChange:D=>I({..._,payment_date:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsxs("select",{value:_.payment_method,onChange:D=>I({..._,payment_method:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[n.jsx("option",{value:"cash",children:""}),n.jsx("option",{value:"transfer",children:" "}),n.jsx("option",{value:"check",children:""}),n.jsx("option",{value:"card",children:""}),n.jsx("option",{value:"other",children:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("textarea",{value:_.notes,onChange:D=>I({..._,notes:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",rows:3,placeholder:" ..."})]})]}),n.jsxs("div",{className:"flex gap-4 justify-end mt-6",children:[n.jsx("button",{onClick:()=>{u(!1),h(null),I({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"cash",notes:""})},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:""}),n.jsx("button",{onClick:R,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:" "})]})]})}),w&&x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",n.jsx("span",{className:"font-bold",children:x.purchase_number})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[": ",n.jsxs("span",{className:"font-bold",children:[x.total_amount," MAD"]})]}),x.check_number&&n.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",n.jsx("span",{className:"font-bold",children:x.check_number})]}),x.check_date&&n.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",n.jsx("span",{className:"font-bold",children:new Date(x.check_date).toLocaleDateString("ar-DZ")})]}),x.check_deposit_date&&n.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",n.jsx("span",{className:"font-bold",children:new Date(x.check_deposit_date).toLocaleDateString("ar-DZ")})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",defaultValue:(x.paid_amount||0)>=(x.total_amount||0)?"paid":(x.paid_amount||0)>0?"partial":"unpaid",children:[n.jsx("option",{value:"unpaid",children:" "}),n.jsx("option",{value:"partial",children:" "}),n.jsx("option",{value:"paid",children:" "})]})]}),n.jsxs("div",{id:"partial-payment-fields",style:{display:(x.paid_amount||0)>=(x.total_amount||0)||(x.paid_amount||0)>0?"block":"none"},children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"0.00",defaultValue:x.paid_amount||0,min:"0",max:x.total_amount||0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",defaultValue:x.check_deposit_date||new Date().toISOString().split("T")[0]})]})]}),n.jsxs("div",{className:"flex gap-4 justify-end mt-6",children:[n.jsx("button",{onClick:()=>{v(!1),y(null)},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:""}),n.jsx("button",{onClick:()=>{const D=document.querySelector("select"),Q=document.querySelector('input[type="number"]'),K=document.querySelectorAll('input[type="date"]')[1],P=D==null?void 0:D.value,te=P==="unpaid"?0:parseFloat((Q==null?void 0:Q.value)||"0");if(K==null||K.value,!["paid","partial","unpaid"].includes(P)){alert("   ");return}if(P!=="unpaid"&&(!te||te<=0)){alert("   ");return}U(x.id,P,te)},className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700",children:" "})]})]})}),p&&d&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:" "}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",d.name_ar]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:" :"})," ",d.contact_person_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",d.contact_person_phone]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:" "}),(()=>{const D=T.find(Q=>Q.supplier.id===d.id);return D?n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[n.jsx("p",{className:"text-sm text-gray-600",children:" "}),n.jsxs("p",{className:"font-bold text-blue-600",children:[D.totalPurchases.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[n.jsx("p",{className:"text-sm text-gray-600",children:""}),n.jsxs("p",{className:"font-bold text-green-600",children:[D.totalPaid.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"bg-red-50 p-3 rounded",children:[n.jsx("p",{className:"text-sm text-gray-600",children:""}),n.jsxs("p",{className:"font-bold text-red-600",children:[D.remainingAmount.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[n.jsx("p",{className:"text-sm text-gray-600",children:""}),n.jsx("div",{children:B(D.status)})]})]}):null})()]})]}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsx("button",{onClick:()=>{g(!1),h(null)},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:""})})]})})]})}const Xu={rent:"",electricity:"",water:"",internet:"",transport:"",salary:"",other:""},mN={cash:"",transfer:" ",check:"",card:"",other:""};function AK(){const[e,t]=H.useState([]),[r,s]=H.useState(!0),[a,i]=H.useState(""),[o,l]=H.useState("all"),[c,A]=H.useState(!1),[d,h]=H.useState(null),[f,u]=H.useState({date:new Date().toISOString().split("T")[0],category:"other",description:"",amount:"",payment_method:"cash",employee_id:""});H.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const{data:I,error:k}=await we.from("expenses").select("*").order("date",{ascending:!1});if(k)throw k;t(I||[])}catch(I){console.error("Error loading expenses:",I)}finally{s(!1)}},g=H.useMemo(()=>{let I=e;const k=a.trim().toLowerCase();return k&&(I=I.filter(T=>T.description.toLowerCase().includes(k)||Xu[T.category].toLowerCase().includes(k))),o!=="all"&&(I=I.filter(T=>T.category===o)),I},[e,a,o]),w=H.useMemo(()=>{const I=g.reduce((T,S)=>T+(S.amount||0),0),k=Object.keys(Xu).reduce((T,S)=>(T[S]=g.filter(B=>B.category===S).reduce((B,R)=>B+(R.amount||0),0),T),{});return{totalExpenses:I,byCategory:k}},[g]),v=async I=>{if(I.preventDefault(),!f.date||!f.description||!f.amount){alert("    ");return}try{const k={date:f.date,category:f.category,description:f.description,amount:parseFloat(f.amount),payment_method:f.payment_method,employee_id:f.employee_id||null,updated_at:new Date().toISOString()};if(d){const{error:T}=await we.from("expenses").update(k).eq("id",d.id);if(T)throw T}else{const{error:T}=await we.from("expenses").insert({...k,created_at:new Date().toISOString()});if(T)throw T}A(!1),h(null),_(),await p(),alert("    ")}catch(k){console.error("Error saving expense:",k),alert("     ")}},x=async I=>{if(confirm(`   : ${I.description}?`))try{const{error:k}=await we.from("expenses").delete().eq("id",I.id);if(k)throw k;await p(),alert("    ")}catch(k){console.error("Error deleting expense:",k),alert("     ")}},y=I=>{h(I),u({date:I.date,category:I.category,description:I.description,amount:I.amount.toString(),payment_method:I.payment_method,employee_id:I.employee_id||""}),A(!0)},_=()=>{u({date:new Date().toISOString().split("T")[0],category:"other",description:"",amount:"",payment_method:"cash",employee_id:""})};return r?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(fg,{className:"text-white",size:36})," "]}),n.jsx("p",{className:"text-white mt-2",children:"     "})]}),n.jsxs("button",{onClick:()=>{h(null),_(),A(!0)},className:"bg-red-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[n.jsx(ts,{className:"w-5 h-5"})," "]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-100 text-sm",children:" "}),n.jsxs("p",{className:"text-2xl font-bold",children:[w.totalExpenses.toFixed(2)," MAD"]})]}),n.jsx(Sr,{className:"w-8 h-8 text-red-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-100 text-sm",children:""}),n.jsxs("p",{className:"text-2xl font-bold",children:[w.byCategory.salary.toFixed(2)," MAD"]})]}),n.jsx(Sr,{className:"w-8 h-8 text-orange-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-100 text-sm",children:""}),n.jsxs("p",{className:"text-2xl font-bold",children:[w.byCategory.rent.toFixed(2)," MAD"]})]}),n.jsx(Sr,{className:"w-8 h-8 text-yellow-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-pink-100 text-sm",children:""}),n.jsxs("p",{className:"text-2xl font-bold",children:[(w.byCategory.electricity+w.byCategory.water+w.byCategory.internet).toFixed(2)," MAD"]})]}),n.jsx(Sr,{className:"w-8 h-8 text-pink-200"})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"  ...",value:a,onChange:I=>i(I.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),n.jsxs("select",{value:o,onChange:I=>l(I.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[n.jsx("option",{value:"all",children:" "}),Object.entries(Xu).map(([I,k])=>n.jsx("option",{value:I,children:k},I))]}),n.jsx("button",{onClick:()=>{i(""),l("all")},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:" "})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:g.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"  "})}):g.map(I=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"font-medium",children:new Date(I.date).toLocaleDateString("ar-DZ")})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"inline-block px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:Xu[I.category]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("p",{className:"font-medium",children:I.description})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("span",{className:"font-bold text-red-600",children:[I.amount.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:mN[I.payment_method]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>y(I),className:"text-blue-600 hover:text-blue-800",title:"",children:n.jsx(no,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>x(I),className:"text-red-600 hover:text-red-800",title:"",children:n.jsx(na,{className:"w-4 h-4"})})]})})]},I.id))})]})})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:d?" ":" "}),n.jsxs("form",{onSubmit:v,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("input",{type:"date",required:!0,value:f.date,onChange:I=>u({...f,date:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("select",{required:!0,value:f.category,onChange:I=>u({...f,category:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:Object.entries(Xu).map(([I,k])=>n.jsx("option",{value:I,children:k},I))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("textarea",{required:!0,value:f.description,onChange:I=>u({...f,description:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",rows:3,placeholder:" ..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("input",{type:"number",step:"0.01",required:!0,value:f.amount,onChange:I=>u({...f,amount:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("select",{required:!0,value:f.payment_method,onChange:I=>u({...f,payment_method:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:Object.entries(mN).map(([I,k])=>n.jsx("option",{value:I,children:k},I))})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{A(!1),h(null),_()},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:""}),n.jsx("button",{type:"submit",className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:d?"":""})]})]})]})})]})}const b1={admin:"",commercial:"",stock:" ",truck_driver:" ",delivery_driver:" ",custom:" "},dK={admin:"bg-purple-100 text-purple-800",commercial:"bg-green-100 text-green-800",stock:"bg-orange-100 text-orange-800",truck_driver:"bg-blue-100 text-blue-800",delivery_driver:"bg-cyan-100 text-cyan-800",custom:"bg-gray-100 text-gray-800"};function uK(){const[e,t]=H.useState([]),[r,s]=H.useState([]),[a,i]=H.useState(!0),[o,l]=H.useState(""),[c,A]=H.useState("all"),[d,h]=H.useState("all"),[f,u]=H.useState(()=>new Date().toISOString().slice(0,7)),[p,g]=H.useState(!0),[w,v]=H.useState(!1),[x,y]=H.useState(null),[_,I]=H.useState(!1),[k,T]=H.useState(null),[S,B]=H.useState({name:"",phone:"",address:"",national_id:"",monthly_salary:"",advance_limit:"",hire_date:new Date().toISOString().split("T")[0],role:"delivery_driver",customRole:"",status:"active"}),[R,U]=H.useState({transaction_type:"advance",transaction_date:new Date().toISOString().split("T")[0],amount:"",payment_method:"cash",notes:""});H.useEffect(()=>{L(),D()},[]);const L=async()=>{try{i(!0);const{data:C,error:E}=await we.from("employees").select("*").order("created_at",{ascending:!1});if(E)throw E;t(C||[])}catch(C){console.error("Error loading employees:",C)}finally{i(!1)}},D=async()=>{try{const{data:C,error:E}=await we.from("employee_transactions").select("*").order("transaction_date",{ascending:!1});if(E)throw E;s(C||[])}catch(C){console.error("Error loading employee transactions:",C)}},Q=H.useMemo(()=>{const C={};for(const E of r)C[E.employee_id]||(C[E.employee_id]=0),E.transaction_type==="advance"&&(C[E.employee_id]+=E.amount||0),E.transaction_type==="repayment"&&(C[E.employee_id]-=E.amount||0),E.transaction_type==="salary_deduction"&&(C[E.employee_id]-=E.amount||0);return C},[r]),K=H.useMemo(()=>{var q;const C=`${f}-`,E={};for(const se of r)(q=se.transaction_date)!=null&&q.startsWith(C)&&(E[se.employee_id]||(E[se.employee_id]={advances:0,repayments:0,salary_deductions:0,salary_payments:0}),se.transaction_type==="advance"&&(E[se.employee_id].advances+=se.amount||0),se.transaction_type==="repayment"&&(E[se.employee_id].repayments+=se.amount||0),se.transaction_type==="salary_deduction"&&(E[se.employee_id].salary_deductions+=se.amount||0),se.transaction_type==="salary_payment"&&(E[se.employee_id].salary_payments+=se.amount||0));const O={};for(const se of e){const ye=E[se.id]||{advances:0,repayments:0,salary_deductions:0,salary_payments:0},de=(se.monthly_salary||0)-ye.salary_deductions-ye.repayments-ye.advances;O[se.id]={...ye,net_salary:de}}return O},[e,r,f]),P=H.useMemo(()=>{let C=e;const E=o.trim().toLowerCase();return E&&(C=C.filter(O=>O.name.toLowerCase().includes(E)||O.phone.toLowerCase().includes(E))),c!=="all"&&(C=C.filter(O=>O.role===c)),d!=="all"&&(C=C.filter(O=>O.status===d)),C},[e,o,c,d]),te=H.useMemo(()=>{const C=e.length,E=e.filter(se=>se.status==="active").length,O=e.filter(se=>se.role==="admin").length,q=e.filter(se=>se.status==="inactive").length;return{total:C,active:E,admins:O,inactive:q}},[e]),J=async C=>{if(C.preventDefault(),!S.name||!S.phone||S.role==="custom"&&!S.customRole){alert("    ");return}try{const E={name:S.name,phone:S.phone,address:S.address||null,national_id:S.national_id||null,monthly_salary:S.monthly_salary?parseFloat(S.monthly_salary):null,advance_limit:S.advance_limit?parseFloat(S.advance_limit):null,hire_date:S.hire_date||null,role:S.role,status:S.status,updated_at:new Date().toISOString()};if(S.role==="custom"&&(E.custom_role=S.customRole),x){const{error:O}=await we.from("employees").update(E).eq("id",x.id);if(O)throw O}else{const{error:O}=await we.from("employees").insert({...E,created_at:new Date().toISOString()});if(O)throw O}v(!1),y(null),N(),await L(),alert("    ")}catch(E){console.error("Error saving employee:",E),alert("     ")}},V=async()=>{if(!k||!R.amount){alert("   ");return}const C=parseFloat(R.amount);if(!Number.isFinite(C)||C<=0){alert("   ");return}const E=Q[k.id]||0,O=k.advance_limit||0,q=R.transaction_type==="advance"?E+C:R.transaction_type==="repayment"||R.transaction_type==="salary_deduction"?E-C:E;R.transaction_type==="advance"&&O>0&&q>O&&alert("      ");try{const{error:se}=await we.from("employee_transactions").insert({employee_id:k.id,transaction_date:R.transaction_date,transaction_type:R.transaction_type,amount:C,payment_method:R.payment_method,notes:R.notes||null});if(se)throw se;I(!1),T(null),U({transaction_type:"advance",transaction_date:new Date().toISOString().split("T")[0],amount:"",payment_method:"cash",notes:""}),await D(),alert("    ")}catch(se){console.error("Error saving employee transaction:",se),alert("     ")}},ie=async C=>{if(confirm(`   : ${C.name}?`))try{const{error:E}=await we.from("employees").delete().eq("id",C.id);if(E)throw E;await L(),alert("    ")}catch(E){console.error("Error deleting employee:",E),alert("     ")}},Y=C=>{var E,O;y(C),B({name:C.name,phone:C.phone,address:C.address||"",national_id:C.national_id||"",monthly_salary:((E=C.monthly_salary)==null?void 0:E.toString())||"",advance_limit:((O=C.advance_limit)==null?void 0:O.toString())||"",hire_date:C.hire_date||new Date().toISOString().split("T")[0],role:C.role,customRole:C.role==="custom"&&C.custom_role||"",status:C.status}),v(!0)},N=()=>{B({name:"",phone:"",address:"",national_id:"",monthly_salary:"",advance_limit:"",hire_date:new Date().toISOString().split("T")[0],role:"delivery_driver",customRole:"",status:"active"})};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(Bi,{className:"text-white",size:36})," "]}),n.jsx("p",{className:"text-white mt-2",children:"   "})]}),n.jsxs("button",{onClick:()=>{y(null),N(),v(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-purple-700",children:[n.jsx(ts,{className:"w-5 h-5"})," "]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-purple-100 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:te.total})]}),n.jsx(Bi,{className:"w-8 h-8 text-purple-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-100 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:te.active})]}),n.jsx(Kr,{className:"w-8 h-8 text-green-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-100 text-sm",children:""}),n.jsx("p",{className:"text-2xl font-bold",children:te.admins})]}),n.jsx(Bi,{className:"w-8 h-8 text-blue-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white p-4 rounded-xl shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-100 text-sm",children:"  "}),n.jsx("p",{className:"text-2xl font-bold",children:te.inactive})]}),n.jsx(vs,{className:"w-8 h-8 text-red-200"})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"  ...",value:o,onChange:C=>l(C.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsxs("select",{value:c,onChange:C=>A(C.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[n.jsx("option",{value:"all",children:" "}),Object.entries(b1).map(([C,E])=>n.jsx("option",{value:C,children:E},C))]}),n.jsxs("select",{value:d,onChange:C=>h(C.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"active",children:""}),n.jsx("option",{value:"inactive",children:" "})]}),n.jsx("button",{onClick:()=>{l(""),A("all"),h("all")},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:" "})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold",children:"  ( )"}),n.jsx("p",{className:"text-sm text-gray-600",children:"  =   -  -  "})]}),n.jsx("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("input",{type:"month",value:f,onChange:C=>u(C.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})})]}),n.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:P.map(C=>{const E=K[C.id],O=Q[C.id]||0,q=C.advance_limit||0,se=q>0&&O>q;return n.jsxs("div",{className:"border rounded-xl p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-bold",children:C.name}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${se?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:se?" ":" "})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[n.jsx("div",{className:"text-gray-600",children:" "}),n.jsx("div",{className:"font-bold text-gray-800",children:(C.monthly_salary||0).toFixed(2)}),n.jsx("div",{className:"text-gray-600",children:" "}),n.jsx("div",{className:"font-bold text-gray-800",children:((E==null?void 0:E.advances)||0).toFixed(2)}),n.jsx("div",{className:"text-gray-600",children:" "}),n.jsx("div",{className:"font-bold text-gray-800",children:((E==null?void 0:E.salary_deductions)||0).toFixed(2)}),n.jsx("div",{className:"text-gray-600",children:" "}),n.jsx("div",{className:"font-bold text-green-700",children:((E==null?void 0:E.net_salary)||0).toFixed(2)}),n.jsx("div",{className:"text-gray-600",children:"  "}),n.jsx("div",{className:`font-bold ${se?"text-red-600":"text-gray-800"}`,children:O.toFixed(2)})]})]},C.id)})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:P.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"  "})}):P.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4",children:n.jsx("p",{className:"font-medium",children:C.name})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("p",{className:"text-gray-600",children:C.phone})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${dK[C.role]}`,children:C.role==="custom"?C.custom_role||" ":b1[C.role]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:"text-sm text-gray-700",children:(C.advance_limit||0).toFixed(2)})}),n.jsx("td",{className:"px-4 py-4",children:(()=>{const E=Q[C.id]||0,O=C.advance_limit||0,q=O>0&&E>O;return n.jsxs("span",{className:`text-sm font-bold ${q?"text-red-600":"text-gray-700"}`,children:[E.toFixed(2),q?" ":""]})})()}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${C.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:C.status==="active"?"":" "})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("p",{className:"text-sm text-gray-600",children:new Date(C.created_at).toLocaleDateString("ar-DZ")})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{T(C),I(!0)},className:"text-amber-600 hover:text-amber-800",title:" /  / ",children:n.jsx(Sr,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Y(C),className:"text-blue-600 hover:text-blue-800",title:"",children:n.jsx(no,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>ie(C),className:"text-red-600 hover:text-red-800",title:"",children:n.jsx(na,{className:"w-4 h-4"})})]})})]},C.id))})]})})}),_&&k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-sm max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-lg font-bold mb-3",children:"  /  / "}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{className:"text-xs text-gray-600",children:[": ",n.jsx("span",{className:"font-bold",children:k.name})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["  : ",n.jsx("span",{className:"font-bold",children:(Q[k.id]||0).toFixed(2)})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[" : ",n.jsx("span",{className:"font-bold",children:(k.advance_limit||0).toFixed(2)})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"  *"}),n.jsxs("select",{value:R.transaction_type,onChange:C=>U({...R,transaction_type:C.target.value}),className:"w-full px-2 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",children:[n.jsx("option",{value:"advance",children:""}),n.jsx("option",{value:"repayment",children:""}),n.jsx("option",{value:"salary_payment",children:" "}),n.jsx("option",{value:"salary_deduction",children:"  "})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:" *"}),n.jsx("input",{type:"date",required:!0,value:R.transaction_date,onChange:C=>U({...R,transaction_date:C.target.value}),className:"w-full px-2 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:" *"}),n.jsx("input",{type:"number",step:"0.01",required:!0,value:R.amount,onChange:C=>U({...R,amount:C.target.value}),className:"w-full px-2 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"  *"}),n.jsxs("select",{value:R.payment_method,onChange:C=>U({...R,payment_method:C.target.value}),className:"w-full px-2 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",children:[n.jsx("option",{value:"cash",children:""}),n.jsx("option",{value:"transfer",children:" "}),n.jsx("option",{value:"check",children:""}),n.jsx("option",{value:"card",children:""}),n.jsx("option",{value:"other",children:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:""}),n.jsx("textarea",{value:R.notes,onChange:C=>U({...R,notes:C.target.value}),className:"w-full px-2 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",rows:2,placeholder:" ..."})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end mt-4",children:[n.jsx("button",{onClick:()=>{I(!1),T(null)},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800",children:""}),n.jsx("button",{onClick:V,className:"bg-amber-600 text-white px-3 py-2 text-sm rounded-lg hover:bg-amber-700",children:""})]})]})}),w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:x?" ":" "}),n.jsxs("form",{onSubmit:J,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("input",{type:"text",required:!0,value:S.name,onChange:C=>B({...S,name:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"  "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("input",{type:"tel",required:!0,value:S.phone,onChange:C=>B({...S,phone:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"06xxxxxxxx"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("input",{type:"text",value:S.address,onChange:C=>B({...S,address:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:" ()"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  (MAD)"}),n.jsx("input",{type:"number",step:"0.01",value:S.monthly_salary,onChange:C=>B({...S,monthly_salary:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  (MAD)"}),n.jsx("input",{type:"number",step:"0.01",value:S.advance_limit,onChange:C=>B({...S,advance_limit:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  "}),n.jsx("input",{type:"text",value:S.national_id,onChange:C=>B({...S,national_id:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"XXXXXXXXXX"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsx("input",{type:"date",value:S.hire_date,onChange:C=>B({...S,hire_date:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("select",{required:!0,value:S.role,onChange:C=>B({...S,role:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:Object.entries(b1).map(([C,E])=>n.jsx("option",{value:C,children:E},C))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsxs("select",{required:!0,value:S.status,onChange:C=>B({...S,status:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[n.jsx("option",{value:"active",children:""}),n.jsx("option",{value:"inactive",children:" "})]})]})]}),S.role==="custom"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"   *"}),n.jsx("input",{type:"text",required:!0,value:S.customRole,onChange:C=>B({...S,customRole:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"   "})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{v(!1),y(null),N()},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:""}),n.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",children:x?"":""})]})]})]})})]})}function hK(){const[e,t]=H.useState([]),[r,s]=H.useState(!0),[a,i]=H.useState("");H.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const{data:A,error:d}=await we.from("credit_notes").select("*").order("created_at",{ascending:!1});if(d)throw d;t(A||[])}catch(A){console.error("Error fetching credit notes:",A)}finally{s(!1)}},l=A=>({draft:"bg-gray-100 text-gray-800",issued:"bg-blue-100 text-blue-800",applied:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[A]||"bg-gray-100 text-gray-800",c=e.filter(A=>{var d;return(d=A.credit_note_number)==null?void 0:d.toLowerCase().includes(a.toLowerCase())});return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"  "}),n.jsx("p",{className:"text-gray-600 mt-2",children:"   "})]}),n.jsxs("button",{className:"flex items-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:shadow-lg transition",children:[n.jsx(ts,{size:20}),n.jsx("span",{children:"  "})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 rounded-lg px-4 py-3",children:[n.jsx(cs,{size:20,className:"text-gray-400"}),n.jsx("input",{type:"text",placeholder:"   ...",value:a,onChange:A=>i(A.target.value),className:"flex-1 bg-transparent outline-none text-gray-800"})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:r?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),n.jsx("p",{className:"text-gray-600 mt-4",children:" ..."})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-right py-4 px-6 font-semibold text-gray-700",children:""})]})}),n.jsx("tbody",{children:c.map(A=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition",children:[n.jsx("td",{className:"py-4 px-6 text-gray-800 font-medium",children:A.credit_note_number}),n.jsx("td",{className:"py-4 px-6 text-gray-600",children:new Date(A.credit_date).toLocaleDateString("ar-SA")}),n.jsxs("td",{className:"py-4 px-6 text-gray-800 font-medium",children:[A.total_credit_amount.toFixed(2)," ."]}),n.jsxs("td",{className:"py-4 px-6 text-gray-800",children:[A.applied_amount.toFixed(2)," ."]}),n.jsxs("td",{className:"py-4 px-6 text-gray-800",children:[A.remaining_amount.toFixed(2)," ."]}),n.jsx("td",{className:"py-4 px-6",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l(A.status)}`,children:A.status})}),n.jsx("td",{className:"py-4 px-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",children:n.jsx(la,{size:18})}),n.jsx("button",{className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition",children:n.jsx(no,{size:18})}),n.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:n.jsx(na,{size:18})})]})})]},A.id))})]})})})]})}function fK(){const[e,t]=H.useState([]),[r,s]=H.useState(!0),[a,i]=H.useState(""),[o,l]=H.useState(!1),[c,A]=H.useState(null),[d,h]=H.useState({code:"",description_ar:"",description_en:"",discount_type:"percentage",discount_value:0,max_uses:null,usage_limit_per_client:1,min_order_amount:null,max_discount_amount:null,valid_from:new Date().toISOString().split("T")[0],valid_until:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]});H.useEffect(()=>{f()},[]);const f=async()=>{try{s(!0);const{data:_,error:I}=await we.from("coupons").select("*").order("created_at",{ascending:!1});if(I)throw I;const k=await Promise.all((_||[]).map(async T=>{const{count:S,error:B}=await we.from("coupon_usage").select("id",{count:"exact",head:!0}).eq("coupon_id",T.id);return{...T,usage_count:B?T.current_uses||0:S||0}}));t(k)}catch(_){console.error("Error fetching coupons:",_)}finally{s(!1)}},u=async _=>{_.preventDefault();try{const{error:I}=await we.from("coupons").insert([{...d,discount_value:parseFloat(d.discount_value.toString()),max_uses:d.max_uses?parseInt(d.max_uses.toString()):null,usage_limit_per_client:d.usage_limit_per_client?parseInt(d.usage_limit_per_client.toString()):null,min_order_amount:d.min_order_amount?parseFloat(d.min_order_amount.toString()):null,max_discount_amount:d.max_discount_amount?parseFloat(d.max_discount_amount.toString()):null,valid_from:new Date(d.valid_from).toISOString(),valid_until:new Date(d.valid_until).toISOString()}]);if(I)throw I;h({code:"",description_ar:"",description_en:"",discount_type:"percentage",discount_value:0,max_uses:null,usage_limit_per_client:1,min_order_amount:null,max_discount_amount:null,valid_from:new Date().toISOString().split("T")[0],valid_until:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),l(!1),f()}catch(I){console.error("Error adding coupon:",I)}},p=async _=>{if(window.confirm("      "))try{const{error:I}=await we.from("coupons").delete().eq("id",_);if(I)throw I;f()}catch(I){console.error("Error deleting coupon:",I)}},g=_=>{navigator.clipboard.writeText(_),A(_),setTimeout(()=>A(null),2e3)},w=e.filter(_=>{var I;return _.code.toLowerCase().includes(a.toLowerCase())||((I=_.description_ar)==null?void 0:I.toLowerCase().includes(a.toLowerCase()))}),v=_=>_.discount_type==="percentage"?`${_.discount_value.toLocaleString("fr-FR")}%`:`${_.discount_value.toLocaleString("fr-FR")} MAD`,x=_=>new Date(_.valid_until)<new Date,y=_=>_.is_active&&!x(_);return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:" "}),n.jsx("p",{className:"text-gray-600 mt-2",children:"   "})]}),n.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:shadow-lg transition",children:[n.jsx(ts,{size:20}),n.jsx("span",{children:" "})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 rounded-lg px-4 py-3",children:[n.jsx(cs,{size:20,className:"text-gray-400"}),n.jsx("input",{type:"text",placeholder:"  ...",value:a,onChange:_=>i(_.target.value),className:"flex-1 bg-transparent outline-none text-gray-800"})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r?n.jsxs("div",{className:"col-span-full p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),n.jsx("p",{className:"text-gray-600 mt-4",children:" ..."})]}):w.length===0?n.jsx("div",{className:"col-span-full p-8 text-center text-gray-500",children:"  "}):w.map(_=>n.jsxs("div",{className:`bg-white rounded-xl shadow-md p-6 border-r-4 transition ${y(_)?"border-green-500":"border-gray-300 opacity-75"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-600",children:" "}),n.jsx("p",{className:"text-lg font-bold text-gray-800",children:_.code})]}),n.jsx("button",{onClick:()=>g(_.code),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition",children:c===_.code?n.jsx(Jd,{size:20}):n.jsx(jD,{size:20})})]}),_.description_ar&&n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:_.description_ar}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:v(_)})]}),n.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-medium",children:[_.usage_count||0,"/",_.max_uses||""]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsx("span",{className:"font-medium",children:new Date(_.valid_until).toLocaleDateString("fr-FR")})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsx("span",{className:"font-medium",children:new Date(_.valid_from).toLocaleDateString("fr-FR")})]}),_.min_order_amount&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsxs("span",{className:"font-medium",children:[_.min_order_amount.toLocaleString("fr-FR")," MAD"]})]})]}),n.jsx("div",{className:"mb-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${y(_)?"bg-green-100 text-green-800":x(_)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:y(_)?"":x(_)?" ":" "})}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{className:"flex-1 p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",children:n.jsx(la,{size:18})}),n.jsx("button",{className:"flex-1 p-2 text-green-600 hover:bg-green-50 rounded-lg transition",children:n.jsx(no,{size:18})}),n.jsx("button",{onClick:()=>p(_.id),className:"flex-1 p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:n.jsx(na,{size:18})})]})]},_.id))}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"  "}),n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),n.jsx("input",{type:"text",value:d.code,onChange:_=>h({...d,code:_.target.value.toUpperCase()}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",placeholder:": SUMMER2024",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),n.jsx("textarea",{value:d.description_ar,onChange:_=>h({...d,description_ar:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",placeholder:" ",rows:2})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (English)"}),n.jsx("textarea",{value:d.description_en,onChange:_=>h({...d,description_en:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",placeholder:"Coupon description",rows:2})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),n.jsxs("select",{value:d.discount_type,onChange:_=>h({...d,discount_type:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",children:[n.jsx("option",{value:"percentage",children:"  (%)"}),n.jsx("option",{value:"fixed",children:"  (.)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),n.jsx("input",{type:"number",step:"0.01",value:d.discount_value,onChange:_=>h({...d,discount_value:parseFloat(_.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),n.jsx("input",{type:"number",value:d.max_uses||"",onChange:_=>h({...d,max_uses:_.target.value?parseInt(_.target.value):null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",placeholder:" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),n.jsx("input",{type:"number",value:d.usage_limit_per_client||"",onChange:_=>h({...d,usage_limit_per_client:_.target.value?parseInt(_.target.value):1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),n.jsx("input",{type:"number",step:"0.01",value:d.min_order_amount||"",onChange:_=>h({...d,min_order_amount:_.target.value?parseFloat(_.target.value):null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",placeholder:" "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),n.jsx("input",{type:"number",step:"0.01",value:d.max_discount_amount||"",onChange:_=>h({...d,max_discount_amount:_.target.value?parseFloat(_.target.value):null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",placeholder:" "})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),n.jsx("input",{type:"date",value:d.valid_from,onChange:_=>h({...d,valid_from:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),n.jsx("input",{type:"date",value:d.valid_until,onChange:_=>h({...d,valid_until:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-600 outline-none",required:!0})]})]}),n.jsxs("div",{className:"flex space-x-3 pt-6",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition font-medium",children:" "}),n.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg hover:bg-gray-300 transition font-medium",children:""})]})]})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var gk=1252,pK=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ew={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},tw=function(e){pK.indexOf(e)!=-1&&(gk=ew[0]=e)};function mK(){tw(1252)}var Ji=function(e){tw(e)};function xk(){Ji(1200),mK()}function gN(e){for(var t=[],r=0,s=e.length;r<s;++r)t[r]=e.charCodeAt(r);return t}function gK(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function vk(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var c0=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?gK(e.slice(2)):t==254&&r==255?vk(e.slice(2)):t==65279?e.slice(1):e},pp=function(t){return String.fromCharCode(t)},xN=function(t){return String.fromCharCode(t)},vh,Zl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function vN(e){for(var t="",r=0,s=0,a=0,i=0,o=0,l=0,c=0,A=0;A<e.length;)r=e.charCodeAt(A++),i=r>>2,s=e.charCodeAt(A++),o=(r&3)<<4|s>>4,a=e.charCodeAt(A++),l=(s&15)<<2|a>>6,c=a&63,isNaN(s)?l=c=64:isNaN(a)&&(c=64),t+=Zl.charAt(i)+Zl.charAt(o)+Zl.charAt(l)+Zl.charAt(c);return t}function ii(e){var t="",r=0,s=0,a=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var A=0;A<e.length;)i=Zl.indexOf(e.charAt(A++)),o=Zl.indexOf(e.charAt(A++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Zl.indexOf(e.charAt(A++)),s=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(s)),c=Zl.indexOf(e.charAt(A++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var mr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),BA=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function gc(e){return mr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function yN(e){return mr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Xi=function(t){return mr?BA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function CA(e){if(Array.isArray(e))return e.map(function(s){return String.fromCharCode(s)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function rw(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return rw(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Vl=mr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:BA(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var s=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)s.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";s.set(new Uint8Array(e[t]),r)}return s}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function xK(e){for(var t=[],r=0,s=e.length+250,a=gc(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>s&&(t.push(a.slice(0,r)),r=0,a=gc(65535),s=65530)}return t.push(a.slice(0,r)),Vl(t)}var ba=/\u0000/g,A0=/[\u0001-\u0006]/g;function Rd(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Yi(e,t){var r=""+e;return r.length>=t?r:Is("0",t-r.length)+r}function sw(e,t){var r=""+e;return r.length>=t?r:Is(" ",t-r.length)+r}function Lm(e,t){var r=""+e;return r.length>=t?r:r+Is(" ",t-r.length)}function vK(e,t){var r=""+Math.round(e);return r.length>=t?r:Is("0",t-r.length)+r}function yK(e,t){var r=""+e;return r.length>=t?r:Is("0",t-r.length)+r}var wN=Math.pow(2,32);function rd(e,t){if(e>wN||e<-wN)return vK(e,t);var r=Math.round(e);return yK(r,t)}function Dm(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var bN=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],_1=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function wK(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var lr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},_N={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},bK={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Qm(e,t,r){for(var s=e<0?-1:1,a=e*s,i=0,o=1,l=0,c=1,A=0,d=0,h=Math.floor(a);A<t&&(h=Math.floor(a),l=h*o+i,d=h*A+c,!(a-h<5e-8));)a=1/(a-h),i=o,o=l,c=A,A=d;if(d>t&&(A>t?(d=c,l=i):(d=A,l=o)),!r)return[0,s*l,d];var f=Math.floor(s*l/d);return[f,s*l-f*d,d]}function Zc(e,t,r){if(e>2958465||e<0)return null;var s=e|0,a=Math.floor(86400*(e-s)),i=0,o=[],l={D:s,T:a,u:86400*(e-s)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(s+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++s,++l.D)),s===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(s===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{s>60&&--s;var c=new Date(1900,0,1);c.setDate(c.getDate()+s-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),s<60&&(i=(i+6)%7),r&&(i=EK(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=i,l}var yk=new Date(1899,11,31,0,0,0),_K=yk.getTime(),NK=new Date(1900,2,1,0,0,0);function wk(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=NK&&(r+=24*60*60*1e3),(r-(_K+(e.getTimezoneOffset()-yk.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function nw(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function BK(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function CK(e){var t=e<0?12:11,r=nw(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function jK(e){var t=nw(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function yh(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=CK(e):t===10?r=e.toFixed(10).substr(0,12):r=jK(e),nw(BK(r.toUpperCase()))}function mA(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):yh(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ki(14,wk(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function EK(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function kK(e,t,r,s){var a="",i=0,o=0,l=r.y,c,A=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,A=2;break;default:c=l%1e4,A=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,A=t.length;break;case 3:return _1[r.m-1][1];case 5:return _1[r.m-1][0];default:return _1[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,A=t.length;break;case 3:return bN[r.q][0];default:return bN[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,A=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,A=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,A=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Yi(r.S,t.length):(s>=2?o=s===3?1e3:100:o=s===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(a=Yi(i,2+s),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}A=t.length===3?1:2;break;case 101:c=l,A=1;break}var d=A>0?Yi(c,A):"";return d}function ec(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,s=e.substr(0,r);r!=e.length;r+=t)s+=(s.length>0?",":"")+e.substr(r,t);return s}var bk=/%/g;function SK(e,t,r){var s=t.replace(bk,""),a=t.length-s.length;return al(e,s,r*Math.pow(10,2*a))+Is("%",a)}function FK(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return al(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function _k(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+_k(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(s+1+(a+i)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,A,d){return c+A+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Nk=/# (\?+)( ?)\/( ?)(\d+)/;function TK(e,t,r){var s=parseInt(e[4],10),a=Math.round(t*s),i=Math.floor(a/s),o=a-i*s,l=s;return r+(i===0?"":""+i)+" "+(o===0?Is(" ",e[1].length+1+e[4].length):sw(o,e[1].length)+e[2]+"/"+e[3]+Yi(l,e[4].length))}function IK(e,t,r){return r+(t===0?"":""+t)+Is(" ",e[1].length+2+e[4].length)}var Bk=/^#*0*\.([0#]+)/,Ck=/\).*[0#]/,jk=/\(###\) ###\\?-####/;function xa(e){for(var t="",r,s=0;s!=e.length;++s)switch(r=e.charCodeAt(s)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function NN(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function BN(e,t){var r=e-Math.floor(e),s=Math.pow(10,t);return t<(""+Math.round(r*s)).length?0:Math.round(r*s)}function UK(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function LK(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function pi(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Ck)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?pi("n",s,r):"("+pi("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return FK(e,t,r);if(t.indexOf("%")!==-1)return SK(e,t,r);if(t.indexOf("E")!==-1)return _k(t,r);if(t.charCodeAt(0)===36)return"$"+pi(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,l,c=Math.abs(r),A=r<0?"-":"";if(t.match(/^00+$/))return A+rd(c,t.length);if(t.match(/^[#?]+$/))return a=rd(r,0),a==="0"&&(a=""),a.length>t.length?a:xa(t.substr(0,t.length-a.length))+a;if(i=t.match(Nk))return TK(i,c,A);if(t.match(/^#+0+$/))return A+rd(c,t.length-t.indexOf("0"));if(i=t.match(Bk))return a=NN(r,i[1].length).replace(/^([^\.]+)$/,"$1."+xa(i[1])).replace(/\.$/,"."+xa(i[1])).replace(/\.(\d*)$/,function(p,g){return"."+g+Is("0",xa(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return A+NN(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return A+ec(rd(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+pi(e,t,-r):ec(""+(Math.floor(r)+UK(r,i[1].length)))+"."+Yi(BN(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return pi(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Rd(pi(e,t.replace(/[\\-]/g,""),r)),o=0,Rd(Rd(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return o<a.length?a.charAt(o++):p==="0"?"0":""}));if(t.match(jk))return a=pi(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Qm(c,Math.pow(10,o)-1,!1),a=""+A,d=al("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=Lm(l[2],o),d.length<i[4].length&&(d=xa(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Qm(c,Math.pow(10,o)-1,!0),A+(l[0]||(l[1]?"":"0"))+" "+(l[1]?sw(l[1],o)+i[2]+"/"+i[3]+Lm(l[2],o):Is(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=rd(r,0),t.length<=a.length?a:xa(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var h=t.indexOf(".")-o,f=t.length-a.length-h;return xa(t.substr(0,h)+a+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=BN(r,i[1].length),r<0?"-"+pi(e,t,-r):ec(LK(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Yi(0,3-p.length):"")+p})+"."+Yi(o,i[1].length);switch(t){case"###,##0.00":return pi(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var u=ec(rd(c,0));return u!=="0"?A+u:"";case"###,###.00":return pi(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return pi(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function DK(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return al(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function QK(e,t,r){var s=t.replace(bk,""),a=t.length-s.length;return al(e,s,r*Math.pow(10,2*a))+Is("%",a)}function Ek(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Ek(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(s+1+(a+i)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,A,d){return c+A+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function go(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Ck)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?go("n",s,r):"("+go("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return DK(e,t,r);if(t.indexOf("%")!==-1)return QK(e,t,r);if(t.indexOf("E")!==-1)return Ek(t,r);if(t.charCodeAt(0)===36)return"$"+go(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,l,c=Math.abs(r),A=r<0?"-":"";if(t.match(/^00+$/))return A+Yi(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:xa(t.substr(0,t.length-a.length))+a;if(i=t.match(Nk))return IK(i,c,A);if(t.match(/^#+0+$/))return A+Yi(c,t.length-t.indexOf("0"));if(i=t.match(Bk))return a=(""+r).replace(/^([^\.]+)$/,"$1."+xa(i[1])).replace(/\.$/,"."+xa(i[1])),a=a.replace(/\.(\d*)$/,function(p,g){return"."+g+Is("0",xa(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return A+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return A+ec(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+go(e,t,-r):ec(""+r)+"."+Is("0",i[1].length);if(i=t.match(/^#,#*,#0/))return go(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Rd(go(e,t.replace(/[\\-]/g,""),r)),o=0,Rd(Rd(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return o<a.length?a.charAt(o++):p==="0"?"0":""}));if(t.match(jk))return a=go(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Qm(c,Math.pow(10,o)-1,!1),a=""+A,d=al("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=Lm(l[2],o),d.length<i[4].length&&(d=xa(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Qm(c,Math.pow(10,o)-1,!0),A+(l[0]||(l[1]?"":"0"))+" "+(l[1]?sw(l[1],o)+i[2]+"/"+i[3]+Lm(l[2],o):Is(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:xa(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var h=t.indexOf(".")-o,f=t.length-a.length-h;return xa(t.substr(0,h)+a+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+go(e,t,-r):ec(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Yi(0,3-p.length):"")+p})+"."+Yi(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var u=ec(""+c);return u!=="0"?A+u:"";default:if(t.match(/\.[0#?]*$/))return go(e,t.slice(0,t.lastIndexOf(".")),r)+xa(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function al(e,t,r){return(r|0)===r?go(e,t,r):pi(e,t,r)}function OK(e){for(var t=[],r=!1,s=0,a=0;s<e.length;++s)switch(e.charCodeAt(s)){case 34:r=!r;break;case 95:case 42:case 92:++s;break;case 59:t[t.length]=e.substr(a,s-a),a=s+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var kk=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function lu(e){for(var t=0,r="",s="";t<e.length;)switch(r=e.charAt(t)){case"G":Dm(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(s=r;e.charAt(t++)!=="]"&&t<e.length;)s+=e.charAt(t);if(s.match(kk))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function PK(e,t,r,s){for(var a=[],i="",o=0,l="",c="t",A,d,h,f="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Dm(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(h=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(h);a[a.length]={t:"t",v:i},++o;break;case"\\":var u=e.charAt(++o),p=u==="("||u===")"?u:"t";a[a.length]={t:p,v:u},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(A==null&&(A=Zc(t,r,e.charAt(o+1)==="2"),A==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||A==null&&(A=Zc(t,r),A==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=f),a[a.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(A==null&&(A=Zc(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(A!=null&&(g.v=A.H>=12?"P":"A"),g.t="T",f="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(A!=null&&(g.v=A.H>=12?"PM":"AM"),g.t="T",o+=5,f="h"):e.substr(o,5).toUpperCase()==="/"?(A!=null&&(g.v=A.H>=12?"":""),g.t="T",o+=5,f="h"):(g.t="t",++o),A==null&&g.t==="T")return"";a[a.length]=g,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(kk)){if(A==null&&(A=Zc(t,r),A==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",lu(e)||(a[a.length]={t:"t",v:i}));break;case".":if(A!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;a[a.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;a[a.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:s===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var w=0,v=0,x;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=f,c="h",w<1&&(w=1);break;case"s":(x=a[o].v.match(/\.0+$/))&&(v=Math.max(v,x[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&a[o].v.match(/[Hh]/)&&(w=1),w<2&&a[o].v.match(/[Mm]/)&&(w=2),w<3&&a[o].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var y="",_;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=kK(a[o].t.charCodeAt(0),a[o].v,A,v),a[o].t="t";break;case"n":case"?":for(_=o+1;a[_]!=null&&((l=a[_].t)==="?"||l==="D"||(l===" "||l==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[o].v+=a[_].v,a[_]={v:"",t:";"},++_;y+=a[o].v,o=_-1;break;case"G":a[o].t="t",a[o].v=mA(t,r);break}var I="",k,T;if(y.length>0){y.charCodeAt(0)==40?(k=t<0&&y.charCodeAt(0)===45?-t:t,T=al("n",y,k)):(k=t<0&&s>1?-t:t,T=al("n",y,k),k<0&&a[0]&&a[0].t=="t"&&(T=T.substr(1),a[0].v="-"+a[0].v)),_=T.length-1;var S=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){S=o;break}var B=a.length;if(S===a.length&&T.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(_>=a[o].v.length-1?(_-=a[o].v.length,a[o].v=T.substr(_+1,a[o].v.length)):_<0?a[o].v="":(a[o].v=T.substr(0,_+1),_=-1),a[o].t="t",B=o);_>=0&&B<a.length&&(a[B].v=T.substr(0,_+1)+a[B].v)}else if(S!==a.length&&T.indexOf("E")===-1){for(_=T.indexOf(".")-1,o=S;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")-1:a[o].v.length-1,I=a[o].v.substr(d+1);d>=0;--d)_>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(I=T.charAt(_--)+I);a[o].v=I,a[o].t="t",B=o}for(_>=0&&B<a.length&&(a[B].v=T.substr(0,_+1)+a[B].v),_=T.indexOf(".")+1,o=S;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==S)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")+1:0,I=a[o].v.substr(0,d);d<a[o].v.length;++d)_<T.length&&(I+=T.charAt(_++));a[o].v=I,a[o].t="t",B=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(k=s>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=al(a[o].t,a[o].v,k),a[o].t="t");var R="";for(o=0;o!==a.length;++o)a[o]!=null&&(R+=a[o].v);return R}var CN=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function jN(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function RK(e,t){var r=OK(e),s=r.length,a=r[s-1].indexOf("@");if(s<4&&a>-1&&--s,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[s,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(CN),l=r[1].match(CN);return jN(t,o)?[s,r[0]]:jN(t,l)?[s,r[1]]:[s,r[o!=null&&l!=null?2:1]]}return[s,i]}function ki(e,t,r){r==null&&(r={});var s="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?s=r.dateNF:s=e;break;case"number":e==14&&r.dateNF?s=r.dateNF:s=(r.table!=null?r.table:lr)[e],s==null&&(s=r.table&&r.table[_N[e]]||lr[_N[e]]),s==null&&(s=bK[e]||"General");break}if(Dm(s,0))return mA(t,r);t instanceof Date&&(t=wk(t,r.date1904));var a=RK(s,t);if(Dm(a[1]))return mA(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return PK(a[1],t,r,a[0])}function iA(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(lr[r]==null){t<0&&(t=r);continue}if(lr[r]==e){t=r;break}}t<0&&(t=391)}return lr[t]=e,t}function Sk(){lr=wK()}var MK={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Fk=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function HK(e){var t=typeof e=="number"?lr[e]:e;return t=t.replace(Fk,"(\\d+)"),new RegExp("^"+t+"$")}function KK(e,t,r){var s=-1,a=-1,i=-1,o=-1,l=-1,c=-1;(t.match(Fk)||[]).forEach(function(h,f){var u=parseInt(r[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":s=u;break;case"d":i=u;break;case"h":o=u;break;case"s":c=u;break;case"m":o>=0?l=u:a=u;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var A=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?A:s==-1&&a==-1&&i==-1?d:A+"T"+d}var zK=function(){var e={};e.version="1.2.0";function t(){for(var T=0,S=new Array(256),B=0;B!=256;++B)T=B,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,S[B]=T;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function s(T){var S=0,B=0,R=0,U=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)U[R]=T[R];for(R=0;R!=256;++R)for(B=T[R],S=256+R;S<4096;S+=256)B=U[S]=B>>>8^T[B&255];var L=[];for(R=1;R!=16;++R)L[R-1]=typeof Int32Array<"u"?U.subarray(R*256,R*256+256):U.slice(R*256,R*256+256);return L}var a=s(r),i=a[0],o=a[1],l=a[2],c=a[3],A=a[4],d=a[5],h=a[6],f=a[7],u=a[8],p=a[9],g=a[10],w=a[11],v=a[12],x=a[13],y=a[14];function _(T,S){for(var B=S^-1,R=0,U=T.length;R<U;)B=B>>>8^r[(B^T.charCodeAt(R++))&255];return~B}function I(T,S){for(var B=S^-1,R=T.length-15,U=0;U<R;)B=y[T[U++]^B&255]^x[T[U++]^B>>8&255]^v[T[U++]^B>>16&255]^w[T[U++]^B>>>24]^g[T[U++]]^p[T[U++]]^u[T[U++]]^f[T[U++]]^h[T[U++]]^d[T[U++]]^A[T[U++]]^c[T[U++]]^l[T[U++]]^o[T[U++]]^i[T[U++]]^r[T[U++]];for(R+=15;U<R;)B=B>>>8^r[(B^T[U++])&255];return~B}function k(T,S){for(var B=S^-1,R=0,U=T.length,L=0,D=0;R<U;)L=T.charCodeAt(R++),L<128?B=B>>>8^r[(B^L)&255]:L<2048?(B=B>>>8^r[(B^(192|L>>6&31))&255],B=B>>>8^r[(B^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,D=T.charCodeAt(R++)&1023,B=B>>>8^r[(B^(240|L>>8&7))&255],B=B>>>8^r[(B^(128|L>>2&63))&255],B=B>>>8^r[(B^(128|D>>6&15|(L&3)<<4))&255],B=B>>>8^r[(B^(128|D&63))&255]):(B=B>>>8^r[(B^(224|L>>12&15))&255],B=B>>>8^r[(B^(128|L>>6&63))&255],B=B>>>8^r[(B^(128|L&63))&255]);return~B}return e.table=r,e.bstr=_,e.buf=I,e.str=k,e}(),xr=function(){var t={};t.version="1.2.1";function r(Z,pe){for(var Ae=Z.split("/"),he=pe.split("/"),fe=0,xe=0,Fe=Math.min(Ae.length,he.length);fe<Fe;++fe){if(xe=Ae[fe].length-he[fe].length)return xe;if(Ae[fe]!=he[fe])return Ae[fe]<he[fe]?-1:1}return Ae.length-he.length}function s(Z){if(Z.charAt(Z.length-1)=="/")return Z.slice(0,-1).indexOf("/")===-1?Z:s(Z.slice(0,-1));var pe=Z.lastIndexOf("/");return pe===-1?Z:Z.slice(0,pe+1)}function a(Z){if(Z.charAt(Z.length-1)=="/")return a(Z.slice(0,-1));var pe=Z.lastIndexOf("/");return pe===-1?Z:Z.slice(pe+1)}function i(Z,pe){typeof pe=="string"&&(pe=new Date(pe));var Ae=pe.getHours();Ae=Ae<<6|pe.getMinutes(),Ae=Ae<<5|pe.getSeconds()>>>1,Z.write_shift(2,Ae);var he=pe.getFullYear()-1980;he=he<<4|pe.getMonth()+1,he=he<<5|pe.getDate(),Z.write_shift(2,he)}function o(Z){var pe=Z.read_shift(2)&65535,Ae=Z.read_shift(2)&65535,he=new Date,fe=Ae&31;Ae>>>=5;var xe=Ae&15;Ae>>>=4,he.setMilliseconds(0),he.setFullYear(Ae+1980),he.setMonth(xe-1),he.setDate(fe);var Fe=pe&31;pe>>>=5;var Ke=pe&63;return pe>>>=6,he.setHours(pe),he.setMinutes(Ke),he.setSeconds(Fe<<1),he}function l(Z){Dn(Z,0);for(var pe={},Ae=0;Z.l<=Z.length-4;){var he=Z.read_shift(2),fe=Z.read_shift(2),xe=Z.l+fe,Fe={};switch(he){case 21589:Ae=Z.read_shift(1),Ae&1&&(Fe.mtime=Z.read_shift(4)),fe>5&&(Ae&2&&(Fe.atime=Z.read_shift(4)),Ae&4&&(Fe.ctime=Z.read_shift(4))),Fe.mtime&&(Fe.mt=new Date(Fe.mtime*1e3));break}Z.l=xe,pe[he]=Fe}return pe}var c;function A(){return c||(c={})}function d(Z,pe){if(Z[0]==80&&Z[1]==75)return dt(Z,pe);if((Z[0]|32)==109&&(Z[1]|32)==105)return Rt(Z,pe);if(Z.length<512)throw new Error("CFB file size "+Z.length+" < 512");var Ae=3,he=512,fe=0,xe=0,Fe=0,Ke=0,Ue=0,Le=[],De=Z.slice(0,512);Dn(De,0);var st=h(De);switch(Ae=st[0],Ae){case 3:he=512;break;case 4:he=4096;break;case 0:if(st[1]==0)return dt(Z,pe);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ae)}he!==512&&(De=Z.slice(0,he),Dn(De,28));var vt=Z.slice(0,he);f(De,Ae);var Bt=De.read_shift(4,"i");if(Ae===3&&Bt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Bt);De.l+=4,Fe=De.read_shift(4,"i"),De.l+=4,De.chk("00100000","Mini Stream Cutoff Size: "),Ke=De.read_shift(4,"i"),fe=De.read_shift(4,"i"),Ue=De.read_shift(4,"i"),xe=De.read_shift(4,"i");for(var ct=-1,_t=0;_t<109&&(ct=De.read_shift(4,"i"),!(ct<0));++_t)Le[_t]=ct;var Gt=u(Z,he);w(Ue,xe,Gt,he,Le);var Cr=x(Gt,Fe,Le,he);Cr[Fe].name="!Directory",fe>0&&Ke!==D&&(Cr[Ke].name="!MiniFAT"),Cr[Le[0]].name="!FAT",Cr.fat_addrs=Le,Cr.ssz=he;var cr={},Qr=[],nn=[],Hn=[];y(Fe,Cr,Gt,Qr,fe,cr,nn,Ke),p(nn,Hn,Qr),Qr.shift();var Aa={FileIndex:nn,FullPaths:Hn};return pe&&pe.raw&&(Aa.raw={header:vt,sectors:Gt}),Aa}function h(Z){if(Z[Z.l]==80&&Z[Z.l+1]==75)return[0,0];Z.chk(Q,"Header Signature: "),Z.l+=16;var pe=Z.read_shift(2,"u");return[Z.read_shift(2,"u"),pe]}function f(Z,pe){var Ae=9;switch(Z.l+=2,Ae=Z.read_shift(2)){case 9:if(pe!=3)throw new Error("Sector Shift: Expected 9 saw "+Ae);break;case 12:if(pe!=4)throw new Error("Sector Shift: Expected 12 saw "+Ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ae)}Z.chk("0600","Mini Sector Shift: "),Z.chk("000000000000","Reserved: ")}function u(Z,pe){for(var Ae=Math.ceil(Z.length/pe)-1,he=[],fe=1;fe<Ae;++fe)he[fe-1]=Z.slice(fe*pe,(fe+1)*pe);return he[Ae-1]=Z.slice(Ae*pe),he}function p(Z,pe,Ae){for(var he=0,fe=0,xe=0,Fe=0,Ke=0,Ue=Ae.length,Le=[],De=[];he<Ue;++he)Le[he]=De[he]=he,pe[he]=Ae[he];for(;Ke<De.length;++Ke)he=De[Ke],fe=Z[he].L,xe=Z[he].R,Fe=Z[he].C,Le[he]===he&&(fe!==-1&&Le[fe]!==fe&&(Le[he]=Le[fe]),xe!==-1&&Le[xe]!==xe&&(Le[he]=Le[xe])),Fe!==-1&&(Le[Fe]=he),fe!==-1&&he!=Le[he]&&(Le[fe]=Le[he],De.lastIndexOf(fe)<Ke&&De.push(fe)),xe!==-1&&he!=Le[he]&&(Le[xe]=Le[he],De.lastIndexOf(xe)<Ke&&De.push(xe));for(he=1;he<Ue;++he)Le[he]===he&&(xe!==-1&&Le[xe]!==xe?Le[he]=Le[xe]:fe!==-1&&Le[fe]!==fe&&(Le[he]=Le[fe]));for(he=1;he<Ue;++he)if(Z[he].type!==0){if(Ke=he,Ke!=Le[Ke])do Ke=Le[Ke],pe[he]=pe[Ke]+"/"+pe[he];while(Ke!==0&&Le[Ke]!==-1&&Ke!=Le[Ke]);Le[he]=-1}for(pe[0]+="/",he=1;he<Ue;++he)Z[he].type!==2&&(pe[he]+="/")}function g(Z,pe,Ae){for(var he=Z.start,fe=Z.size,xe=[],Fe=he;Ae&&fe>0&&Fe>=0;)xe.push(pe.slice(Fe*L,Fe*L+L)),fe-=L,Fe=Gc(Ae,Fe*4);return xe.length===0?fn(0):Vl(xe).slice(0,Z.size)}function w(Z,pe,Ae,he,fe){var xe=D;if(Z===D){if(pe!==0)throw new Error("DIFAT chain shorter than expected")}else if(Z!==-1){var Fe=Ae[Z],Ke=(he>>>2)-1;if(!Fe)return;for(var Ue=0;Ue<Ke&&(xe=Gc(Fe,Ue*4))!==D;++Ue)fe.push(xe);w(Gc(Fe,he-4),pe-1,Ae,he,fe)}}function v(Z,pe,Ae,he,fe){var xe=[],Fe=[];fe||(fe=[]);var Ke=he-1,Ue=0,Le=0;for(Ue=pe;Ue>=0;){fe[Ue]=!0,xe[xe.length]=Ue,Fe.push(Z[Ue]);var De=Ae[Math.floor(Ue*4/he)];if(Le=Ue*4&Ke,he<4+Le)throw new Error("FAT boundary crossed: "+Ue+" 4 "+he);if(!Z[De])break;Ue=Gc(Z[De],Le)}return{nodes:xe,data:QN([Fe])}}function x(Z,pe,Ae,he){var fe=Z.length,xe=[],Fe=[],Ke=[],Ue=[],Le=he-1,De=0,st=0,vt=0,Bt=0;for(De=0;De<fe;++De)if(Ke=[],vt=De+pe,vt>=fe&&(vt-=fe),!Fe[vt]){Ue=[];var ct=[];for(st=vt;st>=0;){ct[st]=!0,Fe[st]=!0,Ke[Ke.length]=st,Ue.push(Z[st]);var _t=Ae[Math.floor(st*4/he)];if(Bt=st*4&Le,he<4+Bt)throw new Error("FAT boundary crossed: "+st+" 4 "+he);if(!Z[_t]||(st=Gc(Z[_t],Bt),ct[st]))break}xe[vt]={nodes:Ke,data:QN([Ue])}}return xe}function y(Z,pe,Ae,he,fe,xe,Fe,Ke){for(var Ue=0,Le=he.length?2:0,De=pe[Z].data,st=0,vt=0,Bt;st<De.length;st+=128){var ct=De.slice(st,st+128);Dn(ct,64),vt=ct.read_shift(2),Bt=cw(ct,0,vt-Le),he.push(Bt);var _t={name:Bt,type:ct.read_shift(1),color:ct.read_shift(1),L:ct.read_shift(4,"i"),R:ct.read_shift(4,"i"),C:ct.read_shift(4,"i"),clsid:ct.read_shift(16),state:ct.read_shift(4,"i"),start:0,size:0},Gt=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);Gt!==0&&(_t.ct=_(ct,ct.l-8));var Cr=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);Cr!==0&&(_t.mt=_(ct,ct.l-8)),_t.start=ct.read_shift(4,"i"),_t.size=ct.read_shift(4,"i"),_t.size<0&&_t.start<0&&(_t.size=_t.type=0,_t.start=D,_t.name=""),_t.type===5?(Ue=_t.start,fe>0&&Ue!==D&&(pe[Ue].name="!StreamData")):_t.size>=4096?(_t.storage="fat",pe[_t.start]===void 0&&(pe[_t.start]=v(Ae,_t.start,pe.fat_addrs,pe.ssz)),pe[_t.start].name=_t.name,_t.content=pe[_t.start].data.slice(0,_t.size)):(_t.storage="minifat",_t.size<0?_t.size=0:Ue!==D&&_t.start!==D&&pe[Ue]&&(_t.content=g(_t,pe[Ue].data,(pe[Ke]||{}).data))),_t.content&&Dn(_t.content,0),xe[Bt]=_t,Fe.push(_t)}}function _(Z,pe){return new Date((Ja(Z,pe+4)/1e7*Math.pow(2,32)+Ja(Z,pe)/1e7-11644473600)*1e3)}function I(Z,pe){return A(),d(c.readFileSync(Z),pe)}function k(Z,pe){var Ae=pe&&pe.type;switch(Ae||mr&&Buffer.isBuffer(Z)&&(Ae="buffer"),Ae||"base64"){case"file":return I(Z,pe);case"base64":return d(Xi(ii(Z)),pe);case"binary":return d(Xi(Z),pe)}return d(Z,pe)}function T(Z,pe){var Ae=pe||{},he=Ae.root||"Root Entry";if(Z.FullPaths||(Z.FullPaths=[]),Z.FileIndex||(Z.FileIndex=[]),Z.FullPaths.length!==Z.FileIndex.length)throw new Error("inconsistent CFB structure");Z.FullPaths.length===0&&(Z.FullPaths[0]=he+"/",Z.FileIndex[0]={name:he,type:5}),Ae.CLSID&&(Z.FileIndex[0].clsid=Ae.CLSID),S(Z)}function S(Z){var pe="Sh33tJ5";if(!xr.find(Z,"/"+pe)){var Ae=fn(4);Ae[0]=55,Ae[1]=Ae[3]=50,Ae[2]=54,Z.FileIndex.push({name:pe,type:2,content:Ae,size:4,L:69,R:69,C:69}),Z.FullPaths.push(Z.FullPaths[0]+pe),B(Z)}}function B(Z,pe){T(Z);for(var Ae=!1,he=!1,fe=Z.FullPaths.length-1;fe>=0;--fe){var xe=Z.FileIndex[fe];switch(xe.type){case 0:he?Ae=!0:(Z.FileIndex.pop(),Z.FullPaths.pop());break;case 1:case 2:case 5:he=!0,isNaN(xe.R*xe.L*xe.C)&&(Ae=!0),xe.R>-1&&xe.L>-1&&xe.R==xe.L&&(Ae=!0);break;default:Ae=!0;break}}if(!(!Ae&&!pe)){var Fe=new Date(1987,1,19),Ke=0,Ue=Object.create?Object.create(null):{},Le=[];for(fe=0;fe<Z.FullPaths.length;++fe)Ue[Z.FullPaths[fe]]=!0,Z.FileIndex[fe].type!==0&&Le.push([Z.FullPaths[fe],Z.FileIndex[fe]]);for(fe=0;fe<Le.length;++fe){var De=s(Le[fe][0]);he=Ue[De],he||(Le.push([De,{name:a(De).replace("/",""),type:1,clsid:P,ct:Fe,mt:Fe,content:null}]),Ue[De]=!0)}for(Le.sort(function(Bt,ct){return r(Bt[0],ct[0])}),Z.FullPaths=[],Z.FileIndex=[],fe=0;fe<Le.length;++fe)Z.FullPaths[fe]=Le[fe][0],Z.FileIndex[fe]=Le[fe][1];for(fe=0;fe<Le.length;++fe){var st=Z.FileIndex[fe],vt=Z.FullPaths[fe];if(st.name=a(vt).replace("/",""),st.L=st.R=st.C=-(st.color=1),st.size=st.content?st.content.length:0,st.start=0,st.clsid=st.clsid||P,fe===0)st.C=Le.length>1?1:-1,st.size=0,st.type=5;else if(vt.slice(-1)=="/"){for(Ke=fe+1;Ke<Le.length&&s(Z.FullPaths[Ke])!=vt;++Ke);for(st.C=Ke>=Le.length?-1:Ke,Ke=fe+1;Ke<Le.length&&s(Z.FullPaths[Ke])!=s(vt);++Ke);st.R=Ke>=Le.length?-1:Ke,st.type=1}else s(Z.FullPaths[fe+1]||"")==s(vt)&&(st.R=fe+1),st.type=2}}}function R(Z,pe){var Ae=pe||{};if(Ae.fileType=="mad")return Fr(Z,Ae);switch(B(Z),Ae.fileType){case"zip":return Kt(Z,Ae)}var he=function(Bt){for(var ct=0,_t=0,Gt=0;Gt<Bt.FileIndex.length;++Gt){var Cr=Bt.FileIndex[Gt];if(Cr.content){var cr=Cr.content.length;cr>0&&(cr<4096?ct+=cr+63>>6:_t+=cr+511>>9)}}for(var Qr=Bt.FullPaths.length+3>>2,nn=ct+7>>3,Hn=ct+127>>7,Aa=nn+_t+Qr+Hn,an=Aa+127>>7,Qa=an<=109?0:Math.ceil((an-109)/127);Aa+an+Qa+127>>7>an;)Qa=++an<=109?0:Math.ceil((an-109)/127);var As=[1,Qa,an,Hn,Qr,_t,ct,0];return Bt.FileIndex[0].size=ct<<6,As[7]=(Bt.FileIndex[0].start=As[0]+As[1]+As[2]+As[3]+As[4]+As[5])+(As[6]+7>>3),As}(Z),fe=fn(he[7]<<9),xe=0,Fe=0;{for(xe=0;xe<8;++xe)fe.write_shift(1,K[xe]);for(xe=0;xe<8;++xe)fe.write_shift(2,0);for(fe.write_shift(2,62),fe.write_shift(2,3),fe.write_shift(2,65534),fe.write_shift(2,9),fe.write_shift(2,6),xe=0;xe<3;++xe)fe.write_shift(2,0);for(fe.write_shift(4,0),fe.write_shift(4,he[2]),fe.write_shift(4,he[0]+he[1]+he[2]+he[3]-1),fe.write_shift(4,0),fe.write_shift(4,4096),fe.write_shift(4,he[3]?he[0]+he[1]+he[2]-1:D),fe.write_shift(4,he[3]),fe.write_shift(-4,he[1]?he[0]-1:D),fe.write_shift(4,he[1]),xe=0;xe<109;++xe)fe.write_shift(-4,xe<he[2]?he[1]+xe:-1)}if(he[1])for(Fe=0;Fe<he[1];++Fe){for(;xe<236+Fe*127;++xe)fe.write_shift(-4,xe<he[2]?he[1]+xe:-1);fe.write_shift(-4,Fe===he[1]-1?D:Fe+1)}var Ke=function(Bt){for(Fe+=Bt;xe<Fe-1;++xe)fe.write_shift(-4,xe+1);Bt&&(++xe,fe.write_shift(-4,D))};for(Fe=xe=0,Fe+=he[1];xe<Fe;++xe)fe.write_shift(-4,te.DIFSECT);for(Fe+=he[2];xe<Fe;++xe)fe.write_shift(-4,te.FATSECT);Ke(he[3]),Ke(he[4]);for(var Ue=0,Le=0,De=Z.FileIndex[0];Ue<Z.FileIndex.length;++Ue)De=Z.FileIndex[Ue],De.content&&(Le=De.content.length,!(Le<4096)&&(De.start=Fe,Ke(Le+511>>9)));for(Ke(he[6]+7>>3);fe.l&511;)fe.write_shift(-4,te.ENDOFCHAIN);for(Fe=xe=0,Ue=0;Ue<Z.FileIndex.length;++Ue)De=Z.FileIndex[Ue],De.content&&(Le=De.content.length,!(!Le||Le>=4096)&&(De.start=Fe,Ke(Le+63>>6)));for(;fe.l&511;)fe.write_shift(-4,te.ENDOFCHAIN);for(xe=0;xe<he[4]<<2;++xe){var st=Z.FullPaths[xe];if(!st||st.length===0){for(Ue=0;Ue<17;++Ue)fe.write_shift(4,0);for(Ue=0;Ue<3;++Ue)fe.write_shift(4,-1);for(Ue=0;Ue<12;++Ue)fe.write_shift(4,0);continue}De=Z.FileIndex[xe],xe===0&&(De.start=De.size?De.start-1:D);var vt=xe===0&&Ae.root||De.name;if(Le=2*(vt.length+1),fe.write_shift(64,vt,"utf16le"),fe.write_shift(2,Le),fe.write_shift(1,De.type),fe.write_shift(1,De.color),fe.write_shift(-4,De.L),fe.write_shift(-4,De.R),fe.write_shift(-4,De.C),De.clsid)fe.write_shift(16,De.clsid,"hex");else for(Ue=0;Ue<4;++Ue)fe.write_shift(4,0);fe.write_shift(4,De.state||0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,De.start),fe.write_shift(4,De.size),fe.write_shift(4,0)}for(xe=1;xe<Z.FileIndex.length;++xe)if(De=Z.FileIndex[xe],De.size>=4096)if(fe.l=De.start+1<<9,mr&&Buffer.isBuffer(De.content))De.content.copy(fe,fe.l,0,De.size),fe.l+=De.size+511&-512;else{for(Ue=0;Ue<De.size;++Ue)fe.write_shift(1,De.content[Ue]);for(;Ue&511;++Ue)fe.write_shift(1,0)}for(xe=1;xe<Z.FileIndex.length;++xe)if(De=Z.FileIndex[xe],De.size>0&&De.size<4096)if(mr&&Buffer.isBuffer(De.content))De.content.copy(fe,fe.l,0,De.size),fe.l+=De.size+63&-64;else{for(Ue=0;Ue<De.size;++Ue)fe.write_shift(1,De.content[Ue]);for(;Ue&63;++Ue)fe.write_shift(1,0)}if(mr)fe.l=fe.length;else for(;fe.l<fe.length;)fe.write_shift(1,0);return fe}function U(Z,pe){var Ae=Z.FullPaths.map(function(Ue){return Ue.toUpperCase()}),he=Ae.map(function(Ue){var Le=Ue.split("/");return Le[Le.length-(Ue.slice(-1)=="/"?2:1)]}),fe=!1;pe.charCodeAt(0)===47?(fe=!0,pe=Ae[0].slice(0,-1)+pe):fe=pe.indexOf("/")!==-1;var xe=pe.toUpperCase(),Fe=fe===!0?Ae.indexOf(xe):he.indexOf(xe);if(Fe!==-1)return Z.FileIndex[Fe];var Ke=!xe.match(A0);for(xe=xe.replace(ba,""),Ke&&(xe=xe.replace(A0,"!")),Fe=0;Fe<Ae.length;++Fe)if((Ke?Ae[Fe].replace(A0,"!"):Ae[Fe]).replace(ba,"")==xe||(Ke?he[Fe].replace(A0,"!"):he[Fe]).replace(ba,"")==xe)return Z.FileIndex[Fe];return null}var L=64,D=-2,Q="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],P="00000000000000000000000000000000",te={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:Q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:P,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function J(Z,pe,Ae){A();var he=R(Z,Ae);c.writeFileSync(pe,he)}function V(Z){for(var pe=new Array(Z.length),Ae=0;Ae<Z.length;++Ae)pe[Ae]=String.fromCharCode(Z[Ae]);return pe.join("")}function ie(Z,pe){var Ae=R(Z,pe);switch(pe&&pe.type||"buffer"){case"file":return A(),c.writeFileSync(pe.filename,Ae),Ae;case"binary":return typeof Ae=="string"?Ae:V(Ae);case"base64":return vN(typeof Ae=="string"?Ae:V(Ae));case"buffer":if(mr)return Buffer.isBuffer(Ae)?Ae:BA(Ae);case"array":return typeof Ae=="string"?Xi(Ae):Ae}return Ae}var Y;function N(Z){try{var pe=Z.InflateRaw,Ae=new pe;if(Ae._processChunk(new Uint8Array([3,0]),Ae._finishFlushFlag),Ae.bytesRead)Y=Z;else throw new Error("zlib does not expose bytesRead")}catch(he){console.error("cannot use native zlib: "+(he.message||he))}}function C(Z,pe){if(!Y)return ft(Z,pe);var Ae=Y.InflateRaw,he=new Ae,fe=he._processChunk(Z.slice(Z.l),he._finishFlushFlag);return Z.l+=he.bytesRead,fe}function E(Z){return Y?Y.deflateRawSync(Z):nt(Z)}var O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ye(Z){var pe=(Z<<1|Z<<11)&139536|(Z<<5|Z<<15)&558144;return(pe>>16|pe>>8|pe)&255}for(var re=typeof Uint8Array<"u",de=re?new Uint8Array(256):[],Ne=0;Ne<256;++Ne)de[Ne]=ye(Ne);function z(Z,pe){var Ae=de[Z&255];return pe<=8?Ae>>>8-pe:(Ae=Ae<<8|de[Z>>8&255],pe<=16?Ae>>>16-pe:(Ae=Ae<<8|de[Z>>16&255],Ae>>>24-pe))}function Be(Z,pe){var Ae=pe&7,he=pe>>>3;return(Z[he]|(Ae<=6?0:Z[he+1]<<8))>>>Ae&3}function Ve(Z,pe){var Ae=pe&7,he=pe>>>3;return(Z[he]|(Ae<=5?0:Z[he+1]<<8))>>>Ae&7}function ne(Z,pe){var Ae=pe&7,he=pe>>>3;return(Z[he]|(Ae<=4?0:Z[he+1]<<8))>>>Ae&15}function Me(Z,pe){var Ae=pe&7,he=pe>>>3;return(Z[he]|(Ae<=3?0:Z[he+1]<<8))>>>Ae&31}function Re(Z,pe){var Ae=pe&7,he=pe>>>3;return(Z[he]|(Ae<=1?0:Z[he+1]<<8))>>>Ae&127}function Ye(Z,pe,Ae){var he=pe&7,fe=pe>>>3,xe=(1<<Ae)-1,Fe=Z[fe]>>>he;return Ae<8-he||(Fe|=Z[fe+1]<<8-he,Ae<16-he)||(Fe|=Z[fe+2]<<16-he,Ae<24-he)||(Fe|=Z[fe+3]<<24-he),Fe&xe}function ze(Z,pe,Ae){var he=pe&7,fe=pe>>>3;return he<=5?Z[fe]|=(Ae&7)<<he:(Z[fe]|=Ae<<he&255,Z[fe+1]=(Ae&7)>>8-he),pe+3}function yt(Z,pe,Ae){var he=pe&7,fe=pe>>>3;return Ae=(Ae&1)<<he,Z[fe]|=Ae,pe+1}function mt(Z,pe,Ae){var he=pe&7,fe=pe>>>3;return Ae<<=he,Z[fe]|=Ae&255,Ae>>>=8,Z[fe+1]=Ae,pe+8}function at(Z,pe,Ae){var he=pe&7,fe=pe>>>3;return Ae<<=he,Z[fe]|=Ae&255,Ae>>>=8,Z[fe+1]=Ae&255,Z[fe+2]=Ae>>>8,pe+16}function it(Z,pe){var Ae=Z.length,he=2*Ae>pe?2*Ae:pe+5,fe=0;if(Ae>=pe)return Z;if(mr){var xe=yN(he);if(Z.copy)Z.copy(xe);else for(;fe<Z.length;++fe)xe[fe]=Z[fe];return xe}else if(re){var Fe=new Uint8Array(he);if(Fe.set)Fe.set(Z);else for(;fe<Ae;++fe)Fe[fe]=Z[fe];return Fe}return Z.length=he,Z}function jt(Z){for(var pe=new Array(Z),Ae=0;Ae<Z;++Ae)pe[Ae]=0;return pe}function gt(Z,pe,Ae){var he=1,fe=0,xe=0,Fe=0,Ke=0,Ue=Z.length,Le=re?new Uint16Array(32):jt(32);for(xe=0;xe<32;++xe)Le[xe]=0;for(xe=Ue;xe<Ae;++xe)Z[xe]=0;Ue=Z.length;var De=re?new Uint16Array(Ue):jt(Ue);for(xe=0;xe<Ue;++xe)Le[fe=Z[xe]]++,he<fe&&(he=fe),De[xe]=0;for(Le[0]=0,xe=1;xe<=he;++xe)Le[xe+16]=Ke=Ke+Le[xe-1]<<1;for(xe=0;xe<Ue;++xe)Ke=Z[xe],Ke!=0&&(De[xe]=Le[Ke+16]++);var st=0;for(xe=0;xe<Ue;++xe)if(st=Z[xe],st!=0)for(Ke=z(De[xe],he)>>he-st,Fe=(1<<he+4-st)-1;Fe>=0;--Fe)pe[Ke|Fe<<st]=st&15|xe<<4;return he}var pt=re?new Uint16Array(512):jt(512),ot=re?new Uint16Array(32):jt(32);if(!re){for(var Et=0;Et<512;++Et)pt[Et]=0;for(Et=0;Et<32;++Et)ot[Et]=0}(function(){for(var Z=[],pe=0;pe<32;pe++)Z.push(5);gt(Z,ot,32);var Ae=[];for(pe=0;pe<=143;pe++)Ae.push(8);for(;pe<=255;pe++)Ae.push(9);for(;pe<=279;pe++)Ae.push(7);for(;pe<=287;pe++)Ae.push(8);gt(Ae,pt,288)})();var ht=function(){for(var pe=re?new Uint8Array(32768):[],Ae=0,he=0;Ae<se.length-1;++Ae)for(;he<se[Ae+1];++he)pe[he]=Ae;for(;he<32768;++he)pe[he]=29;var fe=re?new Uint8Array(259):[];for(Ae=0,he=0;Ae<q.length-1;++Ae)for(;he<q[Ae+1];++he)fe[he]=Ae;function xe(Ke,Ue){for(var Le=0;Le<Ke.length;){var De=Math.min(65535,Ke.length-Le),st=Le+De==Ke.length;for(Ue.write_shift(1,+st),Ue.write_shift(2,De),Ue.write_shift(2,~De&65535);De-- >0;)Ue[Ue.l++]=Ke[Le++]}return Ue.l}function Fe(Ke,Ue){for(var Le=0,De=0,st=re?new Uint16Array(32768):[];De<Ke.length;){var vt=Math.min(65535,Ke.length-De);if(vt<10){for(Le=ze(Ue,Le,+(De+vt==Ke.length)),Le&7&&(Le+=8-(Le&7)),Ue.l=Le/8|0,Ue.write_shift(2,vt),Ue.write_shift(2,~vt&65535);vt-- >0;)Ue[Ue.l++]=Ke[De++];Le=Ue.l*8;continue}Le=ze(Ue,Le,+(De+vt==Ke.length)+2);for(var Bt=0;vt-- >0;){var ct=Ke[De];Bt=(Bt<<5^ct)&32767;var _t=-1,Gt=0;if((_t=st[Bt])&&(_t|=De&-32768,_t>De&&(_t-=32768),_t<De))for(;Ke[_t+Gt]==Ke[De+Gt]&&Gt<250;)++Gt;if(Gt>2){ct=fe[Gt],ct<=22?Le=mt(Ue,Le,de[ct+1]>>1)-1:(mt(Ue,Le,3),Le+=5,mt(Ue,Le,de[ct-23]>>5),Le+=3);var Cr=ct<8?0:ct-4>>2;Cr>0&&(at(Ue,Le,Gt-q[ct]),Le+=Cr),ct=pe[De-_t],Le=mt(Ue,Le,de[ct]>>3),Le-=3;var cr=ct<4?0:ct-2>>1;cr>0&&(at(Ue,Le,De-_t-se[ct]),Le+=cr);for(var Qr=0;Qr<Gt;++Qr)st[Bt]=De&32767,Bt=(Bt<<5^Ke[De])&32767,++De;vt-=Gt-1}else ct<=143?ct=ct+48:Le=yt(Ue,Le,1),Le=mt(Ue,Le,de[ct]),st[Bt]=De&32767,++De}Le=mt(Ue,Le,0)-1}return Ue.l=(Le+7)/8|0,Ue.l}return function(Ue,Le){return Ue.length<8?xe(Ue,Le):Fe(Ue,Le)}}();function nt(Z){var pe=fn(50+Math.floor(Z.length*1.1)),Ae=ht(Z,pe);return pe.slice(0,Ae)}var ee=re?new Uint16Array(32768):jt(32768),Se=re?new Uint16Array(32768):jt(32768),je=re?new Uint16Array(128):jt(128),qe=1,At=1;function wt(Z,pe){var Ae=Me(Z,pe)+257;pe+=5;var he=Me(Z,pe)+1;pe+=5;var fe=ne(Z,pe)+4;pe+=4;for(var xe=0,Fe=re?new Uint8Array(19):jt(19),Ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ue=1,Le=re?new Uint8Array(8):jt(8),De=re?new Uint8Array(8):jt(8),st=Fe.length,vt=0;vt<fe;++vt)Fe[O[vt]]=xe=Ve(Z,pe),Ue<xe&&(Ue=xe),Le[xe]++,pe+=3;var Bt=0;for(Le[0]=0,vt=1;vt<=Ue;++vt)De[vt]=Bt=Bt+Le[vt-1]<<1;for(vt=0;vt<st;++vt)(Bt=Fe[vt])!=0&&(Ke[vt]=De[Bt]++);var ct=0;for(vt=0;vt<st;++vt)if(ct=Fe[vt],ct!=0){Bt=de[Ke[vt]]>>8-ct;for(var _t=(1<<7-ct)-1;_t>=0;--_t)je[Bt|_t<<ct]=ct&7|vt<<3}var Gt=[];for(Ue=1;Gt.length<Ae+he;)switch(Bt=je[Re(Z,pe)],pe+=Bt&7,Bt>>>=3){case 16:for(xe=3+Be(Z,pe),pe+=2,Bt=Gt[Gt.length-1];xe-- >0;)Gt.push(Bt);break;case 17:for(xe=3+Ve(Z,pe),pe+=3;xe-- >0;)Gt.push(0);break;case 18:for(xe=11+Re(Z,pe),pe+=7;xe-- >0;)Gt.push(0);break;default:Gt.push(Bt),Ue<Bt&&(Ue=Bt);break}var Cr=Gt.slice(0,Ae),cr=Gt.slice(Ae);for(vt=Ae;vt<286;++vt)Cr[vt]=0;for(vt=he;vt<30;++vt)cr[vt]=0;return qe=gt(Cr,ee,286),At=gt(cr,Se,30),pe}function He(Z,pe){if(Z[0]==3&&!(Z[1]&3))return[gc(pe),2];for(var Ae=0,he=0,fe=yN(pe||1<<18),xe=0,Fe=fe.length>>>0,Ke=0,Ue=0;!(he&1);){if(he=Ve(Z,Ae),Ae+=3,he>>>1)he>>1==1?(Ke=9,Ue=5):(Ae=wt(Z,Ae),Ke=qe,Ue=At);else{Ae&7&&(Ae+=8-(Ae&7));var Le=Z[Ae>>>3]|Z[(Ae>>>3)+1]<<8;if(Ae+=32,Le>0)for(!pe&&Fe<xe+Le&&(fe=it(fe,xe+Le),Fe=fe.length);Le-- >0;)fe[xe++]=Z[Ae>>>3],Ae+=8;continue}for(;;){!pe&&Fe<xe+32767&&(fe=it(fe,xe+32767),Fe=fe.length);var De=Ye(Z,Ae,Ke),st=he>>>1==1?pt[De]:ee[De];if(Ae+=st&15,st>>>=4,!(st>>>8&255))fe[xe++]=st;else{if(st==256)break;st-=257;var vt=st<8?0:st-4>>2;vt>5&&(vt=0);var Bt=xe+q[st];vt>0&&(Bt+=Ye(Z,Ae,vt),Ae+=vt),De=Ye(Z,Ae,Ue),st=he>>>1==1?ot[De]:Se[De],Ae+=st&15,st>>>=4;var ct=st<4?0:st-2>>1,_t=se[st];for(ct>0&&(_t+=Ye(Z,Ae,ct),Ae+=ct),!pe&&Fe<Bt&&(fe=it(fe,Bt+100),Fe=fe.length);xe<Bt;)fe[xe]=fe[xe-_t],++xe}}}return pe?[fe,Ae+7>>>3]:[fe.slice(0,xe),Ae+7>>>3]}function ft(Z,pe){var Ae=Z.slice(Z.l||0),he=He(Ae,pe);return Z.l+=he[1],he[0]}function Je(Z,pe){if(Z)typeof console<"u"&&console.error(pe);else throw new Error(pe)}function dt(Z,pe){var Ae=Z;Dn(Ae,0);var he=[],fe=[],xe={FileIndex:he,FullPaths:fe};T(xe,{root:pe.root});for(var Fe=Ae.length-4;(Ae[Fe]!=80||Ae[Fe+1]!=75||Ae[Fe+2]!=5||Ae[Fe+3]!=6)&&Fe>=0;)--Fe;Ae.l=Fe+4,Ae.l+=4;var Ke=Ae.read_shift(2);Ae.l+=6;var Ue=Ae.read_shift(4);for(Ae.l=Ue,Fe=0;Fe<Ke;++Fe){Ae.l+=20;var Le=Ae.read_shift(4),De=Ae.read_shift(4),st=Ae.read_shift(2),vt=Ae.read_shift(2),Bt=Ae.read_shift(2);Ae.l+=8;var ct=Ae.read_shift(4),_t=l(Ae.slice(Ae.l+st,Ae.l+st+vt));Ae.l+=st+vt+Bt;var Gt=Ae.l;Ae.l=ct+4,nr(Ae,Le,De,xe,_t),Ae.l=Gt}return xe}function nr(Z,pe,Ae,he,fe){Z.l+=2;var xe=Z.read_shift(2),Fe=Z.read_shift(2),Ke=o(Z);if(xe&8257)throw new Error("Unsupported ZIP encryption");for(var Ue=Z.read_shift(4),Le=Z.read_shift(4),De=Z.read_shift(4),st=Z.read_shift(2),vt=Z.read_shift(2),Bt="",ct=0;ct<st;++ct)Bt+=String.fromCharCode(Z[Z.l++]);if(vt){var _t=l(Z.slice(Z.l,Z.l+vt));(_t[21589]||{}).mt&&(Ke=_t[21589].mt),((fe||{})[21589]||{}).mt&&(Ke=fe[21589].mt)}Z.l+=vt;var Gt=Z.slice(Z.l,Z.l+Le);switch(Fe){case 8:Gt=C(Z,De);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Fe)}var Cr=!1;xe&8&&(Ue=Z.read_shift(4),Ue==134695760&&(Ue=Z.read_shift(4),Cr=!0),Le=Z.read_shift(4),De=Z.read_shift(4)),Le!=pe&&Je(Cr,"Bad compressed size: "+pe+" != "+Le),De!=Ae&&Je(Cr,"Bad uncompressed size: "+Ae+" != "+De),Tr(he,Bt,Gt,{unsafe:!0,mt:Ke})}function Kt(Z,pe){var Ae=pe||{},he=[],fe=[],xe=fn(1),Fe=Ae.compression?8:0,Ke=0,Ue=0,Le=0,De=0,st=0,vt=Z.FullPaths[0],Bt=vt,ct=Z.FileIndex[0],_t=[],Gt=0;for(Ue=1;Ue<Z.FullPaths.length;++Ue)if(Bt=Z.FullPaths[Ue].slice(vt.length),ct=Z.FileIndex[Ue],!(!ct.size||!ct.content||Bt=="Sh33tJ5")){var Cr=De,cr=fn(Bt.length);for(Le=0;Le<Bt.length;++Le)cr.write_shift(1,Bt.charCodeAt(Le)&127);cr=cr.slice(0,cr.l),_t[st]=zK.buf(ct.content,0);var Qr=ct.content;Fe==8&&(Qr=E(Qr)),xe=fn(30),xe.write_shift(4,67324752),xe.write_shift(2,20),xe.write_shift(2,Ke),xe.write_shift(2,Fe),ct.mt?i(xe,ct.mt):xe.write_shift(4,0),xe.write_shift(-4,_t[st]),xe.write_shift(4,Qr.length),xe.write_shift(4,ct.content.length),xe.write_shift(2,cr.length),xe.write_shift(2,0),De+=xe.length,he.push(xe),De+=cr.length,he.push(cr),De+=Qr.length,he.push(Qr),xe=fn(46),xe.write_shift(4,33639248),xe.write_shift(2,0),xe.write_shift(2,20),xe.write_shift(2,Ke),xe.write_shift(2,Fe),xe.write_shift(4,0),xe.write_shift(-4,_t[st]),xe.write_shift(4,Qr.length),xe.write_shift(4,ct.content.length),xe.write_shift(2,cr.length),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(4,0),xe.write_shift(4,Cr),Gt+=xe.l,fe.push(xe),Gt+=cr.length,fe.push(cr),++st}return xe=fn(22),xe.write_shift(4,101010256),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,st),xe.write_shift(2,st),xe.write_shift(4,Gt),xe.write_shift(4,De),xe.write_shift(2,0),Vl([Vl(he),Vl(fe),xe])}var xt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ir(Z,pe){if(Z.ctype)return Z.ctype;var Ae=Z.name||"",he=Ae.match(/\.([^\.]+)$/);return he&&xt[he[1]]||pe&&(he=(Ae=pe).match(/[\.\\]([^\.\\])+$/),he&&xt[he[1]])?xt[he[1]]:"application/octet-stream"}function Dr(Z){for(var pe=vN(Z),Ae=[],he=0;he<pe.length;he+=76)Ae.push(pe.slice(he,he+76));return Ae.join(`\r
`)+`\r
`}function ys(Z){var pe=Z.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Le){var De=Le.charCodeAt(0).toString(16).toUpperCase();return"="+(De.length==1?"0"+De:De)});pe=pe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),pe.charAt(0)==`
`&&(pe="=0D"+pe.slice(1)),pe=pe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ae=[],he=pe.split(`\r
`),fe=0;fe<he.length;++fe){var xe=he[fe];if(xe.length==0){Ae.push("");continue}for(var Fe=0;Fe<xe.length;){var Ke=76,Ue=xe.slice(Fe,Fe+Ke);Ue.charAt(Ke-1)=="="?Ke--:Ue.charAt(Ke-2)=="="?Ke-=2:Ue.charAt(Ke-3)=="="&&(Ke-=3),Ue=xe.slice(Fe,Fe+Ke),Fe+=Ke,Fe<xe.length&&(Ue+="="),Ae.push(Ue)}}return Ae.join(`\r
`)}function sn(Z){for(var pe=[],Ae=0;Ae<Z.length;++Ae){for(var he=Z[Ae];Ae<=Z.length&&he.charAt(he.length-1)=="=";)he=he.slice(0,he.length-1)+Z[++Ae];pe.push(he)}for(var fe=0;fe<pe.length;++fe)pe[fe]=pe[fe].replace(/[=][0-9A-Fa-f]{2}/g,function(xe){return String.fromCharCode(parseInt(xe.slice(1),16))});return Xi(pe.join(`\r
`))}function Cs(Z,pe,Ae){for(var he="",fe="",xe="",Fe,Ke=0;Ke<10;++Ke){var Ue=pe[Ke];if(!Ue||Ue.match(/^\s*$/))break;var Le=Ue.match(/^(.*?):\s*([^\s].*)$/);if(Le)switch(Le[1].toLowerCase()){case"content-location":he=Le[2].trim();break;case"content-type":xe=Le[2].trim();break;case"content-transfer-encoding":fe=Le[2].trim();break}}switch(++Ke,fe.toLowerCase()){case"base64":Fe=Xi(ii(pe.slice(Ke).join("")));break;case"quoted-printable":Fe=sn(pe.slice(Ke));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+fe)}var De=Tr(Z,he.slice(Ae.length),Fe,{unsafe:!0});xe&&(De.ctype=xe)}function Rt(Z,pe){if(V(Z.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ae=pe&&pe.root||"",he=(mr&&Buffer.isBuffer(Z)?Z.toString("binary"):V(Z)).split(`\r
`),fe=0,xe="";for(fe=0;fe<he.length;++fe)if(xe=he[fe],!!/^Content-Location:/i.test(xe)&&(xe=xe.slice(xe.indexOf("file")),Ae||(Ae=xe.slice(0,xe.lastIndexOf("/")+1)),xe.slice(0,Ae.length)!=Ae))for(;Ae.length>0&&(Ae=Ae.slice(0,Ae.length-1),Ae=Ae.slice(0,Ae.lastIndexOf("/")+1),xe.slice(0,Ae.length)!=Ae););var Fe=(he[1]||"").match(/boundary="(.*?)"/);if(!Fe)throw new Error("MAD cannot find boundary");var Ke="--"+(Fe[1]||""),Ue=[],Le=[],De={FileIndex:Ue,FullPaths:Le};T(De);var st,vt=0;for(fe=0;fe<he.length;++fe){var Bt=he[fe];Bt!==Ke&&Bt!==Ke+"--"||(vt++&&Cs(De,he.slice(st,fe),Ae),st=fe)}return De}function Fr(Z,pe){var Ae=pe||{},he=Ae.boundary||"SheetJS";he="------="+he;for(var fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+he.slice(2)+'"',"","",""],xe=Z.FullPaths[0],Fe=xe,Ke=Z.FileIndex[0],Ue=1;Ue<Z.FullPaths.length;++Ue)if(Fe=Z.FullPaths[Ue].slice(xe.length),Ke=Z.FileIndex[Ue],!(!Ke.size||!Ke.content||Fe=="Sh33tJ5")){Fe=Fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Gt){return"_x"+Gt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Gt){return"_u"+Gt.charCodeAt(0).toString(16)+"_"});for(var Le=Ke.content,De=mr&&Buffer.isBuffer(Le)?Le.toString("binary"):V(Le),st=0,vt=Math.min(1024,De.length),Bt=0,ct=0;ct<=vt;++ct)(Bt=De.charCodeAt(ct))>=32&&Bt<128&&++st;var _t=st>=vt*4/5;fe.push(he),fe.push("Content-Location: "+(Ae.root||"file:///C:/SheetJS/")+Fe),fe.push("Content-Transfer-Encoding: "+(_t?"quoted-printable":"base64")),fe.push("Content-Type: "+ir(Ke,Fe)),fe.push(""),fe.push(_t?ys(De):Dr(De))}return fe.push(he+`--\r
`),fe.join(`\r
`)}function Br(Z){var pe={};return T(pe,Z),pe}function Tr(Z,pe,Ae,he){var fe=he&&he.unsafe;fe||T(Z);var xe=!fe&&xr.find(Z,pe);if(!xe){var Fe=Z.FullPaths[0];pe.slice(0,Fe.length)==Fe?Fe=pe:(Fe.slice(-1)!="/"&&(Fe+="/"),Fe=(Fe+pe).replace("//","/")),xe={name:a(pe),type:2},Z.FileIndex.push(xe),Z.FullPaths.push(Fe),fe||xr.utils.cfb_gc(Z)}return xe.content=Ae,xe.size=Ae?Ae.length:0,he&&(he.CLSID&&(xe.clsid=he.CLSID),he.mt&&(xe.mt=he.mt),he.ct&&(xe.ct=he.ct)),xe}function Vr(Z,pe){T(Z);var Ae=xr.find(Z,pe);if(Ae){for(var he=0;he<Z.FileIndex.length;++he)if(Z.FileIndex[he]==Ae)return Z.FileIndex.splice(he,1),Z.FullPaths.splice(he,1),!0}return!1}function yr(Z,pe,Ae){T(Z);var he=xr.find(Z,pe);if(he){for(var fe=0;fe<Z.FileIndex.length;++fe)if(Z.FileIndex[fe]==he)return Z.FileIndex[fe].name=a(Ae),Z.FullPaths[fe]=Ae,!0}return!1}function qr(Z){B(Z,!0)}return t.find=U,t.read=k,t.parse=d,t.write=ie,t.writeFile=J,t.utils={cfb_new:Br,cfb_add:Tr,cfb_del:Vr,cfb_mov:yr,cfb_gc:qr,ReadShift:F0,CheckField:Zk,prep_blob:Dn,bconcat:Vl,use_zlib:N,_deflateRaw:nt,_inflateRaw:ft,consts:te},t}();function VK(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(s){if(!s.message||!s.message.match(/onstruct/))throw s}throw new Error("Cannot access file "+e)}function Bo(e){for(var t=Object.keys(e),r=[],s=0;s<t.length;++s)Object.prototype.hasOwnProperty.call(e,t[s])&&r.push(t[s]);return r}function aw(e){for(var t=[],r=Bo(e),s=0;s!==r.length;++s)t[e[r[s]]]=r[s];return t}var Om=new Date(1899,11,30,0,0,0);function _a(e,t){var r=e.getTime(),s=Om.getTime()+(e.getTimezoneOffset()-Om.getTimezoneOffset())*6e4;return(r-s)/(24*60*60*1e3)}var Tk=new Date,qK=Om.getTime()+(Tk.getTimezoneOffset()-Om.getTimezoneOffset())*6e4,EN=Tk.getTimezoneOffset();function jg(e){var t=new Date;return t.setTime(e*24*60*60*1e3+qK),t.getTimezoneOffset()!==EN&&t.setTime(t.getTime()+(t.getTimezoneOffset()-EN)*6e4),t}function GK(e){var t=0,r=0,s=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(r=1,i>3&&(s=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(s)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[i],10)}return t}var kN=new Date("2017-02-19T19:06:09.000Z"),Ik=isNaN(kN.getFullYear())?new Date("2/19/17"):kN,$K=Ik.getFullYear()==2017;function Bn(e,t){var r=new Date(e);if($K)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Ik.getFullYear()==1917&&!isNaN(r.getFullYear())){var s=r.getFullYear();return e.indexOf(""+s)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function gA(e,t){if(mr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return u0(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return u0(vk(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return u0(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return u0(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var s=[],a=0;a!=e.length;++a)s.push(String.fromCharCode(e[a]));return s.join("")}function Pn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Pn(e[r]));return t}function Is(e,t){for(var r="";r.length<t;)r+=e;return r}function to(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,s=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(s))||(s=s.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(s)))?t/r:t}var WK=["january","february","march","april","may","june","july","august","september","october","november","december"];function Zd(e){var t=new Date(e),r=new Date(NaN),s=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&WK.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return s<0||s>8099?r:(a>0||i>1)&&s!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var XK=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,s,a){if(e||typeof s=="string")return r.split(s);for(var i=r.split(s),o=[i[0]],l=1;l<i.length;++l)o.push(a),o.push(i[l]);return o}}();function Uk(e){return e?e.content&&e.type?gA(e.content,!0):e.data?c0(e.data):e.asNodeBuffer&&mr?c0(e.asNodeBuffer().toString("binary")):e.asBinary?c0(e.asBinary()):e._data&&e._data.getContent?c0(gA(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Lk(e){if(!e)return null;if(e.data)return gN(e.data);if(e.asNodeBuffer&&mr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?gN(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function JK(e){return e&&e.name.slice(-4)===".bin"?Lk(e):Uk(e)}function gi(e,t){for(var r=e.FullPaths||Bo(e.files),s=t.toLowerCase().replace(/[\/]/g,"\\"),a=s.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(s==o||a==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function iw(e,t){var r=gi(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ys(e,t,r){if(!r)return JK(iw(e,t));if(!t)return null;try{return Ys(e,t)}catch{return null}}function ei(e,t,r){if(!r)return Uk(iw(e,t));if(!t)return null;try{return ei(e,t)}catch{return null}}function YK(e,t,r){return Lk(iw(e,t))}function SN(e){for(var t=e.FullPaths||Bo(e.files),r=[],s=0;s<t.length;++s)t[s].slice(-1)!="/"&&r.push(t[s].replace(/^Root Entry[\/]/,""));return r.sort()}function ZK(e,t,r){if(e.FullPaths){if(typeof r=="string"){var s;return mr?s=BA(r):s=xK(r),xr.utils.cfb_add(e,t,s)}xr.utils.cfb_add(e,t,r)}else e.file(t,r)}function Dk(e,t){switch(t.type){case"base64":return xr.read(e,{type:"base64"});case"binary":return xr.read(e,{type:"binary"});case"buffer":case"array":return xr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function d0(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var s=e.split("/");s.length!==0;){var a=s.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Qk=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ez=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,FN=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,tz=/<[^>]*>/g,ca=Qk.match(FN)?FN:tz,rz=/<\w*:/,sz=/<(\/?)\w+:/;function Zt(e,t,r){for(var s={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(t||(s[0]=e.slice(0,a)),a===e.length)return s;var o=e.match(ez),l=0,c="",A=0,d="",h="",f=1;if(o)for(A=0;A!=o.length;++A){for(h=o[A],i=0;i!=h.length&&h.charCodeAt(i)!==61;++i);for(d=h.slice(0,i).trim();h.charCodeAt(i+1)==32;)++i;for(f=(a=h.charCodeAt(i+1))==34||a==39?1:0,c=h.slice(i+1+f,h.length-f),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),s[d]=c,s[d.toLowerCase()]=c;else{var u=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(s[u]&&d.slice(l-3,l)=="ext")continue;s[u]=c,s[u.toLowerCase()]=c}}return s}function ko(e){return e.replace(sz,"<$1")}var Ok={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},nz=aw(Ok),Nr=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(s){var a=s+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(l,c){return Ok[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,i))+a.slice(i+9,o)+r(a.slice(o+3))}}(),az=/[&<>'"]/g,iz=/[\u0000-\u001f]/g;function ow(e){var t=e+"";return t.replace(az,function(r){return nz[r]}).replace(/\n/g,"<br/>").replace(iz,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var TN=function(){var e=/&#(\d+);/g;function t(r,s){return String.fromCharCode(parseInt(s,10))}return function(s){return s.replace(e,t)}}();function gs(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function N1(e){for(var t="",r=0,s=0,a=0,i=0,o=0,l=0;r<e.length;){if(s=e.charCodeAt(r++),s<128){t+=String.fromCharCode(s);continue}if(a=e.charCodeAt(r++),s>191&&s<224){o=(s&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),s<240){t+=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function IN(e){var t=gc(2*e.length),r,s,a=1,i=0,o=0,l;for(s=0;s<e.length;s+=a)a=1,(l=e.charCodeAt(s))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(s+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(s+1)&63)*64+(e.charCodeAt(s+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(s+1)&63)*4096+(e.charCodeAt(s+2)&63)*64+(e.charCodeAt(s+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function UN(e){return BA(e,"binary").toString("utf8")}var mp="foo bar baz",ls=mr&&(UN(mp)==N1(mp)&&UN||IN(mp)==N1(mp)&&IN)||N1,u0=mr?function(e){return BA(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,s=0,a=0;r<e.length;)switch(s=e.charCodeAt(r++),!0){case s<128:t.push(String.fromCharCode(s));break;case s<2048:t.push(String.fromCharCode(192+(s>>6))),t.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,a=e.charCodeAt(r++)-56320+(s<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(s>>12))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)))}return t.join("")},wh=function(){var e={};return function(r,s){var a=r+"|"+(s||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",s||"")}}(),Pk=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var s=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)s=s.replace(e[a][0],e[a][1]);return s}}(),oz=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),lz=/<\/?(?:vt:)?variant>/g,cz=/<(?:vt:)([^>]*)>([\s\S]*)</;function LN(e,t){var r=Zt(e),s=e.match(oz(r.baseType))||[],a=[];if(s.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+s.length+" != "+r.size);return a}return s.forEach(function(i){var o=i.replace(lz,"").match(cz);o&&a.push({v:ls(o[2]),t:o[1]})}),a}var Az=/(^\s|\s$|\n)/;function dz(e){return Bo(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function uz(e,t,r){return"<"+e+(r!=null?dz(r):"")+(t!=null?(t.match(Az)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function lw(e){if(mr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ls(CA(rw(e)));throw new Error("Bad input format: expected Buffer or string")}var bh=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,hz={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},fz=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function pz(e,t){for(var r=1-2*(e[t+7]>>>7),s=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return s==2047?a==0?r*(1/0):NaN:(s==0?s=-1022:(s-=1023,a+=Math.pow(2,52)),r*Math.pow(2,s-52)*a)}function mz(e,t,r){var s=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,o=s?-t:t;isFinite(o)?o==0?a=i=0:(a=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|s}var DN=function(e){for(var t=[],r=10240,s=0;s<e[0].length;++s)if(e[0][s])for(var a=0,i=e[0][s].length;a<i;a+=r)t.push.apply(t,e[0][s].slice(a,a+r));return t},QN=mr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:BA(t)})):DN(e)}:DN,ON=function(e,t,r){for(var s=[],a=t;a<r;a+=2)s.push(String.fromCharCode(el(e,a)));return s.join("").replace(ba,"")},cw=mr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(ba,""):ON(e,t,r)}:ON,PN=function(e,t,r){for(var s=[],a=t;a<t+r;++a)s.push(("0"+e[a].toString(16)).slice(-2));return s.join("")},Rk=mr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):PN(e,t,r)}:PN,RN=function(e,t,r){for(var s=[],a=t;a<r;a++)s.push(String.fromCharCode(Ad(e,a)));return s.join("")},Oh=mr?function(t,r,s){return Buffer.isBuffer(t)?t.toString("utf8",r,s):RN(t,r,s)}:RN,Mk=function(e,t){var r=Ja(e,t);return r>0?Oh(e,t+4,t+4+r-1):""},Hk=Mk,Kk=function(e,t){var r=Ja(e,t);return r>0?Oh(e,t+4,t+4+r-1):""},zk=Kk,Vk=function(e,t){var r=2*Ja(e,t);return r>0?Oh(e,t+4,t+4+r-1):""},qk=Vk,Gk=function(t,r){var s=Ja(t,r);return s>0?cw(t,r+4,r+4+s):""},$k=Gk,Wk=function(e,t){var r=Ja(e,t);return r>0?Oh(e,t+4,t+4+r):""},Xk=Wk,Jk=function(e,t){return pz(e,t)},Pm=Jk,Yk=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};mr&&(Hk=function(t,r){if(!Buffer.isBuffer(t))return Mk(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},zk=function(t,r){if(!Buffer.isBuffer(t))return Kk(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},qk=function(t,r){if(!Buffer.isBuffer(t))return Vk(t,r);var s=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s-1)},$k=function(t,r){if(!Buffer.isBuffer(t))return Gk(t,r);var s=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s)},Xk=function(t,r){if(!Buffer.isBuffer(t))return Wk(t,r);var s=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+s)},Pm=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Jk(t,r)},Yk=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Ad=function(e,t){return e[t]},el=function(e,t){return e[t+1]*256+e[t]},gz=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ja=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Gc=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},xz=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function F0(e,t){var r="",s,a,i=[],o,l,c,A;switch(t){case"dbcs":if(A=this.l,mr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(el(this,A)),A+=2;e*=2;break;case"utf8":r=Oh(this,this.l,this.l+e);break;case"utf16le":e*=2,r=cw(this,this.l,this.l+e);break;case"wstr":return F0.call(this,e,"dbcs");case"lpstr-ansi":r=Hk(this,this.l),e=4+Ja(this,this.l);break;case"lpstr-cp":r=zk(this,this.l),e=4+Ja(this,this.l);break;case"lpwstr":r=qk(this,this.l),e=4+2*Ja(this,this.l);break;case"lpp4":e=4+Ja(this,this.l),r=$k(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ja(this,this.l),r=Xk(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Ad(this,this.l+e++))!==0;)i.push(pp(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=el(this,this.l+e))!==0;)i.push(pp(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",A=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return o=Ad(this,A),this.l=A+1,l=F0.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(pp(el(this,A))),A+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",A=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return o=Ad(this,A),this.l=A+1,l=F0.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(pp(Ad(this,A))),A+=1}r=i.join("");break;default:switch(e){case 1:return s=Ad(this,this.l),this.l++,s;case 2:return s=(t==="i"?gz:el)(this,this.l),this.l+=2,s;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(s=(e>0?Gc:xz)(this,this.l),this.l+=4,s):(a=Ja(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=Pm(this,this.l):a=Pm([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=Rk(this,this.l,e);break}}return this.l+=e,r}var vz=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},yz=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},wz=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function bz(e,t,r){var s=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)wz(this,t.charCodeAt(a),this.l+2*a);s=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;s=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:s=1,this[this.l]=t&255;break;case 2:s=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:s=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:s=4,vz(this,t,this.l);break;case 8:if(s=8,r==="f"){mz(this,t,this.l);break}case 16:break;case-4:s=4,yz(this,t,this.l);break}return this.l+=s,this}function Zk(e,t){var r=Rk(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Dn(e,t){e.l=t,e.read_shift=F0,e.chk=Zk,e.write_shift=bz}function oa(e,t){e.l+=t}function fn(e){var t=gc(e);return Dn(t,0),t}function ml(e,t,r){if(e){var s,a,i;Dn(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var A=Vm[l]||Vm[65535];for(s=e.read_shift(1),i=s&127,a=1;a<4&&s&128;++a)i+=((s=e.read_shift(1))&127)<<7*a;c=e.l+i;var d=A.f&&A.f(e,i,r);if(e.l=c,t(d,A,l))return}}}function by(){var e=[],t=mr?256:2048,r=function(A){var d=fn(A);return Dn(d,0),d},s=r(t),a=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&e.push(s),s=null)},i=function(A){return s&&A<s.length-s.l?s:(a(),s=r(Math.max(A+1,t)))},o=function(){return a(),Vl(e)},l=function(A){a(),s=A,s.l==null&&(s.l=s.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function T0(e,t,r){var s=Pn(e);if(t.s?(s.cRel&&(s.c+=t.s.c),s.rRel&&(s.r+=t.s.r)):(s.cRel&&(s.c+=t.c),s.rRel&&(s.r+=t.r)),!r||r.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function MN(e,t,r){var s=Pn(e);return s.s=T0(s.s,t.s,r),s.e=T0(s.e,t.s,r),s}function I0(e,t){if(e.cRel&&e.c<0)for(e=Pn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Pn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=sr(e);return!e.cRel&&e.cRel!=null&&(r=Bz(r)),!e.rRel&&e.rRel!=null&&(r=_z(r)),r}function B1(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+xn(e.s.c)+":"+(e.e.cRel?"":"$")+xn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Rn(e.s.r)+":"+(e.e.rRel?"":"$")+Rn(e.e.r):I0(e.s,t.biff)+":"+I0(e.e,t.biff)}function Aw(e){return parseInt(Nz(e),10)-1}function Rn(e){return""+(e+1)}function _z(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Nz(e){return e.replace(/\$(\d+)$/,"$1")}function dw(e){for(var t=Cz(e),r=0,s=0;s!==t.length;++s)r=26*r+t.charCodeAt(s)-64;return r-1}function xn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Bz(e){return e.replace(/^([A-Z])/,"$$$1")}function Cz(e){return e.replace(/^\$([A-Z])/,"$1")}function jz(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ya(e){for(var t=0,r=0,s=0;s<e.length;++s){var a=e.charCodeAt(s);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function sr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function cu(e){var t=e.indexOf(":");return t==-1?{s:ya(e),e:ya(e)}:{s:ya(e.slice(0,t)),e:ya(e.slice(t+1))}}function vr(e,t){return typeof t>"u"||typeof t=="number"?vr(e.s,e.e):(typeof e!="string"&&(e=sr(e)),typeof t!="string"&&(t=sr(t)),e==t?e:e+":"+t)}function Us(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,s=0,a=0,i=e.length;for(r=0;s<i&&!((a=e.charCodeAt(s)-64)<1||a>26);++s)r=26*r+a;for(t.s.c=--r,r=0;s<i&&!((a=e.charCodeAt(s)-48)<0||a>9);++s)r=10*r+a;if(t.s.r=--r,s===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++s,r=0;s!=i&&!((a=e.charCodeAt(s)-64)<1||a>26);++s)r=26*r+a;for(t.e.c=--r,r=0;s!=i&&!((a=e.charCodeAt(s)-48)<0||a>9);++s)r=10*r+a;return t.e.r=--r,t}function HN(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ki(e.z,r?_a(t):t)}catch{}try{return e.w=ki((e.XF||{}).numFmtId||(r?14:0),r?_a(t):t)}catch{return""+t}}function ul(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?kA[e.v]||e.v:t==null?HN(e,e.v):HN(e,t))}function _c(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",s={};return s[r]=e,{SheetNames:[r],Sheets:s}}function eS(e,t,r){var s=r||{},a=e?Array.isArray(e):s.dense,i=e||(a?[]:{}),o=0,l=0;if(i&&s.origin!=null){if(typeof s.origin=="number")o=s.origin;else{var c=typeof s.origin=="string"?ya(s.origin):s.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=Us(i["!ref"]);A.s.c=d.s.c,A.s.r=d.s.r,A.e.c=Math.max(A.e.c,d.e.c),A.e.r=Math.max(A.e.r,d.e.r),o==-1&&(A.e.r=o=d.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=t[h].length;++f)if(!(typeof t[h][f]>"u")){var u={v:t[h][f]},p=o+h,g=l+f;if(A.s.r>p&&(A.s.r=p),A.s.c>g&&(A.s.c=g),A.e.r<p&&(A.e.r=p),A.e.c<g&&(A.e.c=g),t[h][f]&&typeof t[h][f]=="object"&&!Array.isArray(t[h][f])&&!(t[h][f]instanceof Date))u=t[h][f];else if(Array.isArray(u.v)&&(u.f=t[h][f][1],u.v=u.v[0]),u.v===null)if(u.f)u.t="n";else if(s.nullError)u.t="e",u.v=0;else if(s.sheetStubs)u.t="z";else continue;else typeof u.v=="number"?u.t="n":typeof u.v=="boolean"?u.t="b":u.v instanceof Date?(u.z=s.dateNF||lr[14],s.cellDates?(u.t="d",u.w=ki(u.z,_a(u.v))):(u.t="n",u.v=_a(u.v),u.w=ki(u.z,u.v))):u.t="s";if(a)i[p]||(i[p]=[]),i[p][g]&&i[p][g].z&&(u.z=i[p][g].z),i[p][g]=u;else{var w=sr({c:g,r:p});i[w]&&i[w].z&&(u.z=i[w].z),i[w]=u}}}return A.s.c<1e7&&(i["!ref"]=vr(A)),i}function Au(e,t){return eS(null,e,t)}function Ez(e){return e.read_shift(4,"i")}function aa(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function kz(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function uw(e,t){var r=e.l,s=e.read_shift(1),a=aa(e),i=[],o={t:a,h:a};if(s&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(kz(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var Sz=uw;function Si(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function jA(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var Fz=aa;function hw(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var Tz=aa,_y=hw;function fw(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,s=t[0]&2;e.l+=4;var a=s===0?Pm([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Gc(t,0)>>2;return r?a/100:a}function tS(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var EA=tS;function ra(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Iz(e){var t={},r=e.read_shift(1),s=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,s){case 0:t.auto=1;break;case 1:t.index=a;var A=oA[a];A&&(t.rgb=Nh(A));break;case 2:t.rgb=Nh([o,l,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Uz(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function rS(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},s=e.read_shift(4);switch(s){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(s>400)throw new Error("Unsupported Clipboard: "+s.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Lz(e){return rS(e,1)}function Dz(e){return rS(e,2)}var pw=2,ka=3,gp=11,KN=12,Rm=19,xp=64,Qz=65,Oz=71,Pz=4108,Rz=4126,wn=80,sS=81,Mz=[wn,sS],Hz={1:{n:"CodePage",t:pw},2:{n:"Category",t:wn},3:{n:"PresentationFormat",t:wn},4:{n:"ByteCount",t:ka},5:{n:"LineCount",t:ka},6:{n:"ParagraphCount",t:ka},7:{n:"SlideCount",t:ka},8:{n:"NoteCount",t:ka},9:{n:"HiddenCount",t:ka},10:{n:"MultimediaClipCount",t:ka},11:{n:"ScaleCrop",t:gp},12:{n:"HeadingPairs",t:Pz},13:{n:"TitlesOfParts",t:Rz},14:{n:"Manager",t:wn},15:{n:"Company",t:wn},16:{n:"LinksUpToDate",t:gp},17:{n:"CharacterCount",t:ka},19:{n:"SharedDoc",t:gp},22:{n:"HyperlinksChanged",t:gp},23:{n:"AppVersion",t:ka,p:"version"},24:{n:"DigSig",t:Qz},26:{n:"ContentType",t:wn},27:{n:"ContentStatus",t:wn},28:{n:"Language",t:wn},29:{n:"Version",t:wn},255:{},2147483648:{n:"Locale",t:Rm},2147483651:{n:"Behavior",t:Rm},1919054434:{}},Kz={1:{n:"CodePage",t:pw},2:{n:"Title",t:wn},3:{n:"Subject",t:wn},4:{n:"Author",t:wn},5:{n:"Keywords",t:wn},6:{n:"Comments",t:wn},7:{n:"Template",t:wn},8:{n:"LastAuthor",t:wn},9:{n:"RevNumber",t:wn},10:{n:"EditTime",t:xp},11:{n:"LastPrinted",t:xp},12:{n:"CreatedDate",t:xp},13:{n:"ModifiedDate",t:xp},14:{n:"PageCount",t:ka},15:{n:"WordCount",t:ka},16:{n:"CharCount",t:ka},17:{n:"Thumbnail",t:Oz},18:{n:"Application",t:wn},19:{n:"DocSecurity",t:ka},255:{},2147483648:{n:"Locale",t:Rm},2147483651:{n:"Behavior",t:Rm},1919054434:{}},zN={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},zz=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Vz(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var qz=Vz([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),oA=Pn(qz),kA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},nS={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},VN={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function Gz(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function $z(e){var t=Gz();if(!e||!e.match)return t;var r={};if((e.match(ca)||[]).forEach(function(s){var a=Zt(s);switch(a[0].replace(rz,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[VN[a.ContentType]]!==void 0&&t[VN[a.ContentType]].push(a.PartName);break}}),t.xmlns!==hz.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var Cd={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Ny(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function U0(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var s={};return(e.match(ca)||[]).forEach(function(a){var i=Zt(a);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:d0(i.Target,t);r[l]=o,s[i.Id]=o}}),r["!id"]=s,r}var Wz="application/vnd.oasis.opendocument.spreadsheet";function Xz(e,t){for(var r=lw(e),s,a;s=bh.exec(r);)switch(s[3]){case"manifest":break;case"file-entry":if(a=Zt(s[0],!1),a.path=="/"&&a.type!==Wz)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw s}}var L0=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Jz=function(){for(var e=new Array(L0.length),t=0;t<L0.length;++t){var r=L0[t],s="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+s+"[^>]*>([\\s\\S]*?)</"+s+">")}return e}();function aS(e){var t={};e=ls(e);for(var r=0;r<L0.length;++r){var s=L0[r],a=e.match(Jz[r]);a!=null&&a.length>0&&(t[s[1]]=Nr(a[1])),s[2]==="date"&&t[s[1]]&&(t[s[1]]=Bn(t[s[1]]))}return t}var Yz=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function iS(e,t,r,s){var a=[];if(typeof e=="string")a=LN(e,s);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(d){return{v:d}}));var o=typeof t=="string"?LN(t,s).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var A=0;A!==a.length;A+=2){switch(c=+a[A+1].v,a[A].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function Zz(e,t,r){var s={};return t||(t={}),e=ls(e),Yz.forEach(function(a){var i=(e.match(wh(a[0]))||[])[1];switch(a[2]){case"string":i&&(t[a[1]]=Nr(i));break;case"bool":t[a[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(s[a[1]]=o[1]);break}}),s.HeadingPairs&&s.TitlesOfParts&&iS(s.HeadingPairs,s.TitlesOfParts,t,r),t}var eV=/<[^>]+>[^<]*/g;function tV(e,t){var r={},s="",a=e.match(eV);if(a)for(var i=0;i!=a.length;++i){var o=a[i],l=Zt(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":s=Nr(l.name);break;case"</property>":s=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),A=c[0].slice(4),d=c[1];switch(A){case"lpstr":case"bstr":case"lpwstr":r[s]=Nr(d);break;case"bool":r[s]=gs(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[s]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[s]=parseFloat(d);break;case"filetime":case"date":r[s]=Bn(d);break;case"cy":case"error":r[s]=Nr(d);break;default:if(A.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,A,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}var rV={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},C1;function sV(e,t,r){C1||(C1=aw(rV)),t=C1[t]||t,e[t]=r}function mw(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function oS(e,t,r){var s=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-s&3;)++e.l;return a}function lS(e,t,r){var s=e.read_shift(0,"lpwstr");return s}function cS(e,t,r){return t===31?lS(e):oS(e,t,r)}function By(e,t,r){return cS(e,t,r===!1?0:4)}function nV(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return cS(e,t,0)}function aV(e){for(var t=e.read_shift(4),r=[],s=0;s!=t;++s){var a=e.l;r[s]=e.read_shift(0,"lpwstr").replace(ba,""),e.l-a&2&&(e.l+=2)}return r}function iV(e){for(var t=e.read_shift(4),r=[],s=0;s!=t;++s)r[s]=e.read_shift(0,"lpstr-cp").replace(ba,"");return r}function oV(e){var t=e.l,r=Mm(e,sS);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var s=Mm(e,ka);return[r,s]}function lV(e){for(var t=e.read_shift(4),r=[],s=0;s<t/2;++s)r.push(oV(e));return r}function qN(e,t){for(var r=e.read_shift(4),s={},a=0;a!=r;++a){var i=e.read_shift(4),o=e.read_shift(4);s[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(ba,"").replace(A0,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),s}function AS(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function cV(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Mm(e,t,r){var s=e.read_shift(2),a,i=r||{};if(e.l+=2,t!==KN&&s!==t&&Mz.indexOf(t)===-1&&!((t&65534)==4126&&(s&65534)==4126))throw new Error("Expected type "+t+" saw "+s);switch(t===KN?s:t){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return oS(e,s,4).replace(ba,"");case 31:return lS(e);case 64:return mw(e);case 65:return AS(e);case 71:return cV(e);case 80:return By(e,s,!i.raw).replace(ba,"");case 81:return nV(e,s).replace(ba,"");case 4108:return lV(e);case 4126:case 4127:return s==4127?aV(e):iV(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}}function GN(e,t){var r=e.l,s=e.read_shift(4),a=e.read_shift(4),i=[],o=0,l=0,c=-1,A={};for(o=0;o!=a;++o){var d=e.read_shift(4),h=e.read_shift(4);i[o]=[d,h+r]}i.sort(function(x,y){return x[1]-y[1]});var f={};for(o=0;o!=a;++o){if(e.l!==i[o][1]){var u=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,u=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],u=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],u=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(u=!1,e.l=i[o][1]),u)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var p=t[i[o][0]];if(f[p.n]=Mm(e,p.t,{raw:!0}),p.p==="version"&&(f[p.n]=String(f[p.n]>>16)+"."+("0000"+String(f[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(f[p.n]){case 0:f[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ji(l=f[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[p.n])}}else if(i[o][0]===1){if(l=f.CodePage=Mm(e,pw),Ji(l),c!==-1){var g=e.l;e.l=i[c][1],A=qN(e,l),e.l=g}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}A=qN(e,l)}else{var w=A[i[o][0]],v;switch(e[e.l]){case 65:e.l+=4,v=AS(e);break;case 30:e.l+=4,v=By(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,v=By(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,v=e.read_shift(4,"i");break;case 19:e.l+=4,v=e.read_shift(4);break;case 5:e.l+=4,v=e.read_shift(8,"f");break;case 11:e.l+=4,v=Ms(e,4);break;case 64:e.l+=4,v=Bn(mw(e));break;default:throw new Error("unparsed value: "+e[e.l])}f[w]=v}}return e.l=r+s,f}function $N(e,t,r){var s=e.content;if(!s)return{};Dn(s,0);var a,i,o,l,c=0;s.chk("feff","Byte Order: "),s.read_shift(2);var A=s.read_shift(4),d=s.read_shift(16);if(d!==xr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=s.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=s.read_shift(16),l=s.read_shift(4),a===1&&l!==s.l)throw new Error("Length mismatch: "+l+" !== "+s.l);a===2&&(o=s.read_shift(16),c=s.read_shift(4));var h=GN(s,t),f={SystemIdentifier:A};for(var u in h)f[u]=h[u];if(f.FMTID=i,a===1)return f;if(c-s.l==2&&(s.l+=2),s.l!==c)throw new Error("Length mismatch 2: "+s.l+" !== "+c);var p;try{p=GN(s,null)}catch{}for(u in p)f[u]=p[u];return f.FMTID=[i,o],f}function Ll(e,t){return e.read_shift(t),null}function AV(e,t,r){for(var s=[],a=e.l+t;e.l<a;)s.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return s}function Ms(e,t){return e.read_shift(t)===1}function Zs(e){return e.read_shift(2,"u")}function dS(e,t){return AV(e,t,Zs)}function dV(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Ph(e,t,r){var s=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=s?e.read_shift(s,a):"";return o}function uV(e){var t=e.read_shift(2),r=e.read_shift(1),s=r&4,a=r&8,i=1+(r&1),o=0,l,c={};a&&(o=e.read_shift(2)),s&&(l=e.read_shift(4));var A=i==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,A);return a&&(e.l+=4*o),s&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function xA(e,t,r){var s;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?s=e.read_shift(t,"sbcs-cont"):s=e.read_shift(t,"dbcs-cont"),s}function Rh(e,t,r){var s=e.read_shift(r&&r.biff==2?1:2);return s===0?(e.l++,""):xA(e,s,r)}function SA(e,t,r){if(r.biff>5)return Rh(e,t,r);var s=e.read_shift(1);return s===0?(e.l++,""):e.read_shift(s,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function hV(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function fV(e){var t=e.read_shift(4),r=e.l,s=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(s=!0),e.l=r);var a=e.read_shift((s?t-24:t)>>1,"utf16le").replace(ba,"");return s&&(e.l+=24),a}function pV(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var s=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+s.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(ba,"");return r+o}function mV(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return fV(e);case"0303000000000000c000000000000046":return pV(e);default:throw new Error("Unsupported Moniker "+r)}}function vp(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(ba,""):"";return r}function gV(e,t){var r=e.l+t,s=e.read_shift(4);if(s!==2)throw new Error("Unrecognized streamVersion: "+s);var a=e.read_shift(2);e.l+=2;var i,o,l,c,A="",d,h;a&16&&(i=vp(e,r-e.l)),a&128&&(o=vp(e,r-e.l)),(a&257)===257&&(l=vp(e,r-e.l)),(a&257)===1&&(c=mV(e,r-e.l)),a&8&&(A=vp(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(h=mw(e)),e.l=r;var f=o||l||c||"";f&&A&&(f+="#"+A),f||(f="#"+A),a&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var u={Target:f};return d&&(u.guid=d),h&&(u.time=h),i&&(u.Tooltip=i),u}function uS(e){var t=e.read_shift(1),r=e.read_shift(1),s=e.read_shift(1),a=e.read_shift(1);return[t,r,s,a]}function hS(e,t){var r=uS(e);return r[3]=0,r}function So(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);return{r:t,c:r,ixfe:s}}function xV(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function vV(e,t,r){return t===0?"":SA(e,t,r)}function yV(e,t,r){var s=r.biff>8?4:2,a=e.read_shift(s),i=e.read_shift(s,"i"),o=e.read_shift(s,"i");return[a,i,o]}function fS(e){var t=e.read_shift(2),r=fw(e);return[t,r]}function wV(e,t,r){e.l+=4,t-=4;var s=e.l+t,a=Ph(e,t,r),i=e.read_shift(2);if(s-=e.l,i!==s)throw new Error("Malformed AddinUdf: padding = "+s+" != "+i);return e.l+=i,a}function Eg(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);return{s:{c:s,r:t},e:{c:a,r}}}function pS(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(1),a=e.read_shift(1);return{s:{c:s,r:t},e:{c:a,r}}}var bV=pS;function mS(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);return e.l+=12,[r,t,s]}function _V(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function NV(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Jn(e){e.l+=2,e.l+=e.read_shift(2)}var BV={0:Jn,4:Jn,5:Jn,6:Jn,7:NV,8:Jn,9:Jn,10:Jn,11:Jn,12:Jn,13:_V,14:Jn,15:Jn,16:Jn,17:Jn,18:Jn,19:Jn,20:Jn,21:mS};function CV(e,t){for(var r=e.l+t,s=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{s.push(BV[a](e,r-e.l))}catch{return e.l=r,s}}return e.l!=r&&(e.l=r),s}function yp(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function jV(e,t){return t===0||e.read_shift(2),1200}function EV(e,t,r){if(r.enc)return e.l+=t,"";var s=e.l,a=SA(e,0,r);return e.read_shift(t+s-e.l),a}function kV(e,t,r){var s=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:s&16,fBelow:s&64,fRight:s&128}}function SV(e,t,r){var s=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Ph(e,0,r);return o.length===0&&(o="Sheet1"),{pos:s,hs:a,dt:i,name:o}}function FV(e,t){for(var r=e.l+t,s=e.read_shift(4),a=e.read_shift(4),i=[],o=0;o!=a&&e.l<r;++o)i.push(uV(e));return i.Count=s,i.Unique=a,i}function TV(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function IV(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var s=e.read_shift(1);return e.l+=3,s&7&&(t.level=s&7),s&32&&(t.hidden=!0),s&64&&(t.hpt=r/20),t}function UV(e){var t=xV(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function LV(e){return e.read_shift(2),e.read_shift(4)}function WN(e,t,r){var s=0;r&&r.biff==2||(s=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(s=1-(a>>15),a&=32767);var i={Unsynced:s&1,DyZero:(s&2)>>1,ExAsc:(s&4)>>2,ExDsc:(s&8)>>3};return[i,a]}function DV(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),A=e.read_shift(2);return{Pos:[t,r],Dim:[s,a],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:A}}function QV(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var s=e.read_shift(2);return{RTL:s&64}}function OV(){}function PV(e,t,r){var s={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return s.name=Ph(e,0,r),s}function RV(e){var t=So(e);return t.isst=e.read_shift(4),t}function MV(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=e.l+t,a=So(e);r.biff==2&&e.l++;var i=Rh(e,s-e.l,r);return a.val=i,a}function HV(e,t,r){var s=e.read_shift(2),a=SA(e,0,r);return[s,a]}var KV=SA;function XN(e,t,r){var s=e.l+t,a=r.biff==8||!r.biff?4:2,i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=s,{s:{r:i,c:l},e:{r:o,c}}}function zV(e){var t=e.read_shift(2),r=e.read_shift(2),s=fS(e);return{r:t,c:r,ixfe:s[0],rknum:s[1]}}function VV(e,t){for(var r=e.l+t-2,s=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(fS(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:s,c:a,C:o,rkrec:i}}function qV(e,t){for(var r=e.l+t-2,s=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:s,c:a,C:o,ixfe:i}}function GV(e,t,r,s){var a={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=zz[l>>26],s.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function $V(e,t,r){var s={};return s.ifnt=e.read_shift(2),s.numFmtId=e.read_shift(2),s.flags=e.read_shift(2),s.fStyle=s.flags>>2&1,t-=6,s.data=GV(e,t,s.fStyle,r),s}function WV(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function JN(e,t,r){var s=So(e);(r.biff==2||t==9)&&++e.l;var a=dV(e);return s.val=a,s.t=a===!0||a===!1?"b":"e",s}function XV(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=So(e),a=ra(e);return s.val=a,s}var YN=vV;function JV(e,t,r){var s=e.l+t,a=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=xA(e,i),l=[];s>e.l;)l.push(Rh(e));return[i,a,o,l]}function ZN(e,t,r){var s=e.read_shift(2),a,i={fBuiltIn:s&1,fWantAdvise:s>>>1&1,fWantPict:s>>>2&1,fOle:s>>>3&1,fOleLink:s>>>4&1,cf:s>>>5&1023,fIcon:s>>>15&1};return r.sbcch===14849&&(a=wV(e,t-2,r)),i.body=a||e.read_shift(t-2),typeof a=="string"&&(i.Name=a),i}var YV=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function eB(e,t,r){var s=e.l+t,a=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var A=xA(e,o,r);a&32&&(A=YV[A.charCodeAt(0)]);var d=s-e.l;r&&r.biff==2&&--d;var h=s==e.l||l===0||!(d>0)?[]:IW(e,d,r,l);return{chKey:i,Name:A,itab:c,rgce:h}}function gS(e,t,r){if(r.biff<8)return ZV(e,t,r);for(var s=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)s.push(yV(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return s}function ZV(e,t,r){e[e.l+1]==3&&e[e.l]++;var s=Ph(e,t,r);return s.charCodeAt(0)==3?s.slice(1):s}function eq(e,t,r){if(r.biff<8){e.l+=t;return}var s=e.read_shift(2),a=e.read_shift(2),i=xA(e,s,r),o=xA(e,a,r);return[i,o]}function tq(e,t,r){var s=pS(e);e.l++;var a=e.read_shift(1);return t-=8,[UW(e,t,r),a,s]}function tB(e,t,r){var s=bV(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[s,FW(e,t,r)]}function rq(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,s=e.read_shift(4);return[t,r,s]}function sq(e,t,r){if(!(r.biff<8)){var s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=SA(e,0,r);return r.biff<8&&e.read_shift(1),[{r:s,c:a},l,o,i]}}function nq(e,t,r){return sq(e,t,r)}function aq(e,t){for(var r=[],s=e.read_shift(2);s--;)r.push(Eg(e));return r}function iq(e,t,r){if(r&&r.biff<8)return lq(e,t,r);var s=mS(e),a=CV(e,t-22,s[1]);return{cmo:s,ft:a}}var oq={8:function(e,t){var r=e.l+t;e.l+=10;var s=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:s}}};function lq(e,t,r){e.l+=4;var s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((oq[s]||oa)(e,t,r)),{cmo:[a,s,i],ft:o}}function cq(e,t,r){var s=e.l,a="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=hV(e,6,r);var l=e.read_shift(2);e.read_shift(2),Zs(e,2);var c=e.read_shift(2);e.l+=c;for(var A=1;A<e.lens.length-1;++A){if(e.l-s!=e.lens[A])throw new Error("TxO: bad continue record");var d=e[e.l],h=xA(e,e.lens[A+1]-e.lens[A]-1);if(a+=h,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=s+t,{t:a}}catch{return e.l=s+t,{t:a}}}function Aq(e,t){var r=Eg(e);e.l+=16;var s=gV(e,t-24);return[r,s]}function dq(e,t){e.read_shift(2);var r=Eg(e),s=e.read_shift((t-10)/2,"dbcs-cont");return s=s.replace(ba,""),[r,s]}function uq(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=zN[r]||r,r=e.read_shift(2),t[1]=zN[r]||r,t}function hq(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(hS(e));return r}function fq(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(hS(e));return r}function pq(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function xS(e,t,r){if(!r.cellStyles)return oa(e,t);var s=r&&r.biff>=12?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(s),c=e.read_shift(2);s==2&&(e.l+=2);var A={s:a,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(A.level=c>>8&7),A}function mq(e,t){var r={};return t<32||(e.l+=16,r.header=ra(e),r.footer=ra(e),e.l+=2),r}function gq(e,t,r){var s={area:!1};if(r.biff!=5)return e.l+=t,s;var a=e.read_shift(1);return e.l+=3,a&16&&(s.area=!0),s}var xq=So,vq=dS,yq=Rh;function wq(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),a={fmt:t,env:r,len:s,data:e.slice(e.l,e.l+s)};return e.l+=s,a}function bq(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var s=So(e);++e.l;var a=SA(e,t-7,r);return s.t="str",s.val=a,s}function _q(e){var t=So(e);++e.l;var r=ra(e);return t.t="n",t.val=r,t}function Nq(e){var t=So(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Bq(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Cq(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function jq(e,t,r){var s=e.l+t,a=So(e),i=e.read_shift(2),o=xA(e,i,r);return e.l=s,a.t="str",a.val=o,a}var Eq=[2,3,48,49,131,139,140,245],rB=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=aw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var A=[],d=gc(1);switch(c.type){case"base64":d=Xi(ii(l));break;case"binary":d=Xi(l);break;case"buffer":case"array":d=l;break}Dn(d,0);var h=d.read_shift(1),f=!!(h&136),u=!1,p=!1;switch(h){case 2:break;case 3:break;case 48:u=!0,f=!0;break;case 49:u=!0,f=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var g=0,w=521;h==2&&(g=d.read_shift(2)),d.l+=3,h!=2&&(g=d.read_shift(4)),g>1048576&&(g=1e6),h!=2&&(w=d.read_shift(2));var v=d.read_shift(2),x=c.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(x=e[d[d.l]]),d.l+=1,d.l+=2),p&&(d.l+=36);for(var y=[],_={},I=Math.min(d.length,h==2?521:w-10-(u?264:0)),k=p?32:11;d.l<I&&d[d.l]!=13;)switch(_={},_.name=vh.utils.decode(x,d.slice(d.l,d.l+k)).replace(/[\u0000\r\n].*$/g,""),d.l+=k,_.type=String.fromCharCode(d.read_shift(1)),h!=2&&!p&&(_.offset=d.read_shift(4)),_.len=d.read_shift(1),h==2&&(_.offset=d.read_shift(2)),_.dec=d.read_shift(1),_.name.length&&y.push(_),h!=2&&(d.l+=p?13:14),_.type){case"B":(!u||_.len!=8)&&c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(d[d.l]!==13&&(d.l=w-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=w;var T=0,S=0;for(A[0]=[],S=0;S!=y.length;++S)A[0][S]=y[S].name;for(;g-- >0;){if(d[d.l]===42){d.l+=v;continue}for(++d.l,A[++T]=[],S=0,S=0;S!=y.length;++S){var B=d.slice(d.l,d.l+y[S].len);d.l+=y[S].len,Dn(B,0);var R=vh.utils.decode(x,B);switch(y[S].type){case"C":R.trim().length&&(A[T][S]=R.replace(/\s+$/,""));break;case"D":R.length===8?A[T][S]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):A[T][S]=R;break;case"F":A[T][S]=parseFloat(R.trim());break;case"+":case"I":A[T][S]=p?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":A[T][S]=!0;break;case"N":case"F":A[T][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));A[T][S]="##MEMO##"+(p?parseInt(R.trim(),10):B.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(A[T][S]=+R||0);break;case"@":A[T][S]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":A[T][S]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":A[T][S]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[T][S]=-B.read_shift(-8,"f");break;case"B":if(u&&y[S].len==8){A[T][S]=B.read_shift(8,"f");break}case"G":case"P":B.l+=y[S].len;break;case"0":if(y[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[S].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(A=A.slice(0,c.sheetRows)),c.DBF=y,A}function s(l,c){var A=c||{};A.dateNF||(A.dateNF="yyyymmdd");var d=Au(r(l,A),A);return d["!cols"]=A.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete A.DBF,d}function a(l,c){try{return _c(s(l,c),c)}catch(A){if(c&&c.WTF)throw A}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var A=c||{};if(+A.codepage>=0&&Ji(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var d=by(),h=Ty(l,{header:1,raw:!0,cellDates:!0}),f=h[0],u=h.slice(1),p=l["!cols"]||[],g=0,w=0,v=0,x=1;for(g=0;g<f.length;++g){if(((p[g]||{}).DBF||{}).name){f[g]=p[g].DBF.name,++v;continue}if(f[g]!=null){if(++v,typeof f[g]=="number"&&(f[g]=f[g].toString(10)),typeof f[g]!="string")throw new Error("DBF Invalid column name "+f[g]+" |"+typeof f[g]+"|");if(f.indexOf(f[g])!==g){for(w=0;w<1024;++w)if(f.indexOf(f[g]+"_"+w)==-1){f[g]+="_"+w;break}}}}var y=Us(l["!ref"]),_=[],I=[],k=[];for(g=0;g<=y.e.c-y.s.c;++g){var T="",S="",B=0,R=[];for(w=0;w<u.length;++w)u[w][g]!=null&&R.push(u[w][g]);if(R.length==0||f[g]==null){_[g]="?";continue}for(w=0;w<R.length;++w){switch(typeof R[w]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=R[w]instanceof Date?"D":"C";break;default:S="C"}B=Math.max(B,String(R[w]).length),T=T&&T!=S?"C":S}B>250&&(B=250),S=((p[g]||{}).DBF||{}).type,S=="C"&&p[g].DBF.len>B&&(B=p[g].DBF.len),T=="B"&&S=="N"&&(T="N",k[g]=p[g].DBF.dec,B=p[g].DBF.len),I[g]=T=="C"||S=="N"?B:i[T]||0,x+=I[g],_[g]=T}var U=d.next(32);for(U.write_shift(4,318902576),U.write_shift(4,u.length),U.write_shift(2,296+32*v),U.write_shift(2,x),g=0;g<4;++g)U.write_shift(4,0);for(U.write_shift(4,0|(+t[gk]||3)<<8),g=0,w=0;g<f.length;++g)if(f[g]!=null){var L=d.next(32),D=(f[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,D,"sbcs"),L.write_shift(1,_[g]=="?"?"C":_[g],"sbcs"),L.write_shift(4,w),L.write_shift(1,I[g]||i[_[g]]||0),L.write_shift(1,k[g]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),w+=I[g]||i[_[g]]||0}var Q=d.next(264);for(Q.write_shift(4,13),g=0;g<65;++g)Q.write_shift(4,0);for(g=0;g<u.length;++g){var K=d.next(x);for(K.write_shift(1,0),w=0;w<f.length;++w)if(f[w]!=null)switch(_[w]){case"L":K.write_shift(1,u[g][w]==null?63:u[g][w]?84:70);break;case"B":K.write_shift(8,u[g][w]||0,"f");break;case"N":var P="0";for(typeof u[g][w]=="number"&&(P=u[g][w].toFixed(k[w]||0)),v=0;v<I[w]-P.length;++v)K.write_shift(1,32);K.write_shift(1,P,"sbcs");break;case"D":u[g][w]?(K.write_shift(4,("0000"+u[g][w].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(u[g][w].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+u[g][w].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var te=String(u[g][w]!=null?u[g][w]:"").slice(0,I[w]);for(K.write_shift(1,te,"sbcs"),v=0;v<I[w]-te.length;++v)K.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:s,from_sheet:o}}(),kq=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Bo(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,u){var p=e[u];return typeof p=="number"?xN(p):p},s=function(f,u,p){var g=u.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return g==59?f:xN(g)};e["|"]=254;function a(f,u){switch(u.type){case"base64":return i(ii(f),u);case"binary":return i(f,u);case"buffer":return i(mr&&Buffer.isBuffer(f)?f.toString("binary"):CA(f),u);case"array":return i(gA(f),u)}throw new Error("Unrecognized type "+u.type)}function i(f,u){var p=f.split(/[\n\r]+/),g=-1,w=-1,v=0,x=0,y=[],_=[],I=null,k={},T=[],S=[],B=[],R=0,U;for(+u.codepage>=0&&Ji(+u.codepage);v!==p.length;++v){R=0;var L=p[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(t,r),D=L.replace(/;;/g,"\0").split(";").map(function(O){return O.replace(/\u0000/g,";")}),Q=D[0],K;if(L.length>0)switch(Q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&_.push(L.slice(3).replace(/;;/g,";"));break;case"C":var P=!1,te=!1,J=!1,V=!1,ie=-1,Y=-1;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"A":break;case"X":w=parseInt(D[x].slice(1))-1,te=!0;break;case"Y":for(g=parseInt(D[x].slice(1))-1,te||(w=0),U=y.length;U<=g;++U)y[U]=[];break;case"K":K=D[x].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(to(K))?isNaN(Zd(K).getDate())||(K=Bn(K)):(K=to(K),I!==null&&lu(I)&&(K=jg(K))),P=!0;break;case"E":V=!0;var N=Md(D[x].slice(1),{r:g,c:w});y[g][w]=[y[g][w],N];break;case"S":J=!0,y[g][w]=[y[g][w],"S5S"];break;case"G":break;case"R":ie=parseInt(D[x].slice(1))-1;break;case"C":Y=parseInt(D[x].slice(1))-1;break;default:if(u&&u.WTF)throw new Error("SYLK bad record "+L)}if(P&&(y[g][w]&&y[g][w].length==2?y[g][w][0]=K:y[g][w]=K,I=null),J){if(V)throw new Error("SYLK shared formula cannot have own formula");var C=ie>-1&&y[ie][Y];if(!C||!C[1])throw new Error("SYLK shared formula cannot find base");y[g][w][1]=ES(C[1],{r:g-ie,c:w-Y})}break;case"F":var E=0;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"X":w=parseInt(D[x].slice(1))-1,++E;break;case"Y":for(g=parseInt(D[x].slice(1))-1,U=y.length;U<=g;++U)y[U]=[];break;case"M":R=parseInt(D[x].slice(1))/20;break;case"F":break;case"G":break;case"P":I=_[parseInt(D[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=D[x].slice(1).split(" "),U=parseInt(B[0],10);U<=parseInt(B[1],10);++U)R=parseInt(B[2],10),S[U-1]=R===0?{hidden:!0}:{wch:R},eu(S[U-1]);break;case"C":w=parseInt(D[x].slice(1))-1,S[w]||(S[w]={});break;case"R":g=parseInt(D[x].slice(1))-1,T[g]||(T[g]={}),R>0?(T[g].hpt=R,T[g].hpx=Bh(R)):R===0&&(T[g].hidden=!0);break;default:if(u&&u.WTF)throw new Error("SYLK bad record "+L)}E<1&&(I=null);break;default:if(u&&u.WTF)throw new Error("SYLK bad record "+L)}}return T.length>0&&(k["!rows"]=T),S.length>0&&(k["!cols"]=S),u&&u.sheetRows&&(y=y.slice(0,u.sheetRows)),[y,k]}function o(f,u){var p=a(f,u),g=p[0],w=p[1],v=Au(g,u);return Bo(w).forEach(function(x){v[x]=w[x]}),v}function l(f,u){return _c(o(f,u),u)}function c(f,u,p,g){var w="C;Y"+(p+1)+";X"+(g+1)+";K";switch(f.t){case"n":w+=f.v||0,f.f&&!f.F&&(w+=";E"+p$(f.f,{r:p,c:g}));break;case"b":w+=f.v?"TRUE":"FALSE";break;case"e":w+=f.w||f.v;break;case"d":w+='"'+(f.w||f.v)+'"';break;case"s":w+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function A(f,u){u.forEach(function(p,g){var w="F;W"+(g+1)+" "+(g+1)+" ";p.hidden?w+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=Km(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=zm(p.wpx)),typeof p.wch=="number"&&(w+=Math.round(p.wch))),w.charAt(w.length-1)!=" "&&f.push(w)})}function d(f,u){u.forEach(function(p,g){var w="F;";p.hidden?w+="M0;":p.hpt?w+="M"+20*p.hpt+";":p.hpx&&(w+="M"+20*BS(p.hpx)+";"),w.length>2&&f.push(w+"R"+(g+1))})}function h(f,u){var p=["ID;PWXL;N;E"],g=[],w=Us(f["!ref"]),v,x=Array.isArray(f),y=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),f["!cols"]&&A(p,f["!cols"]),f["!rows"]&&d(p,f["!rows"]),p.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var _=w.s.r;_<=w.e.r;++_)for(var I=w.s.c;I<=w.e.c;++I){var k=sr({r:_,c:I});v=x?(f[_]||[])[I]:f[k],!(!v||v.v==null&&(!v.f||v.F))&&g.push(c(v,f,_,I))}return p.join(y)+y+g.join(y)+y+"E"+y}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),Sq=function(){function e(i,o){switch(o.type){case"base64":return t(ii(i),o);case"binary":return t(i,o);case"buffer":return t(mr&&Buffer.isBuffer(i)?i.toString("binary"):CA(i),o);case"array":return t(gA(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,A=-1,d=0,h=[];d!==l.length;++d){if(l[d].trim()==="BOT"){h[++c]=[],A=0;continue}if(!(c<0)){var f=l[d].trim().split(","),u=f[0],p=f[1];++d;for(var g=l[d]||"";(g.match(/["]/g)||[]).length&1&&d<l.length-1;)g+=`
`+l[++d];switch(g=g.trim(),+u){case-1:if(g==="BOT"){h[++c]=[],A=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?h[c][A]=!0:g==="FALSE"?h[c][A]=!1:isNaN(to(p))?isNaN(Zd(p).getDate())?h[c][A]=p:h[c][A]=Bn(p):h[c][A]=to(p),++A;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),h[c][A++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(i,o){return Au(e(i,o),o)}function s(i,o){return _c(r(i,o),o)}var a=function(){var i=function(c,A,d,h,f){c.push(A),c.push(d+","+h),c.push('"'+f.replace(/"/g,'""')+'"')},o=function(c,A,d,h){c.push(A+","+d),c.push(A==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var A=[],d=Us(c["!ref"]),h,f=Array.isArray(c);i(A,"TABLE",0,1,"sheetjs"),i(A,"VECTORS",0,d.e.r-d.s.r+1,""),i(A,"TUPLES",0,d.e.c-d.s.c+1,""),i(A,"DATA",0,0,"");for(var u=d.s.r;u<=d.e.r;++u){o(A,-1,0,"BOT");for(var p=d.s.c;p<=d.e.c;++p){var g=sr({r:u,c:p});if(h=f?(c[u]||[])[p]:c[g],!h){o(A,1,0,"");continue}switch(h.t){case"n":var w=h.w;!w&&h.v!=null&&(w=h.v),w==null?h.f&&!h.F?o(A,1,0,"="+h.f):o(A,1,0,""):o(A,0,w,"V");break;case"b":o(A,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(A,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=ki(h.z||lr[14],_a(Bn(h.v)))),o(A,0,h.w,"V");break;default:o(A,1,0,"")}}}o(A,-1,0,"EOD");var v=`\r
`,x=A.join(v);return x}}();return{to_workbook:s,to_sheet:r,from_sheet:a}}(),Fq=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,f){for(var u=h.split(`
`),p=-1,g=-1,w=0,v=[];w!==u.length;++w){var x=u[w].trim().split(":");if(x[0]==="cell"){var y=ya(x[1]);if(v.length<=y.r)for(p=v.length;p<=y.r;++p)v[p]||(v[p]=[]);switch(p=y.r,g=y.c,x[2]){case"t":v[p][g]=e(x[3]);break;case"v":v[p][g]=+x[3];break;case"vtf":var _=x[x.length-1];case"vtc":switch(x[3]){case"nl":v[p][g]=!!+x[4];break;default:v[p][g]=+x[4];break}x[2]=="vtf"&&(v[p][g]=[v[p][g],_])}}}return f&&f.sheetRows&&(v=v.slice(0,f.sheetRows)),v}function s(h,f){return Au(r(h,f),f)}function a(h,f){return _c(s(h,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function A(h){if(!h||!h["!ref"])return"";for(var f=[],u=[],p,g="",w=cu(h["!ref"]),v=Array.isArray(h),x=w.s.r;x<=w.e.r;++x)for(var y=w.s.c;y<=w.e.c;++y)if(g=sr({r:x,c:y}),p=v?(h[x]||[])[y]:h[g],!(!p||p.v==null||p.t==="z")){switch(u=["cell",g,"t"],p.t){case"s":case"str":u.push(t(p.v));break;case"n":p.f?(u[2]="vtf",u[3]="n",u[4]=p.v,u[5]=t(p.f)):(u[2]="v",u[3]=p.v);break;case"b":u[2]="vt"+(p.f?"f":"c"),u[3]="nl",u[4]=p.v?"1":"0",u[5]=t(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var _=_a(Bn(p.v));u[2]="vtc",u[3]="nd",u[4]=""+_,u[5]=p.w||ki(p.z||lr[14],_);break;case"e":continue}f.push(u.join(":"))}return f.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function d(h){return[i,o,l,o,A(h),c].join(`
`)}return{to_workbook:a,to_sheet:s,from_sheet:d}}(),_h=function(){function e(d,h,f,u,p){p.raw?h[f][u]=d:d===""||(d==="TRUE"?h[f][u]=!0:d==="FALSE"?h[f][u]=!1:isNaN(to(d))?isNaN(Zd(d).getDate())?h[f][u]=d:h[f][u]=Bn(d):h[f][u]=to(d))}function t(d,h){var f=h||{},u=[];if(!d||d.length===0)return u;for(var p=d.split(/[\r\n]/),g=p.length-1;g>=0&&p[g].length===0;)--g;for(var w=10,v=0,x=0;x<=g;++x)v=p[x].indexOf(" "),v==-1?v=p[x].length:v++,w=Math.max(w,v);for(x=0;x<=g;++x){u[x]=[];var y=0;for(e(p[x].slice(0,w).trim(),u,x,y,f),y=1;y<=(p[x].length-w)/10+1;++y)e(p[x].slice(w+(y-1)*10,w+y*10).trim(),u,x,y,f)}return f.sheetRows&&(u=u.slice(0,f.sheetRows)),u}var r={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function a(d){for(var h={},f=!1,u=0,p=0;u<d.length;++u)(p=d.charCodeAt(u))==34?f=!f:!f&&p in r&&(h[p]=(h[p]||0)+1);p=[];for(u in h)Object.prototype.hasOwnProperty.call(h,u)&&p.push([h[u],u]);if(!p.length){h=s;for(u in h)Object.prototype.hasOwnProperty.call(h,u)&&p.push([h[u],u])}return p.sort(function(g,w){return g[0]-w[0]||s[g[1]]-s[w[1]]}),r[p.pop()[1]]||44}function i(d,h){var f=h||{},u="",p=f.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(u=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(u=d.charAt(4),d=d.slice(6)):u=a(d.slice(0,1024)):f&&f.FS?u=f.FS:u=a(d.slice(0,1024));var w=0,v=0,x=0,y=0,_=0,I=u.charCodeAt(0),k=!1,T=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=f.dateNF!=null?HK(f.dateNF):null;function R(){var U=d.slice(y,_),L={};if(U.charAt(0)=='"'&&U.charAt(U.length-1)=='"'&&(U=U.slice(1,-1).replace(/""/g,'"')),U.length===0)L.t="z";else if(f.raw)L.t="s",L.v=U;else if(U.trim().length===0)L.t="s",L.v=U;else if(U.charCodeAt(0)==61)U.charCodeAt(1)==34&&U.charCodeAt(U.length-1)==34?(L.t="s",L.v=U.slice(2,-1).replace(/""/g,'"')):g$(U)?(L.t="n",L.f=U.slice(1)):(L.t="s",L.v=U);else if(U=="TRUE")L.t="b",L.v=!0;else if(U=="FALSE")L.t="b",L.v=!1;else if(!isNaN(x=to(U)))L.t="n",f.cellText!==!1&&(L.w=U),L.v=x;else if(!isNaN(Zd(U).getDate())||B&&U.match(B)){L.z=f.dateNF||lr[14];var D=0;B&&U.match(B)&&(U=KK(U,f.dateNF,U.match(B)||[]),D=1),f.cellDates?(L.t="d",L.v=Bn(U,D)):(L.t="n",L.v=_a(Bn(U,D))),f.cellText!==!1&&(L.w=ki(L.z,L.v instanceof Date?_a(L.v):L.v)),f.cellNF||delete L.z}else L.t="s",L.v=U;if(L.t=="z"||(f.dense?(p[w]||(p[w]=[]),p[w][v]=L):p[sr({c:v,r:w})]=L),y=_+1,S=d.charCodeAt(y),g.e.c<v&&(g.e.c=v),g.e.r<w&&(g.e.r=w),T==I)++v;else if(v=0,++w,f.sheetRows&&f.sheetRows<=w)return!0}e:for(;_<d.length;++_)switch(T=d.charCodeAt(_)){case 34:S===34&&(k=!k);break;case I:case 10:case 13:if(!k&&R())break e;break}return _-y>0&&R(),p["!ref"]=vr(g),p}function o(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,h):Au(t(d,h),h)}function l(d,h){var f="",u=h.type=="string"?[0,0,0,0]:Nw(d,h);switch(h.type){case"base64":f=ii(d);break;case"binary":f=d;break;case"buffer":h.codepage==65001?f=d.toString("utf8"):h.codepage&&typeof vh<"u"||(f=mr&&Buffer.isBuffer(d)?d.toString("binary"):CA(d));break;case"array":f=gA(d);break;case"string":f=d;break;default:throw new Error("Unrecognized type "+h.type)}return u[0]==239&&u[1]==187&&u[2]==191?f=ls(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=ls(f):h.type=="binary"&&typeof vh<"u",f.slice(0,19)=="socialcalc:version:"?Fq.to_sheet(h.type=="string"?f:ls(f),h):o(f,h)}function c(d,h){return _c(l(d,h),h)}function A(d){for(var h=[],f=Us(d["!ref"]),u,p=Array.isArray(d),g=f.s.r;g<=f.e.r;++g){for(var w=[],v=f.s.c;v<=f.e.c;++v){var x=sr({r:g,c:v});if(u=p?(d[g]||[])[v]:d[x],!u||u.v==null){w.push("          ");continue}for(var y=(u.w||(ul(u),u.w)||"").slice(0,10);y.length<10;)y+=" ";w.push(y+(v===0?" ":""))}h.push(w.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:A}}();function Tq(e,t){var r=t||{},s=!!r.WTF;r.WTF=!0;try{var a=kq.to_workbook(e,r);return r.WTF=s,a}catch(i){if(r.WTF=s,!i.message.match(/SYLK bad record ID/)&&s)throw i;return _h.to_workbook(e,t)}}var D0=function(){function e(N,C,E){if(N){Dn(N,N.l||0);for(var O=E.Enum||ie;N.l<N.length;){var q=N.read_shift(2),se=O[q]||O[65535],ye=N.read_shift(2),re=N.l+ye,de=se.f&&se.f(N,ye,E);if(N.l=re,C(de,se,q))return}}}function t(N,C){switch(C.type){case"base64":return r(Xi(ii(N)),C);case"binary":return r(Xi(N),C);case"buffer":case"array":return r(N,C)}throw"Unsupported type "+C.type}function r(N,C){if(!N)return N;var E=C||{},O=E.dense?[]:{},q="Sheet1",se="",ye=0,re={},de=[],Ne=[],z={s:{r:0,c:0},e:{r:0,c:0}},Be=E.sheetRows||0;if(N[2]==0&&(N[3]==8||N[3]==9)&&N.length>=16&&N[14]==5&&N[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(N[2]==2)E.Enum=ie,e(N,function(Re,Ye,ze){switch(ze){case 0:E.vers=Re,Re>=4096&&(E.qpro=!0);break;case 6:z=Re;break;case 204:Re&&(se=Re);break;case 222:se=Re;break;case 15:case 51:E.qpro||(Re[1].v=Re[1].v.slice(1));case 13:case 14:case 16:ze==14&&(Re[2]&112)==112&&(Re[2]&15)>1&&(Re[2]&15)<15&&(Re[1].z=E.dateNF||lr[14],E.cellDates&&(Re[1].t="d",Re[1].v=jg(Re[1].v))),E.qpro&&Re[3]>ye&&(O["!ref"]=vr(z),re[q]=O,de.push(q),O=E.dense?[]:{},z={s:{r:0,c:0},e:{r:0,c:0}},ye=Re[3],q=se||"Sheet"+(ye+1),se="");var yt=E.dense?(O[Re[0].r]||[])[Re[0].c]:O[sr(Re[0])];if(yt){yt.t=Re[1].t,yt.v=Re[1].v,Re[1].z!=null&&(yt.z=Re[1].z),Re[1].f!=null&&(yt.f=Re[1].f);break}E.dense?(O[Re[0].r]||(O[Re[0].r]=[]),O[Re[0].r][Re[0].c]=Re[1]):O[sr(Re[0])]=Re[1];break}},E);else if(N[2]==26||N[2]==14)E.Enum=Y,N[2]==14&&(E.qpro=!0,N.l=0),e(N,function(Re,Ye,ze){switch(ze){case 204:q=Re;break;case 22:Re[1].v=Re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Re[3]>ye&&(O["!ref"]=vr(z),re[q]=O,de.push(q),O=E.dense?[]:{},z={s:{r:0,c:0},e:{r:0,c:0}},ye=Re[3],q="Sheet"+(ye+1)),Be>0&&Re[0].r>=Be)break;E.dense?(O[Re[0].r]||(O[Re[0].r]=[]),O[Re[0].r][Re[0].c]=Re[1]):O[sr(Re[0])]=Re[1],z.e.c<Re[0].c&&(z.e.c=Re[0].c),z.e.r<Re[0].r&&(z.e.r=Re[0].r);break;case 27:Re[14e3]&&(Ne[Re[14e3][0]]=Re[14e3][1]);break;case 1537:Ne[Re[0]]=Re[1],Re[0]==ye&&(q=Re[1]);break}},E);else throw new Error("Unrecognized LOTUS BOF "+N[2]);if(O["!ref"]=vr(z),re[se||q]=O,de.push(se||q),!Ne.length)return{SheetNames:de,Sheets:re};for(var Ve={},ne=[],Me=0;Me<Ne.length;++Me)re[de[Me]]?(ne.push(Ne[Me]||de[Me]),Ve[Ne[Me]]=re[Ne[Me]]||re[de[Me]]):(ne.push(Ne[Me]),Ve[Ne[Me]]={"!ref":"A1"});return{SheetNames:ne,Sheets:Ve}}function s(N,C){var E=C||{};if(+E.codepage>=0&&Ji(+E.codepage),E.type=="string")throw new Error("Cannot write WK1 to JS string");var O=by(),q=Us(N["!ref"]),se=Array.isArray(N),ye=[];Hi(O,0,i(1030)),Hi(O,6,c(q));for(var re=Math.min(q.e.r,8191),de=q.s.r;de<=re;++de)for(var Ne=Rn(de),z=q.s.c;z<=q.e.c;++z){de===q.s.r&&(ye[z]=xn(z));var Be=ye[z]+Ne,Ve=se?(N[de]||[])[z]:N[Be];if(!(!Ve||Ve.t=="z"))if(Ve.t=="n")(Ve.v|0)==Ve.v&&Ve.v>=-32768&&Ve.v<=32767?Hi(O,13,u(de,z,Ve.v)):Hi(O,14,g(de,z,Ve.v));else{var ne=ul(Ve);Hi(O,15,h(de,z,ne.slice(0,239)))}}return Hi(O,1),O.end()}function a(N,C){var E=C||{};if(+E.codepage>=0&&Ji(+E.codepage),E.type=="string")throw new Error("Cannot write WK3 to JS string");var O=by();Hi(O,0,o(N));for(var q=0,se=0;q<N.SheetNames.length;++q)(N.Sheets[N.SheetNames[q]]||{})["!ref"]&&Hi(O,27,V(N.SheetNames[q],se++));var ye=0;for(q=0;q<N.SheetNames.length;++q){var re=N.Sheets[N.SheetNames[q]];if(!(!re||!re["!ref"])){for(var de=Us(re["!ref"]),Ne=Array.isArray(re),z=[],Be=Math.min(de.e.r,8191),Ve=de.s.r;Ve<=Be;++Ve)for(var ne=Rn(Ve),Me=de.s.c;Me<=de.e.c;++Me){Ve===de.s.r&&(z[Me]=xn(Me));var Re=z[Me]+ne,Ye=Ne?(re[Ve]||[])[Me]:re[Re];if(!(!Ye||Ye.t=="z"))if(Ye.t=="n")Hi(O,23,R(Ve,Me,ye,Ye.v));else{var ze=ul(Ye);Hi(O,22,T(Ve,Me,ye,ze.slice(0,239)))}}++ye}}return Hi(O,1),O.end()}function i(N){var C=fn(2);return C.write_shift(2,N),C}function o(N){var C=fn(26);C.write_shift(2,4096),C.write_shift(2,4),C.write_shift(4,0);for(var E=0,O=0,q=0,se=0;se<N.SheetNames.length;++se){var ye=N.SheetNames[se],re=N.Sheets[ye];if(!(!re||!re["!ref"])){++q;var de=cu(re["!ref"]);E<de.e.r&&(E=de.e.r),O<de.e.c&&(O=de.e.c)}}return E>8191&&(E=8191),C.write_shift(2,E),C.write_shift(1,q),C.write_shift(1,O),C.write_shift(2,0),C.write_shift(2,0),C.write_shift(1,1),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(4,0),C}function l(N,C,E){var O={s:{c:0,r:0},e:{c:0,r:0}};return C==8&&E.qpro?(O.s.c=N.read_shift(1),N.l++,O.s.r=N.read_shift(2),O.e.c=N.read_shift(1),N.l++,O.e.r=N.read_shift(2),O):(O.s.c=N.read_shift(2),O.s.r=N.read_shift(2),C==12&&E.qpro&&(N.l+=2),O.e.c=N.read_shift(2),O.e.r=N.read_shift(2),C==12&&E.qpro&&(N.l+=2),O.s.c==65535&&(O.s.c=O.e.c=O.s.r=O.e.r=0),O)}function c(N){var C=fn(8);return C.write_shift(2,N.s.c),C.write_shift(2,N.s.r),C.write_shift(2,N.e.c),C.write_shift(2,N.e.r),C}function A(N,C,E){var O=[{c:0,r:0},{t:"n",v:0},0,0];return E.qpro&&E.vers!=20768?(O[0].c=N.read_shift(1),O[3]=N.read_shift(1),O[0].r=N.read_shift(2),N.l+=2):(O[2]=N.read_shift(1),O[0].c=N.read_shift(2),O[0].r=N.read_shift(2)),O}function d(N,C,E){var O=N.l+C,q=A(N,C,E);if(q[1].t="s",E.vers==20768){N.l++;var se=N.read_shift(1);return q[1].v=N.read_shift(se,"utf8"),q}return E.qpro&&N.l++,q[1].v=N.read_shift(O-N.l,"cstr"),q}function h(N,C,E){var O=fn(7+E.length);O.write_shift(1,255),O.write_shift(2,C),O.write_shift(2,N),O.write_shift(1,39);for(var q=0;q<O.length;++q){var se=E.charCodeAt(q);O.write_shift(1,se>=128?95:se)}return O.write_shift(1,0),O}function f(N,C,E){var O=A(N,C,E);return O[1].v=N.read_shift(2,"i"),O}function u(N,C,E){var O=fn(7);return O.write_shift(1,255),O.write_shift(2,C),O.write_shift(2,N),O.write_shift(2,E,"i"),O}function p(N,C,E){var O=A(N,C,E);return O[1].v=N.read_shift(8,"f"),O}function g(N,C,E){var O=fn(13);return O.write_shift(1,255),O.write_shift(2,C),O.write_shift(2,N),O.write_shift(8,E,"f"),O}function w(N,C,E){var O=N.l+C,q=A(N,C,E);if(q[1].v=N.read_shift(8,"f"),E.qpro)N.l=O;else{var se=N.read_shift(2);_(N.slice(N.l,N.l+se),q),N.l+=se}return q}function v(N,C,E){var O=C&32768;return C&=-32769,C=(O?N:0)+(C>=8192?C-16384:C),(O?"":"$")+(E?xn(C):Rn(C))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(N,C){Dn(N,0);for(var E=[],O=0,q="",se="",ye="",re="";N.l<N.length;){var de=N[N.l++];switch(de){case 0:E.push(N.read_shift(8,"f"));break;case 1:se=v(C[0].c,N.read_shift(2),!0),q=v(C[0].r,N.read_shift(2),!1),E.push(se+q);break;case 2:{var Ne=v(C[0].c,N.read_shift(2),!0),z=v(C[0].r,N.read_shift(2),!1);se=v(C[0].c,N.read_shift(2),!0),q=v(C[0].r,N.read_shift(2),!1),E.push(Ne+z+":"+se+q)}break;case 3:if(N.l<N.length){console.error("WK1 premature formula end");return}break;case 4:E.push("("+E.pop()+")");break;case 5:E.push(N.read_shift(2));break;case 6:{for(var Be="";de=N[N.l++];)Be+=String.fromCharCode(de);E.push('"'+Be.replace(/"/g,'""')+'"')}break;case 8:E.push("-"+E.pop());break;case 23:E.push("+"+E.pop());break;case 22:E.push("NOT("+E.pop()+")");break;case 20:case 21:re=E.pop(),ye=E.pop(),E.push(["AND","OR"][de-20]+"("+ye+","+re+")");break;default:if(de<32&&y[de])re=E.pop(),ye=E.pop(),E.push(ye+y[de]+re);else if(x[de]){if(O=x[de][1],O==69&&(O=N[N.l++]),O>E.length){console.error("WK1 bad formula parse 0x"+de.toString(16)+":|"+E.join("|")+"|");return}var Ve=E.slice(-O);E.length-=O,E.push(x[de][0]+"("+Ve.join(",")+")")}else return de<=7?console.error("WK1 invalid opcode "+de.toString(16)):de<=24?console.error("WK1 unsupported op "+de.toString(16)):de<=30?console.error("WK1 invalid opcode "+de.toString(16)):de<=115?console.error("WK1 unsupported function opcode "+de.toString(16)):console.error("WK1 unrecognized opcode "+de.toString(16))}}E.length==1?C[1].f=""+E[0]:console.error("WK1 bad formula parse |"+E.join("|")+"|")}function I(N){var C=[{c:0,r:0},{t:"n",v:0},0];return C[0].r=N.read_shift(2),C[3]=N[N.l++],C[0].c=N[N.l++],C}function k(N,C){var E=I(N);return E[1].t="s",E[1].v=N.read_shift(C-4,"cstr"),E}function T(N,C,E,O){var q=fn(6+O.length);q.write_shift(2,N),q.write_shift(1,E),q.write_shift(1,C),q.write_shift(1,39);for(var se=0;se<O.length;++se){var ye=O.charCodeAt(se);q.write_shift(1,ye>=128?95:ye)}return q.write_shift(1,0),q}function S(N,C){var E=I(N);E[1].v=N.read_shift(2);var O=E[1].v>>1;if(E[1].v&1)switch(O&7){case 0:O=(O>>3)*5e3;break;case 1:O=(O>>3)*500;break;case 2:O=(O>>3)/20;break;case 3:O=(O>>3)/200;break;case 4:O=(O>>3)/2e3;break;case 5:O=(O>>3)/2e4;break;case 6:O=(O>>3)/16;break;case 7:O=(O>>3)/64;break}return E[1].v=O,E}function B(N,C){var E=I(N),O=N.read_shift(4),q=N.read_shift(4),se=N.read_shift(2);if(se==65535)return O===0&&q===3221225472?(E[1].t="e",E[1].v=15):O===0&&q===3489660928?(E[1].t="e",E[1].v=42):E[1].v=0,E;var ye=se&32768;return se=(se&32767)-16446,E[1].v=(1-ye*2)*(q*Math.pow(2,se+32)+O*Math.pow(2,se)),E}function R(N,C,E,O){var q=fn(14);if(q.write_shift(2,N),q.write_shift(1,E),q.write_shift(1,C),O==0)return q.write_shift(4,0),q.write_shift(4,0),q.write_shift(2,65535),q;var se=0,ye=0,re=0,de=0;return O<0&&(se=1,O=-O),ye=Math.log2(O)|0,O/=Math.pow(2,ye-31),de=O>>>0,de&2147483648||(O/=2,++ye,de=O>>>0),O-=de,de|=2147483648,de>>>=0,O*=Math.pow(2,32),re=O>>>0,q.write_shift(4,re),q.write_shift(4,de),ye+=16383+(se?32768:0),q.write_shift(2,ye),q}function U(N,C){var E=B(N);return N.l+=C-14,E}function L(N,C){var E=I(N),O=N.read_shift(4);return E[1].v=O>>6,E}function D(N,C){var E=I(N),O=N.read_shift(8,"f");return E[1].v=O,E}function Q(N,C){var E=D(N);return N.l+=C-10,E}function K(N,C){return N[N.l+C-1]==0?N.read_shift(C,"cstr"):""}function P(N,C){var E=N[N.l++];E>C-1&&(E=C-1);for(var O="";O.length<E;)O+=String.fromCharCode(N[N.l++]);return O}function te(N,C,E){if(!(!E.qpro||C<21)){var O=N.read_shift(1);N.l+=17,N.l+=1,N.l+=2;var q=N.read_shift(C-21,"cstr");return[O,q]}}function J(N,C){for(var E={},O=N.l+C;N.l<O;){var q=N.read_shift(2);if(q==14e3){for(E[q]=[0,""],E[q][0]=N.read_shift(2);N[N.l];)E[q][1]+=String.fromCharCode(N[N.l]),N.l++;N.l++}}return E}function V(N,C){var E=fn(5+N.length);E.write_shift(2,14e3),E.write_shift(2,C);for(var O=0;O<N.length;++O){var q=N.charCodeAt(O);E[E.l++]=q>127?95:q}return E[E.l++]=0,E}var ie={0:{n:"BOF",f:Zs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:P},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:U},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:J},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:Q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:te},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:a,to_workbook:t}}();function Iq(e){var t={},r=e.match(ca),s=0,a=!1;if(r)for(;s!=r.length;++s){var i=Zt(r[s]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=ew[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return t}var Uq=function(){var e=wh("t"),t=wh("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Nr(o[1])},c=i.match(t);return c&&(l.s=Iq(c[1])),l}var s=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(s,"").split(a).map(r).filter(function(l){return l.v})}}(),Lq=function(){var t=/(\r\n|\n)/g;function r(a,i,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),a.b&&(i.push("<b>"),o.push("</b>")),a.i&&(i.push("<i>"),o.push("</i>")),a.strike&&(i.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function s(a){var i=[[],a.v,[]];return a.v?(a.s&&r(a.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(s).join("")}}(),Dq=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Qq=/<(?:\w+:)?r>/,Oq=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function gw(e,t){var r=t?t.cellHTML:!0,s={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(s.t=Nr(ls(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),s.r=ls(e),r&&(s.h=ow(s.t))):e.match(Qq)&&(s.r=ls(e),s.t=Nr(ls((e.replace(Oq,"").match(Dq)||[]).join("").replace(ca,""))),r&&(s.h=Lq(Uq(s.r)))),s):{t:""}}var Pq=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Rq=/<(?:\w+:)?(?:si|sstItem)>/g,Mq=/<\/(?:\w+:)?(?:si|sstItem)>/;function Hq(e,t){var r=[],s="";if(!e)return r;var a=e.match(Pq);if(a){s=a[2].replace(Rq,"").split(Mq);for(var i=0;i!=s.length;++i){var o=gw(s[i].trim(),t);o!=null&&(r[r.length]=o)}a=Zt(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}function Kq(e){return[e.read_shift(4),e.read_shift(4)]}function zq(e,t){var r=[],s=!1;return ml(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:s=!0;break;case 36:s=!1;break;default:if(o.T,!s||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function vS(e){for(var t=[],r=e.split(""),s=0;s<r.length;++s)t[s]=r[s].charCodeAt(0);return t}function il(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Vq(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=il(e,4),t.U=il(e,4),t.W=il(e,4),t}function qq(e){for(var t=e.read_shift(4),r=e.l+t-4,s={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(s.name=e.read_shift(0,"lpp4"),s.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return s}function Gq(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(qq(e));return t}function $q(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Wq(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=il(e,4),t.U=il(e,4),t.W=il(e,4),t}function Xq(e){var t=Wq(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function yS(e,t){var r=e.l+t,s={};s.Flags=e.read_shift(4)&63,e.l+=4,s.AlgID=e.read_shift(4);var a=!1;switch(s.AlgID){case 26126:case 26127:case 26128:a=s.Flags==36;break;case 26625:a=s.Flags==4;break;case 0:a=s.Flags==16||s.Flags==4||s.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+s.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return s.AlgIDHash=e.read_shift(4),s.KeySize=e.read_shift(4),s.ProviderType=e.read_shift(4),e.l+=8,s.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,s}function wS(e,t){var r={},s=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,s),e.l=s,r}function Jq(e){var t=il(e);switch(t.Minor){case 2:return[t.Minor,Yq(e)];case 3:return[t.Minor,Zq()];case 4:return[t.Minor,eG(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Yq(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),s=yS(e,r),a=wS(e,e.length-e.l);return{t:"Std",h:s,v:a}}function Zq(){throw new Error("File is password-protected: ECMA-376 Extensible")}function eG(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),s={};return r.replace(ca,function(i){var o=Zt(i);switch(ko(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){s[l]=o[l]});break;case"<dataIntegrity":s.encryptedHmacKey=o.encryptedHmacKey,s.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":s.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":s.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":s.encs.push(o);break;default:throw o[0]}}),s}function tG(e,t){var r={},s=r.EncryptionVersionInfo=il(e,4);if(t-=4,s.Minor!=2)throw new Error("unrecognized minor version code: "+s.Minor);if(s.Major>4||s.Major<2)throw new Error("unrecognized major version code: "+s.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=yS(e,a),t-=a,r.EncryptionVerifier=wS(e,t),r}function rG(e){var t={},r=t.EncryptionVersionInfo=il(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function sG(e){var t=0,r,s=vS(e),a=s.length+1,i,o,l,c,A;for(r=gc(a),r[0]=s.length,i=1;i!=a;++i)r[i]=s[i-1];for(i=a-1;i>=0;--i)o=r[i],l=t&16384?1:0,c=t<<1&32767,A=l|c,t=A^o;return t^52811}var bS=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],s=function(o){return(o/2|o*128)&255},a=function(o,l){return s(o^l)},i=function(o){for(var l=t[o.length-1],c=104,A=o.length-1;A>=0;--A)for(var d=o[A],h=0;h!=7;++h)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=vS(o),c=i(l),A=l.length,d=gc(16),h=0;h!=16;++h)d[h]=0;var f,u,p;for((A&1)===1&&(f=c>>8,d[A]=a(e[0],f),--A,f=c&255,u=l[l.length-1],d[A]=a(u,f));A>0;)--A,f=c>>8,d[A]=a(l[A],f),--A,f=c&255,d[A]=a(l[A],f);for(A=15,p=15-l.length;p>0;)f=c>>8,d[A]=a(e[p],f),--A,--p,f=c&255,d[A]=a(l[A],f),--A,--p;return d}}(),nG=function(e,t,r,s,a){a||(a=t),s||(s=bS(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=s[r],o=(o>>5|o<<3)&255,a[i]=o,++r;return[a,r,s]},aG=function(e){var t=0,r=bS(e);return function(s){var a=nG("",s,t,r);return t=a[1],a[0]}};function iG(e,t,r,s){var a={key:Zs(e),verificationBytes:Zs(e)};return r.password&&(a.verifier=sG(r.password)),s.valid=a.verificationBytes===a.verifier,s.valid&&(s.insitu=aG(r.password)),a}function oG(e,t,r){var s=r||{};return s.Info=e.read_shift(2),e.l-=2,s.Info===1?s.Data=rG(e):s.Data=tG(e,t),s}function lG(e,t,r){var s={Type:r.biff>=8?e.read_shift(2):0};return s.Type?oG(e,t-2,s):iG(e,r.biff>=8?t:t-2,r,s),s}var cG=function(){function e(a,i){switch(i.type){case"base64":return t(ii(a),i);case"binary":return t(a,i);case"buffer":return t(mr&&Buffer.isBuffer(a)?a.toString("binary"):CA(a),i);case"array":return t(gA(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var o=i||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var A={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,h){Array.isArray(l)&&(l[h]=[]);for(var f=/\\\w+\b/g,u=0,p,g=-1;p=f.exec(d);){switch(p[0]){case"\\cell":var w=d.slice(u,f.lastIndex-p[0].length);if(w[0]==" "&&(w=w.slice(1)),++g,w.length){var v={v:w,t:"s"};Array.isArray(l)?l[h][g]=v:l[sr({r:h,c:g})]=v}break}u=f.lastIndex}g>A.e.c&&(A.e.c=g)}),l["!ref"]=vr(A),l}function r(a,i){return _c(e(a,i),i)}function s(a){for(var i=["{\\rtf1\\ansi"],o=Us(a["!ref"]),l,c=Array.isArray(a),A=o.s.r;A<=o.e.r;++A){i.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var h=sr({r:A,c:d});l=c?(a[A]||[])[d]:a[h],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(ul(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:s}}();function AG(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Nh(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function dG(e){var t=e[0]/255,r=e[1]/255,s=e[2]/255,a=Math.max(t,r,s),i=Math.min(t,r,s),o=a-i;if(o===0)return[0,0,t];var l=0,c=0,A=a+i;switch(c=o/(A>1?2-A:A),a){case t:l=((r-s)/o+6)%6;break;case r:l=(s-t)/o+2;break;case s:l=(t-r)/o+4;break}return[l/6,c,A/2]}function uG(e){var t=e[0],r=e[1],s=e[2],a=r*2*(s<.5?s:1-s),i=s-a/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var A=0;A!=3;++A)o[A]=Math.round(o[A]*255);return o}function Hm(e,t){if(t===0)return e;var r=dG(AG(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Nh(uG(r))}var _S=6,hG=15,fG=1,va=_S;function Km(e){return Math.floor((e+Math.round(128/va)/256)*va)}function zm(e){return Math.floor((e-5)/va*100+.5)/100}function Cy(e){return Math.round((e*va+5)/va*256)/256}function j1(e){return Cy(zm(Km(e)))}function xw(e){var t=Math.abs(e-j1(e)),r=va;if(t>.005)for(va=fG;va<hG;++va)Math.abs(e-j1(e))<=t&&(t=Math.abs(e-j1(e)),r=va);va=r}function eu(e){e.width?(e.wpx=Km(e.width),e.wch=zm(e.wpx),e.MDW=va):e.wpx?(e.wch=zm(e.wpx),e.width=Cy(e.wch),e.MDW=va):typeof e.wch=="number"&&(e.width=Cy(e.wch),e.wpx=Km(e.width),e.MDW=va),e.customWidth&&delete e.customWidth}var pG=96,NS=pG;function BS(e){return e*96/NS}function Bh(e){return e*NS/96}var mG={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function gG(e,t,r,s){t.Borders=[];var a={},i=!1;(e[0].match(ca)||[]).forEach(function(o){var l=Zt(o);switch(ko(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=gs(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=gs(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function xG(e,t,r,s){t.Fills=[];var a={},i=!1;(e[0].match(ca)||[]).forEach(function(o){var l=Zt(o);switch(ko(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function vG(e,t,r,s){t.Fonts=[];var a={},i=!1;(e[0].match(ca)||[]).forEach(function(o){var l=Zt(o);switch(ko(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=ls(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?gs(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?gs(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?gs(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?gs(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?gs(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?gs(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?gs(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=ew[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=gs(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=oA[a.color.index];a.color.index==81&&(c=oA[1]),c||(c=oA[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=Hm(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function yG(e,t,r){t.NumberFmt=[];for(var s=Bo(lr),a=0;a<s.length;++a)t.NumberFmt[s[a]]=lr[s[a]];var i=e[0].match(ca);if(i)for(a=0;a<i.length;++a){var o=Zt(i[a]);switch(ko(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Nr(ls(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}iA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var wp=["numFmtId","fillId","fontId","borderId","xfId"],bp=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function wG(e,t,r){t.CellXf=[];var s,a=!1;(e[0].match(ca)||[]).forEach(function(i){var o=Zt(i),l=0;switch(ko(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(s=o,delete s[0],l=0;l<wp.length;++l)s[wp[l]]&&(s[wp[l]]=parseInt(s[wp[l]],10));for(l=0;l<bp.length;++l)s[bp[l]]&&(s[bp[l]]=gs(s[bp[l]]));if(t.NumberFmt&&s.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[s.numFmtId]==t.NumberFmt[l]){s.numFmtId=l;break}}t.CellXf.push(s);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=gs(o.wrapText)),s.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var bG=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,s=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,A){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=l.match(t))&&yG(h,d,A),(h=l.match(a))&&vG(h,d,c,A),(h=l.match(s))&&xG(h,d,c,A),(h=l.match(i))&&gG(h,d,c,A),(h=l.match(r))&&wG(h,d,A),d}}();function _G(e,t){var r=e.read_shift(2),s=aa(e);return[r,s]}function NG(e,t,r){var s={};s.sz=e.read_shift(2)/20;var a=Uz(e);a.fItalic&&(s.italic=1),a.fCondense&&(s.condense=1),a.fExtend&&(s.extend=1),a.fShadow&&(s.shadow=1),a.fOutline&&(s.outline=1),a.fStrikeout&&(s.strike=1);var i=e.read_shift(2);switch(i===700&&(s.bold=1),e.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(s.underline=o);var l=e.read_shift(1);l>0&&(s.family=l);var c=e.read_shift(1);switch(c>0&&(s.charset=c),e.l++,s.color=Iz(e),e.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=aa(e),s}var BG=oa;function CG(e,t){var r=e.l+t,s=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:s,numFmtId:a}}var jG=oa;function EG(e,t,r){var s={};s.NumberFmt=[];for(var a in lr)s.NumberFmt[a]=lr[a];s.CellXf=[],s.Fonts=[];var i=[],o=!1;return ml(e,function(c,A,d){switch(d){case 44:s.NumberFmt[c[0]]=c[1],iA(c[1],c[0]);break;case 43:s.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Hm(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&s.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(d),o=!0;break;case 38:i.pop(),o=!1;break;default:if(A.T>0)i.push(d);else if(A.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),s}var kG=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function SG(e,t,r){t.themeElements.clrScheme=[];var s={};(e[0].match(ca)||[]).forEach(function(a){var i=Zt(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":s.rgb=i.val;break;case"<a:sysClr":s.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[kG.indexOf(i[0])]=s,s={}):s.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function FG(){}function TG(){}var IG=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,UG=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,LG=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function DG(e,t,r){t.themeElements={};var s;[["clrScheme",IG,SG],["fontScheme",UG,FG],["fmtScheme",LG,TG]].forEach(function(a){if(!(s=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](s,t,r)})}var QG=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function CS(e,t){(!e||e.length===0)&&(e=OG());var r,s={};if(!(r=e.match(QG)))throw new Error("themeElements not found in theme");return DG(r[0],s,t),s.raw=e,s}function OG(e,t){var r=[Qk];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function PG(e,t,r){var s=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=s;return}var i=e.slice(e.l);e.l=s;var o;try{o=Dk(i,{type:"array"})}catch{return}var l=ei(o,"theme/theme/theme1.xml",!0);if(l)return CS(l,r)}}function RG(e){return e.read_shift(4)}function MG(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=HG(e,4);break;case 2:t.xclrValue=uS(e);break;case 3:t.xclrValue=RG(e);break;case 4:e.l+=4;break}return e.l+=8,t}function HG(e,t){return oa(e,t)}function KG(e,t){return oa(e,t)}function zG(e){var t=e.read_shift(2),r=e.read_shift(2)-4,s=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:s[1]=MG(e);break;case 6:s[1]=KG(e,r);break;case 14:case 15:s[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return s}function VG(e,t){var r=e.l+t;e.l+=2;var s=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(zG(e,r-e.l));return{ixfe:s,ext:i}}function qG(e,t){t.forEach(function(r){switch(r[0]){}})}function GG(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:aa(e)}}function $G(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function WG(e){return e.l+=4,e.read_shift(4)!=0}function XG(e,t,r){var s={Types:[],Cell:[],Value:[]},a=r||{},i=[],o=!1,l=2;return ml(e,function(c,A,d){switch(d){case 335:s.Types.push({name:c.name});break;case 51:c.forEach(function(h){l==1?s.Cell.push({type:s.Types[h[0]-1].name,index:h[1]}):l==0&&s.Value.push({type:s.Types[h[0]-1].name,index:h[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(d),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!A.T){if(!o||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),s}function JG(e,t,r){var s={Types:[],Cell:[],Value:[]};if(!e)return s;var a=!1,i=2,o;return e.replace(ca,function(l){var c=Zt(l);switch(ko(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":s.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<s.Types.length;++A)s.Types[A].name==c.name&&(o=s.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?s.Cell.push({type:s.Types[c.t-1].name,index:+c.v}):i==0&&s.Value.push({type:s.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),s}function YG(e){var t=[];if(!e)return t;var r=1;return(e.match(ca)||[]).forEach(function(s){var a=Zt(s);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function ZG(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=sr(r);var s=e.read_shift(1);return s&2&&(t.l="1"),s&8&&(t.a="1"),t}function e$(e,t,r){var s=[];return ml(e,function(i,o,l){switch(l){case 63:s.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),s}function t$(e,t,r,s){if(!e)return e;var a=s||{},i=!1;ml(e,function(l,c,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},a)}function r$(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function sB(e,t,r,s){var a=Array.isArray(e),i;t.forEach(function(o){var l=ya(o.ref);if(a?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},a?e[l.r][l.c]=i:e[o.ref]=i;var c=Us(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var A=vr(c);A!==e["!ref"]&&(e["!ref"]=A)}i.c||(i.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var h=i.c.length-1;h>=0;--h){if(!r&&i.c[h].T)return;r&&!i.c[h].T&&i.c.splice(h,1)}if(r&&s){for(h=0;h<s.length;++h)if(d.a==s[h].id){d.a=s[h].name||d.a;break}}i.c.push(d)})}function s$(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],s=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Zt(l[0]),A={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ya(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var h=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!h&&!!h[1]&&gw(h[1])||{r:"",t:"",h:""};A.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),A.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(A.h=f.h),s.push(A)}}}}),s}function n$(e,t){var r=[],s=!1,a={},i=0;return e.replace(ca,function(l,c){var A=Zt(l);switch(ko(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":a.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":s=!0;break;case"</mentions>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&t.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return l}),r}function a$(e,t){var r=[],s=!1;return e.replace(ca,function(i){var o=Zt(i);switch(ko(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function i$(e){var t={};t.iauthor=e.read_shift(4);var r=EA(e);return t.rfx=r.s,t.ref=sr(r.s),e.l+=16,t}var o$=aa;function l$(e,t){var r=[],s=[],a={},i=!1;return ml(e,function(l,c,A){switch(A){case 632:s.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=s[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),r}var c$="application/vnd.ms-office.vbaProject";function A$(e){var t=xr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,s){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");xr.utils.cfb_add(t,a,e.FileIndex[s].content)}}),xr.write(t)}function d$(){return{"!type":"dialog"}}function u$(){return{"!type":"dialog"}}function h$(){return{"!type":"macro"}}function f$(){return{"!type":"macro"}}var Md=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(s,a,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var A=i.length>0?parseInt(i,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?A+=t.r:--A,a+(l?"":"$")+xn(d)+(c?"":"$")+Rn(A)}return function(a,i){return t=i,a.replace(e,r)}}(),jS=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,p$=function(){return function(t,r){return t.replace(jS,function(s,a,i,o,l,c){var A=dw(o)-(i?0:r.c),d=Aw(c)-(l?0:r.r),h=d==0?"":l?d+1:"["+d+"]",f=A==0?"":i?A+1:"["+A+"]";return a+"R"+h+"C"+f})}}();function ES(e,t){return e.replace(jS,function(r,s,a,i,o,l){return s+(a=="$"?a+i:xn(dw(i)+t.c))+(o=="$"?o+l:Rn(Aw(l)+t.r))})}function m$(e,t,r){var s=cu(t),a=s.s,i=ya(r),o={r:i.r-a.r,c:i.c-a.c};return ES(e,o)}function g$(e){return e.length!=1}function nB(e){return e.replace(/_xlfn\./g,"")}function Js(e){e.l+=1}function xc(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function kS(e,t,r){var s=2;if(r){if(r.biff>=2&&r.biff<=5)return SS(e);r.biff==12&&(s=4)}var a=e.read_shift(s),i=e.read_shift(s),o=xc(e),l=xc(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function SS(e){var t=xc(e),r=xc(e),s=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:s,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function x$(e,t,r){if(r.biff<8)return SS(e);var s=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=xc(e),o=xc(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function FS(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return v$(e);var s=e.read_shift(r&&r.biff==12?4:2),a=xc(e);return{r:s,c:a[0],cRel:a[1],rRel:a[2]}}function v$(e){var t=xc(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function y$(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function w$(e,t,r){var s=r&&r.biff?r.biff:8;if(s>=2&&s<=5)return b$(e);var a=e.read_shift(s>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:o,rRel:l}}function b$(e){var t=e.read_shift(2),r=e.read_shift(1),s=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,s==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:s}}function _$(e,t,r){var s=(e[e.l++]&96)>>5,a=kS(e,r.biff>=2&&r.biff<=5?6:8,r);return[s,a]}function N$(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=kS(e,i,r);return[s,a,o]}function B$(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[s]}function C$(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[s,a]}function j$(e,t,r){var s=(e[e.l++]&96)>>5,a=x$(e,t-1,r);return[s,a]}function E$(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[s]}function aB(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function k$(e,t,r){e.l+=2;for(var s=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=s;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function S$(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function F$(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function T$(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function I$(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[s]}function TS(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function U$(e){return e.read_shift(2),TS(e)}function L$(e){return e.read_shift(2),TS(e)}function D$(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=FS(e,0,r);return[s,a]}function Q$(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=w$(e,0,r);return[s,a]}function O$(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=FS(e,0,r);return[s,a,i]}function P$(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[RW[a],LS[a],s]}function R$(e,t,r){var s=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[s==88?-1:0,e.read_shift(1)]:M$(e);return[a,(i[0]===0?LS:PW)[i[1]]]}function M$(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function H$(e,t,r){e.l+=r&&r.biff==2?3:4}function K$(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var s=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function z$(e){return e.l++,kA[e.read_shift(1)]}function V$(e){return e.l++,e.read_shift(2)}function q$(e){return e.l++,e.read_shift(1)!==0}function G$(e){return e.l++,ra(e)}function $$(e,t,r){return e.l++,Ph(e,t-1,r)}function W$(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ms(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=kA[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ra(e);break;case 2:r[1]=SA(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function X$(e,t,r){for(var s=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=s;++i)a.push((r.biff==12?EA:Eg)(e));return a}function J$(e,t,r){var s=0,a=0;r.biff==12?(s=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),s=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--s,--a==0&&(a=256));for(var i=0,o=[];i!=s&&(o[i]=[]);++i)for(var l=0;l!=a;++l)o[i][l]=W$(e,r.biff);return o}function Y$(e,t,r){var s=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[s,0,i]}function Z$(e,t,r){if(r.biff==5)return eW(e);var s=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[s,a,i]}function eW(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var s=e.read_shift(2);return e.l+=12,[t,r,s]}function tW(e,t,r){var s=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function rW(e,t,r){var s=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[s,a]}function sW(e,t,r){var s=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[s]}function nW(e,t,r){var s=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[s,a]}var aW=oa,iW=oa,oW=oa;function Mh(e,t,r){return e.l+=2,[y$(e)]}function vw(e){return e.l+=6,[]}var lW=Mh,cW=vw,AW=vw,dW=Mh;function IS(e){return e.l+=2,[Zs(e),e.read_shift(2)&1]}var uW=Mh,hW=IS,fW=vw,pW=Mh,mW=Mh,gW=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function xW(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),o=gW[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:s,c:a,C:i}}function vW(e){return e.l+=2,[e.read_shift(4)]}function yW(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function wW(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function bW(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function _W(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function NW(e){return e.l+=4,[0,0]}var iB={1:{n:"PtgExp",f:K$},2:{n:"PtgTbl",f:oW},3:{n:"PtgAdd",f:Js},4:{n:"PtgSub",f:Js},5:{n:"PtgMul",f:Js},6:{n:"PtgDiv",f:Js},7:{n:"PtgPower",f:Js},8:{n:"PtgConcat",f:Js},9:{n:"PtgLt",f:Js},10:{n:"PtgLe",f:Js},11:{n:"PtgEq",f:Js},12:{n:"PtgGe",f:Js},13:{n:"PtgGt",f:Js},14:{n:"PtgNe",f:Js},15:{n:"PtgIsect",f:Js},16:{n:"PtgUnion",f:Js},17:{n:"PtgRange",f:Js},18:{n:"PtgUplus",f:Js},19:{n:"PtgUminus",f:Js},20:{n:"PtgPercent",f:Js},21:{n:"PtgParen",f:Js},22:{n:"PtgMissArg",f:Js},23:{n:"PtgStr",f:$$},26:{n:"PtgSheet",f:yW},27:{n:"PtgEndSheet",f:wW},28:{n:"PtgErr",f:z$},29:{n:"PtgBool",f:q$},30:{n:"PtgInt",f:V$},31:{n:"PtgNum",f:G$},32:{n:"PtgArray",f:E$},33:{n:"PtgFunc",f:P$},34:{n:"PtgFuncVar",f:R$},35:{n:"PtgName",f:Y$},36:{n:"PtgRef",f:D$},37:{n:"PtgArea",f:_$},38:{n:"PtgMemArea",f:tW},39:{n:"PtgMemErr",f:aW},40:{n:"PtgMemNoMem",f:iW},41:{n:"PtgMemFunc",f:rW},42:{n:"PtgRefErr",f:sW},43:{n:"PtgAreaErr",f:B$},44:{n:"PtgRefN",f:Q$},45:{n:"PtgAreaN",f:j$},46:{n:"PtgMemAreaN",f:bW},47:{n:"PtgMemNoMemN",f:_W},57:{n:"PtgNameX",f:Z$},58:{n:"PtgRef3d",f:O$},59:{n:"PtgArea3d",f:N$},60:{n:"PtgRefErr3d",f:nW},61:{n:"PtgAreaErr3d",f:C$},255:{}},BW={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},CW={1:{n:"PtgElfLel",f:IS},2:{n:"PtgElfRw",f:pW},3:{n:"PtgElfCol",f:lW},6:{n:"PtgElfRwV",f:mW},7:{n:"PtgElfColV",f:dW},10:{n:"PtgElfRadical",f:uW},11:{n:"PtgElfRadicalS",f:fW},13:{n:"PtgElfColS",f:cW},15:{n:"PtgElfColSV",f:AW},16:{n:"PtgElfRadicalLel",f:hW},25:{n:"PtgList",f:xW},29:{n:"PtgSxName",f:vW},255:{}},jW={0:{n:"PtgAttrNoop",f:NW},1:{n:"PtgAttrSemi",f:I$},2:{n:"PtgAttrIf",f:F$},4:{n:"PtgAttrChoose",f:k$},8:{n:"PtgAttrGoto",f:S$},16:{n:"PtgAttrSum",f:H$},32:{n:"PtgAttrBaxcel",f:aB},33:{n:"PtgAttrBaxcel",f:aB},64:{n:"PtgAttrSpace",f:U$},65:{n:"PtgAttrSpaceSemi",f:L$},128:{n:"PtgAttrIfError",f:T$},255:{}};function Hh(e,t,r,s){if(s.biff<8)return oa(e,t);for(var a=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=J$(e,0,s),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=X$(e,r[o][1],s),i.push(r[o][2]);break;case"PtgExp":s&&s.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&i.push(oa(e,t)),i}function Kh(e,t,r){for(var s=e.l+t,a,i,o=[];s!=e.l;)t=s-e.l,i=e[e.l],a=iB[i]||iB[BW[i]],(i===24||i===25)&&(a=(i===24?CW:jW)[e[e.l+1]]),!a||!a.f?oa(e,t):o.push([a.n,a.f(e,t,r)]);return o}function EW(e){for(var t=[],r=0;r<e.length;++r){for(var s=e[r],a=[],i=0;i<s.length;++i){var o=s[i];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var kW={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function SW(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function US(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var s=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!s)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[s[0]][0]){case 357:return a=s[1]==-1?"#REF":e.SheetNames[s[1]],s[1]==s[2]?a:a+":"+e.SheetNames[s[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[s[0]][0];case 355:default:return"SH33TJSSRC"+e[s[0]][0]}switch(e[s[0]][0][0]){case 1025:return a=s[1]==-1?"#REF":e.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?a:a+":"+e.SheetNames[s[2]];case 14849:return e[s[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[s[0]][0][3]?(a=s[1]==-1?"#REF":e[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?a:a+":"+e[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function oB(e,t,r){var s=US(e,t,r);return s=="#REF"?s:SW(s,r)}function ea(e,t,r,s,a){var i=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,A,d,h=0,f=0,u,p="";if(!e[0]||!e[0][0])return"";for(var g=-1,w="",v=0,x=e[0].length;v<x;++v){var y=e[0][v];switch(y[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),A=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:w=Is(" ",e[0][g][1][1]);break;case 1:w=Is("\r",e[0][g][1][1]);break;default:if(w="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}A=A+w,g=-1}l.push(A+kW[y[0]]+c);break;case"PtgIsect":c=l.pop(),A=l.pop(),l.push(A+" "+c);break;case"PtgUnion":c=l.pop(),A=l.pop(),l.push(A+","+c);break;case"PtgRange":c=l.pop(),A=l.pop(),l.push(A+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=T0(y[1][1],o,a),l.push(I0(d,i));break;case"PtgRefN":d=r?T0(y[1][1],r,a):y[1][1],l.push(I0(d,i));break;case"PtgRef3d":h=y[1][1],d=T0(y[1][2],o,a),p=oB(s,h,a),l.push(p+"!"+I0(d,i));break;case"PtgFunc":case"PtgFuncVar":var _=y[1][0],I=y[1][1];_||(_=0),_&=127;var k=_==0?[]:l.slice(-_);l.length-=_,I==="User"&&(I=k.shift()),l.push(I+"("+k.join(",")+")");break;case"PtgBool":l.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(y[1]);break;case"PtgNum":l.push(String(y[1]));break;case"PtgStr":l.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(y[1]);break;case"PtgAreaN":u=MN(y[1][1],r?{s:r}:o,a),l.push(B1(u,a));break;case"PtgArea":u=MN(y[1][1],o,a),l.push(B1(u,a));break;case"PtgArea3d":h=y[1][1],u=y[1][2],p=oB(s,h,a),l.push(p+"!"+B1(u,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=y[1][2];var T=(s.names||[])[f-1]||(s[0]||[])[f],S=T?T.Name:"SH33TJSNAME"+String(f);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var B=y[1][1];f=y[1][2];var R;if(a.biff<=5)B<0&&(B=-B),s[B]&&(R=s[B][f]);else{var U="";if(((s[B]||[])[0]||[])[0]==14849||(((s[B]||[])[0]||[])[0]==1025?s[B][f]&&s[B][f].itab>0&&(U=s.SheetNames[s[B][f].itab-1]+"!"):U=s.SheetNames[f-1]+"!"),s[B]&&s[B][f])U+=s[B][f].Name;else if(s[0]&&s[0][f])U+=s[0][f].Name;else{var L=(US(s,B,a)||"").split(";;");L[f-1]?U=L[f-1]:U+="SH33TJSERRX"}l.push(U);break}R||(R={Name:"SH33TJSERRY"}),l.push(R.Name);break;case"PtgParen":var D="(",Q=")";if(g>=0){switch(w="",e[0][g][1][0]){case 2:D=Is(" ",e[0][g][1][1])+D;break;case 3:D=Is("\r",e[0][g][1][1])+D;break;case 4:Q=Is(" ",e[0][g][1][1])+Q;break;case 5:Q=Is("\r",e[0][g][1][1])+Q;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(D+l.pop()+Q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:y[1][1],r:y[1][0]};var K={c:r.c,r:r.r};if(s.sharedf[sr(d)]){var P=s.sharedf[sr(d)];l.push(ea(P,o,K,s,a))}else{var te=!1;for(c=0;c!=s.arrayf.length;++c)if(A=s.arrayf[c],!(d.c<A[0].s.c||d.c>A[0].e.c)&&!(d.r<A[0].s.r||d.r>A[0].e.r)){l.push(ea(A[1],o,K,s,a)),te=!0;break}te||l.push(y[1])}break;case"PtgArray":l.push("{"+EW(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var J=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&g>=0&&J.indexOf(e[0][v][0])==-1){y=e[0][g];var V=!0;switch(y[1][0]){case 4:V=!1;case 0:w=Is(" ",y[1][1]);break;case 5:V=!1;case 1:w=Is("\r",y[1][1]);break;default:if(w="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}l.push((V?w:"")+l.pop()+(V?"":w)),g=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function FW(e,t,r){var s=e.l+t,a=r.biff==2?1:2,i,o=e.read_shift(a);if(o==65535)return[[],oa(e,t-2)];var l=Kh(e,o,r);return t!==o+a&&(i=Hh(e,t-o-a,l,r)),e.l=s,[l,i]}function TW(e,t,r){var s=e.l+t,a=r.biff==2?1:2,i,o=e.read_shift(a);if(o==65535)return[[],oa(e,t-2)];var l=Kh(e,o,r);return t!==o+a&&(i=Hh(e,t-o-a,l,r)),e.l=s,[l,i]}function IW(e,t,r,s){var a=e.l+t,i=Kh(e,s,r),o;return a!==e.l&&(o=Hh(e,a-e.l,i,r)),[i,o]}function UW(e,t,r){var s=e.l+t,a,i=e.read_shift(2),o=Kh(e,i,r);return i==65535?[[],oa(e,t-2)]:(t!==i+2&&(a=Hh(e,s-i-2,o,r)),[o,a])}function LW(e){var t;if(el(e,e.l+6)!==65535)return[ra(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function E1(e,t,r){var s=e.l+t,a=So(e);r.biff==2&&++e.l;var i=LW(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=TW(e,s-e.l,r);return{cell:a,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function kg(e,t,r){var s=e.read_shift(4),a=Kh(e,s,r),i=e.read_shift(4),o=i>0?Hh(e,i,a,r):null;return[a,o]}var DW=kg,Sg=kg,QW=kg,OW=kg,PW={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},LS={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},RW={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function lB(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function k1(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Q0={},Hd={};function O0(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function DS(e,t,r,s,a,i){try{s.cellNF&&(e.z=lr[t])}catch(l){if(s.WTF)throw l}if(!(e.t==="z"&&!s.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Bn(e.v)),(!s||s.cellText!==!1)&&e.t!=="z")try{if(lr[t]==null&&iA(MK[t]||"General",t),e.t==="e")e.w=e.w||kA[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=yh(e.v);else if(e.t==="d"){var o=_a(e.v);(o|0)===o?e.w=o.toString(10):e.w=yh(o)}else{if(e.v===void 0)return"";e.w=mA(e.v,Hd)}else e.t==="d"?e.w=ki(t,_a(e.v),Hd):e.w=ki(t,e.v,Hd)}catch(l){if(s.WTF)throw l}if(s.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Hm(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),s.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Hm(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),s.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(s.WTF&&i.Fills)throw l}}}function MW(e,t){var r=Us(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=vr(r))}var HW=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,KW=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,zW=/<(?:\w:)?hyperlink [^>]*>/mg,VW=/"(\w*:\w*)"/,qW=/<(?:\w:)?col\b[^>]*[\/]?>/g,GW=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,$W=/<(?:\w:)?pageMargins[^>]*\/>/g,QS=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,WW=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,XW=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function JW(e,t,r,s,a,i,o){if(!e)return e;s||(s={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",d="",h=e.match(KW);h?(A=e.slice(0,h.index),d=e.slice(h.index+h[0].length)):A=d=e;var f=A.match(QS);f?yw(f[0],l,a,r):(f=A.match(WW))&&YW(f[0],f[1]||"",l,a,r);var u=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(u>0){var p=A.slice(u,u+50).match(VW);p&&MW(l,p[1])}var g=A.match(XW);g&&g[1]&&nX(g[1],a);var w=[];if(t.cellStyles){var v=A.match(qW);v&&tX(w,v)}h&&aX(h[1],l,t,c,i,o);var x=d.match(GW);x&&(l["!autofilter"]=rX(x[0]));var y=[],_=d.match(HW);if(_)for(u=0;u!=_.length;++u)y[u]=Us(_[u].slice(_[u].indexOf('"')+1));var I=d.match(zW);I&&ZW(l,I,s);var k=d.match($W);if(k&&(l["!margins"]=eX(Zt(k[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=vr(c)),t.sheetRows>0&&l["!ref"]){var T=Us(l["!ref"]);t.sheetRows<=+T.e.r&&(T.e.r=t.sheetRows-1,T.e.r>c.e.r&&(T.e.r=c.e.r),T.e.r<T.s.r&&(T.s.r=T.e.r),T.e.c>c.e.c&&(T.e.c=c.e.c),T.e.c<T.s.c&&(T.s.c=T.e.c),l["!fullref"]=l["!ref"],l["!ref"]=vr(T))}return w.length>0&&(l["!cols"]=w),y.length>0&&(l["!merges"]=y),l}function yw(e,t,r,s){var a=Zt(e);r.Sheets[s]||(r.Sheets[s]={}),a.codeName&&(r.Sheets[s].CodeName=Nr(ls(a.codeName)))}function YW(e,t,r,s,a){yw(e.slice(0,e.indexOf(">")),r,s,a)}function ZW(e,t,r){for(var s=Array.isArray(e),a=0;a!=t.length;++a){var i=Zt(ls(t[a]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Nr(i.location))):(i.Target="#"+Nr(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Us(i.ref),c=l.s.r;c<=l.e.r;++c)for(var A=l.s.c;A<=l.e.c;++A){var d=sr({c:A,r:c});s?(e[c]||(e[c]=[]),e[c][A]||(e[c][A]={t:"z",v:void 0}),e[c][A].l=i):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=i)}}}function eX(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function tX(e,t){for(var r=!1,s=0;s!=t.length;++s){var a=Zt(t[s],!0);a.hidden&&(a.hidden=gs(a.hidden));var i=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,xw(a.width)),eu(a);i<=o;)e[i++]=Pn(a)}}function rX(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var sX=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function nX(e,t){t.Views||(t.Views=[{}]),(e.match(sX)||[]).forEach(function(r,s){var a=Zt(r);t.Views[s]||(t.Views[s]={}),+a.zoomScale&&(t.Views[s].zoom=+a.zoomScale),gs(a.rightToLeft)&&(t.Views[s].RTL=!0)})}var aX=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,s=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=wh("v"),o=wh("f");return function(c,A,d,h,f,u){for(var p=0,g="",w=[],v=[],x=0,y=0,_=0,I="",k,T,S=0,B=0,R,U,L=0,D=0,Q=Array.isArray(u.CellXf),K,P=[],te=[],J=Array.isArray(A),V=[],ie={},Y=!1,N=!!d.sheetStubs,C=c.split(t),E=0,O=C.length;E!=O;++E){g=C[E].trim();var q=g.length;if(q!==0){var se=0;e:for(p=0;p<q;++p)switch(g[p]){case">":if(g[p-1]!="/"){++p;break e}if(d&&d.cellStyles){if(T=Zt(g.slice(se,p),!0),S=T.r!=null?parseInt(T.r,10):S+1,B=-1,d.sheetRows&&d.sheetRows<S)continue;ie={},Y=!1,T.ht&&(Y=!0,ie.hpt=parseFloat(T.ht),ie.hpx=Bh(ie.hpt)),T.hidden=="1"&&(Y=!0,ie.hidden=!0),T.outlineLevel!=null&&(Y=!0,ie.level=+T.outlineLevel),Y&&(V[S-1]=ie)}break;case"<":se=p;break}if(se>=p)break;if(T=Zt(g.slice(se,p),!0),S=T.r!=null?parseInt(T.r,10):S+1,B=-1,!(d.sheetRows&&d.sheetRows<S)){h.s.r>S-1&&(h.s.r=S-1),h.e.r<S-1&&(h.e.r=S-1),d&&d.cellStyles&&(ie={},Y=!1,T.ht&&(Y=!0,ie.hpt=parseFloat(T.ht),ie.hpx=Bh(ie.hpt)),T.hidden=="1"&&(Y=!0,ie.hidden=!0),T.outlineLevel!=null&&(Y=!0,ie.level=+T.outlineLevel),Y&&(V[S-1]=ie)),w=g.slice(p).split(e);for(var ye=0;ye!=w.length&&w[ye].trim().charAt(0)=="<";++ye);for(w=w.slice(ye),p=0;p!=w.length;++p)if(g=w[p].trim(),g.length!==0){if(v=g.match(r),x=p,y=0,_=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,v!=null&&v.length===2){for(x=0,I=v[1],y=0;y!=I.length&&!((_=I.charCodeAt(y)-64)<1||_>26);++y)x=26*x+_;--x,B=x}else++B;for(y=0;y!=g.length&&g.charCodeAt(y)!==62;++y);if(++y,T=Zt(g.slice(0,y),!0),T.r||(T.r=sr({r:S-1,c:B})),I=g.slice(y),k={t:""},(v=I.match(i))!=null&&v[1]!==""&&(k.v=Nr(v[1])),d.cellFormula){if((v=I.match(o))!=null&&v[1]!==""){if(k.f=Nr(ls(v[1])).replace(/\r\n/g,`
`),d.xlfn||(k.f=nB(k.f)),v[0].indexOf('t="array"')>-1)k.F=(I.match(a)||[])[1],k.F.indexOf(":")>-1&&P.push([Us(k.F),k.F]);else if(v[0].indexOf('t="shared"')>-1){U=Zt(v[0]);var re=Nr(ls(v[1]));d.xlfn||(re=nB(re)),te[parseInt(U.si,10)]=[U,re,T.r]}}else(v=I.match(/<f[^>]*\/>/))&&(U=Zt(v[0]),te[U.si]&&(k.f=m$(te[U.si][1],te[U.si][2],T.r)));var de=ya(T.r);for(y=0;y<P.length;++y)de.r>=P[y][0].s.r&&de.r<=P[y][0].e.r&&de.c>=P[y][0].s.c&&de.c<=P[y][0].e.c&&(k.F=P[y][1])}if(T.t==null&&k.v===void 0)if(k.f||k.F)k.v=0,k.t="n";else if(N)k.t="z";else continue;else k.t=T.t||"n";switch(h.s.c>B&&(h.s.c=B),h.e.c<B&&(h.e.c=B),k.t){case"n":if(k.v==""||k.v==null){if(!N)continue;k.t="z"}else k.v=parseFloat(k.v);break;case"s":if(typeof k.v>"u"){if(!N)continue;k.t="z"}else R=Q0[parseInt(k.v,10)],k.v=R.t,k.r=R.r,d.cellHTML&&(k.h=R.h);break;case"str":k.t="s",k.v=k.v!=null?ls(k.v):"",d.cellHTML&&(k.h=ow(k.v));break;case"inlineStr":v=I.match(s),k.t="s",v!=null&&(R=gw(v[1]))?(k.v=R.t,d.cellHTML&&(k.h=R.h)):k.v="";break;case"b":k.v=gs(k.v);break;case"d":d.cellDates?k.v=Bn(k.v,1):(k.v=_a(Bn(k.v,1)),k.t="n");break;case"e":(!d||d.cellText!==!1)&&(k.w=k.v),k.v=nS[k.v];break}if(L=D=0,K=null,Q&&T.s!==void 0&&(K=u.CellXf[T.s],K!=null&&(K.numFmtId!=null&&(L=K.numFmtId),d.cellStyles&&K.fillId!=null&&(D=K.fillId))),DS(k,L,D,d,f,u),d.cellDates&&Q&&k.t=="n"&&lu(lr[L])&&(k.t="d",k.v=jg(k.v)),T.cm&&d.xlmeta){var Ne=(d.xlmeta.Cell||[])[+T.cm-1];Ne&&Ne.type=="XLDAPR"&&(k.D=!0)}if(J){var z=ya(T.r);A[z.r]||(A[z.r]=[]),A[z.r][z.c]=k}else A[T.r]=k}}}}V.length>0&&(A["!rows"]=V)}}();function iX(e,t){var r={},s=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=s,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}var oX=EA;function lX(){}function cX(e,t){var r={},s=e[e.l];return++e.l,r.above=!(s&64),r.left=!(s&128),e.l+=18,r.name=Fz(e),r}function AX(e){var t=Si(e);return[t]}function dX(e){var t=jA(e);return[t]}function uX(e){var t=Si(e),r=e.read_shift(1);return[t,r,"b"]}function hX(e){var t=jA(e),r=e.read_shift(1);return[t,r,"b"]}function fX(e){var t=Si(e),r=e.read_shift(1);return[t,r,"e"]}function pX(e){var t=jA(e),r=e.read_shift(1);return[t,r,"e"]}function mX(e){var t=Si(e),r=e.read_shift(4);return[t,r,"s"]}function gX(e){var t=jA(e),r=e.read_shift(4);return[t,r,"s"]}function xX(e){var t=Si(e),r=ra(e);return[t,r,"n"]}function OS(e){var t=jA(e),r=ra(e);return[t,r,"n"]}function vX(e){var t=Si(e),r=fw(e);return[t,r,"n"]}function yX(e){var t=jA(e),r=fw(e);return[t,r,"n"]}function wX(e){var t=Si(e),r=uw(e);return[t,r,"is"]}function bX(e){var t=Si(e),r=aa(e);return[t,r,"str"]}function _X(e){var t=jA(e),r=aa(e);return[t,r,"str"]}function NX(e,t,r){var s=e.l+t,a=Si(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"b"];if(r.cellFormula){e.l+=2;var l=Sg(e,s-e.l,r);o[3]=ea(l,null,a,r.supbooks,r)}else e.l=s;return o}function BX(e,t,r){var s=e.l+t,a=Si(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"e"];if(r.cellFormula){e.l+=2;var l=Sg(e,s-e.l,r);o[3]=ea(l,null,a,r.supbooks,r)}else e.l=s;return o}function CX(e,t,r){var s=e.l+t,a=Si(e);a.r=r["!row"];var i=ra(e),o=[a,i,"n"];if(r.cellFormula){e.l+=2;var l=Sg(e,s-e.l,r);o[3]=ea(l,null,a,r.supbooks,r)}else e.l=s;return o}function jX(e,t,r){var s=e.l+t,a=Si(e);a.r=r["!row"];var i=aa(e),o=[a,i,"str"];if(r.cellFormula){e.l+=2;var l=Sg(e,s-e.l,r);o[3]=ea(l,null,a,r.supbooks,r)}else e.l=s;return o}var EX=EA;function kX(e,t){var r=e.l+t,s=EA(e),a=hw(e),i=aa(e),o=aa(e),l=aa(e);e.l=r;var c={rfx:s,relId:a,loc:i,display:l};return o&&(c.Tooltip=o),c}function SX(){}function FX(e,t,r){var s=e.l+t,a=tS(e),i=e.read_shift(1),o=[a];if(o[2]=i,r.cellFormula){var l=DW(e,s-e.l,r);o[1]=l}else e.l=s;return o}function TX(e,t,r){var s=e.l+t,a=EA(e),i=[a];if(r.cellFormula){var o=OW(e,s-e.l,r);i[1]=o,e.l=s}else e.l=s;return i}var IX=["left","right","top","bottom","header","footer"];function UX(e){var t={};return IX.forEach(function(r){t[r]=ra(e)}),t}function LX(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function DX(){}function QX(){}function OX(e,t,r,s,a,i,o){if(!e)return e;var l=t||{};s||(s={"!id":{}});var c=l.dense?[]:{},A,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,f=!1,u,p,g,w,v,x,y,_,I,k=[];l.biff=12,l["!row"]=0;var T=0,S=!1,B=[],R={},U=l.supbooks||a.supbooks||[[]];if(U.sharedf=R,U.arrayf=B,U.SheetNames=a.SheetNames||a.Sheets.map(function(J){return J.name}),!l.supbooks&&(l.supbooks=U,a.Names))for(var L=0;L<a.Names.length;++L)U[0][L+1]=a.Names[L];var D=[],Q=[],K=!1;Vm[16]={n:"BrtShortReal",f:OS};var P;if(ml(e,function(V,ie,Y){if(!f)switch(Y){case 148:A=V;break;case 0:u=V,l.sheetRows&&l.sheetRows<=u.r&&(f=!0),_=Rn(w=u.r),l["!row"]=u.r,(V.hidden||V.hpt||V.level!=null)&&(V.hpt&&(V.hpx=Bh(V.hpt)),Q[V.r]=V);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:V[2]},V[2]){case"n":p.v=V[1];break;case"s":y=Q0[V[1]],p.v=y.t,p.r=y.r;break;case"b":p.v=!!V[1];break;case"e":p.v=V[1],l.cellText!==!1&&(p.w=kA[p.v]);break;case"str":p.t="s",p.v=V[1];break;case"is":p.t="s",p.v=V[1].t;break}if((g=o.CellXf[V[0].iStyleRef])&&DS(p,g.numFmtId,null,l,i,o),v=V[0].c==-1?v+1:V[0].c,l.dense?(c[w]||(c[w]=[]),c[w][v]=p):c[xn(v)+_]=p,l.cellFormula){for(S=!1,T=0;T<B.length;++T){var N=B[T];u.r>=N[0].s.r&&u.r<=N[0].e.r&&v>=N[0].s.c&&v<=N[0].e.c&&(p.F=vr(N[0]),S=!0)}!S&&V.length>3&&(p.f=V[3])}if(d.s.r>u.r&&(d.s.r=u.r),d.s.c>v&&(d.s.c=v),d.e.r<u.r&&(d.e.r=u.r),d.e.c<v&&(d.e.c=v),l.cellDates&&g&&p.t=="n"&&lu(lr[g.numFmtId])){var C=Zc(p.v);C&&(p.t="d",p.v=new Date(C.y,C.m-1,C.d,C.H,C.M,C.S,C.u))}P&&(P.type=="XLDAPR"&&(p.D=!0),P=void 0);break;case 1:case 12:if(!l.sheetStubs||h)break;p={t:"z",v:void 0},v=V[0].c==-1?v+1:V[0].c,l.dense?(c[w]||(c[w]=[]),c[w][v]=p):c[xn(v)+_]=p,d.s.r>u.r&&(d.s.r=u.r),d.s.c>v&&(d.s.c=v),d.e.r<u.r&&(d.e.r=u.r),d.e.c<v&&(d.e.c=v),P&&(P.type=="XLDAPR"&&(p.D=!0),P=void 0);break;case 176:k.push(V);break;case 49:P=((l.xlmeta||{}).Cell||[])[V-1];break;case 494:var E=s["!id"][V.relId];for(E?(V.Target=E.Target,V.loc&&(V.Target+="#"+V.loc),V.Rel=E):V.relId==""&&(V.Target="#"+V.loc),w=V.rfx.s.r;w<=V.rfx.e.r;++w)for(v=V.rfx.s.c;v<=V.rfx.e.c;++v)l.dense?(c[w]||(c[w]=[]),c[w][v]||(c[w][v]={t:"z",v:void 0}),c[w][v].l=V):(x=sr({c:v,r:w}),c[x]||(c[x]={t:"z",v:void 0}),c[x].l=V);break;case 426:if(!l.cellFormula)break;B.push(V),I=l.dense?c[w][v]:c[xn(v)+_],I.f=ea(V[1],d,{r:u.r,c:v},U,l),I.F=vr(V[0]);break;case 427:if(!l.cellFormula)break;R[sr(V[0].s)]=V[1],I=l.dense?c[w][v]:c[xn(v)+_],I.f=ea(V[1],d,{r:u.r,c:v},U,l);break;case 60:if(!l.cellStyles)break;for(;V.e>=V.s;)D[V.e--]={width:V.w/256,hidden:!!(V.flags&1),level:V.level},K||(K=!0,xw(V.w/256)),eu(D[V.e+1]);break;case 161:c["!autofilter"]={ref:vr(V)};break;case 476:c["!margins"]=V;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),V.name&&(a.Sheets[r].CodeName=V.name),(V.above||V.left)&&(c["!outline"]={above:V.above,left:V.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),V.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!ie.T){if(!h||l.WTF)throw new Error("Unexpected record 0x"+Y.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(c["!ref"]=vr(A||d)),l.sheetRows&&c["!ref"]){var te=Us(c["!ref"]);l.sheetRows<=+te.e.r&&(te.e.r=l.sheetRows-1,te.e.r>d.e.r&&(te.e.r=d.e.r),te.e.r<te.s.r&&(te.s.r=te.e.r),te.e.c>d.e.c&&(te.e.c=d.e.c),te.e.c<te.s.c&&(te.s.c=te.e.c),c["!fullref"]=c["!ref"],c["!ref"]=vr(te))}return k.length>0&&(c["!merges"]=k),D.length>0&&(c["!cols"]=D),Q.length>0&&(c["!rows"]=Q),c}function PX(e){var t=[],r=e.match(/^<c:numCache>/),s;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Nr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){s=i.replace(/<.*?>/g,"")}),[t,a,s]}function RX(e,t,r,s,a,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,A="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var f=PX(h);d.s.r=d.s.c=0,d.e.c=l,A=xn(l),f[0].forEach(function(u,p){o[A+Rn(p)]={t:"n",v:u,z:f[1]},c=p}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=vr(d)),o}function MX(e,t,r,s,a){if(!e)return e;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(QS);return l&&yw(l[0],i,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}function HX(e,t){e.l+=10;var r=aa(e);return{name:r}}function KX(e,t,r,s,a){if(!e)return e;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return ml(e,function(c,A,d){switch(d){case 550:i["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}var PS=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],zX=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],VX=[],qX=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function cB(e,t){for(var r=0;r!=e.length;++r)for(var s=e[r],a=0;a!=t.length;++a){var i=t[a];if(s[i[0]]==null)s[i[0]]=i[1];else switch(i[2]){case"bool":typeof s[i[0]]=="string"&&(s[i[0]]=gs(s[i[0]]));break;case"int":typeof s[i[0]]=="string"&&(s[i[0]]=parseInt(s[i[0]],10));break}}}function AB(e,t){for(var r=0;r!=t.length;++r){var s=t[r];if(e[s[0]]==null)e[s[0]]=s[1];else switch(s[2]){case"bool":typeof e[s[0]]=="string"&&(e[s[0]]=gs(e[s[0]]));break;case"int":typeof e[s[0]]=="string"&&(e[s[0]]=parseInt(e[s[0]],10));break}}}function RS(e){AB(e.WBProps,PS),AB(e.CalcPr,qX),cB(e.WBView,zX),cB(e.Sheets,VX),Hd.date1904=gs(e.WBProps.date1904)}var GX="][*?/\\".split("");function $X(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return GX.forEach(function(s){if(e.indexOf(s)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var WX=/<\w+:workbook/;function XX(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},s=!1,a="xmlns",i={},o=0;if(e.replace(ca,function(c,A){var d=Zt(c);switch(ko(d[0])){case"<?xml":break;case"<workbook":c.match(WX)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":PS.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=gs(d[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:r.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(r.WBProps.CodeName=ls(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Nr(ls(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":s=!0;break;case"</definedNames>":s=!1;break;case"<definedName":i={},i.Name=ls(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),gs(d.hidden||"0")&&(i.Hidden=!0),o=A+c.length;break;case"</definedName>":i.Ref=Nr(ls(e.slice(o,A))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":s=!0;break;case"</AlternateContent>":s=!1;break;case"<revisionPtr":break;default:if(!s&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),fz.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return RS(r),r}function JX(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=_y(e),r.name=aa(e),r}function YX(e,t){var r={},s=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?aa(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(s&65536),r.backupFile=!!(s&64),r.checkCompatibility=!!(s&4096),r.date1904=!!(s&1),r.filterPrivacy=!!(s&8),r.hidePivotFieldList=!!(s&1024),r.promptedSolutions=!!(s&16),r.publishItems=!!(s&2048),r.refreshAllConnections=!!(s&262144),r.saveExternalLinkValues=!!(s&128),r.showBorderUnselectedTables=!!(s&4),r.showInkAnnotation=!!(s&32),r.showObjects=["all","placeholders","none"][s>>13&3],r.showPivotChartFilter=!!(s&32768),r.updateLinks=["userSet","never","always"][s>>8&3],r}function ZX(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function eJ(e,t,r){var s=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=Tz(e),o=QW(e,0,r),l=hw(e);e.l=s;var c={Name:i,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function tJ(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},s=[],a=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],Vm[16]={n:"BrtFRTArchID$",f:ZX},ml(e,function(c,A,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=ea(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:s.push(d),a=!0;break;case 36:s.pop(),a=!1;break;case 37:s.push(d),a=!0;break;case 38:s.pop(),a=!1;break;case 16:break;default:if(!A.T){if(!a||t.WTF&&s[s.length-1]!=37&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),RS(r),r.Names=i,r.supbooks=o,r}function rJ(e,t,r){return t.slice(-4)===".bin"?tJ(e,r):XX(e,r)}function sJ(e,t,r,s,a,i,o,l){return t.slice(-4)===".bin"?OX(e,s,r,a,i,o,l):JW(e,s,r,a,i,o,l)}function nJ(e,t,r,s,a,i,o,l){return t.slice(-4)===".bin"?KX(e,s,r,a,i):MX(e,s,r,a,i)}function aJ(e,t,r,s,a,i,o,l){return t.slice(-4)===".bin"?h$():f$()}function iJ(e,t,r,s,a,i,o,l){return t.slice(-4)===".bin"?d$():u$()}function oJ(e,t,r,s){return t.slice(-4)===".bin"?EG(e,r,s):bG(e,r,s)}function lJ(e,t,r){return CS(e,r)}function cJ(e,t,r){return t.slice(-4)===".bin"?zq(e,r):Hq(e,r)}function AJ(e,t,r){return t.slice(-4)===".bin"?l$(e,r):s$(e,r)}function dJ(e,t,r){return t.slice(-4)===".bin"?e$(e):YG(e)}function uJ(e,t,r,s){return r.slice(-4)===".bin"?t$(e,t,r,s):void 0}function hJ(e,t,r){return t.slice(-4)===".bin"?XG(e,t,r):JG(e,t,r)}var MS=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,HS=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Mi(e,t){var r=e.split(/\s+/),s=[];if(s[0]=r[0],r.length===1)return s;var a=e.match(MS),i,o,l,c;if(a)for(c=0;c!=a.length;++c)i=a[c].match(HS),(o=i[1].indexOf(":"))===-1?s[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),s[l]=i[2].slice(1,i[2].length-1));return s}function fJ(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var s=e.match(MS),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(HS),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),r[o]=a[2].slice(1,a[2].length-1));return r}var P0;function pJ(e,t){var r=P0[e]||Nr(e);return r==="General"?mA(t):ki(r,t)}function mJ(e,t,r,s){var a=s;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=gs(s);break;case"i2":case"int":a=parseInt(s,10);break;case"r4":case"float":a=parseFloat(s);break;case"date":case"dateTime.tz":a=Bn(s);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Nr(t)]=a}function gJ(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||kA[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=yh(e.v):e.w=mA(e.v):e.w=pJ(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var s=P0[t]||t||"General";if(r.cellNF&&(e.z=s),r.cellDates&&e.t=="n"&&lu(s)){var a=Zc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(r.WTF)throw i}}}function xJ(e,t,r){if(r.cellStyles&&t.Interior){var s=t.Interior;s.Pattern&&(s.patternType=mG[s.Pattern]||s.Pattern)}e[t.ID]=t}function vJ(e,t,r,s,a,i,o,l,c,A){var d="General",h=s.StyleID,f={};A=A||{};var u=[],p=0;for(h===void 0&&l&&(h=l.StyleID),h===void 0&&o&&(h=o.StyleID);i[h]!==void 0&&(i[h].nf&&(d=i[h].nf),i[h].Interior&&u.push(i[h].Interior),!!i[h].Parent);)h=i[h].Parent;switch(r.Type){case"Boolean":s.t="b",s.v=gs(e);break;case"String":s.t="s",s.r=TN(Nr(e)),s.v=e.indexOf("<")>-1?Nr(t||e).replace(/<.*?>/g,""):s.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),s.v=(Bn(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),s.v!==s.v?s.v=Nr(e):s.v<60&&(s.v=s.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":s.v===void 0&&(s.v=+e),s.t||(s.t="n");break;case"Error":s.t="e",s.v=nS[e],A.cellText!==!1&&(s.w=e);break;default:e==""&&t==""?s.t="z":(s.t="s",s.v=TN(t||e));break}if(gJ(s,d,A),A.cellFormula!==!1)if(s.Formula){var g=Nr(s.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),s.f=Md(g,a),delete s.Formula,s.ArrayRange=="RC"?s.F=Md("RC:RC",a):s.ArrayRange&&(s.F=Md(s.ArrayRange,a),c.push([Us(s.F),s.F]))}else for(p=0;p<c.length;++p)a.r>=c[p][0].s.r&&a.r<=c[p][0].e.r&&a.c>=c[p][0].s.c&&a.c<=c[p][0].e.c&&(s.F=c[p][1]);A.cellStyles&&(u.forEach(function(w){!f.patternType&&w.patternType&&(f.patternType=w.patternType)}),s.s=f),s.StyleID!==void 0&&(s.ixfe=s.StyleID)}function yJ(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function S1(e,t){var r=t||{};Sk();var s=c0(lw(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(s=ls(s));var a=s.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=Pn(r);return o.type="string",_h.to_workbook(s,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ye){a.indexOf("<"+Ye)>=0&&(i=!0)}),i)return kJ(s,r);P0={"General Number":"General","General Date":lr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":lr[15],"Short Date":lr[14],"Long Time":lr[19],"Medium Time":lr[18],"Short Time":lr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:lr[2],Standard:lr[4],Percent:lr[10],Scientific:lr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],A,d={},h=[],f=r.dense?[]:{},u="",p={},g={},w=Mi('<Data ss:Type="String">'),v=0,x=0,y=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},I={},k={},T="",S=0,B=[],R={},U={},L=0,D=[],Q=[],K={},P=[],te,J=!1,V=[],ie=[],Y={},N=0,C=0,E={Sheets:[],WBProps:{date1904:!1}},O={};bh.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"");for(var q="";l=bh.exec(s);)switch(l[3]=(q=l[3]).toLowerCase()){case"data":if(q=="data"){if(l[1]==="/"){if((A=c.pop())[0]!==l[3])throw new Error("Bad state: "+A.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?vJ(s.slice(v,l.index),T,w,c[c.length-1][0]=="comment"?K:p,{c:x,r:y},I,P[x],g,V,r):(T="",w=Mi(l[0]),v=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(Q.length>0&&(p.c=Q),(!r.sheetRows||r.sheetRows>y)&&p.v!==void 0&&(r.dense?(f[y]||(f[y]=[]),f[y][x]=p):f[xn(x)+Rn(y)]=p),p.HRef&&(p.l={Target:Nr(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(N=x+(parseInt(p.MergeAcross,10)|0),C=y+(parseInt(p.MergeDown,10)|0),B.push({s:{c:x,r:y},e:{c:N,r:C}})),!r.sheetStubs)p.MergeAcross?x=N+1:++x;else if(p.MergeAcross||p.MergeDown){for(var se=x;se<=N;++se)for(var ye=y;ye<=C;++ye)(se>x||ye>y)&&(r.dense?(f[ye]||(f[ye]=[]),f[ye][se]={t:"z"}):f[xn(se)+Rn(ye)]={t:"z"});x=N+1}else++x;else p=fJ(l[0]),p.Index&&(x=+p.Index-1),x<_.s.c&&(_.s.c=x),x>_.e.c&&(_.e.c=x),l[0].slice(-2)==="/>"&&++x,Q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(y<_.s.r&&(_.s.r=y),y>_.e.r&&(_.e.r=y),l[0].slice(-2)==="/>"&&(g=Mi(l[0]),g.Index&&(y=+g.Index-1)),x=0,++y):(g=Mi(l[0]),g.Index&&(y=+g.Index-1),Y={},(g.AutoFitHeight=="0"||g.Height)&&(Y.hpx=parseInt(g.Height,10),Y.hpt=BS(Y.hpx),ie[y]=Y),g.Hidden=="1"&&(Y.hidden=!0,ie[y]=Y));break;case"worksheet":if(l[1]==="/"){if((A=c.pop())[0]!==l[3])throw new Error("Bad state: "+A.join("|"));h.push(u),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(f["!ref"]=vr(_),r.sheetRows&&r.sheetRows<=_.e.r&&(f["!fullref"]=f["!ref"],_.e.r=r.sheetRows-1,f["!ref"]=vr(_))),B.length&&(f["!merges"]=B),P.length>0&&(f["!cols"]=P),ie.length>0&&(f["!rows"]=ie),d[u]=f}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},y=x=0,c.push([l[3],!1]),A=Mi(l[0]),u=Nr(A.Name),f=r.dense?[]:{},B=[],V=[],ie=[],O={name:u,Hidden:0},E.Sheets.push(O);break;case"table":if(l[1]==="/"){if((A=c.pop())[0]!==l[3])throw new Error("Bad state: "+A.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),P=[],J=!1}break;case"style":l[1]==="/"?xJ(I,k,r):k=Mi(l[0]);break;case"numberformat":k.nf=Nr(Mi(l[0]).Format||"General"),P0[k.nf]&&(k.nf=P0[k.nf]);for(var re=0;re!=392&&lr[re]!=k.nf;++re);if(re==392){for(re=57;re!=392;++re)if(lr[re]==null){iA(k.nf,re);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(te=Mi(l[0]),te.Hidden&&(te.hidden=!0,delete te.Hidden),te.Width&&(te.wpx=parseInt(te.Width,10)),!J&&te.wpx>10){J=!0,va=_S;for(var de=0;de<P.length;++de)P[de]&&eu(P[de])}J&&eu(te),P[te.Index-1||P.length]=te;for(var Ne=0;Ne<+te.Span;++Ne)P[P.length]=Pn(te);break;case"namedrange":if(l[1]==="/")break;E.Names||(E.Names=[]);var z=Zt(l[0]),Be={Name:z.Name,Ref:Md(z.RefersTo.slice(1),{r:0,c:0})};E.Sheets.length>0&&(Be.Sheet=E.Sheets.length-1),E.Names.push(Be);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?T+=s.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;k.Interior=Mi(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?sV(R,q,s.slice(L,l.index)):L=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((A=c.pop())[0]!==l[3])throw new Error("Bad state: "+A.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((A=c.pop())[0]!==l[3])throw new Error("Bad state: "+A.join("|"));yJ(K),Q.push(K)}else c.push([l[3],!1]),A=Mi(l[0]),K={a:A.Author};break;case"autofilter":if(l[1]==="/"){if((A=c.pop())[0]!==l[3])throw new Error("Bad state: "+A.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Ve=Mi(l[0]);f["!autofilter"]={ref:Md(Ve.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((A=c.pop())[0]!==l[3])throw new Error("Bad state: "+A.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((A=c.pop())[0]!==l[3])throw new Error("Bad state: "+A.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return mB(s,r);var ne=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ne=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ne=!1}break;case"excelworkbook":switch(l[3]){case"date1904":E.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ne=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ne=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(s.slice(L,l.index)){case"SheetHidden":O.Hidden=1;break;case"SheetVeryHidden":O.Hidden=2;break}else L=l.index+l[0].length;break;case"header":f["!margins"]||O0(f["!margins"]={},"xlml"),isNaN(+Zt(l[0]).Margin)||(f["!margins"].header=+Zt(l[0]).Margin);break;case"footer":f["!margins"]||O0(f["!margins"]={},"xlml"),isNaN(+Zt(l[0]).Margin)||(f["!margins"].footer=+Zt(l[0]).Margin);break;case"pagemargins":var Me=Zt(l[0]);f["!margins"]||O0(f["!margins"]={},"xlml"),isNaN(+Me.Top)||(f["!margins"].top=+Me.Top),isNaN(+Me.Left)||(f["!margins"].left=+Me.Left),isNaN(+Me.Right)||(f["!margins"].right=+Me.Right),isNaN(+Me.Bottom)||(f["!margins"].bottom=+Me.Bottom);break;case"displayrighttoleft":E.Views||(E.Views=[]),E.Views[0]||(E.Views[0]={}),E.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ne=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ne=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ne=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ne=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ne=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ne=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ne=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ne=!1}break;case"smarttags":break;default:ne=!1;break}if(ne||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?mJ(U,q,D,s.slice(L,l.index)):(D=l,L=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Re={};return!r.bookSheets&&!r.bookProps&&(Re.Sheets=d),Re.SheetNames=h,Re.Workbook=E,Re.SSF=Pn(lr),Re.Props=R,Re.Custprops=U,Re}function jy(e,t){switch(_w(t=t||{}),t.type||"base64"){case"base64":return S1(ii(e),t);case"binary":case"buffer":case"file":return S1(e,t);case"array":return S1(CA(e),t)}}function wJ(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Lz(r),r.length-r.l<=4)return t;var s=r.read_shift(4);if(s==0||s>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(s=r.read_shift(4),s!==1907505652)||(t.UnicodeClipboardFormat=Dz(r),s=r.read_shift(4),s==0||s>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var bJ=[60,1084,2066,2165,2175];function _J(e,t,r,s,a){var i=s,o=[],l=r.slice(r.l,r.l+i);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=i;for(var c=el(r,r.l),A=Ey[c],d=0;A!=null&&bJ.indexOf(c)>-1;)i=el(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+i),o.push(l),r.l+=4+i,A=Ey[c=el(r,r.l)];var h=Vl(o);Dn(h,0);var f=0;h.lens=[];for(var u=0;u<o.length;++u)h.lens.push(f),f+=o[u].length;if(h.length<s)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+s;return t.f(h,h.length,a)}function po(e,t,r){if(e.t!=="z"&&e.XF){var s=0;try{s=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=lr[s])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||kA[e.v]:s===0||s=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=yh(e.v):e.w=mA(e.v):e.w=ki(s,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&s&&e.t=="n"&&lu(lr[s]||String(s))){var a=Zc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function _p(e,t,r){return{v:e,ixfe:t,t:r}}function NJ(e,t){var r={opts:{}},s={},a=t.dense?[]:{},i={},o={},l=null,c=[],A="",d={},h,f="",u,p,g,w,v={},x=[],y,_,I=[],k=[],T={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},B=function(nt){return nt<8?oA[nt]:nt<64&&k[nt-8]||oA[nt]},R=function(nt,ee,Se){var je=ee.XF.data;if(!(!je||!je.patternType||!Se||!Se.cellStyles)){ee.s={},ee.s.patternType=je.patternType;var qe;(qe=Nh(B(je.icvFore)))&&(ee.s.fgColor={rgb:qe}),(qe=Nh(B(je.icvBack)))&&(ee.s.bgColor={rgb:qe})}},U=function(nt,ee,Se){if(!(Y>1)&&!(Se.sheetRows&&nt.r>=Se.sheetRows)){if(Se.cellStyles&&ee.XF&&ee.XF.data&&R(nt,ee,Se),delete ee.ixfe,delete ee.XF,h=nt,f=sr(nt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),nt.r<o.s.r&&(o.s.r=nt.r),nt.c<o.s.c&&(o.s.c=nt.c),nt.r+1>o.e.r&&(o.e.r=nt.r+1),nt.c+1>o.e.c&&(o.e.c=nt.c+1),Se.cellFormula&&ee.f){for(var je=0;je<x.length;++je)if(!(x[je][0].s.c>nt.c||x[je][0].s.r>nt.r)&&!(x[je][0].e.c<nt.c||x[je][0].e.r<nt.r)){ee.F=vr(x[je][0]),(x[je][0].s.c!=nt.c||x[je][0].s.r!=nt.r)&&delete ee.f,ee.f&&(ee.f=""+ea(x[je][1],o,nt,V,L));break}}Se.dense?(a[nt.r]||(a[nt.r]=[]),a[nt.r][nt.c]=ee):a[f]=ee}},L={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:x,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(L.password=t.password);var D,Q=[],K=[],P=[],te=[],J=!1,V=[];V.SheetNames=L.snames,V.sharedf=L.sharedf,V.arrayf=L.arrayf,V.names=[],V.XTI=[];var ie=0,Y=0,N=0,C=[],E=[],O;L.codepage=1200,Ji(1200);for(var q=!1;e.l<e.length-1;){var se=e.l,ye=e.read_shift(2);if(ye===0&&ie===10)break;var re=e.l===e.length?0:e.read_shift(2),de=Ey[ye];if(de&&de.f){if(t.bookSheets&&ie===133&&ye!==133)break;if(ie=ye,de.r===2||de.r==12){var Ne=e.read_shift(2);if(re-=2,!L.enc&&Ne!==ye&&((Ne&255)<<8|Ne>>8)!==ye)throw new Error("rt mismatch: "+Ne+"!="+ye);de.r==12&&(e.l+=10,re-=10)}var z={};if(ye===10?z=de.f(e,re,L):z=_J(ye,de,e,re,L),Y==0&&[9,521,1033,2057].indexOf(ie)===-1)continue;switch(ye){case 34:r.opts.Date1904=T.WBProps.date1904=z;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(L.enc||(e.l=0),L.enc=z,!t.password)throw new Error("File is password-protected");if(z.valid==null)throw new Error("Encryption scheme unsupported");if(!z.valid)throw new Error("Password is incorrect");break;case 92:L.lastuser=z;break;case 66:var Be=Number(z);switch(Be){case 21010:Be=1200;break;case 32768:Be=1e4;break;case 32769:Be=1252;break}Ji(L.codepage=Be),q=!0;break;case 317:L.rrtabid=z;break;case 25:L.winlocked=z;break;case 439:r.opts.RefreshAll=z;break;case 12:r.opts.CalcCount=z;break;case 16:r.opts.CalcDelta=z;break;case 17:r.opts.CalcIter=z;break;case 13:r.opts.CalcMode=z;break;case 14:r.opts.CalcPrecision=z;break;case 95:r.opts.CalcSaveRecalc=z;break;case 15:L.CalcRefMode=z;break;case 2211:r.opts.FullCalc=z;break;case 129:z.fDialog&&(a["!type"]="dialog"),z.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),z.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:I.push(z);break;case 430:V.push([z]),V[V.length-1].XTI=[];break;case 35:case 547:V[V.length-1].push(z);break;case 24:case 536:O={Name:z.Name,Ref:ea(z.rgce,o,null,V,L)},z.itab>0&&(O.Sheet=z.itab-1),V.names.push(O),V[0]||(V[0]=[],V[0].XTI=[]),V[V.length-1].push(z),z.Name=="_xlnm._FilterDatabase"&&z.itab>0&&z.rgce&&z.rgce[0]&&z.rgce[0][0]&&z.rgce[0][0][0]=="PtgArea3d"&&(E[z.itab-1]={ref:vr(z.rgce[0][0][1][2])});break;case 22:L.ExternCount=z;break;case 23:V.length==0&&(V[0]=[],V[0].XTI=[]),V[V.length-1].XTI=V[V.length-1].XTI.concat(z),V.XTI=V.XTI.concat(z);break;case 2196:if(L.biff<8)break;O!=null&&(O.Comment=z[1]);break;case 18:a["!protect"]=z;break;case 19:z!==0&&L.WTF&&console.error("Password verifier: "+z);break;case 133:i[z.pos]=z,L.snames.push(z.name);break;case 10:{if(--Y)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=vr(o),t.sheetRows&&t.sheetRows<=o.e.r){var Ve=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=vr(o),o.e.r=Ve}o.e.r++,o.e.c++}Q.length>0&&(a["!merges"]=Q),K.length>0&&(a["!objects"]=K),P.length>0&&(a["!cols"]=P),te.length>0&&(a["!rows"]=te),T.Sheets.push(S)}A===""?d=a:s[A]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(L.biff===8&&(L.biff={9:2,521:3,1033:4}[ye]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[z.BIFFVer]||8),L.biffguess=z.BIFFVer==0,z.BIFFVer==0&&z.dt==4096&&(L.biff=5,q=!0,Ji(L.codepage=28591)),L.biff==8&&z.BIFFVer==0&&z.dt==16&&(L.biff=2),Y++)break;if(a=t.dense?[]:{},L.biff<8&&!q&&(q=!0,Ji(L.codepage=t.codepage||1252)),L.biff<5||z.BIFFVer==0&&z.dt==4096){A===""&&(A="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ne={pos:e.l-re,name:A};i[ne.pos]=ne,L.snames.push(A)}else A=(i[se]||{name:""}).name;z.dt==32&&(a["!type"]="chart"),z.dt==64&&(a["!type"]="macro"),Q=[],K=[],L.arrayf=x=[],P=[],te=[],J=!1,S={Hidden:(i[se]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[z.r]||[])[z.c]:a[sr({c:z.c,r:z.r})])&&++z.c,y={ixfe:z.ixfe,XF:I[z.ixfe]||{},v:z.val,t:"n"},N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U({c:z.c,r:z.r},y,t);break;case 5:case 517:y={ixfe:z.ixfe,XF:I[z.ixfe],v:z.val,t:z.t},N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U({c:z.c,r:z.r},y,t);break;case 638:y={ixfe:z.ixfe,XF:I[z.ixfe],v:z.rknum,t:"n"},N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U({c:z.c,r:z.r},y,t);break;case 189:for(var Me=z.c;Me<=z.C;++Me){var Re=z.rkrec[Me-z.c][0];y={ixfe:Re,XF:I[Re],v:z.rkrec[Me-z.c][1],t:"n"},N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U({c:Me,r:z.r},y,t)}break;case 6:case 518:case 1030:{if(z.val=="String"){l=z;break}if(y=_p(z.val,z.cell.ixfe,z.tt),y.XF=I[y.ixfe],t.cellFormula){var Ye=z.formula;if(Ye&&Ye[0]&&Ye[0][0]&&Ye[0][0][0]=="PtgExp"){var ze=Ye[0][0][1][0],yt=Ye[0][0][1][1],mt=sr({r:ze,c:yt});v[mt]?y.f=""+ea(z.formula,o,z.cell,V,L):y.F=((t.dense?(a[ze]||[])[yt]:a[mt])||{}).F}else y.f=""+ea(z.formula,o,z.cell,V,L)}N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U(z.cell,y,t),l=z}break;case 7:case 519:if(l)l.val=z,y=_p(z,l.cell.ixfe,"s"),y.XF=I[y.ixfe],t.cellFormula&&(y.f=""+ea(l.formula,o,l.cell,V,L)),N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U(l.cell,y,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{x.push(z);var at=sr(z[0].s);if(u=t.dense?(a[z[0].s.r]||[])[z[0].s.c]:a[at],t.cellFormula&&u){if(!l||!at||!u)break;u.f=""+ea(z[1],o,z[0],V,L),u.F=vr(z[0])}}break;case 1212:{if(!t.cellFormula)break;if(f){if(!l)break;v[sr(l.cell)]=z[0],u=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[sr(l.cell)],(u||{}).f=""+ea(z[0],o,h,V,L)}}break;case 253:y=_p(c[z.isst].t,z.ixfe,"s"),c[z.isst].h&&(y.h=c[z.isst].h),y.XF=I[y.ixfe],N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U({c:z.c,r:z.r},y,t);break;case 513:t.sheetStubs&&(y={ixfe:z.ixfe,XF:I[z.ixfe],t:"z"},N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U({c:z.c,r:z.r},y,t));break;case 190:if(t.sheetStubs)for(var it=z.c;it<=z.C;++it){var jt=z.ixfe[it-z.c];y={ixfe:jt,XF:I[jt],t:"z"},N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U({c:it,r:z.r},y,t)}break;case 214:case 516:case 4:y=_p(z.val,z.ixfe,"s"),y.XF=I[y.ixfe],N>0&&(y.z=C[y.ixfe>>8&63]),po(y,t,r.opts.Date1904),U({c:z.c,r:z.r},y,t);break;case 0:case 512:Y===1&&(o=z);break;case 252:c=z;break;case 1054:if(L.biff==4){C[N++]=z[1];for(var gt=0;gt<N+163&&lr[gt]!=z[1];++gt);gt>=163&&iA(z[1],N+163)}else iA(z[1],z[0]);break;case 30:{C[N++]=z;for(var pt=0;pt<N+163&&lr[pt]!=z;++pt);pt>=163&&iA(z,N+163)}break;case 229:Q=Q.concat(z);break;case 93:K[z.cmo[0]]=L.lastobj=z;break;case 438:L.lastobj.TxO=z;break;case 127:L.lastobj.ImData=z;break;case 440:for(w=z[0].s.r;w<=z[0].e.r;++w)for(g=z[0].s.c;g<=z[0].e.c;++g)u=t.dense?(a[w]||[])[g]:a[sr({c:g,r:w})],u&&(u.l=z[1]);break;case 2048:for(w=z[0].s.r;w<=z[0].e.r;++w)for(g=z[0].s.c;g<=z[0].e.c;++g)u=t.dense?(a[w]||[])[g]:a[sr({c:g,r:w})],u&&u.l&&(u.l.Tooltip=z[1]);break;case 28:{if(L.biff<=5&&L.biff>=2)break;u=t.dense?(a[z[0].r]||[])[z[0].c]:a[sr(z[0])];var ot=K[z[2]];u||(t.dense?(a[z[0].r]||(a[z[0].r]=[]),u=a[z[0].r][z[0].c]={t:"z"}):u=a[sr(z[0])]={t:"z"},o.e.r=Math.max(o.e.r,z[0].r),o.s.r=Math.min(o.s.r,z[0].r),o.e.c=Math.max(o.e.c,z[0].c),o.s.c=Math.min(o.s.c,z[0].c)),u.c||(u.c=[]),p={a:z[1],t:ot.TxO.t},u.c.push(p)}break;case 2173:qG(I[z.ixfe],z.ext);break;case 125:{if(!L.cellStyles)break;for(;z.e>=z.s;)P[z.e--]={width:z.w/256,level:z.level||0,hidden:!!(z.flags&1)},J||(J=!0,xw(z.w/256)),eu(P[z.e+1])}break;case 520:{var Et={};z.level!=null&&(te[z.r]=Et,Et.level=z.level),z.hidden&&(te[z.r]=Et,Et.hidden=!0),z.hpt&&(te[z.r]=Et,Et.hpt=z.hpt,Et.hpx=Bh(z.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||O0(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ye]]=z;break;case 161:a["!margins"]||O0(a["!margins"]={}),a["!margins"].header=z.header,a["!margins"].footer=z.footer;break;case 574:z.RTL&&(T.Views[0].RTL=!0);break;case 146:k=z;break;case 2198:D=z;break;case 140:_=z;break;case 442:A?S.CodeName=z||S.name:T.WBProps.CodeName=z||"ThisWorkbook";break}}else de||console.error("Missing Info for XLS Record 0x"+ye.toString(16)),e.l+=re}return r.SheetNames=Bo(i).sort(function(ht,nt){return Number(ht)-Number(nt)}).map(function(ht){return i[ht].name}),t.bookSheets||(r.Sheets=s),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&E.forEach(function(ht,nt){r.Sheets[r.SheetNames[nt]]["!autofilter"]=ht}),r.Strings=c,r.SSF=Pn(lr),L.enc&&(r.Encryption=L.enc),D&&(r.Themes=D),r.Metadata={},_!==void 0&&(r.Metadata.Country=_),V.names.length>0&&(T.Names=V.names),r.Workbook=T,r}var dB={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function BJ(e,t,r){var s=xr.find(e,"/!DocumentSummaryInformation");if(s&&s.size>0)try{var a=$N(s,Hz,dB.DSI);for(var i in a)t[i]=a[i]}catch(A){if(r.WTF)throw A}var o=xr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=$N(o,Kz,dB.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(A){if(r.WTF)throw A}t.HeadingPairs&&t.TitlesOfParts&&(iS(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function KS(e,t){t||(t={}),_w(t),xk(),t.codepage&&tw(t.codepage);var r,s;if(e.FullPaths){if(xr.find(e,"/encryption"))throw new Error("File is password-protected");r=xr.find(e,"!CompObj"),s=xr.find(e,"/Workbook")||xr.find(e,"/Book")}else{switch(t.type){case"base64":e=Xi(ii(e));break;case"binary":e=Xi(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Dn(e,0),s={content:e}}var a,i;if(r&&wJ(r),t.bookProps&&!t.bookSheets)a={};else{var o=mr?"buffer":"array";if(s&&s.content)a=NJ(s.content,t);else if((i=xr.find(e,"PerfectOffice_MAIN"))&&i.content)a=D0.to_workbook(i.content,(t.type=o,t));else if((i=xr.find(e,"NativeContent_MAIN"))&&i.content)a=D0.to_workbook(i.content,(t.type=o,t));else throw(i=xr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&xr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=A$(e))}var l={};return e.FullPaths&&BJ(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}var Vm={0:{f:iX},1:{f:AX},2:{f:vX},3:{f:fX},4:{f:uX},5:{f:xX},6:{f:bX},7:{f:mX},8:{f:jX},9:{f:CX},10:{f:NX},11:{f:BX},12:{f:dX},13:{f:yX},14:{f:pX},15:{f:hX},16:{f:OS},17:{f:_X},18:{f:gX},19:{f:uw},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:eJ},40:{},42:{},43:{f:NG},44:{f:_G},45:{f:BG},46:{f:jG},47:{f:CG},48:{},49:{f:Ez},50:{},51:{f:$G},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:xS},62:{f:wX},63:{f:ZG},64:{f:DX},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:oa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:LX},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:cX},148:{f:oX,p:16},151:{f:SX},152:{},153:{f:YX},154:{},155:{},156:{f:JX},157:{},158:{},159:{T:1,f:Kq},160:{T:-1},161:{T:1,f:EA},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:EX},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:GG},336:{T:-1},337:{f:WG,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:_y},357:{},358:{},359:{},360:{T:1},361:{},362:{f:gS},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:FX},427:{f:TX},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:UX},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:lX},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:kX},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:_y},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:o$},633:{T:1},634:{T:-1},635:{T:1,f:i$},636:{T:-1},637:{f:Sz},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:HX},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:QX},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Ey={6:{f:E1},10:{f:Ll},12:{f:Zs},13:{f:Zs},14:{f:Ms},15:{f:Ms},16:{f:ra},17:{f:Ms},18:{f:Ms},19:{f:Zs},20:{f:YN},21:{f:YN},23:{f:gS},24:{f:eB},25:{f:Ms},26:{},27:{},28:{f:nq},29:{},34:{f:Ms},35:{f:ZN},38:{f:ra},39:{f:ra},40:{f:ra},41:{f:ra},42:{f:Ms},43:{f:Ms},47:{f:lG},49:{f:PV},51:{f:Zs},60:{},61:{f:DV},64:{f:Ms},65:{f:OV},66:{f:Zs},77:{},80:{},81:{},82:{},85:{f:Zs},89:{},90:{},91:{},92:{f:EV},93:{f:iq},94:{},95:{f:Ms},96:{},97:{},99:{f:Ms},125:{f:xS},128:{f:WV},129:{f:kV},130:{f:Zs},131:{f:Ms},132:{f:Ms},133:{f:SV},134:{},140:{f:uq},141:{f:Zs},144:{},146:{f:fq},151:{},152:{},153:{},154:{},155:{},156:{f:Zs},157:{},158:{},160:{f:vq},161:{f:mq},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:VV},190:{f:qV},193:{f:Ll},197:{},198:{},199:{},200:{},201:{},202:{f:Ms},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Zs},220:{},221:{f:Ms},222:{},224:{f:$V},225:{f:jV},226:{f:Ll},227:{},229:{f:aq},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:FV},253:{f:RV},255:{f:TV},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:dS},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ms},353:{f:Ll},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:JV},431:{f:Ms},432:{},433:{},434:{},437:{},438:{f:cq},439:{f:Ms},440:{f:Aq},441:{},442:{f:Rh},443:{},444:{f:Zs},445:{},446:{},448:{f:Ll},449:{f:LV,r:2},450:{f:Ll},512:{f:XN},513:{f:xq},515:{f:XV},516:{f:MV},517:{f:JN},519:{f:yq},520:{f:IV},523:{},545:{f:tB},549:{f:WN},566:{},574:{f:QV},638:{f:zV},659:{},1048:{},1054:{f:HV},1084:{},1212:{f:tq},2048:{f:dq},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:yp},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ll},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:pq,r:12},2173:{f:VG,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ms,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:eq,r:12},2197:{},2198:{f:PG,r:12},2199:{},2200:{},2201:{},2202:{f:rq,r:12},2203:{f:Ll},2204:{},2205:{},2206:{},2207:{},2211:{f:UV},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Zs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:gq},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:hq},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:XN},1:{},2:{f:Nq},3:{f:_q},4:{f:bq},5:{f:JN},7:{f:Bq},8:{},9:{f:yp},11:{},22:{f:Zs},30:{f:KV},31:{},32:{},33:{f:tB},36:{},37:{f:WN},50:{f:Cq},62:{},52:{},67:{},68:{f:Zs},69:{},86:{},126:{},127:{f:wq},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:jq},223:{},234:{},354:{},421:{},518:{f:E1},521:{f:yp},536:{f:eB},547:{f:ZN},561:{},579:{},1030:{f:E1},1033:{f:yp},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Hi(e,t,r,s){var a=t;if(!isNaN(a)){var i=(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,i),i>0&&Yk(r)&&e.push(r)}}function uB(e,t){var r=t||{},s=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=a.index,l=i&&i.index||e.length,c=XK(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,d=0,h=0,f=0,u={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(o=0;o<c.length;++o){var g=c[o].trim(),w=g.slice(0,3).toLowerCase();if(w=="<tr"){if(++A,r.sheetRows&&r.sheetRows<=A){--A;break}d=0;continue}if(!(w!="<td"&&w!="<th")){var v=g.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var x=v[l].trim();if(x.match(/<t[dh]/i)){for(var y=x,_=0;y.charAt(0)=="<"&&(_=y.indexOf(">"))>-1;)y=y.slice(_+1);for(var I=0;I<p.length;++I){var k=p[I];k.s.c==d&&k.s.r<A&&A<=k.e.r&&(d=k.e.c+1,I=-1)}var T=Zt(x.slice(0,x.indexOf(">")));f=T.colspan?+T.colspan:1,((h=+T.rowspan)>1||f>1)&&p.push({s:{r:A,c:d},e:{r:A+(h||1)-1,c:d+f-1}});var S=T.t||T["data-t"]||"";if(!y.length){d+=f;continue}if(y=Pk(y),u.s.r>A&&(u.s.r=A),u.e.r<A&&(u.e.r=A),u.s.c>d&&(u.s.c=d),u.e.c<d&&(u.e.c=d),!y.length){d+=f;continue}var B={t:"s",v:y};r.raw||!y.trim().length||S=="s"||(y==="TRUE"?B={t:"b",v:!0}:y==="FALSE"?B={t:"b",v:!1}:isNaN(to(y))?isNaN(Zd(y).getDate())||(B={t:"d",v:Bn(y)},r.cellDates||(B={t:"n",v:_a(B.v)}),B.z=r.dateNF||lr[14]):B={t:"n",v:to(y)}),r.dense?(s[A]||(s[A]=[]),s[A][d]=B):s[sr({r:A,c:d})]=B,d+=f}}}}return s["!ref"]=vr(u),p.length&&(s["!merges"]=p),s}function CJ(e,t,r,s){for(var a=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,A=0;A<a.length;++A)if(!(a[A].s.r>r||a[A].s.c>o)&&!(a[A].e.r<r||a[A].e.c<o)){if(a[A].s.r<r||a[A].s.c<o){l=-1;break}l=a[A].e.r-a[A].s.r+1,c=a[A].e.c-a[A].s.c+1;break}if(!(l<0)){var d=sr({r,c:o}),h=s.dense?(e[r]||[])[o]:e[d],f=h&&h.v!=null&&(h.h||ow(h.w||(ul(h),h.w)||""))||"",u={};l>1&&(u.rowspan=l),c>1&&(u.colspan=c),s.editable?f='<span contenteditable="true">'+f+"</span>":h&&(u["data-t"]=h&&h.t||"z",h.v!=null&&(u["data-v"]=h.v),h.z!=null&&(u["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),u.id=(s.id||"sjs")+"-"+d,i.push(uz("td",f,u))}}var p="<tr>";return p+i.join("")+"</tr>"}var jJ='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',EJ="</body></html>";function kJ(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return _c(uB(r[0],t),t);var s=Bw();return r.forEach(function(a,i){Cw(s,uB(a,t),"Sheet"+(i+1))}),s}function SJ(e,t,r){var s=[];return s.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function FJ(e,t){var r=t||{},s=r.header!=null?r.header:jJ,a=r.footer!=null?r.footer:EJ,i=[s],o=cu(e["!ref"]);r.dense=Array.isArray(e),i.push(SJ(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(CJ(e,o,l,r));return i.push("</table>"+a),i.join("")}function zS(e,t,r){var s=r||{},a=0,i=0;if(s.origin!=null)if(typeof s.origin=="number")a=s.origin;else{var o=typeof s.origin=="string"?ya(s.origin):s.origin;a=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(s.sheetRows||1e7,l.length),A={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=cu(e["!ref"]);A.s.r=Math.min(A.s.r,d.s.r),A.s.c=Math.min(A.s.c,d.s.c),A.e.r=Math.max(A.e.r,d.e.r),A.e.c=Math.max(A.e.c,d.e.c),a==-1&&(A.e.r=a=d.e.r+1)}var h=[],f=0,u=e["!rows"]||(e["!rows"]=[]),p=0,g=0,w=0,v=0,x=0,y=0;for(e["!cols"]||(e["!cols"]=[]);p<l.length&&g<c;++p){var _=l[p];if(hB(_)){if(s.display)continue;u[g]={hidden:!0}}var I=_.children;for(w=v=0;w<I.length;++w){var k=I[w];if(!(s.display&&hB(k))){var T=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):Pk(k.innerHTML),S=k.getAttribute("data-z")||k.getAttribute("z");for(f=0;f<h.length;++f){var B=h[f];B.s.c==v+i&&B.s.r<g+a&&g+a<=B.e.r&&(v=B.e.c+1-i,f=-1)}y=+k.getAttribute("colspan")||1,((x=+k.getAttribute("rowspan")||1)>1||y>1)&&h.push({s:{r:g+a,c:v+i},e:{r:g+a+(x||1)-1,c:v+i+(y||1)-1}});var R={t:"s",v:T},U=k.getAttribute("data-t")||k.getAttribute("t")||"";T!=null&&(T.length==0?R.t=U||"z":s.raw||T.trim().length==0||U=="s"||(T==="TRUE"?R={t:"b",v:!0}:T==="FALSE"?R={t:"b",v:!1}:isNaN(to(T))?isNaN(Zd(T).getDate())||(R={t:"d",v:Bn(T)},s.cellDates||(R={t:"n",v:_a(R.v)}),R.z=s.dateNF||lr[14]):R={t:"n",v:to(T)})),R.z===void 0&&S!=null&&(R.z=S);var L="",D=k.getElementsByTagName("A");if(D&&D.length)for(var Q=0;Q<D.length&&!(D[Q].hasAttribute("href")&&(L=D[Q].getAttribute("href"),L.charAt(0)!="#"));++Q);L&&L.charAt(0)!="#"&&(R.l={Target:L}),s.dense?(e[g+a]||(e[g+a]=[]),e[g+a][v+i]=R):e[sr({c:v+i,r:g+a})]=R,A.e.c<v+i&&(A.e.c=v+i),v+=y}}++g}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),A.e.r=Math.max(A.e.r,g-1+a),e["!ref"]=vr(A),g>=c&&(e["!fullref"]=vr((A.e.r=l.length-p+g-1+a,A))),e}function VS(e,t){var r=t||{},s=r.dense?[]:{};return zS(s,e,t)}function TJ(e,t){return _c(VS(e,t),t)}function hB(e){var t="",r=IJ(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function IJ(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function UJ(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(s,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Nr(t.replace(/<[^>]*>/g,""));return[r]}var fB={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function qS(e,t){var r=t||{},s=lw(e),a=[],i,o,l={name:""},c="",A=0,d,h,f={},u=[],p=r.dense?[]:{},g,w,v={value:""},x="",y=0,_=[],I=-1,k=-1,T={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,B={},R=[],U={},L=0,D=0,Q=[],K=1,P=1,te=[],J={Names:[]},V={},ie=["",""],Y=[],N={},C="",E=0,O=!1,q=!1,se=0;for(bh.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=bh.exec(s);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(T.e.c>=T.s.c&&T.e.r>=T.s.r?p["!ref"]=vr(T):p["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=T.e.r&&(p["!fullref"]=p["!ref"],T.e.r=r.sheetRows-1,p["!ref"]=vr(T)),R.length&&(p["!merges"]=R),Q.length&&(p["!rows"]=Q),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),u.push(d.name),f[d.name]=p,q=!1):g[0].charAt(g[0].length-2)!=="/"&&(d=Zt(g[0],!1),I=k=-1,T.s.r=T.s.c=1e7,T.e.r=T.e.c=0,p=r.dense?[]:{},R=[],Q=[],q=!0);break;case"table-row-group":g[1]==="/"?--S:++S;break;case"table-row":case"":if(g[1]==="/"){I+=K,K=1;break}if(h=Zt(g[0],!1),h.?I=h.-1:I==-1&&(I=0),K=+h["number-rows-repeated"]||1,K<10)for(se=0;se<K;++se)S>0&&(Q[I+se]={level:S});k=-1;break;case"covered-table-cell":g[1]!=="/"&&++k,r.sheetStubs&&(r.dense?(p[I]||(p[I]=[]),p[I][k]={t:"z"}):p[sr({r:I,c:k})]={t:"z"}),x="",_=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++k,v=Zt(g[0],!1),P=parseInt(v["number-columns-repeated"]||"1",10),w={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(w.f=lB(Nr(v.formula))),(v.||v["value-type"])=="string"&&(w.t="s",w.v=Nr(v["string-value"]||""),r.dense?(p[I]||(p[I]=[]),p[I][k]=w):p[sr({r:I,c:k})]=w),k+=P-1;else if(g[1]!=="/"){++k,x="",y=0,_=[],P=1;var ye=K?I+K-1:I;if(k>T.e.c&&(T.e.c=k),k<T.s.c&&(T.s.c=k),I<T.s.r&&(T.s.r=I),ye>T.e.r&&(T.e.r=ye),v=Zt(g[0],!1),Y=[],N={},w={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=Nr(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(L=parseInt(v["number-matrix-rows-spanned"],10)||0,D=parseInt(v["number-matrix-columns-spanned"],10)||0,U={s:{r:I,c:k},e:{r:I+L-1,c:k+D-1}},w.F=vr(U),te.push([U,w.F])),v.formula)w.f=lB(v.formula);else for(se=0;se<te.length;++se)I>=te[se][0].s.r&&I<=te[se][0].e.r&&k>=te[se][0].s.c&&k<=te[se][0].e.c&&(w.F=te[se][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(L=parseInt(v["number-rows-spanned"],10)||0,D=parseInt(v["number-columns-spanned"],10)||0,U={s:{r:I,c:k},e:{r:I+L-1,c:k+D-1}},R.push(U)),v["number-columns-repeated"]&&(P=parseInt(v["number-columns-repeated"],10)),w.t){case"boolean":w.t="b",w.v=gs(v["boolean-value"]);break;case"float":w.t="n",w.v=parseFloat(v.value);break;case"percentage":w.t="n",w.v=parseFloat(v.value);break;case"currency":w.t="n",w.v=parseFloat(v.value);break;case"date":w.t="d",w.v=Bn(v["date-value"]),r.cellDates||(w.t="n",w.v=_a(w.v)),w.z="m/d/yy";break;case"time":w.t="n",w.v=GK(v["time-value"])/86400,r.cellDates&&(w.t="d",w.v=jg(w.v)),w.z="HH:MM:SS";break;case"number":w.t="n",w.v=parseFloat(v.);break;default:if(w.t==="string"||w.t==="text"||!w.t)w.t="s",v["string-value"]!=null&&(x=Nr(v["string-value"]),_=[]);else throw new Error("Unsupported value type "+w.t)}}else{if(O=!1,w.t==="s"&&(w.v=x||"",_.length&&(w.R=_),O=y==0),V.Target&&(w.l=V),Y.length>0&&(w.c=Y,Y=[]),x&&r.cellText!==!1&&(w.w=x),O&&(w.t="z",delete w.v),(!O||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=I))for(var re=0;re<K;++re){if(P=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(p[I+re]||(p[I+re]=[]),p[I+re][k]=re==0?w:Pn(w);--P>0;)p[I+re][k+P]=Pn(w);else for(p[sr({r:I+re,c:k})]=w;--P>0;)p[sr({r:I+re,c:k+P})]=Pn(w);T.e.c<=k&&(T.e.c=k)}P=parseInt(v["number-columns-repeated"]||"1",10),k+=P-1,P=0,w={},x="",_=[]}V={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i;N.t=x,_.length&&(N.R=_),N.a=C,Y.push(N)}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);C="",E=0,x="",y=0,_=[];break;case"creator":g[1]==="/"?C=s.slice(E,g.index):E=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);x="",y=0,_=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(B[l.name]=c,(i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(c="",l=Zt(g[0],!1),a.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Zt(g[0],!1),c+=fB[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Zt(g[0],!1),c+=fB[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=s.slice(A,g.index);break}else A=g.index+g[0].length;break;case"named-range":o=Zt(g[0],!1),ie=k1(o["cell-range-address"]);var de={Name:o.name,Ref:ie[0]+"!"+ie[1]};q&&(de.Sheet=u.length),J.Names.push(de);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(g[1]==="/"&&(!v||!v["string-value"])){var Ne=UJ(s.slice(y,g.index));x=(x.length>0?x+`
`:"")+Ne[0]}else Zt(g[0],!1),y=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{ie=k1(Zt(g[0])["target-range-address"]),f[ie[0]]["!autofilter"]={ref:ie[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(V=Zt(g[0],!1),!V.href)break;V.Target=Nr(V.href),delete V.href,V.Target.charAt(0)=="#"&&V.Target.indexOf(".")>-1?(ie=k1(V.Target.slice(1)),V.Target="#"+ie[0]+"!"+ie[1]):V.Target.match(/^\.\.[\\\/]/)&&(V.Target=V.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var z={Sheets:f,SheetNames:u,Workbook:J};return r.bookSheets&&delete z.Sheets,z}function pB(e,t){t=t||{},gi(e,"META-INF/manifest.xml")&&Xz(Ys(e,"META-INF/manifest.xml"),t);var r=ei(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var s=qS(ls(r),t);return gi(e,"meta.xml")&&(s.Props=aS(Ys(e,"meta.xml"))),s}function mB(e,t){return qS(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ww(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ky(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ls(CA(e))}function Sy(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),s=0;return e.forEach(function(a){r.set(a,s),s+=a.length}),r}function gB(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function LJ(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,s=e[t+14]&1,a=t+13;a>=t;--a)s=s*256+e[a];return(e[t+15]&128?-s:s)*Math.pow(10,r-6176)}function Ch(e,t){var r=t?t[0]:0,s=e[r]&127;e:if(e[r++]>=128&&(s|=(e[r]&127)<<7,e[r++]<128||(s|=(e[r]&127)<<14,e[r++]<128)||(s|=(e[r]&127)<<21,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),s}function vn(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function sa(e){for(var t=[],r=[0];r[0]<e.length;){var s=r[0],a=Ch(e,r),i=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Ch(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(s))}var A={data:l,type:i};t[a]==null?t[a]=[A]:t[a].push(A)}return t}function bw(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function DJ(e){for(var t,r=[],s=[0];s[0]<e.length;){var a=Ch(e,s),i=sa(e.slice(s[0],s[0]+a));s[0]+=a;var o={id:vn(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=sa(l.data),A=vn(c[3][0].data);o.messages.push({meta:c,data:e.slice(s[0],s[0]+A)}),s[0]+=A}),(t=i[3])!=null&&t[0]&&(o.merge=vn(i[3][0].data)>>>0>0),r.push(o)}return r}function QJ(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],s=Ch(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,A=0;if(i==1?(A=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(A=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Sy(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(A>=c)for(a.push(a[0].slice(-c)),A-=c;A>=a[a.length-1].length;)a.push(a[a.length-1]),A-=a[a.length-1].length;a.push(a[0].slice(-c,-c+A))}}var d=Sy(a);if(d.length!=s)throw new Error("Unexpected length: ".concat(d.length," != ").concat(s));return d}function OJ(e){for(var t=[],r=0;r<e.length;){var s=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(QJ(s,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Sy(t)}function PJ(e,t,r,s){var a=ww(e),i=a.getUint32(4,!0),o=(s>1?12:8)+gB(i&(s>1?3470:398))*4,l=-1,c=-1,A=NaN,d=new Date(2001,0,1);i&512&&(l=a.getUint32(o,!0),o+=4),o+=gB(i&(s>1?12288:4096))*4,i&16&&(c=a.getUint32(o,!0),o+=4),i&32&&(A=a.getFloat64(o,!0),o+=8),i&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var h;switch(e[2]){case 0:break;case 2:h={t:"n",v:A};break;case 3:h={t:"s",v:t[c]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:A>0};break;case 7:h={t:"n",v:A/86400};break;case 8:h={t:"e",v:0};break;case 9:if(l>-1)h={t:"s",v:r[l]};else if(c>-1)h={t:"s",v:t[c]};else if(!isNaN(A))h={t:"n",v:A};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return h}function RJ(e,t,r){var s=ww(e),a=s.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,A=NaN,d=new Date(2001,0,1);a&1&&(c=LJ(e,i),i+=16),a&2&&(A=s.getFloat64(i,!0),i+=8),a&4&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8),a&8&&(l=s.getUint32(i,!0),i+=4),a&16&&(o=s.getUint32(i,!0),i+=4);var h;switch(e[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:t[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:A>0};break;case 7:h={t:"n",v:A/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return h}function MJ(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return PJ(e,t,r,e[0]);case 5:return RJ(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function uc(e){var t=sa(e);return Ch(t[1][0].data)}function xB(e,t){var r=sa(t.data),s=vn(r[1][0].data),a=r[3],i=[];return(a||[]).forEach(function(o){var l=sa(o.data),c=vn(l[1][0].data)>>>0;switch(s){case 1:i[c]=ky(l[3][0].data);break;case 8:{var A=e[uc(l[9][0].data)][0],d=sa(A.data),h=e[uc(d[1][0].data)][0],f=vn(h.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var u=sa(h.data);i[c]=u[3].map(function(p){return ky(p.data)}).join("")}break}}),i}function HJ(e,t){var r,s,a,i,o,l,c,A,d,h,f,u,p,g,w=sa(e),v=vn(w[1][0].data)>>>0,x=vn(w[2][0].data)>>>0,y=((s=(r=w[8])==null?void 0:r[0])==null?void 0:s.data)&&vn(w[8][0].data)>0||!1,_,I;if((i=(a=w[7])==null?void 0:a[0])!=null&&i.data&&t!=0)_=(l=(o=w[7])==null?void 0:o[0])==null?void 0:l.data,I=(A=(c=w[6])==null?void 0:c[0])==null?void 0:A.data;else if((h=(d=w[4])==null?void 0:d[0])!=null&&h.data&&t!=1)_=(u=(f=w[4])==null?void 0:f[0])==null?void 0:u.data,I=(g=(p=w[3])==null?void 0:p[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var k=y?4:1,T=ww(_),S=[],B=0;B<_.length/2;++B){var R=T.getUint16(B*2,!0);R<65535&&S.push([B,R])}if(S.length!=x)throw"Expected ".concat(x," cells, found ").concat(S.length);var U=[];for(B=0;B<S.length-1;++B)U[S[B][0]]=I.subarray(S[B][1]*k,S[B+1][1]*k);return S.length>=1&&(U[S[S.length-1][0]]=I.subarray(S[S.length-1][1]*k)),{R:v,cells:U}}function KJ(e,t){var r,s=sa(t.data),a=(r=s==null?void 0:s[7])!=null&&r[0]?vn(s[7][0].data)>>>0>0?1:0:-1,i=bw(s[5],function(o){return HJ(o,a)});return{nrows:vn(s[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,A){if(o[l.R][A])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(A));o[l.R][A]=c}),o},[])}}function zJ(e,t,r){var s,a=sa(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(vn(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(vn(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=vr(i);var o=sa(a[4][0].data),l=xB(e,e[uc(o[4][0].data)][0]),c=(s=o[17])!=null&&s[0]?xB(e,e[uc(o[17][0].data)][0]):[],A=sa(o[3][0].data),d=0;A[1].forEach(function(h){var f=sa(h.data),u=e[uc(f[2][0].data)][0],p=vn(u.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var g=KJ(e,u);g.data.forEach(function(w,v){w.forEach(function(x,y){var _=sr({r:d+v,c:y}),I=MJ(x,l,c);I&&(r[_]=I)})}),d+=g.nrows})}function VJ(e,t){var r=sa(t.data),s={"!ref":"A1"},a=e[uc(r[2][0].data)],i=vn(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return zJ(e,a[0],s),s}function qJ(e,t){var r,s=sa(t.data),a={name:(r=s[1])!=null&&r[0]?ky(s[1][0].data):"",sheets:[]},i=bw(s[2],uc);return i.forEach(function(o){e[o].forEach(function(l){var c=vn(l.meta[1][0].data);c==6e3&&a.sheets.push(VJ(e,l))})}),a}function GJ(e,t){var r=Bw(),s=sa(t.data),a=bw(s[1],uc);if(a.forEach(function(i){e[i].forEach(function(o){var l=vn(o.meta[1][0].data);if(l==2){var c=qJ(e,o);c.sheets.forEach(function(A,d){Cw(r,A,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function F1(e){var t,r,s,a,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var A;try{A=OJ(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var d;try{d=DJ(A)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){i[h.id]=h.messages,o.push(h.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(s=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:s[1])==null?void 0:a[0].data)&&vn(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(A){var d=vn(A.meta[1][0].data)>>>0;if(d==1)if(!l)l=A;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return GJ(i,l)}function $J(e){return function(r){for(var s=0;s!=e.length;++s){var a=e[s];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function _w(e){$J([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function WJ(e){return Cd.WS.indexOf(e)>-1?"sheet":e==Cd.CS?"chart":e==Cd.DS?"dialog":e==Cd.MS?"macro":e&&e.length?e:"sheet"}function XJ(e,t){if(!e)return 0;try{e=t.map(function(s){return s.id||(s.id=s.strRelID),[s.name,e["!id"][s.id].Target,WJ(e["!id"][s.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function JJ(e,t,r,s,a,i,o,l,c,A,d,h){try{i[s]=U0(ei(e,r,!0),t);var f=Ys(e,t),u;switch(l){case"sheet":u=sJ(f,t,a,c,i[s],A,d,h);break;case"chart":if(u=nJ(f,t,a,c,i[s],A,d,h),!u||!u["!drawel"])break;var p=d0(u["!drawel"].Target,t),g=Ny(p),w=r$(ei(e,p,!0),U0(ei(e,g,!0),p)),v=d0(w,p),x=Ny(v);u=RX(ei(e,v,!0),v,c,U0(ei(e,x,!0),v),A,u);break;case"macro":u=aJ(f,t,a,c,i[s],A,d,h);break;case"dialog":u=iJ(f,t,a,c,i[s],A,d,h);break;default:throw new Error("Unrecognized sheet type "+l)}o[s]=u;var y=[];i&&i[s]&&Bo(i[s]).forEach(function(_){var I="";if(i[s][_].Type==Cd.CMNT){I=d0(i[s][_].Target,t);var k=AJ(Ys(e,I,!0),I,c);if(!k||!k.length)return;sB(u,k,!1)}i[s][_].Type==Cd.TCMNT&&(I=d0(i[s][_].Target,t),y=y.concat(n$(Ys(e,I,!0),c)))}),y&&y.length&&sB(u,y,!0,c.people||[])}catch(_){if(c.WTF)throw _}}function fi(e){return e.charAt(0)=="/"?e.slice(1):e}function YJ(e,t){if(Sk(),t=t||{},_w(t),gi(e,"META-INF/manifest.xml")||gi(e,"objectdata.xml"))return pB(e,t);if(gi(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof F1<"u"){if(e.FileIndex)return F1(e);var r=xr.utils.cfb_new();return SN(e).forEach(function(Q){ZK(r,Q,YK(e,Q))}),F1(r)}throw new Error("Unsupported NUMBERS file")}if(!gi(e,"[Content_Types].xml"))throw gi(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):gi(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var s=SN(e),a=$z(ei(e,"[Content_Types].xml")),i=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Ys(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Ys(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},A={};if(!t.bookSheets&&!t.bookProps){if(Q0=[],a.sst)try{Q0=cJ(Ys(e,fi(a.sst)),a.sst,t)}catch(Q){if(t.WTF)throw Q}t.cellStyles&&a.themes.length&&(c=lJ(ei(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(A=oJ(Ys(e,fi(a.style)),a.style,c,t))}a.links.map(function(Q){try{var K=U0(ei(e,Ny(fi(Q))),Q);return uJ(Ys(e,fi(Q)),K,Q,t)}catch{}});var d=rJ(Ys(e,fi(a.workbooks[0])),a.workbooks[0],t),h={},f="";a.coreprops.length&&(f=Ys(e,fi(a.coreprops[0]),!0),f&&(h=aS(f)),a.extprops.length!==0&&(f=Ys(e,fi(a.extprops[0]),!0),f&&Zz(f,h,t)));var u={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(f=ei(e,fi(a.custprops[0]),!0),f&&(u=tV(f,t)));var p={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(K){return K.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),t.bookProps&&(p.Props=h,p.Custprops=u),t.bookSheets&&typeof o<"u"&&(p.SheetNames=o),t.bookSheets?p.SheetNames:t.bookProps))return p;o={};var g={};t.bookDeps&&a.calcchain&&(g=dJ(Ys(e,fi(a.calcchain)),a.calcchain));var w=0,v={},x,y;{var _=d.Sheets;h.Worksheets=_.length,h.SheetNames=[];for(var I=0;I!=_.length;++I)h.SheetNames[I]=_[I].name}var k=i?"bin":"xml",T=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,T+1)+"_rels/"+a.workbooks[0].slice(T+1)+".rels").replace(/^\//,"");gi(e,S)||(S="xl/_rels/workbook."+k+".rels");var B=U0(ei(e,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=hJ(Ys(e,fi(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=a$(Ys(e,fi(a.people[0])),t)),B&&(B=XJ(B,d.Sheets));var R=Ys(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(w=0;w!=h.Worksheets;++w){var U="sheet";if(B&&B[w]?(x="xl/"+B[w][1].replace(/[\/]?xl\//,""),gi(e,x)||(x=B[w][1]),gi(e,x)||(x=S.replace(/_rels\/.*$/,"")+B[w][1]),U=B[w][2]):(x="xl/worksheets/sheet"+(w+1-R)+"."+k,x=x.replace(/sheet0\./,"sheet.")),y=x.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(w!=t.sheets)continue e;break;case"string":if(h.SheetNames[w].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var L=!1,D=0;D!=t.sheets.length;++D)typeof t.sheets[D]=="number"&&t.sheets[D]==w&&(L=1),typeof t.sheets[D]=="string"&&t.sheets[D].toLowerCase()==h.SheetNames[w].toLowerCase()&&(L=1);if(!L)continue e}}JJ(e,x,y,h.SheetNames[w],w,v,o,U,t,d,c,A)}return p={Directory:a,Workbook:d,Props:h,Custprops:u,Deps:g,Sheets:o,SheetNames:h.SheetNames,Strings:Q0,Styles:A,Themes:c,SSF:Pn(lr)},t&&t.bookFiles&&(e.files?(p.keys=s,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach(function(Q,K){Q=Q.replace(/^Root Entry[\/]/,""),p.keys.push(Q),p.files[Q]=e.FileIndex[K]}))),t&&t.bookVBA&&(a.vba.length>0?p.vbaraw=Ys(e,fi(a.vba[0]),!0):a.defaults&&a.defaults.bin===c$&&(p.vbaraw=Ys(e,"xl/vbaProject.bin",!0))),p}function ZJ(e,t){var r=t||{},s="Workbook",a=xr.find(e,s);try{if(s="/!DataSpaces/Version",a=xr.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(Vq(a.content),s="/!DataSpaces/DataSpaceMap",a=xr.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var i=Gq(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=xr.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var o=$q(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=xr.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);Xq(a.content)}catch{}if(s="/EncryptionInfo",a=xr.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);var l=Jq(a.content);if(s="/EncryptedPackage",a=xr.find(e,s),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function Nw(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=ii(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function eY(e,t){return xr.find(e,"EncryptedPackage")?ZJ(e,t):KS(e,t)}function tY(e,t){var r,s=e,a=t||{};return a.type||(a.type=mr&&Buffer.isBuffer(e)?"buffer":"base64"),r=Dk(s,a),YJ(r,a)}function GS(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return jy(e.slice(r),t);default:break e}return _h.to_workbook(e,t)}function rY(e,t){var r="",s=Nw(e,t);switch(t.type){case"base64":r=ii(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=gA(e);break;default:throw new Error("Unrecognized type "+t.type)}return s[0]==239&&s[1]==187&&s[2]==191&&(r=ls(r)),t.type="binary",GS(r,t)}function sY(e,t){var r=e;return t.type=="base64"&&(r=ii(r)),r=vh.utils.decode(1200,r.slice(2),"str"),t.type="binary",GS(r,t)}function nY(e){return e.match(/[^\x00-\x7F]/)?u0(e):e}function T1(e,t,r,s){return s?(r.type="string",_h.to_workbook(e,r)):_h.to_workbook(t,r)}function Fy(e,t){xk();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Fy(new Uint8Array(e),(r=Pn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var s=e,a=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Hd={},r.dateNF&&(Hd.dateNF=r.dateNF),r.type||(r.type=mr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=mr?"buffer":"binary",s=VK(e),typeof Uint8Array<"u"&&!mr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,s=nY(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Pn(r),r.type="array",Fy(rw(s),r)}switch((a=Nw(s,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return eY(xr.read(s,r),r);break;case 9:if(a[1]<=8)return KS(s,r);break;case 60:return jy(s,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return Tq(s,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Sq.to_workbook(s,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?tY(s,r):T1(e,s,r,i);case 239:return a[3]===60?jy(s,r):T1(e,s,r,i);case 255:if(a[1]===254)return sY(s,r);if(a[1]===0&&a[2]===2&&a[3]===0)return D0.to_workbook(s,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return D0.to_workbook(s,r);break;case 3:case 131:case 139:case 140:return rB.to_workbook(s,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return cG.to_workbook(s,r);break;case 10:case 13:case 32:return rY(s,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Eq.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?rB.to_workbook(s,r):T1(e,s,r,i)}function aY(e,t,r,s,a,i,o,l){var c=Rn(r),A=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,f=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!o||e[r])for(var u=t.s.c;u<=t.e.c;++u){var p=o?e[r][u]:e[s[u]+c];if(p===void 0||p.t===void 0){if(A===void 0)continue;i[u]!=null&&(f[i[u]]=A);continue}var g=p.v;switch(p.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(i[u]!=null){if(g==null)if(p.t=="e"&&g===null)f[i[u]]=null;else if(A!==void 0)f[i[u]]=A;else if(d&&g===null)f[i[u]]=null;else continue;else f[i[u]]=d&&(p.t!=="n"||p.t==="n"&&l.rawNumbers!==!1)?g:ul(p,g,l);g!=null&&(h=!1)}}return{row:f,isempty:h}}function Ty(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},s=0,a=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},A=t||{},d=A.range!=null?A.range:e["!ref"];switch(A.header===1?s=1:A.header==="A"?s=2:Array.isArray(A.header)?s=3:A.header==null&&(s=0),typeof d){case"string":c=Us(d);break;case"number":c=Us(e["!ref"]),c.s.r=d;break;default:c=d}s>0&&(a=0);var h=Rn(c.s.r),f=[],u=[],p=0,g=0,w=Array.isArray(e),v=c.s.r,x=0,y={};w&&!e[v]&&(e[v]=[]);var _=A.skipHidden&&e["!cols"]||[],I=A.skipHidden&&e["!rows"]||[];for(x=c.s.c;x<=c.e.c;++x)if(!(_[x]||{}).hidden)switch(f[x]=xn(x),r=w?e[v][x]:e[f[x]+h],s){case 1:i[x]=x-c.s.c;break;case 2:i[x]=f[x];break;case 3:i[x]=A.header[x-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=ul(r,null,A),g=y[o]||0,!g)y[o]=1;else{do l=o+"_"+g++;while(y[l]);y[o]=g,y[l]=1}i[x]=l}for(v=c.s.r+a;v<=c.e.r;++v)if(!(I[v]||{}).hidden){var k=aY(e,c,v,f,s,i,w,A);(k.isempty===!1||(s===1?A.blankrows!==!1:A.blankrows))&&(u[p++]=k.row)}return u.length=p,u}var vB=/"/g;function iY(e,t,r,s,a,i,o,l){for(var c=!0,A=[],d="",h=Rn(r),f=t.s.c;f<=t.e.c;++f)if(s[f]){var u=l.dense?(e[r]||[])[f]:e[s[f]+h];if(u==null)d="";else if(u.v!=null){c=!1,d=""+(l.rawNumbers&&u.t=="n"?u.v:ul(u,null,l));for(var p=0,g=0;p!==d.length;++p)if((g=d.charCodeAt(p))===a||g===i||g===34||l.forceQuotes){d='"'+d.replace(vB,'""')+'"';break}d=="ID"&&(d='"ID"')}else u.f!=null&&!u.F?(c=!1,d="="+u.f,d.indexOf(",")>=0&&(d='"'+d.replace(vB,'""')+'"')):d="";A.push(d)}return l.blankrows===!1&&c?null:A.join(o)}function $S(e,t){var r=[],s=t??{};if(e==null||e["!ref"]==null)return"";var a=Us(e["!ref"]),i=s.FS!==void 0?s.FS:",",o=i.charCodeAt(0),l=s.RS!==void 0?s.RS:`
`,c=l.charCodeAt(0),A=new RegExp((i=="|"?"\\|":i)+"+$"),d="",h=[];s.dense=Array.isArray(e);for(var f=s.skipHidden&&e["!cols"]||[],u=s.skipHidden&&e["!rows"]||[],p=a.s.c;p<=a.e.c;++p)(f[p]||{}).hidden||(h[p]=xn(p));for(var g=0,w=a.s.r;w<=a.e.r;++w)(u[w]||{}).hidden||(d=iY(e,a,w,h,o,c,i,s),d!=null&&(s.strip&&(d=d.replace(A,"")),(d||s.blankrows!==!1)&&r.push((g++?l:"")+d)));return delete s.dense,r.join("")}function oY(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=$S(e,t);return r}function lY(e){var t="",r,s="";if(e==null||e["!ref"]==null)return[];var a=Us(e["!ref"]),i="",o=[],l,c=[],A=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=xn(l);for(var d=a.s.r;d<=a.e.r;++d)for(i=Rn(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+i,r=A?(e[d]||[])[l]:e[t],s="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;s=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)s=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)s=""+r.v;else if(r.t=="b")s=r.v?"TRUE":"FALSE";else if(r.w!==void 0)s="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?s="'"+r.v:s=""+r.v}}c[c.length]=t+"="+s}return c}function WS(e,t,r){var s=r||{},a=+!s.skipHeader,i=e||{},o=0,l=0;if(i&&s.origin!=null)if(typeof s.origin=="number")o=s.origin;else{var c=typeof s.origin=="string"?ya(s.origin):s.origin;o=c.r,l=c.c}var A,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(i["!ref"]){var h=Us(i["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),o==-1&&(o=h.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var f=s.header||[],u=0;t.forEach(function(g,w){Bo(g).forEach(function(v){(u=f.indexOf(v))==-1&&(f[u=f.length]=v);var x=g[v],y="z",_="",I=sr({c:l+u,r:o+w+a});A=jh(i,I),x&&typeof x=="object"&&!(x instanceof Date)?i[I]=x:(typeof x=="number"?y="n":typeof x=="boolean"?y="b":typeof x=="string"?y="s":x instanceof Date?(y="d",s.cellDates||(y="n",x=_a(x)),_=s.dateNF||lr[14]):x===null&&s.nullError&&(y="e",x=0),A?(A.t=y,A.v=x,delete A.w,delete A.R,_&&(A.z=_)):i[I]=A={t:y,v:x},_&&(A.z=_))})}),d.e.c=Math.max(d.e.c,l+f.length-1);var p=Rn(o);if(a)for(u=0;u<f.length;++u)i[xn(u+l)+p]={t:"s",v:f[u]};return i["!ref"]=vr(d),i}function cY(e,t){return WS(null,e,t)}function jh(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var s=ya(t);return e[s.r]||(e[s.r]=[]),e[s.r][s.c]||(e[s.r][s.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?jh(e,sr(t)):jh(e,sr({r:t,c:r||0}))}function AY(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Bw(){return{SheetNames:[],Sheets:{}}}function Cw(e,t,r,s){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var o=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if($X(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function dY(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var s=AY(e,t);switch(e.Workbook.Sheets[s]||(e.Workbook.Sheets[s]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[s].Hidden=r}function uY(e,t){return e.z=t,e}function XS(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function hY(e,t,r){return XS(e,"#"+t,r)}function fY(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function pY(e,t,r,s){for(var a=typeof t!="string"?t:Us(t),i=typeof t=="string"?t:vr(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=jh(e,o,l);c.t="n",c.F=i,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,s&&(c.D=!0))}return e}var mY={encode_col:xn,encode_row:Rn,encode_cell:sr,encode_range:vr,decode_col:dw,decode_row:Aw,split_cell:jz,decode_cell:ya,decode_range:cu,format_cell:ul,sheet_add_aoa:eS,sheet_add_json:WS,sheet_add_dom:zS,aoa_to_sheet:Au,json_to_sheet:cY,table_to_sheet:VS,table_to_book:TJ,sheet_to_csv:$S,sheet_to_txt:oY,sheet_to_json:Ty,sheet_to_html:FJ,sheet_to_formulae:lY,sheet_to_row_object_array:Ty,sheet_get_cell:jh,book_new:Bw,book_append_sheet:Cw,book_set_sheet_visibility:dY,cell_set_number_format:uY,cell_set_hyperlink:XS,cell_set_internal_link:hY,cell_add_comment:fY,sheet_set_array_formula:pY,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function gY(){const[e,t]=H.useState([]),[r,s]=H.useState([]),[a,i]=H.useState(!0),[o,l]=H.useState(""),[c,A]=H.useState(null),[d,h]=H.useState(!1),[f,u]=H.useState(!1),[p,g]=H.useState(!1),[w,v]=H.useState(!1),[x,y]=H.useState(null),[_,I]=H.useState(""),[k,T]=H.useState(""),[S,B]=H.useState({name_ar:"",sku:"",category_id:"",cost_price:"",price_a:"",price_b:"",price_c:"",price_d:"",price_e:"",quantity_in_stock:"0",image_url:""}),[R,U]=H.useState([]),[L,D]=H.useState(""),[Q,K]=H.useState(!1),[P,te]=H.useState(null),[J,V]=H.useState(null),[ie,Y]=H.useState(""),[N,C]=H.useState(!1),E=H.useRef(null);H.useEffect(()=>{O(),q()},[]),H.useEffect(()=>{p&&setTimeout(()=>{var ee;return(ee=E.current)==null?void 0:ee.focus()},50)},[p]);const O=async()=>{i(!0);try{const{data:ee,error:Se}=await we.from("products").select("id, name_ar, sku, cost_price, price_a, price_b, price_c, price_d, price_e, stock, category_id, image_url, created_at, weight, weight_unit").eq("is_active",!0).order("name_ar",{ascending:!0});if(Se)throw Se;console.log("Produits rcuprs:",ee==null?void 0:ee.length,"produits"),t(ee||[])}catch(ee){console.error("Error loading products:",ee)}finally{i(!1)}},q=async()=>{try{const{data:ee,error:Se}=await we.from("product_categories").select("*").order("name_ar");if(Se)throw Se;console.log(" rcupres:",ee==null?void 0:ee.length,""),s(ee||[])}catch(ee){console.error("Error loading categories:",ee)}},se=ee=>String(ee||"").trim(),ye=ee=>{const Se=String(ee||"").trim();if(!Se)return"";const je=Se.split(",").map(wt=>wt.trim()).filter(Boolean).slice(-1)[0]||Se,qe=je.toLowerCase();return{beverages:"",waters:"",water:"","mineral waters":" ","natural mineral waters":"  ","spring waters":" ",juice:"",juices:"",milk:"",yogurt:"",tea:"",coffee:"","soft drinks":" ","carbonated drinks":" "}[qe]||je},re=async ee=>{const Se=se(ee);if(!Se)return null;const je=r.find(ft=>String(ft.name_ar||"").trim().toLowerCase()===Se.toLowerCase());if(je!=null&&je.id)return je.id;const{data:qe,error:At}=await we.from("product_categories").select("id, name_ar").eq("name_ar",Se).limit(1).maybeSingle();if(!At&&(qe!=null&&qe.id))return s(ft=>ft.some(Je=>Je.id===qe.id)?ft:[...ft,qe]),qe.id;const{data:wt,error:He}=await we.from("product_categories").insert({name_ar:Se}).select("id, name_ar").single();return He?(console.error("Error creating category:",He),null):(s(ft=>[...ft,wt]),(wt==null?void 0:wt.id)||null)},de=async ee=>{const Se=async()=>{var At;try{const wt=await fetch(`https://world.openfoodfacts.org/api/v2/product/${ee}.json`);if(!wt.ok)return null;const He=await wt.json();if(He.status!==1||!He.product)return null;const ft=He.product,Je=String(ft.quantity||"").trim(),dt=ft.product_quantity?Number(ft.product_quantity):NaN,nr=String(ft.product_quantity_unit||"").trim(),Kt=Je||(Number.isFinite(dt)&&nr?`${dt} ${nr}`:"");return{name_ar:String(ft.product_name_ar||"").trim(),name:String(ft.product_name||"").trim(),category:String(ft.categories||((At=ft.categories_tags)==null?void 0:At[0])||"").trim(),image:String(ft.image_front_url||ft.image_url||"").trim(),brand:ft.brands?String(ft.brands).trim():void 0,size:Kt}}catch(wt){return console.warn("Open Food Facts API failed:",wt),null}};let je=null;try{const{data:At,error:wt}=await we.functions.invoke("go-upc-scrape",{body:{barcode:ee}});if(!wt&&!!(At!=null&&At.success)){const ft=(At==null?void 0:At.product)||{};je={name:String((ft==null?void 0:ft.name)||"").trim(),category:String((ft==null?void 0:ft.category)||"").trim(),image:String((ft==null?void 0:ft.image)||"").trim(),brand:ft!=null&&ft.brand?String(ft.brand).trim():void 0,size:ft!=null&&ft.size?String(ft.size).trim():void 0}}}catch(At){console.warn("Edge Function failed, trying fallback API:",At)}const qe=await Se();if(je)return{...je,name:(qe==null?void 0:qe.name_ar)||je.name||(qe==null?void 0:qe.name)||"",category:je.category||(qe==null?void 0:qe.category)||"",image:je.image||(qe==null?void 0:qe.image)||"",brand:je.brand||(qe==null?void 0:qe.brand),size:je.size||(qe==null?void 0:qe.size)||void 0};if(qe)return{name:qe.name_ar||qe.name||"",category:qe.category||"",image:qe.image||"",brand:qe.brand,size:qe.size||void 0};try{const At=await fetch(`https://api.upcitemdb.com/prod/trial/lookup?upc=${ee}`);if(At.ok){const wt=await At.json();if(wt.code==="OK"&&wt.items&&wt.items.length>0){const He=wt.items[0];return{name:String(He.title||"").trim(),category:String(He.category||"").trim(),image:String(He.image||"").trim(),brand:He.brand?String(He.brand).trim():void 0,size:void 0}}}}catch(At){console.warn("UPCItemDB API failed:",At)}throw new Error("Product not found in any database")},Ne=ee=>{const Se=String(ee||"").trim();if(!Se)return{unit_type:"unit",quantity_contained:1,variant_name:""};const je=dt=>{const nr=Math.round(dt*1e3)/1e3,Kt=String(nr);return(Kt.includes(".")?Kt.replace(/0+$/,"").replace(/\.$/,""):Kt).replace(".",",")},qe=(dt,nr,Kt)=>!Number.isFinite(dt)||dt<=0?Kt||Se:nr==="litre"?`: ${je(dt)} `:nr==="kg"?`: ${je(dt)} `:Kt||Se,wt=Se.replace(/\s+/g," ").trim().match(/^\s*([0-9]+(?:[\.,][0-9]+)?)\s*([a-zA-Z]+)\b/);if(!wt)return{unit_type:"unit",quantity_contained:1,variant_name:Se};const He=String(wt[1]||"").replace(",","."),ft=Number(He),Je=String(wt[2]||"").toLowerCase();if(!Number.isFinite(ft)||ft<=0)return{unit_type:"unit",quantity_contained:1,variant_name:Se};if(Je==="kg"||Je==="kgs"||Je==="kilogram"||Je==="kilograms")return{unit_type:"kg",quantity_contained:ft,variant_name:qe(ft,"kg",Se)};if(Je==="g"||Je==="gr"||Je==="gram"||Je==="grams"){const dt=ft/1e3;return{unit_type:"kg",quantity_contained:dt,variant_name:qe(dt,"kg",Se)}}if(Je==="l"||Je==="lt"||Je==="liter"||Je==="litre"||Je==="liters"||Je==="litres")return{unit_type:"litre",quantity_contained:ft,variant_name:qe(ft,"litre",Se)};if(Je==="ml"){const dt=ft/1e3;return{unit_type:"litre",quantity_contained:dt,variant_name:qe(dt,"litre",Se)}}if(Je==="cl"){const dt=ft/100;return{unit_type:"litre",quantity_contained:dt,variant_name:qe(dt,"litre",Se)}}if(Je==="dl"){const dt=ft/10;return{unit_type:"litre",quantity_contained:dt,variant_name:qe(dt,"litre",Se)}}return{unit_type:"unit",quantity_contained:1,variant_name:Se}},z=async ee=>{var je;const Se=(je=ee.target.files)==null?void 0:je[0];if(Se){if(!Se.type.startsWith("image/")){alert("    ");return}if(Se.size>5*1024*1024){alert("      5 ");return}try{C(!0);const qe=`products/${Date.now()}-${Se.name}`,{data:At,error:wt}=await we.storage.from("product-images").upload(qe,Se,{cacheControl:"3600",upsert:!1});if(wt){console.error("Upload error:",wt),alert("  .    .");return}const{data:{publicUrl:He}}=we.storage.from("product-images").getPublicUrl(At.path);Y(He),B({...S,image_url:He}),console.log("Image uploaded successfully:",He)}catch(qe){console.error("Error uploading image:",qe),alert("    ")}finally{C(!1)}}},Be=async ee=>{const Se=String(L).trim();if(Se){K(!0),te(null),V(null);try{const je=await de(Se);V(je);const qe=ye(je.category),At=qe?await re(qe):null;B(wt=>({...wt,name_ar:je.name||wt.name_ar,sku:Se,category_id:At||wt.category_id,image_url:je.image||wt.image_url})),je.image&&Y(je.image),U(wt=>{const He=Ne(je.size);return wt.length===0?[{variant_name:He.variant_name,unit_type:He.unit_type,quantity_contained:He.quantity_contained,barcode:Se,purchase_price:0,price_a:0,price_b:0,price_c:0,price_d:0,price_e:0,stock:0,alert_threshold:10,is_active:!0,is_default:!0}]:wt.length===1&&wt[0].variant_name===""&&wt[0].unit_type==="unit"&&wt[0].quantity_contained===1?[{...wt[0],variant_name:He.variant_name,unit_type:He.unit_type,quantity_contained:He.quantity_contained,barcode:wt[0].barcode||Se}]:wt})}catch(je){console.error("Barcode lookup error:",je),te((je==null?void 0:je.message)||"Barcode lookup failed")}finally{K(!1)}}},Ve=e.filter(ee=>{var Se,je;return((Se=ee.name_ar)==null?void 0:Se.toLowerCase().includes(o.toLowerCase()))||((je=ee.sku)==null?void 0:je.toLowerCase().includes(o.toLowerCase()))}).filter(ee=>c===null?!0:c==="no-family"?!ee.category_id:ee.category_id===c),ne=ee=>ee===0?{text:" ",color:"text-red-700 bg-red-100"}:ee<10?{text:"",color:"text-orange-700 bg-orange-100"}:ee<50?{text:"",color:"text-yellow-700 bg-yellow-100"}:{text:"",color:"text-green-700 bg-green-100"},Me=async()=>{if(!(!x||!_))try{await we.from("products").update({price_a:parseFloat(_)}).eq("id",x.id),await O(),h(!1),y(null),I(""),alert("    ")}catch(ee){console.error("Error updating price:",ee),alert("  ")}},Re=async()=>{if(!(!x||!k))try{await we.from("products").update({stock:x.stock+parseInt(k)}).eq("id",x.id),await O(),u(!1),y(null),T(""),alert("    ")}catch(ee){console.error("Error adding stock:",ee),alert("  ")}},Ye=async ee=>{if(ee.preventDefault(),!!x)try{const Se={name_ar:S.name_ar,sku:S.sku,category_id:S.category_id||null,cost_price:ot(S.cost_price),price_a:ot(S.price_a),price_b:ot(S.price_b),price_c:ot(S.price_c),price_d:ot(S.price_d),price_e:ot(S.price_e),stock:Et(S.quantity_in_stock),image_url:S.image_url||null};let{error:je}=await we.from("products").update(Se).eq("id",x.id);if(je){const Je=String((je==null?void 0:je.message)||"");(String((je==null?void 0:je.code)||"")==="42703"||Je.includes("barcode"))&&(delete Se.barcode,je=(await we.from("products").update(Se).eq("id",x.id)).error)}if(je)throw je;const{data:qe}=await we.from("product_variants").select("id").eq("product_id",x.id),At=(qe||[]).map(Je=>Je.id),wt=R.filter(Je=>Je.id).map(Je=>Je.id),He=At.filter(Je=>!wt.includes(Je));He.length>0&&await we.from("product_variants").delete().in("id",He);for(const Je of R.filter(dt=>dt.id))await we.from("product_variants").update({variant_name:Je.variant_name,unit_type:Je.unit_type,quantity_contained:Je.quantity_contained,barcode:Je.barcode,purchase_price:Je.purchase_price,price_a:Je.price_a,price_b:Je.price_b,price_c:Je.price_c,price_d:Je.price_d,price_e:Je.price_e,stock:Je.stock,alert_threshold:Je.alert_threshold,is_active:Je.is_active,is_default:Je.is_default}).eq("id",Je.id);const ft=R.filter(Je=>!Je.id);if(ft.length>0){const Je=ft.map(dt=>({product_id:x.id,variant_name:dt.variant_name,unit_type:dt.unit_type,quantity_contained:dt.quantity_contained,barcode:dt.barcode,purchase_price:dt.purchase_price,price_a:dt.price_a,price_b:dt.price_b,price_c:dt.price_c,price_d:dt.price_d,price_e:dt.price_e,stock:dt.stock,alert_threshold:dt.alert_threshold,is_active:dt.is_active,is_default:dt.is_default}));await we.from("product_variants").insert(Je)}await O(),v(!1),y(null),B({name_ar:"",sku:"",cost_price:"",price_a:"",price_b:"",price_c:"",price_d:"",price_e:"",quantity_in_stock:"0",image_url:""}),U([]),Y(""),alert("    ")}catch(Se){console.error("Error updating product:",Se),alert(`  : ${Se instanceof Error?Se.message:"Erreur inconnue"}`)}},ze=async ee=>{var Se;y(ee),B({name_ar:ee.name_ar,sku:ee.sku,category_id:ee.category_id||"",cost_price:((Se=ee.cost_price)==null?void 0:Se.toString())||"",price_a:ee.price_a.toString(),price_b:ee.price_b.toString(),price_c:ee.price_c.toString(),price_d:ee.price_d.toString(),price_e:ee.price_e.toString(),quantity_in_stock:ee.stock.toString(),image_url:ee.image_url||""}),Y(ee.image_url||""),v(!0);try{const{data:je,error:qe}=await we.from("product_variants").select("*").eq("product_id",ee.id).order("is_default",{ascending:!1});U(!qe&&je?je:[])}catch(je){console.error("Error loading variants:",je),U([])}},yt=()=>Math.floor(Math.random()*1e12).toString().padStart(12,"0"),mt=()=>{const ee={variant_name:"",unit_type:"unit",quantity_contained:1,barcode:yt(),purchase_price:0,price_a:0,price_b:0,price_c:0,price_d:0,price_e:0,stock:0,alert_threshold:10,is_active:!0,is_default:R.length===0};U([...R,ee])},at=(ee,Se,je)=>{const qe=[...R];qe[ee]={...qe[ee],[Se]:je},Se==="is_default"&&je===!0&&qe.forEach((At,wt)=>{wt!==ee&&(At.is_default=!1)}),U(qe)},it=ee=>{const Se=R.filter((je,qe)=>qe!==ee);R[ee].is_default&&Se.length>0&&(Se[0].is_default=!0),U(Se)},jt=[{value:"unit",label:""},{value:"kg",label:""},{value:"litre",label:""},{value:"carton",label:""},{value:"pack",label:""},{value:"palette",label:""},{value:"sac",label:""}],gt=e.filter(ee=>ee.stock<10).length,pt=e.filter(ee=>ee.stock===0).length,ot=ee=>{const Se=Number(ee);return Number.isFinite(Se)?Se:0},Et=ee=>{const Se=Number.parseInt(ee,10);return Number.isFinite(Se)?Se:0},ht=async ee=>{ee.preventDefault();try{const Se={name_ar:S.name_ar,sku:S.sku,category_id:S.category_id||null,cost_price:ot(S.cost_price),price_a:ot(S.price_a),price_b:ot(S.price_b),price_c:ot(S.price_c),price_d:ot(S.price_d),price_e:ot(S.price_e),stock:Et(S.quantity_in_stock),image_url:S.image_url||null};let{data:je,error:qe}=await we.from("products").insert([Se]).select().single();if(qe){const At=String((qe==null?void 0:qe.message)||"");if(String((qe==null?void 0:qe.code)||"")==="42703"||At.includes("barcode")){delete Se.barcode;const ft=await we.from("products").insert([Se]).select().single();je=ft.data,qe=ft.error}}if(qe)throw qe;if(t(At=>[je,...At]),R.length>0&&je){const At=R.map(He=>({product_id:je.id,variant_name:He.variant_name,unit_type:He.unit_type,quantity_contained:He.quantity_contained,barcode:He.barcode,purchase_price:He.purchase_price,price_a:He.price_a,price_b:He.price_b,price_c:He.price_c,price_d:He.price_d,price_e:He.price_e,stock:He.stock,alert_threshold:He.alert_threshold,is_active:He.is_active,is_default:He.is_default})),{error:wt}=await we.from("product_variants").insert(At);wt&&console.error("Error saving variants:",wt)}B({name_ar:"",sku:"",category_id:"",cost_price:"",price_a:"",price_b:"",price_c:"",price_d:"",price_e:"",quantity_in_stock:"0",image_url:""}),U([]),Y(""),g(!1),D(""),te(null),V(null),alert("    "),await O()}catch(Se){console.error("Error adding product:",Se),alert(`  : ${Se instanceof Error?Se.message:"Erreur inconnue"}`)}},nt=async ee=>{var je,qe,At,wt,He,ft,Je,dt,nr;const Se=(je=ee.target.files)==null?void 0:je[0];if(Se)try{const Kt=await Se.arrayBuffer(),xt=Fy(Kt,{type:"array"}),ir=xt.SheetNames[0],Dr=xt.Sheets[ir],sn=mY.sheet_to_json(Dr,{header:1}).slice(1).filter(Br=>Br.length>0);let Cs={},Rt=0,Fr=0;for(const Br of sn)try{const Tr=(qe=Br[0])==null?void 0:qe.toString().trim(),Vr=(At=Br[1])==null?void 0:At.toString().trim(),yr=(wt=Br[2])==null?void 0:wt.toString().trim(),qr=parseFloat((He=Br[3])==null?void 0:He.toString().replace(/[^\d.]/g,""))||0,Z=parseFloat((ft=Br[4])==null?void 0:ft.toString().replace(/[^\d.]/g,""))||0,pe=parseFloat((Je=Br[5])==null?void 0:Je.toString().replace(/[^\d.]/g,""))||0,Ae=parseFloat((dt=Br[6])==null?void 0:dt.toString().replace(/[^\d.]/g,""))||0,he=parseFloat((nr=Br[7])==null?void 0:nr.toString().replace(/[^\d.]/g,""))||0;if(!Tr||!Vr||!yr){Fr++;continue}let fe=Cs[Tr];if(!fe){const{data:Fe}=await we.from("product_categories").select("id").eq("name_ar",Tr).maybeSingle();if(Fe)fe=Fe.id;else{const{data:Ke}=await we.from("product_categories").insert({name_ar:Tr}).select().single();fe=Ke==null?void 0:Ke.id}Cs[Tr]=fe}const xe={name_ar:yr,sku:Vr,price_a:he,price_b:Ae,price_c:qr,price_d:Z,price_e:pe,stock:0,category_id:fe};await we.from("products").insert(xe),Rt++}catch(Tr){console.error("Error importing row:",Tr),Fr++}await O(),await q(),alert(`   ${Rt}  ${Fr>0?` (${Fr} )`:""}`)}catch(Kt){console.error("Error importing Excel:",Kt),alert("     ")}};return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(kr,{className:"text-white",size:36}),""]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("label",{className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex items-center gap-2 cursor-pointer",children:[n.jsx(Tx,{size:20})," Excel",n.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:nt,className:"hidden"})]}),n.jsxs("button",{onClick:()=>g(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex items-center gap-2",children:[n.jsx(ts,{size:20})," "]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-purple-100 text-sm mb-1",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),n.jsx(kr,{size:32,className:"text-purple-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-100 text-sm mb-1",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:pt})]}),n.jsx(vs,{size:32,className:"text-red-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-100 text-sm mb-1",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:gt})]}),n.jsx(No,{size:32,className:"text-orange-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-100 text-sm mb-1",children:""}),n.jsx("p",{className:"text-2xl font-bold",children:e.length-gt})]}),n.jsx(kr,{size:32,className:"text-green-200"})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:""}),c&&c!=="no-family"&&n.jsx("button",{onClick:()=>A(null),className:"text-sm text-blue-600 hover:text-blue-800",children:" "})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>A(null),className:`px-4 py-2 rounded-lg transition-colors ${c?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-purple-600 text-white"}`,children:["  (",e.length,")"]}),n.jsxs("button",{onClick:()=>A("no-family"),className:`px-4 py-2 rounded-lg transition-colors ${c==="no-family"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["  (",e.filter(ee=>!ee.category_id).length,")"]}),r.map(ee=>{const Se=e.filter(je=>je.category_id===ee.id).length;return n.jsxs("button",{onClick:()=>A(ee.id),className:`px-4 py-2 rounded-lg transition-colors ${c===ee.id?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[ee.name_ar," (",Se,")"]},ee.id)})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"  ...",className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none",value:o,onChange:ee=>l(ee.target.value)})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:a?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):Ve.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "})]})}),n.jsx("tbody",{children:Ve.map(ee=>{const Se=ne(ee.stock),je=ee.price_a*ee.stock;return n.jsxs("tr",{className:"border-b hover:bg-purple-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-gray-800",children:ee.name_ar}),ee.sku&&n.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",ee.sku]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-gray-800",children:[ee.price_a.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`font-bold text-lg ${ee.stock===0?"text-red-600":ee.stock<10?"text-orange-600":"text-green-600"}`,children:ee.stock})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full font-bold text-sm ${Se.color}`,children:Se.text})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-gray-800",children:[je.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>ze(ee),className:"bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-2 rounded-lg text-sm font-bold transition-colors",children:[n.jsx(no,{size:14})," "]}),n.jsx("button",{onClick:()=>{y(ee),I(ee.price_a.toString()),h(!0)},className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-2 rounded-lg text-sm font-bold transition-colors",children:" "}),n.jsxs("button",{onClick:()=>{y(ee),T(""),u(!0)},className:"bg-green-100 hover:bg-green-200 text-green-700 px-3 py-2 rounded-lg text-sm font-bold transition-colors",children:[n.jsx(kr,{size:14})," "]})]})})]},ee.id)})})]})})}),d&&x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>h(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-96",onClick:ee=>ee.stopPropagation(),children:[n.jsx("h3",{className:"text-xl font-bold mb-4",children:"  "}),n.jsx("p",{className:"text-gray-600 mb-4",children:x.name_ar}),n.jsx("input",{type:"number",value:_,onChange:ee=>I(ee.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg mb-4",placeholder:" "}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:Me,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold",children:""}),n.jsx("button",{onClick:()=>h(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-bold",children:""})]})]})}),f&&x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>u(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-96",onClick:ee=>ee.stopPropagation(),children:[n.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),n.jsx("p",{className:"text-gray-600 mb-2",children:x.name_ar}),n.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[" : ",x.stock]}),n.jsx("input",{type:"number",value:k,onChange:ee=>T(ee.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg mb-4",placeholder:" "}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:Re,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold",children:""}),n.jsx("button",{onClick:()=>u(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-bold",children:""})]})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>g(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:ee=>ee.stopPropagation(),children:[n.jsx("h3",{className:"text-xl font-bold mb-6",children:"  "}),n.jsxs("form",{onSubmit:ht,className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"  (Go-UPC)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{ref:E,type:"text",value:L,onChange:ee=>D(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&(ee.preventDefault(),Be())},className:"flex-1 p-3 border-2 border-gray-200 rounded-lg",placeholder:"6111035000058",dir:"ltr"}),n.jsxs("button",{type:"button",onClick:()=>Be(),disabled:Q,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-3 rounded-lg font-bold flex items-center gap-2",children:[n.jsx(Ud,{size:18}),Q?" ...":""]})]}),P&&n.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:P}),J&&n.jsxs("div",{className:"mt-3 flex gap-3 items-start",children:[J.image?n.jsx("img",{src:J.image,alt:J.name,className:"w-20 h-20 object-cover rounded-lg border"}):n.jsx("div",{className:"w-20 h-20 rounded-lg border bg-white flex items-center justify-center",children:n.jsx(kr,{size:22,className:"text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-gray-800",children:J.name||""}),n.jsx("p",{className:"text-sm text-gray-600",children:J.category||""}),J.size&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Size: ",J.size]}),J.brand&&n.jsx("p",{className:"text-xs text-gray-500",children:J.brand})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:S.name_ar,onChange:ee=>B({...S,name_ar:ee.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),n.jsxs("select",{value:S.category_id,onChange:ee=>B({...S,category_id:ee.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg",children:[n.jsx("option",{value:"",children:" "}),r.map(ee=>n.jsx("option",{value:ee.id,children:ee.name_ar},ee.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"SKU"}),n.jsx("input",{type:"text",value:S.sku,onChange:ee=>B({...S,sku:ee.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg",required:!0})]})]}),n.jsxs("div",{className:"mt-6 border-t-2 border-gray-200 pt-6",children:[n.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(Tx,{size:20}),"  "]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"  "}),n.jsx("input",{type:"file",accept:"image/*",onChange:z,className:"hidden",id:"product-image-upload"}),n.jsxs("label",{htmlFor:"product-image-upload",className:"cursor-pointer bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 w-fit transition-colors",children:[n.jsx(Tx,{size:18}),N?" ...":" "]}),N&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-purple-600",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}),"  ..."]})]}),(ie||S.image_url)&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsxs("div",{className:"relative inline-block",children:[n.jsx("img",{src:ie||S.image_url,alt:" ",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"}),n.jsx("button",{type:"button",onClick:()=>{Y(""),B({...S,image_url:""})},className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 shadow-lg transition-colors",title:" ",children:n.jsx(na,{size:14})})]}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"    "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"    "}),n.jsx("input",{type:"url",value:S.image_url,onChange:ee=>{B({...S,image_url:ee.target.value}),ee.target.value&&Y(ee.target.value)},className:"w-full p-3 border-2 border-gray-200 rounded-lg",placeholder:"https://example.com/image.jpg"})]})]})]}),n.jsxs("div",{className:"mt-6 border-t-2 border-gray-200 pt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h4",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Df,{size:20}),"   "]}),n.jsxs("button",{type:"button",onClick:mt,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[n.jsx(ts,{size:18})," "]})]}),R.length===0?n.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[n.jsx(Df,{size:48,className:"mx-auto text-gray-400 mb-3"}),n.jsx("p",{className:"text-gray-500 mb-2",children:"  "}),n.jsx("p",{className:"text-sm text-gray-400",children:"   (  ...)"})]}):n.jsx("div",{className:"space-y-4",children:R.map((ee,Se)=>n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("span",{className:"font-bold text-gray-700",children:[" ",Se+1]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:ee.is_default,onChange:je=>at(Se,"is_default",je.target.checked),className:"w-4 h-4"}),""]}),n.jsx("button",{type:"button",onClick:()=>it(Se),className:"text-red-500 hover:text-red-700 p-1",children:n.jsx(na,{size:18})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" "}),n.jsx("input",{type:"text",value:ee.variant_name,onChange:je=>at(Se,"variant_name",je.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",placeholder:" /  12...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" "}),n.jsx("select",{value:ee.unit_type,onChange:je=>at(Se,"unit_type",je.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",children:jt.map(je=>n.jsx("option",{value:je.value,children:je.label},je.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" "}),n.jsx("input",{type:"number",value:ee.quantity_contained,onChange:je=>at(Se,"quantity_contained",parseFloat(je.target.value)||1),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",min:"0.001",step:"0.001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:""}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"text",value:ee.barcode,onChange:je=>at(Se,"barcode",je.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm",required:!0}),n.jsx("button",{type:"button",onClick:()=>at(Se,"barcode",yt()),className:"px-2 py-1 bg-gray-200 hover:bg-gray-300 rounded-lg",title:" ",children:n.jsx(Ud,{size:16})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" "}),n.jsx("input",{type:"number",step:"0.01",value:ee.purchase_price,onChange:je=>at(Se,"purchase_price",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" A"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_a,onChange:je=>at(Se,"price_a",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" B"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_b,onChange:je=>at(Se,"price_b",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" C"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_c,onChange:je=>at(Se,"price_c",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" D"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_d,onChange:je=>at(Se,"price_d",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" E"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_e,onChange:je=>at(Se,"price_e",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:""}),n.jsx("input",{type:"number",value:ee.stock,onChange:je=>at(Se,"stock",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]})]})]},Se))})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-bold",children:" "}),n.jsx("button",{type:"button",onClick:()=>{g(!1),U([])},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-bold",children:""})]})]})]})}),w&&x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>v(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:ee=>ee.stopPropagation(),children:[n.jsx("h3",{className:"text-xl font-bold mb-6",children:" "}),n.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:S.name_ar,onChange:ee=>B({...S,name_ar:ee.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"SKU"}),n.jsx("input",{type:"text",value:S.sku,onChange:ee=>B({...S,sku:ee.target.value}),className:"w-full p-3 border-2 border-gray-200 rounded-lg",required:!0})]})]}),n.jsxs("div",{className:"mt-6 border-t-2 border-gray-200 pt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h4",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Df,{size:20}),"   "]}),n.jsxs("button",{type:"button",onClick:mt,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[n.jsx(ts,{size:18})," "]})]}),R.length===0?n.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[n.jsx(Df,{size:48,className:"mx-auto text-gray-400 mb-3"}),n.jsx("p",{className:"text-gray-500 mb-2",children:"  "}),n.jsx("p",{className:"text-sm text-gray-400",children:"   (  ...)"})]}):n.jsx("div",{className:"space-y-4",children:R.map((ee,Se)=>n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("span",{className:"font-bold text-gray-700",children:[" ",Se+1," ",ee.id?"()":"()"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:ee.is_default,onChange:je=>at(Se,"is_default",je.target.checked),className:"w-4 h-4"}),""]}),n.jsx("button",{type:"button",onClick:()=>it(Se),className:"text-red-500 hover:text-red-700 p-1",children:n.jsx(na,{size:18})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" "}),n.jsx("input",{type:"text",value:ee.variant_name,onChange:je=>at(Se,"variant_name",je.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",placeholder:" /  12...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" "}),n.jsx("select",{value:ee.unit_type,onChange:je=>at(Se,"unit_type",je.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",children:jt.map(je=>n.jsx("option",{value:je.value,children:je.label},je.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" "}),n.jsx("input",{type:"number",value:ee.quantity_contained,onChange:je=>at(Se,"quantity_contained",parseFloat(je.target.value)||1),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",min:"0.001",step:"0.001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:""}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"text",value:ee.barcode,onChange:je=>at(Se,"barcode",je.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm",required:!0}),n.jsx("button",{type:"button",onClick:()=>at(Se,"barcode",yt()),className:"px-2 py-1 bg-gray-200 hover:bg-gray-300 rounded-lg",title:" ",children:n.jsx(Ud,{size:16})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-3 mt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" "}),n.jsx("input",{type:"number",step:"0.01",value:ee.purchase_price,onChange:je=>at(Se,"purchase_price",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" A"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_a,onChange:je=>at(Se,"price_a",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" B"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_b,onChange:je=>at(Se,"price_b",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" C"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_c,onChange:je=>at(Se,"price_c",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" D"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_d,onChange:je=>at(Se,"price_d",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" E"}),n.jsx("input",{type:"number",step:"0.01",value:ee.price_e,onChange:je=>at(Se,"price_e",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:""}),n.jsx("input",{type:"number",value:ee.stock,onChange:je=>at(Se,"stock",parseFloat(je.target.value)||0),className:"w-full p-2 border border-gray-300 rounded-lg text-sm"})]})]})]},Se))})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-bold",children:" "}),n.jsx("button",{type:"button",onClick:()=>{v(!1),U([])},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-bold",children:""})]})]})]})})]})}function xY(){const[e,t]=H.useState([]),[r,s]=H.useState([]),[a,i]=H.useState([]),[o,l]=H.useState([]),[c,A]=H.useState(null),[d,h]=H.useState(!0),[f,u]=H.useState(""),[p,g]=H.useState(null),[w,v]=H.useState("all");H.useEffect(()=>{x(),y(),_()},[]),H.useEffect(()=>{c&&I(c)},[c]);const x=async()=>{h(!0);try{const{data:D,error:Q}=await we.from("products").select("id, name_ar, name_en, sku, stock, price_a, cost_price, image_url, category_id").order("name_ar");if(Q)throw Q;t(D||[])}catch(D){console.error("Error loading products:",D)}finally{h(!1)}},y=async()=>{try{const{data:D,error:Q}=await we.from("product_categories").select("*").order("name_ar");if(Q)throw Q;s(D||[])}catch(D){console.error("Error loading categories:",D)}},_=async()=>{try{const{data:D,error:Q}=await we.from("warehouses").select("*").eq("is_active",!0).order("name");if(Q)throw Q;i(D||[]),D&&D.length>0&&!c&&A(D[0].id)}catch(D){console.error("Error loading warehouses:",D)}},I=async D=>{h(!0);try{const{data:Q,error:K}=await we.from("warehouse_stock").select(`
          *,
          product:products(id, name_ar, name_en, sku, price_a, cost_price, image_url, category_id)
        `).eq("warehouse_id",D).order("product(name_ar)");if(K)throw K;l(Q||[])}catch(Q){console.error("Error loading warehouse stock:",Q)}finally{h(!1)}},k=c?o.map(D=>D.product):e,T=k.filter(D=>{var Q,K;return((Q=D.name_ar)==null?void 0:Q.toLowerCase().includes(f.toLowerCase()))||((K=D.sku)==null?void 0:K.toLowerCase().includes(f.toLowerCase()))}).filter(D=>{var K;if(p&&D.category_id!==p)return!1;const Q=c?((K=o.find(P=>P.product_id===D.id))==null?void 0:K.quantity)||0:D.stock;return w==="low"?Q>0&&Q<10:w==="out"?Q===0:!0}),S=c?o.reduce((D,Q)=>D+Q.quantity,0):e.reduce((D,Q)=>D+Q.stock,0),B=c?o.filter(D=>D.quantity>0&&D.quantity<10).length:e.filter(D=>D.stock>0&&D.stock<10).length,R=c?o.filter(D=>D.quantity===0).length:e.filter(D=>D.stock===0).length,U=c?o.reduce((D,Q)=>{const K=Q.product.cost_price||Q.product.price_a*.7;return D+Q.quantity*K},0):e.reduce((D,Q)=>D+Q.stock*(Q.cost_price||Q.price_a*.7),0),L=D=>D===0?{text:" ",color:"text-red-700 bg-red-100"}:D<10?{text:"",color:"text-orange-700 bg-orange-100"}:D<50?{text:"",color:"text-yellow-700 bg-yellow-100"}:{text:"",color:"text-green-700 bg-green-100"};return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(kr,{className:"text-white",size:36}),""]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(rA,{className:"text-gray-600",size:20}),n.jsx("label",{className:"text-gray-700 font-medium",children:" :"}),n.jsxs("select",{value:c||"",onChange:D=>A(D.target.value||null),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-teal-500 focus:outline-none",children:[n.jsx("option",{value:"",children:"  (products.stock)"}),a.map(D=>n.jsx("option",{value:D.id,children:D.name},D.id))]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-teal-100 text-sm mb-1",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:S})]}),n.jsx(kr,{size:32,className:"text-teal-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-100 text-sm mb-1",children:""}),n.jsx("p",{className:"text-2xl font-bold",children:B})]}),n.jsx(_D,{size:32,className:"text-orange-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-100 text-sm mb-1",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:R})]}),n.jsx(fg,{size:32,className:"text-red-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-purple-100 text-sm mb-1",children:" "}),n.jsxs("p",{className:"text-2xl font-bold",children:[U.toFixed(2)," MAD"]})]}),n.jsx(No,{size:32,className:"text-purple-200"})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:""}),p&&n.jsx("button",{onClick:()=>g(null),className:"text-sm text-blue-600 hover:text-blue-800",children:" "})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>g(null),className:`px-4 py-2 rounded-lg transition-colors ${p?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-teal-600 text-white"}`,children:["  (",k.length,")"]}),r.map(D=>{const Q=k.filter(K=>K.category_id===D.id).length;return n.jsxs("button",{onClick:()=>g(D.id),className:`px-4 py-2 rounded-lg transition-colors ${p===D.id?"bg-teal-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[D.name_ar," (",Q,")"]},D.id)})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"  ...",value:f,onChange:D=>u(D.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-teal-500 focus:outline-none"})]}),n.jsxs("select",{value:w,onChange:D=>v(D.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-teal-500 focus:outline-none",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"low",children:" "}),n.jsx("option",{value:"out",children:" "})]}),n.jsx("button",{onClick:()=>{u(""),v("all")},className:"px-4 py-3 border-2 border-gray-200 rounded-lg hover:bg-gray-50",children:" "})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:d?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):T.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-teal-600 to-teal-700 text-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"SKU"}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""})]})}),n.jsx("tbody",{children:T.map(D=>{var te;const Q=c?((te=o.find(J=>J.product_id===D.id))==null?void 0:te.quantity)||0:D.stock,K=L(Q),P=Q*(D.cost_price||D.price_a*.7);return n.jsxs("tr",{className:"border-b hover:bg-teal-50 transition-colors",children:[n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("div",{className:"font-bold text-gray-800",children:D.name_ar}),D.name_en&&n.jsx("div",{className:"text-sm text-gray-500",children:D.name_en})]}),n.jsx("td",{className:"px-6 py-4 text-gray-600",children:D.sku}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`font-bold text-lg ${Q===0?"text-red-600":Q<10?"text-orange-600":"text-green-600"}`,children:Q})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${K.color}`,children:K.text})}),n.jsxs("td",{className:"px-6 py-4 font-bold text-gray-800",children:[P.toFixed(2)," MAD"]})]},D.id)})})]})})})]})}function vY(){const[e,t]=H.useState([]),[r,s]=H.useState(!0),[a,i]=H.useState(""),[o,l]=H.useState("unpaid"),[c,A]=H.useState(!1),[d,h]=H.useState(null),[f,u]=H.useState(""),[p,g]=H.useState("cash"),[w,v]=H.useState(""),[x,y]=H.useState(""),[_,I]=H.useState(""),[k,T]=H.useState(""),[S,B]=H.useState(""),[R,U]=H.useState(""),L=["Attijariwafa Bank","Banque Populaire","BMCE Bank","CIH Bank","Crdit Agricole","Crdit du Maroc","Socit Gnrale","BMCI","Al Barid Bank","Autre"];H.useEffect(()=>{D()},[]);const D=async()=>{s(!0);try{const{data:Y,error:N}=await we.from("invoices").select(`
          *,
          payments (
            amount,
            payment_method,
            status,
            payment_date,
            created_at
          )
        `).order("created_at",{ascending:!1});if(N)throw N;const C=(Y||[]).map(E=>{const O=Array.isArray(E.payments)?E.payments:[],q=O.filter(z=>(z==null?void 0:z.status)==="completed").reduce((z,Be)=>z+Number((Be==null?void 0:Be.amount)||0),0),se=Number(E.paid_amount||0),ye=Number(E.total_amount||0),re=se>0?se:q,de=Math.max(0,ye-re),Ne=O.slice().sort((z,Be)=>{const Ve=new Date((z==null?void 0:z.created_at)||(z==null?void 0:z.payment_date)||0).getTime();return new Date((Be==null?void 0:Be.created_at)||(Be==null?void 0:Be.payment_date)||0).getTime()-Ve})[0];return{...E,paid_amount:re,remaining_amount:de,payment_method:(Ne==null?void 0:Ne.payment_method)||null,status:de===0?"paid":re>0?"partial":E.status||"sent"}});t(C)}catch(Y){console.error("Error loading invoices:",Y)}finally{s(!1)}},Q=e.filter(Y=>{const N=(Y.client_name||"").toLowerCase().includes(a.toLowerCase())||(Y.company_name_ar||"").toLowerCase().includes(a.toLowerCase())||(Y.invoice_number||"").toLowerCase().includes(a.toLowerCase());let C=!0;return o==="unpaid"?C=(Y.paid_amount||0)===0:o==="paid"?C=(Y.remaining_amount||0)===0:o==="partial"?C=(Y.paid_amount||0)>0&&(Y.remaining_amount||0)>0:o!=="all"&&(C=!1),N&&C}),K=(Y,N)=>Y===0?n.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(Kr,{size:14})," "]}):N>0&&Y>0?n.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(Hr,{size:14})," "]}):n.jsxs("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(vs,{size:14})," "]}),P=async()=>{if(!d||!f||parseFloat(f)<=0){alert("   ");return}if(parseFloat(f)>(d.remaining_amount||0)){alert("   ");return}try{if(!d||!f||parseFloat(f)<=0){alert("   ");return}if(p==="check"){if(!w.trim()){alert("   ");return}if(!x){alert("  ");return}if(!_){alert("   ");return}}if(p==="bank_transfer"){if(!k){alert("  ");return}if(!S.trim()){alert("   ");return}if(!R){alert("   ");return}}const N=parseFloat(f),E=(d.paid_amount||0)+N,O=d.total_amount||0,q=E>=O?"paid":"partial",se=p,{error:ye}=await we.from("invoices").update({paid_amount:E}).eq("id",d.id);if(ye)throw ye;const re={invoice_id:d.id,order_id:d.order_id||null,payment_number:`PAY-${Date.now()}`,client_id:d.client_id,amount:N,payment_method:se,payment_date:new Date().toISOString().split("T")[0],status:"completed"};p==="check"&&(re.check_number=w,re.check_bank=x,re.check_deposit_date=_),p==="bank_transfer"&&(re.transfer_bank=k,re.transfer_reference=S,re.transfer_date=R);const{error:de}=await we.from("payments").insert(re);de&&console.warn("Could not save payment details:",de);try{const Ne=E>=O?"paid":E>0?"partial":"pending",z=d.order_id;if(z)await we.from("orders").update({payment_status:Ne,payment_method:se}).eq("id",z);else if(d.order_number){const{data:Be}=await we.from("orders").select("id").eq("order_number",d.order_number).maybeSingle();Be!=null&&Be.id&&await we.from("orders").update({payment_status:Ne,payment_method:se}).eq("id",Be.id)}}catch(Ne){console.warn("Could not update order payment status from invoice payment:",Ne)}await D(),A(!1),h(null),u(""),g("cash"),v(""),y(""),I(""),T(""),B(""),U(""),alert("    "),window.dispatchEvent(new CustomEvent("payment-updated",{detail:{invoiceId:d.id}}))}catch(N){console.error("Error processing payment:",N),alert("  ")}},te=e.reduce((Y,N)=>Y+(N.remaining_amount||0),0),J=e.filter(Y=>(Y.remaining_amount||0)>0).length,V=e.reduce((Y,N)=>Y+(N.paid_amount||0),0),ie=Y=>{if(!Y)return"-";switch(Y){case"cash":return n.jsxs("span",{className:"flex items-center gap-1 text-green-700 font-semibold",children:[n.jsx(Sr,{size:16}),""]});case"check":return n.jsxs("span",{className:"flex items-center gap-1 text-blue-700 font-semibold",children:[n.jsx(Gs,{size:16}),""]});case"card":return n.jsxs("span",{className:"flex items-center gap-1 text-purple-700 font-semibold",children:[n.jsx(hA,{size:16}),""]});case"bank_transfer":return n.jsxs("span",{className:"flex items-center gap-1 text-indigo-700 font-semibold",children:[n.jsx(Gs,{size:16})," "]});case"credit":return n.jsxs("span",{className:"flex items-center gap-1 text-orange-700 font-semibold",children:[n.jsx(Hr,{size:16}),""]});case"mobile_payment":return n.jsxs("span",{className:"flex items-center gap-1 text-teal-700 font-semibold",children:[n.jsx(Sr,{size:16})," "]});default:return Y}};return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(hA,{className:"text-white",size:36}),""]}),n.jsxs("button",{onClick:()=>window.location.href="/pos",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex items-center gap-2",children:[n.jsx(ts,{size:20})," "]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-100 text-sm mb-1",children:" "}),n.jsxs("p",{className:"text-2xl font-bold",children:[V.toFixed(2)," MAD"]})]}),n.jsx(Kr,{size:32,className:"text-green-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-red-100 text-sm mb-1",children:" "}),n.jsxs("p",{className:"text-2xl font-bold",children:[te.toFixed(2)," MAD"]})]}),n.jsx(vs,{size:32,className:"text-red-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-100 text-sm mb-1",children:"  "}),n.jsx("p",{className:"text-2xl font-bold",children:J})]}),n.jsx(Hr,{size:32,className:"text-yellow-200"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-100 text-sm mb-1",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:Q.length})]}),n.jsx(Sr,{size:32,className:"text-blue-200"})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"    ...",className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",value:a,onChange:Y=>i(Y.target.value)})]}),n.jsxs("select",{value:o,onChange:Y=>l(Y.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",children:[n.jsx("option",{value:"unpaid",children:" "}),n.jsx("option",{value:"paid",children:" "}),n.jsx("option",{value:"partial",children:" "}),n.jsx("option",{value:"all",children:" "})]}),n.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-600",children:[Q.length,"  ( ",e.length," )"]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):Q.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""})]})}),n.jsx("tbody",{children:Q.map(Y=>n.jsxs("tr",{className:"border-b hover:bg-green-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-gray-800",children:["#",Y.invoice_number||Y.id.slice(0,8)]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"font-semibold text-gray-700",children:Y.client_name||Y.company_name_ar||" "})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-gray-800",children:[(Y.total_amount||0).toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-green-600",children:[(Y.paid_amount||0).toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`font-bold text-lg ${(Y.remaining_amount||0)>0?"text-red-600":"text-green-600"}`,children:[(Y.remaining_amount||0).toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-6 py-4",children:ie(Y.payment_method)}),n.jsx("td",{className:"px-6 py-4",children:K(Y.remaining_amount||0,Y.paid_amount||0)}),n.jsx("td",{className:"px-6 py-4",children:(Y.remaining_amount||0)>0&&n.jsx("button",{onClick:()=>{h(Y),u((Y.remaining_amount||0).toString()),A(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold transition-colors",children:""})})]},Y.id))})]})})}),c&&d&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>A(!1),children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-96",onClick:Y=>Y.stopPropagation(),children:[n.jsx("h3",{className:"text-xl font-bold mb-4",children:" "}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-gray-600",children:[": ",d.invoice_number]}),n.jsxs("p",{className:"text-gray-600",children:[": ",d.client_name||d.company_name_ar||" "]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[" : ",(d.remaining_amount||0).toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),n.jsx("input",{type:"number",value:f,onChange:Y=>u(Y.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg",placeholder:"",max:d.remaining_amount||0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsxs("select",{value:p,onChange:Y=>g(Y.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg",children:[n.jsx("option",{value:"cash",children:""}),n.jsx("option",{value:"card",children:""}),n.jsx("option",{value:"bank_transfer",children:" "}),n.jsx("option",{value:"check",children:""})]})]}),p==="check"&&n.jsxs("div",{className:"space-y-3 border-t pt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:w,onChange:Y=>v(Y.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg",placeholder:"  ",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),n.jsxs("select",{value:x,onChange:Y=>y(Y.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg",required:!0,children:[n.jsx("option",{value:"",children:" "}),L.map(Y=>n.jsx("option",{value:Y,children:Y},Y))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"date",value:_,onChange:Y=>I(Y.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg",required:!0})]})]}),p==="bank_transfer"&&n.jsxs("div",{className:"space-y-3 border-t pt-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),n.jsxs("select",{value:k,onChange:Y=>T(Y.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg",required:!0,children:[n.jsx("option",{value:"",children:" "}),L.map(Y=>n.jsx("option",{value:Y,children:Y},Y))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:S,onChange:Y=>B(Y.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg",placeholder:"   ",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"date",value:R,onChange:Y=>U(Y.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg",required:!0})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:P,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold",children:" "}),n.jsx("button",{onClick:()=>A(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-bold",children:""})]})]})})]})}function yY(){const[e,t]=H.useState([]),[r,s]=H.useState(!0),[a,i]=H.useState(""),[o,l]=H.useState("all"),[c,A]=H.useState(!1),[d,h]=H.useState(!1),[f,u]=H.useState(!1),[p,g]=H.useState(null),[w,v]=H.useState(null),[x,y]=H.useState({name_ar:"",name_en:"",contact_person_name:"",contact_person_email:"",contact_person_phone:"",email:"",phone:"",address_ar:"",address_en:"",city:"",payment_terms_ar:"",payment_terms_en:"",is_active:!0}),[_,I]=H.useState({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"cash",notes:""});H.useEffect(()=>{k()},[]);const k=async()=>{try{s(!0);const{data:Q,error:K}=await we.from("suppliers").select("*").order("created_at",{ascending:!1});if(K)throw K;t(Q||[])}catch(Q){console.error("Error fetching suppliers:",Q)}finally{s(!1)}},T=async Q=>{Q.preventDefault();try{const K={...x,updated_at:new Date().toISOString()};if(p){const{error:P}=await we.from("suppliers").update(K).eq("id",p.id);if(P)throw P}else{const{error:P}=await we.from("suppliers").insert({...K,created_at:new Date().toISOString()});if(P)throw P}h(!1),g(null),R(),k()}catch(K){console.error("Error saving supplier:",K),alert("Erreur lors de la sauvegarde du fournisseur")}},S=async Q=>{if(confirm(`tes-vous sr de vouloir supprimer le fournisseur ${Q.name_ar}?`))try{const{error:K}=await we.from("suppliers").delete().eq("id",Q.id);if(K)throw K;k()}catch(K){console.error("Error deleting supplier:",K),alert("Erreur lors de la suppression du fournisseur")}},B=async()=>{if(!w||!_.amount){alert("   ");return}try{const{error:Q}=await we.from("supplier_payments").insert({supplier_id:w.id,amount:parseFloat(_.amount),payment_date:_.payment_date,payment_method:_.payment_method,notes:_.notes});if(Q)throw Q;u(!1),v(null),I({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"cash",notes:""}),alert("    ")}catch(Q){console.error("Error recording payment:",Q),alert("     ")}},R=()=>{y({name_ar:"",name_en:"",contact_person_name:"",contact_person_email:"",contact_person_phone:"",email:"",phone:"",address_ar:"",address_en:"",city:"",payment_terms_ar:"",payment_terms_en:"",is_active:!0})},U=Q=>{g(Q),y({name_ar:Q.name_ar,name_en:Q.name_en||"",contact_person_name:Q.contact_person_name||Q.contact_person||"",contact_person_email:Q.contact_person_email||Q.email||"",contact_person_phone:Q.contact_person_phone||Q.phone||"",email:Q.email||Q.contact_person_email||"",phone:Q.phone||Q.contact_person_phone||"",address_ar:Q.address_ar||"",address_en:Q.address_en||"",city:Q.city||"",payment_terms_ar:Q.payment_terms_ar||"",payment_terms_en:Q.payment_terms_en||"",is_active:Q.is_active}),h(!0)},L=H.useMemo(()=>{let Q=e;const K=a.trim().toLowerCase();return K&&(Q=Q.filter(P=>{const te=String(P.name_ar||"").toLowerCase(),J=String(P.contact_person_name||P.contact_person||"").toLowerCase(),V=String(P.contact_person_email||P.email||"").toLowerCase(),ie=String(P.contact_person_phone||P.phone||"").toLowerCase();return te.includes(K)||J.includes(K)||V.includes(K)||ie.includes(K)})),o==="active"?Q=Q.filter(P=>P.is_active):o==="inactive"&&(Q=Q.filter(P=>!P.is_active)),Q},[e,a,o]),D=H.useMemo(()=>{const Q=e.length,K=e.filter(te=>te.is_active).length,P=e.filter(te=>!te.is_active).length;return{total:Q,active:K,inactive:P}},[e]);return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:""}),n.jsx("p",{className:"text-white mt-2",children:"  "})]}),n.jsxs("button",{onClick:()=>{g(null),R(),h(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-blue-700",children:[n.jsx(ts,{className:"w-5 h-5"})," "]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold",children:D.total})]}),n.jsx(rA,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:""}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:D.active})]}),n.jsx(rA,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-sm",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-gray-600",children:D.inactive})]}),n.jsx(rA,{className:"w-8 h-8 text-gray-500"})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"  ...",value:a,onChange:Q=>i(Q.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("select",{value:o,onChange:Q=>l(Q.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"active",children:""}),n.jsx("option",{value:"inactive",children:" "})]}),n.jsx("button",{onClick:()=>{i(""),l("all")},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:" "})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:r?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-4 py-8 text-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})}):L.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"  "})}):L.map(Q=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4",children:n.jsx("div",{children:n.jsx("p",{className:"font-medium",children:Q.name_ar})})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("p",{className:"font-medium",children:Q.contact_person_name||Q.contact_person||"-"})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(FD,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{children:Q.contact_person_email||Q.email||"-"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Uh,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{children:Q.contact_person_phone||Q.phone||"-"})]})]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(bA,{className:"w-4 h-4 text-gray-400 mt-0.5"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{children:Q.address_ar||Q.address_en||Q.address||"-"}),n.jsx("p",{children:Q.city||"-"})]})]})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Q.is_active?"":" "})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{v(Q),A(!0)},className:"text-blue-600 hover:text-blue-800",title:" ",children:n.jsx(la,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{v(Q),u(!0)},className:"text-green-600 hover:text-green-800",title:" ",children:n.jsx(Sr,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>U(Q),className:"text-green-600 hover:text-green-800",title:"",children:n.jsx(no,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S(Q),className:"text-red-600 hover:text-red-800",title:"",children:n.jsx(na,{className:"w-4 h-4"})})]})})]},Q.id))})]})})}),c&&w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:" "}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",w.name_ar]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:" :"})," ",w.contact_person_name||w.contact_person||"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:" :"})," ",w.contact_person_email||w.email||"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",w.contact_person_phone||w.phone||"-"]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:""}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",w.address_ar||w.address_en||w.address||"-"]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"})," ",w.city||"-"]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:" "}),n.jsx("div",{className:"space-y-2",children:n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:" :"})," ",w.payment_terms_ar]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:""}),n.jsx("div",{className:"space-y-2",children:n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:":"}),n.jsx("span",{className:`mr-2 px-2 py-1 text-xs rounded-full ${w.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.is_active?"":" "})]})})]})]}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsx("button",{onClick:()=>{A(!1),v(null)},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:""})})]})}),d&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:p?" ":" "}),n.jsxs("form",{onSubmit:T,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  () *"}),n.jsx("input",{type:"text",required:!0,value:x.name_ar,onChange:Q=>y({...x,name_ar:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  (English)"}),n.jsx("input",{type:"text",value:x.name_en,onChange:Q=>y({...x,name_en:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsx("input",{type:"text",value:x.contact_person_name,onChange:Q=>y({...x,contact_person_name:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsx("input",{type:"email",value:x.email,onChange:Q=>y({...x,email:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("input",{type:"tel",value:x.phone,onChange:Q=>y({...x,phone:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  ()"}),n.jsx("input",{type:"text",value:x.payment_terms_ar,onChange:Q=>y({...x,payment_terms_ar:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  (English)"}),n.jsx("input",{type:"text",value:x.payment_terms_en,onChange:Q=>y({...x,payment_terms_en:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" ()"}),n.jsx("input",{type:"text",value:x.address_ar,onChange:Q=>y({...x,address_ar:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" (English)"}),n.jsx("input",{type:"text",value:x.address_en,onChange:Q=>y({...x,address_en:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("input",{type:"text",value:x.city,onChange:Q=>y({...x,city:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"is_active",checked:x.is_active,onChange:Q=>y({...x,is_active:Q.target.checked}),className:"ml-2"}),n.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:""})]}),n.jsxs("div",{className:"flex gap-4 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{h(!1),g(null),R()},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:""}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:p?"":""})]})]})]})}),f&&w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),n.jsx("div",{className:"mb-4",children:n.jsxs("p",{className:"text-sm text-gray-600",children:[": ",n.jsx("span",{className:"font-bold",children:w.name_ar})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsx("input",{type:"number",step:"0.01",required:!0,value:_.amount,onChange:Q=>I({..._,amount:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"date",required:!0,value:_.payment_date,onChange:Q=>I({..._,payment_date:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsxs("select",{value:_.payment_method,onChange:Q=>I({..._,payment_method:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[n.jsx("option",{value:"cash",children:""}),n.jsx("option",{value:"transfer",children:" "}),n.jsx("option",{value:"check",children:""}),n.jsx("option",{value:"card",children:""}),n.jsx("option",{value:"other",children:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("textarea",{value:_.notes,onChange:Q=>I({..._,notes:Q.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",rows:3,placeholder:" ..."})]})]}),n.jsxs("div",{className:"flex gap-4 justify-end mt-6",children:[n.jsx("button",{onClick:()=>{u(!1),v(null),I({amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"cash",notes:""})},className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:""}),n.jsx("button",{onClick:B,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:" "})]})]})})]})}function wY(){const[e,t]=H.useState([]),[r,s]=H.useState([]),[a,i]=H.useState([]),[o,l]=H.useState([]),[c,A]=H.useState([]),[d,h]=H.useState(!0),[f,u]=H.useState(""),[p,g]=H.useState(!1),[w,v]=H.useState(null),[x,y]=H.useState([]),[_,I]=H.useState(!1),[k,T]=H.useState(null),[S,B]=H.useState({quantity:1,unit_price:0}),[R,U]=H.useState({supplier_id:"",warehouse_id:"",purchase_date:new Date().toISOString().split("T")[0],status:"received",tax_rate:"0",payment_type:"cash",paid_amount:"",bank_name:"",check_number:"",check_date:"",check_deposit_date:"",credit_due_date:"",notes:""});H.useEffect(()=>{L(),K(),P(),D(),Q()},[]);const L=async()=>{h(!0);try{const{data:re,error:de}=await we.from("purchases").select("*, supplier:suppliers(*)").order("purchase_date",{ascending:!1});if(de)throw de;t(re||[])}catch(re){console.error("Error loading purchases:",re)}finally{h(!1)}},D=async()=>{try{const{data:re,error:de}=await we.from("warehouses").select("id, name, is_active").eq("is_active",!0).order("name");if(de)throw de;const Ne=re||[];l(Ne),!R.warehouse_id&&Ne.length>0&&U(z=>({...z,warehouse_id:Ne[0].id}))}catch(re){console.error("Error loading warehouses:",re)}},Q=async()=>{try{const{data:re,error:de}=await we.from("suppliers").select("*").order("name_ar");if(de)throw de;A(re||[])}catch(re){console.error("Error loading suppliers:",re)}},K=async()=>{try{const{data:re,error:de}=await we.from("products").select("id, name_ar, sku, stock, cost_price, price_a, category_id, image_url").order("name_ar");if(de)throw de;s(re||[])}catch(re){console.error("Error loading products:",re)}},P=async()=>{try{const{data:re,error:de}=await we.from("categories").select("id, name_ar").order("name_ar");if(de)throw de;i(re||[])}catch(re){console.error("Error loading categories:",re)}},te=w?r.filter(re=>re.category_id===w):r,J=re=>{if(x.find(Ne=>Ne.product_id===re.id))y(x.map(Ne=>Ne.product_id===re.id?{...Ne,quantity:Ne.quantity+1,line_total:(Ne.quantity+1)*Ne.unit_price}:Ne));else{const Ne=re.cost_price||re.price_a;y([...x,{product_id:re.id,product_name_ar:re.name_ar,product_sku:re.sku,quantity:1,unit_price:Ne,line_total:Ne}])}},V=re=>{y(x.filter(de=>de.product_id!==re))},ie=re=>{T(re),B({quantity:re.quantity,unit_price:re.unit_price}),I(!0)},Y=()=>{k&&(S.quantity<=0?V(k.product_id):y(x.map(re=>re.product_id===k.product_id?{...re,quantity:S.quantity,unit_price:S.unit_price,line_total:S.quantity*S.unit_price}:re)),I(!1),T(null))},N=x.reduce((re,de)=>re+de.line_total,0),C=parseFloat(R.tax_rate)||0,E=N*(C/100),O=N+E,q=async()=>{if(x.length===0){alert("    ");return}if(!R.supplier_id){alert("  ");return}try{const re=`ACH-${Date.now()}`,de=R.paid_amount?parseFloat(R.paid_amount):0,Ne=Math.max(0,O-de),z=Ne===0?"paid":de>0?"partial":"pending",Be={purchase_number:re,supplier_id:R.supplier_id,purchase_date:R.purchase_date,status:R.status,items:x,subtotal:N,tax_rate:C,tax_amount:E,total_amount:O,payment_type:R.payment_type,paid_amount:de,remaining_amount:Ne,payment_status:z,notes:R.notes};R.payment_type==="check"&&(Be.check_number=R.check_number,Be.check_date=R.check_date,Be.check_deposit_date=R.check_deposit_date),R.payment_type==="transfer"&&(Be.bank_name=R.bank_name),R.payment_type==="credit"&&(Be.credit_due_date=R.credit_due_date);const{error:Ve}=await we.from("purchases").insert([Be]);if(Ve)throw Ve;alert("    "),g(!1),y([]),v(null),U({supplier_id:"",warehouse_id:o.length>0?o[0].id:"",purchase_date:new Date().toISOString().split("T")[0],status:"received",tax_rate:"0",payment_type:"cash",paid_amount:"",bank_name:"",check_number:"",check_date:"",check_deposit_date:"",credit_due_date:"",notes:""}),await L()}catch(re){console.error("Error creating purchase:",re),alert("     ")}},se=e.filter(re=>{var de,Ne,z,Be;return((de=re.items)==null?void 0:de.some(Ve=>{var ne,Me;return((ne=Ve.product_name_ar)==null?void 0:ne.toLowerCase().includes(f.toLowerCase()))||((Me=Ve.product_sku)==null?void 0:Me.toLowerCase().includes(f.toLowerCase()))}))||((Ne=re.purchase_number)==null?void 0:Ne.toLowerCase().includes(f.toLowerCase()))||((Be=(z=re.supplier)==null?void 0:z.name_ar)==null?void 0:Be.toLowerCase().includes(f.toLowerCase()))}),ye=re=>{switch(re){case"received":return n.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(Kr,{size:14}),""]});case"pending":return n.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(ym,{size:14})," "]});case"cancelled":return n.jsxs("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold text-sm flex items-center gap-1",children:[n.jsx(vs,{size:14}),""]});default:return n.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full font-bold text-sm",children:re})}};return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(ni,{className:"text-white",size:36})," "]}),n.jsx("p",{className:"text-white mt-2",children:"   "})]}),n.jsxs("button",{onClick:()=>g(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700",children:[n.jsx(ts,{className:"w-5 h-5"}),"  "]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"  ...",className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",value:f,onChange:re=>u(re.target.value)})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:d?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):se.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"   "}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:""}),n.jsx("th",{className:"px-6 py-4 text-right font-bold",children:" "})]})}),n.jsx("tbody",{children:se.map(re=>{var de;return n.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 font-bold text-gray-800",children:re.purchase_number}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:(de=re.supplier)==null?void 0:de.name_ar}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(re.purchase_date).toLocaleDateString("ar-MA")}),n.jsxs("td",{className:"px-6 py-4 font-bold text-gray-800",children:[re.total_amount.toFixed(2)," MAD"]}),n.jsx("td",{className:"px-6 py-4",children:ye(re.status)}),n.jsx("td",{className:"px-6 py-4",children:ye(re.payment_status)})]},re.id)})})]})})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-green-700 text-white p-6 flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"  "}),n.jsx("button",{onClick:()=>{g(!1),y([]),v(null)},className:"hover:bg-white hover:bg-opacity-20 p-2 rounded-lg",children:n.jsx(Xa,{size:24})})]}),n.jsxs("div",{className:"p-6 grid grid-cols-12 gap-6 h-[80vh]",children:[n.jsxs("div",{className:"col-span-7 bg-white rounded-xl shadow-lg p-6 flex flex-col",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" *"}),n.jsxs("select",{value:R.supplier_id,onChange:re=>U({...R,supplier_id:re.target.value}),className:"w-full p-2 border rounded-lg text-sm",children:[n.jsx("option",{value:"",children:" "}),c.map(re=>n.jsx("option",{value:re.id,children:re.name_ar},re.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),n.jsx("input",{type:"date",value:R.purchase_date,onChange:re=>U({...R,purchase_date:re.target.value}),className:"w-full p-2 border rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  (%)"}),n.jsx("input",{type:"number",value:R.tax_rate,onChange:re=>U({...R,tax_rate:re.target.value}),className:"w-full p-2 border rounded-lg text-sm",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),n.jsxs("select",{value:R.payment_type,onChange:re=>U({...R,payment_type:re.target.value}),className:"w-full p-2 border rounded-lg text-sm",children:[n.jsx("option",{value:"cash",children:""}),n.jsx("option",{value:"transfer",children:""}),n.jsx("option",{value:"check",children:""}),n.jsx("option",{value:"credit",children:""})]})]})]}),n.jsx("div",{className:"flex-1 bg-gray-50 rounded-lg overflow-hidden mb-4",children:n.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-200 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-center text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-center text-sm font-bold text-gray-700",children:""})]})}),n.jsx("tbody",{children:x.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"    "})}):x.map(re=>n.jsxs("tr",{className:"border-t hover:bg-gray-100",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("button",{onClick:()=>ie(re),className:"text-left hover:text-blue-600 transition-colors",children:[n.jsx("p",{className:"font-bold text-gray-800",children:re.product_name_ar}),n.jsxs("p",{className:"text-xs text-gray-600",children:["SKU: ",re.product_sku]})]})}),n.jsx("td",{className:"px-4 py-3 text-center",children:n.jsx("span",{className:"font-bold text-gray-800",children:re.quantity})}),n.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:[re.unit_price.toFixed(2)," MAD"]}),n.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:[re.line_total.toFixed(2)," MAD"]}),n.jsx("td",{className:"px-4 py-3 text-center",children:n.jsx("button",{onClick:()=>V(re.product_id),className:"text-red-600 hover:text-red-800",children:n.jsx(na,{size:16})})})]},re.product_id))})]})})}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 space-y-2 border-2 border-green-200",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-700",children:" :"}),n.jsxs("span",{className:"font-bold text-gray-800",children:[N.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-700",children:[" (",C,"%):"]}),n.jsxs("span",{className:"font-bold text-gray-800",children:[E.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"border-t-2 border-green-300 pt-2 flex justify-between text-lg",children:[n.jsx("span",{className:"font-bold text-gray-800",children:":"}),n.jsxs("span",{className:"font-bold text-green-700",children:[O.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),n.jsx("input",{type:"number",value:R.paid_amount,onChange:re=>U({...R,paid_amount:re.target.value}),className:"w-full p-2 border rounded-lg text-sm",placeholder:"0"})]})]})]}),n.jsxs("div",{className:"col-span-5 bg-white rounded-xl shadow-lg p-6 flex flex-col",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:" "}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{onClick:()=>v(null),className:`px-3 py-1 rounded-lg transition-colors text-sm ${w?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-600 text-white"}`,children:" "}),a.map(re=>n.jsx("button",{onClick:()=>v(re.id),className:`px-3 py-1 rounded-lg transition-colors text-sm ${w===re.id?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:re.name_ar},re.id))]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:w?"":" "}),te.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(kr,{size:48,className:"mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"     "})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:te.map(re=>n.jsxs("button",{onClick:()=>J(re),className:"border-2 border-gray-200 rounded-lg p-3 hover:border-green-500 hover:bg-green-50 transition-all",children:[re.image_url?n.jsx("img",{src:re.image_url,alt:re.name_ar,className:"w-full h-16 object-cover rounded-lg mb-2"}):n.jsx("div",{className:"w-full h-16 bg-gray-100 rounded-lg mb-2 flex items-center justify-center",children:n.jsx(kr,{size:20,className:"text-gray-400"})}),n.jsx("p",{className:"font-bold text-xs text-gray-800 mb-1 truncate",children:re.name_ar}),n.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:["SKU: ",re.sku]}),n.jsxs("p",{className:"text-xs font-bold text-green-600",children:[(re.cost_price||re.price_a).toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[": ",re.stock]})]},re.id))})]})})]})]}),n.jsxs("div",{className:"flex gap-4 mt-6 px-6",children:[n.jsx("button",{onClick:()=>{g(!1),y([]),v(null)},className:"flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300 font-bold",children:""}),n.jsx("button",{onClick:q,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-bold",children:" "})]}),_&&k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:":"}),n.jsx("p",{className:"font-bold text-gray-800",children:k.product_name_ar}),n.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",k.product_sku]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),n.jsx("input",{type:"number",min:"1",value:S.quantity,onChange:re=>B({...S,quantity:parseInt(re.target.value)||1}),className:"w-full p-2 border rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  (MAD)"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:S.unit_price,onChange:re=>B({...S,unit_price:parseFloat(re.target.value)||0}),className:"w-full p-2 border rounded-lg"})]}),n.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-bold text-green-600",children:[(S.quantity*S.unit_price).toFixed(2)," MAD"]})]})})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:()=>I(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg hover:bg-gray-300 font-bold",children:""}),n.jsx("button",{onClick:Y,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-bold",children:""})]})]})})]})})]})}function bY(){const[e,t]=H.useState([]),[r,s]=H.useState(null),[a,i]=H.useState([]),[o,l]=H.useState([]),[c,A]=H.useState(""),[d,h]=H.useState(!1),[f,u]=H.useState(!1),[p,g]=H.useState(!1),[w,v]=H.useState(!1),[x,y]=H.useState({name:"",address:"",manager_id:""});H.useEffect(()=>{_()},[]);const _=async()=>{try{const{data:P,error:te}=await we.from("warehouses").select("*").order("created_at",{ascending:!1});if(te)throw te;const J=await Promise.all((P||[]).map(async ie=>{let Y=null;if(ie.manager_id){const{data:N}=await we.auth.admin.getUserById(ie.manager_id);Y=N!=null&&N.user?{id:N.user.id,email:N.user.email||"",user_metadata:N.user.user_metadata||{}}:null}return{...ie,manager:Y}})),V=await Promise.all((J||[]).map(async ie=>{const{data:Y}=await we.from("warehouse_stock").select("quantity, min_alert_level").eq("warehouse_id",ie.id),N={stock_count:(Y==null?void 0:Y.length)||0,total_stock:(Y==null?void 0:Y.reduce((C,E)=>C+E.quantity,0))||0,low_stock_count:(Y==null?void 0:Y.filter(C=>C.quantity>0&&C.quantity<=C.min_alert_level).length)||0,out_of_stock_count:(Y==null?void 0:Y.filter(C=>C.quantity===0).length)||0};return{...ie,...N}}));t(V)}catch(P){console.error("Error loading warehouses:",P)}},I=async P=>{try{const{data:te,error:J}=await we.from("warehouse_stock").select(`
          *,
          product:products(id, name_ar, sku, cost_price, price_a)
        `).eq("warehouse_id",P).order("updated_at",{ascending:!1});if(J)throw J;i(te||[])}catch(te){console.error("Error loading warehouse stock:",te)}},k=async P=>{try{const{data:te,error:J}=await we.from("stock_movements").select(`
          *,
          product:products(id, name_ar, sku)
        `).eq("warehouse_id",P).order("created_at",{ascending:!1}).limit(100);if(J)throw J;const V=await Promise.all((te||[]).map(async ie=>{let Y=null;if(ie.created_by){const{data:N}=await we.auth.admin.getUserById(ie.created_by);Y=N!=null&&N.user?{email:N.user.email||"",user_metadata:N.user.user_metadata||{}}:null}return{...ie,created_by_user:Y}}));l(V)}catch(te){console.error("Error loading stock movements:",te)}},T=async P=>{P.preventDefault();try{const{error:te}=await we.from("warehouses").insert({name:x.name,address:x.address||null,manager_id:x.manager_id||null});if(te)throw te;h(!1),y({name:"",address:"",manager_id:""}),await _(),alert("    ")}catch(te){console.error("Error adding warehouse:",te),alert("  ")}},S=async P=>{if(P.preventDefault(),!!r)try{const{error:te}=await we.from("warehouses").update({name:x.name,address:x.address||null,manager_id:x.manager_id||null}).eq("id",r.id);if(te)throw te;u(!1),s(null),y({name:"",address:"",manager_id:""}),await _(),alert("    ")}catch(te){console.error("Error updating warehouse:",te),alert("  ")}},B=async P=>{if(confirm("             ."))try{const{data:te}=await we.from("warehouse_stock").select("quantity").eq("warehouse_id",P).gt("quantity",0);if(te&&te.length>0){alert("       .       .");return}const{data:J}=await we.from("orders").select("id").eq("warehouse_id",P);if(J&&J.length>0){alert("      .      .");return}const{data:V}=await we.from("stock_transfers").select("id").or(`from_warehouse_id.eq.${P},to_warehouse_id.eq.${P}`);if(V&&V.length>0){alert("       .    .");const{error:Y}=await we.from("warehouses").update({is_active:!1}).eq("id",P);if(Y)throw Y;await _(),alert("    ");return}const{error:ie}=await we.from("warehouses").delete().eq("id",P);if(ie)throw ie;await _(),alert("    ")}catch(te){console.error("Error deleting warehouse:",te);const J=te;if((J==null?void 0:J.code)==="23503")try{const{error:V}=await we.from("warehouses").update({is_active:!1}).eq("id",P);if(V)throw V;await _(),alert("            ");return}catch(V){console.error("Error deactivating warehouse after delete failure:",V)}alert("     ")}},R=P=>{s(P),y({name:P.name,address:P.address||"",manager_id:P.manager_id||""}),u(!0)},U=P=>{s(P),I(P.id),g(!0)},L=P=>{s(P),k(P.id),v(!0)},D=e.filter(P=>{var te;return P.name.toLowerCase().includes(c.toLowerCase())||((te=P.address)==null?void 0:te.toLowerCase().includes(c.toLowerCase()))}),Q=P=>{switch(P){case"sale":return"";case"purchase":return"";case"transfer":return"";case"adjustment":return"";case"return":return"";default:return P}},K=P=>{switch(P){case"sale":return"text-red-600 bg-red-100";case"purchase":return"text-green-600 bg-green-100";case"transfer":return"text-blue-600 bg-blue-100";case"adjustment":return"text-yellow-600 bg-yellow-100";case"return":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}};return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(kr,{className:"text-white",size:36}),""]}),n.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex items-center gap-2",children:[n.jsx(ts,{size:20})," "]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"  ...",value:c,onChange:P=>A(P.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(P=>{var te,J;return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800",children:P.name}),P.address&&n.jsx("p",{className:"text-gray-600 text-sm mt-1",children:P.address}),P.manager&&n.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[": ",((te=P.manager.user_metadata)==null?void 0:te.first_name)||""," ",((J=P.manager.user_metadata)==null?void 0:J.last_name)||P.manager.email]})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-gray-500 text-xs",children:""}),n.jsx("p",{className:"text-lg font-bold text-gray-800",children:P.stock_count||0})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-gray-500 text-xs",children:" "}),n.jsx("p",{className:"text-lg font-bold text-gray-800",children:P.total_stock||0})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-orange-500 text-xs",children:""}),n.jsx("p",{className:"text-lg font-bold text-orange-700",children:P.low_stock_count||0})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-red-500 text-xs",children:""}),n.jsx("p",{className:"text-lg font-bold text-red-700",children:P.out_of_stock_count||0})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>U(P),className:"flex-1 bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1",children:[n.jsx(kr,{size:14}),""]}),n.jsxs("button",{onClick:()=>L(P),className:"flex-1 bg-green-100 hover:bg-green-200 text-green-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1",children:[n.jsx(No,{size:14}),""]}),n.jsx("button",{onClick:()=>R(P),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:n.jsx(no,{size:14})}),n.jsx("button",{onClick:()=>B(P.id),className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",title:" ",children:n.jsx(na,{size:14})})]})]},P.id)})}),d&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"  "}),n.jsxs("form",{onSubmit:T,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:x.name,onChange:P=>y({...x,name:P.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),n.jsx("textarea",{value:x.address,onChange:P=>y({...x,address:P.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",rows:3})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium transition-colors",children:""}),n.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-medium transition-colors",children:""})]})]})]})}),f&&r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" "}),n.jsxs("form",{onSubmit:S,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"text",value:x.name,onChange:P=>y({...x,name:P.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),n.jsx("textarea",{value:x.address,onChange:P=>y({...x,address:P.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",rows:3})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium transition-colors",children:""}),n.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-medium transition-colors",children:""})]})]})]})}),p&&r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full max-h-[80vh] overflow-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:[" - ",r.name]}),n.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(Xa,{size:24})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-right p-3 text-gray-700",children:""}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:""}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:""}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:" "}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:""})]})}),n.jsx("tbody",{children:a.map(P=>{var te,J;return n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"p-3",children:(te=P.product)==null?void 0:te.name_ar}),n.jsx("td",{className:"p-3",children:(J=P.product)==null?void 0:J.sku}),n.jsx("td",{className:"p-3 font-medium",children:P.quantity}),n.jsx("td",{className:"p-3",children:P.min_alert_level}),n.jsx("td",{className:"p-3",children:P.quantity===0?n.jsx("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs font-bold",children:""}):P.quantity<=P.min_alert_level?n.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-bold",children:""}):n.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-bold",children:""})})]},P.id)})})]})})]})}),w&&r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full max-h-[80vh] overflow-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["  - ",r.name]}),n.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(Xa,{size:24})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-right p-3 text-gray-700",children:""}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:""}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:""}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:""}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:""})]})}),n.jsx("tbody",{children:o.map(P=>{var te,J,V,ie,Y,N;return n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"p-3",children:new Date(P.created_at).toLocaleDateString("ar-DZ")}),n.jsx("td",{className:"p-3",children:(te=P.product)==null?void 0:te.name_ar}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${K(P.type)}`,children:Q(P.type)})}),n.jsx("td",{className:"p-3 font-medium",children:P.quantity}),n.jsxs("td",{className:"p-3 text-sm text-gray-600",children:[((V=(J=P.created_by_user)==null?void 0:J.user_metadata)==null?void 0:V.first_name)||""," ",((Y=(ie=P.created_by_user)==null?void 0:ie.user_metadata)==null?void 0:Y.last_name)||((N=P.created_by_user)==null?void 0:N.email)]})]},P.id)})})]})})]})})]})}function _Y(){var ie,Y,N;const[e,t]=H.useState([]),[r,s]=H.useState([]),[a,i]=H.useState([]),[o,l]=H.useState(null),[c,A]=H.useState(!0),[d,h]=H.useState(!1),[f,u]=H.useState(!1),[p,g]=H.useState(""),[w,v]=H.useState(""),[x,y]=H.useState(""),[_,I]=H.useState([]);H.useEffect(()=>{k(),S()},[]),H.useEffect(()=>{w&&T(w)},[w]);const k=async()=>{try{const{data:C,error:E}=await we.from("warehouses").select("*").eq("is_active",!0).order("name");if(E)throw E;t(C||[])}catch(C){console.error("Error loading warehouses:",C)}},T=async C=>{try{const{data:E,error:O}=await we.from("warehouse_stock").select(`
          *,
          product:products(id, name_ar, name_en, sku, price_a, cost_price, image_url)
        `).eq("warehouse_id",C).gt("quantity",0).order("product(name_ar)");if(O)throw O;s(E||[])}catch(E){console.error("Error loading warehouse stock:",E)}},S=async()=>{A(!0);try{const{data:C,error:E}=await we.from("stock_transfers").select("*").order("created_at",{ascending:!1});if(E)throw E;const{data:O,error:q}=await we.from("warehouses").select("id, name, address");if(q)throw q;const se=(C||[]).map(ye=>({...ye,from_warehouse:O==null?void 0:O.find(re=>re.id===ye.from_warehouse_id),to_warehouse:O==null?void 0:O.find(re=>re.id===ye.to_warehouse_id)}));i(se)}catch(C){console.error("Error loading transfers:",C)}finally{A(!1)}},B=async C=>{try{const{data:E,error:O}=await we.from("stock_transfer_items").select(`
          *,
          product:products(id, name_ar, name_en, sku, price_a, cost_price)
        `).eq("transfer_id",C);if(O)throw O;const q=a.find(se=>se.id===C);q&&l({...q,items:E||[]})}catch(E){console.error("Error loading transfer details:",E)}},R=async()=>{if(!w||!x||_.length===0){alert("     ");return}if(w===x){alert("      ");return}try{const{data:C,error:E}=await we.from("stock_transfers").insert({from_warehouse_id:w,to_warehouse_id:x,status:"pending"}).select().single();if(E)throw E;const O=_.map(se=>({transfer_id:C.id,product_id:se.product_id,quantity:se.quantity})),{error:q}=await we.from("stock_transfer_items").insert(O);if(q)throw q;h(!1),v(""),y(""),I([]),await S(),alert("     ")}catch(C){console.error("Error creating transfer:",C),alert("      ")}},U=async C=>{if(confirm("      "))try{const{error:E}=await we.rpc("complete_stock_transfer",{p_transfer_id:C});if(E)throw E;await S(),alert("    ")}catch(E){console.error("Error completing transfer:",E),alert("     ")}},L=async C=>{if(confirm("      "))try{const{error:E}=await we.from("stock_transfers").update({status:"cancelled"}).eq("id",C);if(E)throw E;await S(),alert("   ")}catch(E){console.error("Error cancelling transfer:",E),alert("     ")}},D=(C,E)=>{const O=_.find(q=>q.product_id===C);I(O?_.map(q=>q.product_id===C?{...q,quantity:Math.min(q.quantity+1,E)}:q):[..._,{product_id:C,quantity:1}])},Q=(C,E,O)=>{E<=0?I(_.filter(q=>q.product_id!==C)):I(_.map(q=>q.product_id===C?{...q,quantity:Math.min(E,O)}:q))},K=C=>{I(_.filter(E=>E.product_id!==C))},P=C=>{switch(C){case"pending":return" ";case"completed":return"";case"cancelled":return"";default:return C}},te=C=>{switch(C){case"pending":return"text-yellow-600 bg-yellow-100";case"completed":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},J=C=>{switch(C){case"pending":return n.jsx(Hr,{size:16});case"completed":return n.jsx(Kr,{size:16});case"cancelled":return n.jsx(sl,{size:16});default:return null}},V=r.filter(C=>{var E,O;return((E=C.product.name_ar)==null?void 0:E.toLowerCase().includes(p.toLowerCase()))||((O=C.product.sku)==null?void 0:O.toLowerCase().includes(p.toLowerCase()))});return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(uh,{className:"text-white",size:36})," "]}),n.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex items-center gap-2",children:[n.jsx(ts,{size:20}),"  "]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" "}),c?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):a.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"   "}):n.jsx("div",{className:"space-y-4",children:a.map(C=>{var E,O;return n.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 ${te(C.status)}`,children:[J(C.status),P(C.status)]}),n.jsx("span",{className:"text-gray-500 text-sm",children:new Date(C.created_at).toLocaleDateString("ar-DZ")})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:"font-medium",children:(E=C.from_warehouse)==null?void 0:E.name}),n.jsx(Cn,{size:16,className:"text-gray-400"}),n.jsx("span",{className:"font-medium",children:(O=C.to_warehouse)==null?void 0:O.name})]})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{B(C.id),u(!0)},className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:n.jsx(la,{size:14})}),C.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>U(C.id),className:"bg-green-100 hover:bg-green-200 text-green-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:n.jsx(Kr,{size:14})}),n.jsx("button",{onClick:()=>L(C.id),className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:n.jsx(sl,{size:14})})]})]})]})},C.id)})})]}),d&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-auto",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"  "}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsxs("select",{value:w,onChange:C=>v(C.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",children:[n.jsx("option",{value:"",children:"  "}),e.map(C=>n.jsx("option",{value:C.id,children:C.name},C.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsxs("select",{value:x,onChange:C=>y(C.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",children:[n.jsx("option",{value:"",children:"  "}),e.filter(C=>C.id!==w).map(C=>n.jsx("option",{value:C.id,children:C.name},C.id))]})]})]}),w&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",placeholder:"  ...",value:p,onChange:C=>g(C.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:" "}),n.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg p-2",children:V.map(C=>n.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:C.product.name_ar}),n.jsxs("div",{className:"text-sm text-gray-500",children:[": ",C.quantity]})]}),n.jsx("button",{onClick:()=>D(C.product_id,C.quantity),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded text-sm",children:""})]},C.product_id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:" "}),n.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg p-2",children:_.length===0?n.jsx("div",{className:"text-center text-gray-500 py-4",children:"    "}):_.map(C=>{const E=r.find(q=>q.product_id===C.product_id),O=E==null?void 0:E.product;return n.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:O==null?void 0:O.name_ar}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"1",max:(E==null?void 0:E.quantity)||1,value:C.quantity,onChange:q=>Q(C.product_id,parseInt(q.target.value)||0,(E==null?void 0:E.quantity)||0),className:"w-20 px-2 py-1 border rounded text-sm"}),n.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",(E==null?void 0:E.quantity)||0]})]})]}),n.jsx("button",{onClick:()=>K(C.product_id),className:"bg-red-100 hover:bg-red-200 text-red-700 px-2 py-1 rounded text-sm",children:n.jsx(na,{size:12})})]},C.product_id)})})]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:R,disabled:!w||!x||_.length===0,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white py-3 rounded-lg font-medium transition-colors",children:"  "}),n.jsx("button",{onClick:()=>{h(!1),v(""),y(""),I([]),g("")},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-medium transition-colors",children:""})]})]})}),f&&o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"  "}),n.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(sl,{size:24})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 ${te(o.status)}`,children:[J(o.status),P(o.status)]}),n.jsx("span",{className:"text-gray-500 text-sm",children:new Date(o.created_at).toLocaleDateString("ar-DZ")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:(ie=o.from_warehouse)==null?void 0:ie.name}),n.jsx(Cn,{size:16,className:"text-gray-400"}),n.jsx("span",{className:"font-medium",children:(Y=o.to_warehouse)==null?void 0:Y.name})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-right p-3 text-gray-700",children:""}),n.jsx("th",{className:"text-right p-3 text-gray-700",children:""})]})}),n.jsx("tbody",{children:(N=o.items)==null?void 0:N.map(C=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"p-3",children:C.product.name_ar}),n.jsx("td",{className:"p-3 font-medium",children:C.quantity})]},C.id))})]})})]})})]})}function NY(){const[e,t]=H.useState([]),[r,s]=H.useState([]),[a,i]=H.useState(!0),[o,l]=H.useState(""),[c,A]=H.useState([]),[d,h]=H.useState({name:"",password:"",role:"employee",employee_id:""}),[f,u]=H.useState(!1),[p,g]=H.useState(null),[w,v]=H.useState(!1),[x,y]=H.useState({username:"",email:"",full_name:"",password:"",role:"employee",employee_id:"",is_active:!0}),_=ie=>{const Y=String(ie||"").replace(/\D/g,"");if(Y.length>=6)return Y.slice(-6);const N=Math.floor(1e5+Math.random()*9e5);return String(N)},I=ie=>{const Y=String(ie||"").trim().toLowerCase();return Y?Y.includes("@")?Y:`${Y}@ba9alino.app`:""};H.useEffect(()=>{R(),U(),T()},[]);const k="admin123",T=async()=>{try{const{data:ie,error:Y}=await we.rpc("virtual_list_accounts",{p_admin_password:k});if(Y)throw Y;A(Array.isArray(ie)?ie:[])}catch(ie){console.error("Error fetching virtual accounts:",ie),A([])}},S=async ie=>{ie.preventDefault();const Y=String(d.name||"").trim(),N=String(d.password||"");if(!Y||!N){alert("    ");return}try{const{data:C,error:E}=await we.rpc("virtual_create_account",{p_admin_password:k,p_name:Y,p_password:N,p_role:d.role,p_employee_id:d.employee_id||null});if(E)throw E;if(!!!(C!=null&&C.success)){const q=String((C==null?void 0:C.error)||"failed");if(q==="name_exists"){alert("   ");return}alert("Erreur: "+q);return}h({name:"",password:"",role:"employee"}),await T(),alert("   ")}catch(C){alert("Erreur: "+((C==null?void 0:C.message)||"failed"))}},B=async ie=>{if(window.confirm("      "))try{const{data:Y,error:N}=await we.rpc("virtual_delete_account",{p_admin_password:k,p_id:ie});if(N)throw N;if(!!!(Y!=null&&Y.success)){alert("Erreur: "+String((Y==null?void 0:Y.error)||"failed"));return}await T()}catch(Y){alert("Erreur: "+((Y==null?void 0:Y.message)||"failed"))}},R=async()=>{try{i(!0);const{data:ie,error:Y}=await we.from("user_accounts").select("*").order("created_at",{ascending:!1});if(Y)throw Y;t(ie||[])}catch(ie){console.error("Error fetching users:",ie)}finally{i(!1)}};H.useEffect(()=>{if(f&&!p&&x.role!=="admin"&&x.employee_id){const ie=r.find(Y=>Y.id===x.employee_id);if(!ie)return;y(Y=>{const N=Y.username||String(ie.phone||"").trim(),C=Y.email||I(N),E=Y.full_name||String(ie.name||"").trim(),O=Y.password||_(N);return{...Y,username:N,email:C,full_name:E,password:O}})}},[r,x.employee_id,x.role,p,f]);const U=async()=>{try{const{data:ie,error:Y}=await we.from("employees").select("id, name, phone").eq("status","active").order("name");if(Y)throw Y;s(ie||[])}catch(ie){console.error("Error fetching employees:",ie)}},L=async ie=>{ie.preventDefault();try{if(p){const Y={username:x.username,email:x.email,full_name:x.full_name,role:x.role,employee_id:x.role!=="admin"&&x.employee_id?x.employee_id:null,is_active:x.is_active},{error:N}=await we.from("user_accounts").update(Y).eq("id",p);if(N)throw N;x.password&&alert("   .        ."),alert("   ")}else{if(x.role!=="admin"&&!x.employee_id){alert("   ");return}const Y=I(x.email||x.username),N=x.password||_(x.username),{data:C,error:E}=await we.rpc("create_user_account_fallback",{p_email:Y,p_password:N,p_username:x.username,p_full_name:x.full_name,p_role:x.role,p_employee_id:x.role!=="admin"&&x.employee_id||null,p_is_active:x.is_active});if(E)throw new Error(E.message||"Failed to create user");if(!!!(C!=null&&C.success)){const q=String((C==null?void 0:C.error)||(C==null?void 0:C.message)||"Failed to create user");throw new Error(q)}alert(`    

 : ${x.username}
 : ${N}`)}R(),K(),u(!1)}catch(Y){console.error("Error saving user:",Y),alert("Erreur lors de la sauvegarde de l'utilisateur: "+Y.message)}},D=async ie=>{if(window.confirm("      "))try{const{error:Y}=await we.from("user_accounts").delete().eq("id",ie);if(Y)throw Y;alert("   .      ."),R()}catch(Y){console.error("Error deleting user:",Y),alert("Erreur lors de la suppression de l'utilisateur")}},Q=ie=>{y({username:ie.username,email:ie.email,full_name:ie.full_name,password:"",role:ie.role,employee_id:ie.employee_id||"",is_active:ie.is_active}),g(ie.id),u(!0)},K=()=>{y({username:"",email:"",full_name:"",password:"",role:"employee",employee_id:"",is_active:!0}),g(null),v(!1)},P=ie=>{switch(ie){case"admin":return n.jsx(x3,{className:"w-4 h-4"});case"commercial":return n.jsx(BD,{className:"w-4 h-4"});default:return n.jsx(_o,{className:"w-4 h-4"})}},te=ie=>{switch(ie){case"admin":return"bg-red-100 text-red-800";case"commercial":return"bg-blue-100 text-blue-800";default:return"bg-green-100 text-green-800"}},J=ie=>{switch(ie){case"admin":return"";case"commercial":return"";default:return""}},V=e.filter(ie=>ie.username.toLowerCase().includes(o.toLowerCase())||ie.email.toLowerCase().includes(o.toLowerCase())||ie.full_name.toLowerCase().includes(o.toLowerCase()));return n.jsxs("div",{className:"space-y-6",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),n.jsx("p",{className:"text-white mt-2",children:"   "})]}),n.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:shadow-lg transition",children:[n.jsx(ts,{size:20}),n.jsx("span",{children:" "})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 rounded-lg px-4 py-3",children:[n.jsx(cs,{size:20,className:"text-gray-400"}),n.jsx("input",{type:"text",placeholder:"  ...",value:o,onChange:ie=>l(ie.target.value),className:"flex-1 bg-transparent outline-none text-gray-800"})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[n.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),n.jsx("input",{type:"text",value:d.name,onChange:ie=>h({...d,name:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:": ahmed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),n.jsx("input",{type:"text",value:d.password,onChange:ie=>h({...d,password:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:": 1234",style:{direction:"ltr",textAlign:"right"}})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),n.jsxs("select",{value:d.role,onChange:ie=>h({...d,role:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"employee",children:""}),n.jsx("option",{value:"commercial",children:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),n.jsxs("select",{value:d.employee_id||"",onChange:ie=>h({...d,employee_id:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:" "}),r.map(ie=>n.jsxs("option",{value:ie.id,children:[ie.name," - ",ie.phone]},ie.id))]})]}),n.jsxs("div",{className:"md:col-span-4 flex items-center justify-between gap-3",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"admin / admin123"}),n.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:" "})]})]}),c.length===0?n.jsx("div",{className:"text-gray-500 text-sm",children:"    "}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:c.map(ie=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ie.name}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full ${ie.role==="commercial"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:ie.role==="commercial"?"":""})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ie.employee_id?(()=>{const Y=r.find(N=>N.id===ie.employee_id);return Y?`${Y.name} - ${Y.phone}`:" "})():"-"}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsx("button",{onClick:()=>B(ie.id),className:"text-red-600 hover:text-red-800",title:"",children:n.jsx(na,{className:"w-4 h-4"})})})]},ie.id))})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:a?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:" ..."})]}):V.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(Bi,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"  "})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:" "}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"  "}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(ie=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center",children:n.jsx(_o,{className:"h-6 w-6 text-indigo-600"})}),n.jsxs("div",{className:"mr-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:ie.full_name}),n.jsxs("div",{className:"text-sm text-gray-500",children:["@",ie.username]})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ie.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te(ie.role)}`,children:[P(ie.role),n.jsx("span",{className:"mr-1",children:J(ie.role)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full ${ie.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ie.is_active?"":" "})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ie.last_login?new Date(ie.last_login).toLocaleDateString("ar-MA"):"  "}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>Q(ie),className:"text-blue-600 hover:text-blue-800",title:"",children:n.jsx(no,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>D(ie.id),className:"text-red-600 hover:text-red-800",title:"",children:n.jsx(na,{className:"w-4 h-4"})})]})})]},ie.id))})]})})}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:p?" ":"  "}),n.jsx("button",{type:"button",onClick:()=>{K(),u(!1)},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:L,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"text",required:!0,value:x.username,onChange:ie=>y({...x,username:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"  "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"text",required:!0,value:x.full_name,onChange:ie=>y({...x,full_name:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"  "})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"email",required:!0,value:x.email,onChange:ie=>y({...x,email:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"  "})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-1",children:["  ",p&&"(    )"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:w?"text":"password",required:!p,value:x.password,onChange:ie=>y({...x,password:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:p?"   ":"  "}),n.jsx("button",{type:"button",onClick:()=>v(!w),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:w?n.jsx(ED,{className:"w-4 h-4"}):n.jsx(la,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" *"}),n.jsxs("select",{value:x.role,onChange:ie=>y({...x,role:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"admin",children:""}),n.jsx("option",{value:"employee",children:""}),n.jsx("option",{value:"commercial",children:""})]})]}),x.role!=="admin"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsxs("select",{value:x.employee_id,onChange:ie=>y({...x,employee_id:ie.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:" "}),r.map(ie=>n.jsxs("option",{value:ie.id,children:[ie.name," - ",ie.phone]},ie.id))]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"is_active",checked:x.is_active,onChange:ie=>y({...x,is_active:ie.target.checked}),className:"mr-2"}),n.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:" "})]}),n.jsxs("div",{className:"flex gap-4 justify-end mt-6",children:[n.jsx("button",{type:"button",onClick:()=>{K(),u(!1)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:""}),n.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:p?"":""})]})]})]})})]})}function BY(){const{clientId:e}=Hj(),t=Lr(),[r,s]=H.useState(null),[a,i]=H.useState([]),[o,l]=H.useState({totalOrders:0,totalAmount:0,paidAmount:0,remainingAmount:0,totalProducts:0,averageOrderValue:0,firstOrderDate:"",lastOrderDate:"",creditOrders:0,paidOrders:0,partialOrders:0}),[c,A]=H.useState(!0),[d,h]=H.useState(""),[f,u]=H.useState("all"),[p,g]=H.useState(""),[w,v]=H.useState(""),[x,y]=H.useState(!1);H.useEffect(()=>{e&&_()},[e]);const _=async()=>{try{A(!0);const{data:B,error:R}=await we.from("clients").select("*").eq("id",e).single();if(R)throw R;s(B);const{data:U,error:L}=await we.from("orders").select(`
          *,
          items,
          order_items:order_items(
            id,
            product_id,
            product_name_ar,
            product_sku,
            quantity,
            unit_price,
            line_total
          ),
          payments:payments(
            id,
            amount,
            payment_method,
            payment_date
          )
        `).eq("client_id",e).order("order_date",{ascending:!1});if(L)throw L;const D=(U||[]).map(Q=>{const K=Array.isArray(Q.order_items)?Q.order_items:[],P=Array.isArray(Q.items)?Q.items:[],te=(K.length>0?K:P).map(J=>{var V,ie;return{id:J.id||`${Q.id}-${J.product_id||J.product_sku||Math.random()}`,product_id:J.product_id,product_name_ar:J.product_name_ar||((V=J.product)==null?void 0:V.name_ar)||J.name_ar||J.product_name||"  ",product_sku:J.product_sku||((ie=J.product)==null?void 0:ie.sku)||J.sku||"",quantity:Number(J.quantity||0),unit_price:Number(J.unit_price||0),line_total:Number(J.line_total||Number(J.quantity||0)*Number(J.unit_price||0)||0),product:J.product}});return{...Q,items:te,order_items:K}});i(D),I(D)}catch(B){console.error("Error fetching client data:",B)}finally{A(!1)}},I=B=>{const R=B.length,U=B.reduce((N,C)=>N+(C.final_amount||C.total_amount||0),0),L=B.reduce((N,C)=>{const E=C.payments||[];return N+E.reduce((O,q)=>O+(q.amount||0),0)},0),D=U-L,Q=B.reduce((N,C)=>{const E=C.items||[];return N+E.reduce((O,q)=>O+(q.quantity||0),0)},0),K=R>0?U/R:0,P=B.map(N=>N.order_date).filter(Boolean),te=P.length>0?P[0]:"",J=P.length>0?P[P.length-1]:"",V=B.filter(N=>N.payment_status==="pending"||N.payment_status==="credit").length,ie=B.filter(N=>N.payment_status==="paid").length,Y=B.filter(N=>N.payment_status==="partial").length;l({totalOrders:R,totalAmount:U,paidAmount:L,remainingAmount:D,totalProducts:Q,averageOrderValue:K,firstOrderDate:te,lastOrderDate:J,creditOrders:V,paidOrders:ie,partialOrders:Y})},k=a.filter(B=>{const R=(B.order_number||"").toLowerCase().includes(d.toLowerCase());let U=!0;if(f==="custom"&&p&&w){const L=new Date(B.order_date),D=new Date(p),Q=new Date(w);D.setHours(0,0,0,0),Q.setHours(23,59,59,999),U=L>=D&&L<=Q}else if(f==="today"){const L=new Date;U=new Date(B.order_date).toDateString()===L.toDateString()}else if(f==="week"){const L=new Date;L.setDate(L.getDate()-7),U=new Date(B.order_date)>=L}else if(f==="month"){const L=new Date;L.setMonth(L.getMonth()-1),U=new Date(B.order_date)>=L}return R&&U}),T=B=>{switch(B){case"paid":return n.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[n.jsx(Kr,{size:12}),""]});case"partial":return n.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[n.jsx(Hr,{size:12}),""]});case"pending":case"credit":return n.jsxs("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[n.jsx(vs,{size:12}),""]});default:return n.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs font-medium",children:B})}},S=()=>{const B=[[" ",""," "," "," ",""," "],...k.map(D=>{var Q,K,P;return[D.order_number,new Date(D.order_date).toLocaleDateString("ar-MA"),(D.final_amount||D.total_amount||0).toFixed(2),(((Q=D.payments)==null?void 0:Q.reduce((te,J)=>te+(J.amount||0),0))||0).toFixed(2),((D.final_amount||D.total_amount||0)-(((K=D.payments)==null?void 0:K.reduce((te,J)=>te+(J.amount||0),0))||0)).toFixed(2),D.payment_status,((P=D.items)==null?void 0:P.length)||0]})].map(D=>D.join(",")).join(`
`),R=new Blob([B],{type:"text/csv;charset=utf-8;"}),U=document.createElement("a"),L=URL.createObjectURL(R);U.setAttribute("href",L),U.setAttribute("download",`client_${r==null?void 0:r.company_name_ar}_report.csv`),U.style.visibility="hidden",document.body.appendChild(U),U.click(),document.body.removeChild(U)};return c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>t("/invoices"),className:"p-2 text-gray-600 hover:text-gray-800 rounded-lg hover:bg-gray-100",children:n.jsx(Cn,{size:20})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" "}),n.jsx("p",{className:"text-gray-600",children:r.company_name_ar})]})]}),n.jsxs("button",{onClick:S,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[n.jsx(P2,{size:16})," "]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:" "}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:""}),n.jsx("p",{className:"font-medium",children:r.company_name_ar})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:""}),n.jsx("p",{className:"font-medium",children:r.contact_person_phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:" "}),n.jsx("p",{className:"font-medium",children:r.contact_person_email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:""}),n.jsxs("p",{className:"font-medium",children:[r.address,", ",r.city]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:" "}),n.jsx("p",{className:"font-medium",children:r.subscription_tier})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:" "}),n.jsx("p",{className:"font-medium",children:new Date(r.created_at).toLocaleDateString("ar-MA")})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:o.totalOrders})]}),n.jsx(kr,{className:"text-blue-600",size:24})]})}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:" "}),n.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[o.totalAmount.toFixed(2)," MAD"]})]}),n.jsx(No,{className:"text-green-600",size:24})]})}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:""}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[o.paidAmount.toFixed(2)," MAD"]})]}),n.jsx(Kr,{className:"text-green-600",size:24})]})}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:""}),n.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[o.remainingAmount.toFixed(2)," MAD"]})]}),n.jsx(vs,{className:"text-red-600",size:24})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"  "}),n.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[o.averageOrderValue.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:" "}),n.jsx("p",{className:"text-xl font-bold text-gray-800",children:o.totalProducts})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:" "}),n.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.firstOrderDate?new Date(o.firstOrderDate).toLocaleDateString("ar-MA"):"N/A"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:" "}),n.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.lastOrderDate?new Date(o.lastOrderDate).toLocaleDateString("ar-MA"):"N/A"})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:""}),n.jsxs("button",{onClick:()=>y(!x),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[n.jsx(kD,{size:16}),""]})]}),x&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:16}),n.jsx("input",{type:"text",placeholder:"  ...",value:d,onChange:B=>h(B.target.value),className:"w-full pr-10 pl-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("select",{value:f,onChange:B=>u(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:" "}),n.jsx("option",{value:"today",children:""}),n.jsx("option",{value:"week",children:" 7 "}),n.jsx("option",{value:"month",children:" 30 "}),n.jsx("option",{value:"custom",children:" "})]}),f==="custom"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"date",value:p,onChange:B=>g(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("input",{type:"date",value:w,onChange:B=>v(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:" "}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:""})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:k.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"    "})}):k.map(B=>{const R=B.final_amount||B.total_amount||0,U=(B.payments||[]).reduce((D,Q)=>D+(Q.amount||0),0),L=R-U;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsx("p",{className:"font-medium",children:B.order_number})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("p",{children:new Date(B.order_date).toLocaleDateString("ar-MA")})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"max-w-xs",children:B.items&&B.items.length>0?n.jsxs("div",{children:[B.items.slice(0,2).map((D,Q)=>{var K;return n.jsxs("p",{className:"text-sm text-gray-700 truncate",children:[D.product_name_ar||((K=D.product)==null?void 0:K.name_ar)||"  ",D.quantity>1&&n.jsxs("span",{className:"text-gray-500",children:[" x",D.quantity]})]},Q)}),B.items.length>2&&n.jsxs("p",{className:"text-xs text-blue-600",children:["+",B.items.length-2," "]})]}):n.jsx("p",{className:"text-gray-500",children:"  "})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("p",{className:"font-medium",children:[R.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("p",{className:"text-green-600",children:[U.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("p",{className:`font-medium ${L>0?"text-red-600":"text-gray-600"}`,children:[L.toFixed(2)," MAD"]})}),n.jsx("td",{className:"px-4 py-3",children:T(B.payment_status||"")})]},B.id)})})]})})})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-gray-500",children:"  "}),n.jsx("button",{onClick:()=>t("/invoices"),className:"mt-4 text-blue-600 hover:text-blue-800",children:"   "})]})}function CY(){const e=Lr(),[t,r]=H.useState(""),[s,a]=H.useState(""),[i,o]=H.useState(!1),[l,c]=H.useState(""),A=async d=>{d.preventDefault(),c(""),o(!0);try{const h=String(t||"").trim();if(!h){c("   "),o(!1);return}const{data:f,error:u}=await we.from("user_accounts").select("email, role, employee_id, full_name, is_active").eq("username",h).limit(1).maybeSingle();if(u||!f||!f.email){c("      "),o(!1);return}if(!f.is_active||f.role!=="commercial"){c("       "),o(!1);return}const{data:p,error:g}=await we.auth.signInWithPassword({email:f.email,password:s});if(g||!p.user){c("      "),o(!1);return}f.employee_id&&localStorage.setItem("commercial_id",f.employee_id),localStorage.setItem("commercial_name",f.full_name||""),localStorage.setItem("commercial_role","commercial"),e("/commercial/dashboard")}catch(h){console.error("Login error:",h),c("    ")}finally{o(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(_o,{className:"text-blue-600",size:40})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Ba9alino"}),n.jsx("p",{className:"text-gray-600",children:"  "})]}),n.jsxs("form",{onSubmit:A,className:"space-y-6",children:[l&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[n.jsx(vs,{className:"text-red-600",size:20}),n.jsx("p",{className:"text-red-800 text-sm",children:l})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsxs("div",{className:"relative",children:[n.jsx(_o,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"tel",required:!0,value:t,onChange:d=>r(d.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none text-right",placeholder:"06xxxxxxxx",dir:"ltr"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsxs("div",{className:"relative",children:[n.jsx(SD,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"password",required:!0,value:s,onChange:d=>a(d.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none text-right",placeholder:""})]})]}),n.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:i?" ...":" "})]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:"Ba9alino  2026"})})]})})}function jY(){const e=Lr(),[t,r]=H.useState({todayOrders:0,pendingOrders:0,todayRevenue:0,myClients:0}),[s,a]=H.useState(!0),[i,o]=H.useState("");H.useEffect(()=>{const A=localStorage.getItem("commercial_id"),d=localStorage.getItem("commercial_name");if(!A){e("/commercial/login");return}o(d||""),l(A)},[e]);const l=async A=>{a(!0);try{const d=new Date().toISOString().split("T")[0],{data:h}=await we.from("orders").select("total_amount").eq("created_by",A).gte("created_at",d),{data:f}=await we.from("orders").select("id").eq("created_by",A).eq("status","pending"),{data:u}=await we.from("clients").select("id").eq("created_by",A);r({todayOrders:(h==null?void 0:h.length)||0,pendingOrders:(f==null?void 0:f.length)||0,todayRevenue:(h==null?void 0:h.reduce((p,g)=>p+(g.total_amount||0),0))||0,myClients:(u==null?void 0:u.length)||0})}catch(d){console.error("Error loading dashboard data:",d)}finally{a(!1)}},c=()=>{localStorage.removeItem("commercial_id"),localStorage.removeItem("commercial_name"),localStorage.removeItem("commercial_role"),e("/commercial/login")};return s?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-500",children:" ..."})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold",children:[" ",i]}),n.jsx("p",{className:"text-blue-100 text-sm",children:"  "})]}),n.jsx("button",{onClick:c,className:"bg-white/20 hover:bg-white/30 p-3 rounded-lg transition-colors",children:n.jsx(R2,{size:20})})]})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ni,{size:24}),n.jsx("span",{className:"text-2xl font-bold",children:t.todayOrders})]}),n.jsx("p",{className:"text-green-100 text-sm",children:" "})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(Hr,{size:24}),n.jsx("span",{className:"text-2xl font-bold",children:t.pendingOrders})]}),n.jsx("p",{className:"text-orange-100 text-sm",children:" "})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(Sr,{size:24}),n.jsx("span",{className:"text-2xl font-bold",children:t.todayRevenue.toFixed(0)})]}),n.jsx("p",{className:"text-blue-100 text-sm",children:"  (MAD)"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(Bi,{size:24}),n.jsx("span",{className:"text-2xl font-bold",children:t.myClients})]}),n.jsx("p",{className:"text-purple-100 text-sm",children:""})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:()=>e("/commercial/orders/new"),className:"bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(ts,{size:24}),n.jsx("span",{className:"text-sm",children:" "})]}),n.jsxs("button",{onClick:()=>e("/commercial/map"),className:"bg-teal-600 hover:bg-teal-700 text-white p-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(bA,{size:24}),n.jsx("span",{className:"text-sm",children:" "})]}),n.jsxs("button",{onClick:()=>e("/commercial/payments"),className:"bg-amber-600 hover:bg-amber-700 text-white p-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(Sr,{size:24}),n.jsx("span",{className:"text-sm",children:""})]}),n.jsxs("button",{onClick:()=>e("/commercial/clients"),className:"bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(Bi,{size:24}),n.jsx("span",{className:"text-sm",children:""})]}),n.jsxs("button",{onClick:()=>e("/commercial/products"),className:"bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(kr,{size:24}),n.jsx("span",{className:"text-sm",children:""})]}),n.jsxs("button",{onClick:()=>e("/commercial/orders"),className:"bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(No,{size:24}),n.jsx("span",{className:"text-sm",children:""})]}),n.jsxs("button",{onClick:()=>e("/commercial/performance"),className:"bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(g3,{size:24}),n.jsx("span",{className:"text-sm",children:""})]}),n.jsxs("button",{onClick:()=>e("/commercial/visits/new"),className:"bg-pink-600 hover:bg-pink-700 text-white p-4 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-2",children:[n.jsx(O2,{size:24}),n.jsx("span",{className:"text-sm",children:" "})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:" "}),n.jsx("div",{className:"text-center text-gray-500 py-8",children:"..."})]})]})]})}function EY(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState([]),[i,o]=H.useState(!0),[l,c]=H.useState(""),[A,d]=H.useState(null);H.useEffect(()=>{if(!localStorage.getItem("commercial_id")){e("/commercial/login");return}h(),f()},[e]);const h=async()=>{o(!0);try{const{data:p,error:g}=await we.from("products").select("*").order("name_ar");if(g)throw g;const v=(p||[]).filter(x=>x.is_active_for_commercial!==!1);r(v)}catch(p){console.error("Error loading products:",p)}finally{o(!1)}},f=async()=>{try{const{data:p,error:g}=await we.from("categories").select("*").order("name_ar");if(g)throw g;a(p||[])}catch(p){console.error("Error loading categories:",p)}},u=t.filter(p=>{var v;const g=p.name_ar.toLowerCase().includes(l.toLowerCase())||((v=p.sku)==null?void 0:v.toLowerCase().includes(l.toLowerCase())),w=!A||p.category_id===A;return g&&w});return n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-4 shadow-lg sticky top-0 z-10",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("button",{onClick:()=>e("/commercial/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold",children:""}),n.jsx("p",{className:"text-purple-100 text-sm",children:"  "})]}),n.jsx("button",{onClick:()=>e("/commercial/orders/new"),className:"mr-auto bg-white text-purple-700 px-4 py-2 rounded-lg font-bold hover:bg-purple-50 transition-colors",children:" "})]}),n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),className:"w-full pr-10 pl-4 py-3 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-300",placeholder:"  ..."})]})]}),n.jsx("div",{className:"bg-white p-4 shadow-sm overflow-x-auto",children:n.jsxs("div",{className:"flex gap-2 min-w-max",children:[n.jsxs("button",{onClick:()=>d(null),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${A?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-purple-600 text-white"}`,children:[" (",t.length,")"]}),s.map(p=>{const g=t.filter(w=>w.category_id===p.id).length;return n.jsxs("button",{onClick:()=>d(p.id),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${A===p.id?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[p.name_ar," (",g,")"]},p.id)})]})}),n.jsx("div",{className:"p-4 space-y-3",children:i?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):u.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(kr,{className:"mx-auto text-gray-400 mb-4",size:48}),n.jsx("p",{className:"text-gray-500",children:"  "}),n.jsx("button",{onClick:()=>e("/commercial/orders/new"),className:"mt-4 bg-purple-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-purple-700 transition-colors",children:" "})]}):u.map(p=>n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-gray-800 text-lg mb-1",children:p.name_ar}),n.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",p.sku||" "]})]}),n.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${p.stock>10?"bg-green-100 text-green-700":p.stock>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[": ",p.stock]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-gray-50 rounded-lg p-3",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" A"}),n.jsxs("p",{className:"font-bold text-blue-600",children:[p.price_a.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" B"}),n.jsxs("p",{className:"font-bold text-green-600",children:[p.price_b.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" C"}),n.jsxs("p",{className:"font-bold text-orange-600",children:[p.price_c.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" D"}),n.jsxs("p",{className:"font-bold text-purple-600",children:[p.price_d.toFixed(2)," MAD"]})]})]})]},p.id))})]})}function kY(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(!0),[i,o]=H.useState(""),[l,c]=H.useState(!1),[A,d]=H.useState({company_name_ar:"",company_name_en:"",contact_person_name:"",contact_person_phone:"",contact_person_email:"",address:"",city:"",subscription_tier:"E",gps_lat:null,gps_lng:null,shop_photo_url:"",credit_limit:""});H.useEffect(()=>{const p=localStorage.getItem("commercial_id");if(!p){e("/commercial/login");return}h(p)},[e]);const h=async p=>{a(!0);try{const{data:g,error:w}=await we.from("clients").select("*").eq("created_by",p).order("created_at",{ascending:!1});if(w)throw w;r(g||[])}catch(g){console.error("Error loading clients:",g)}finally{a(!1)}},f=async p=>{if(p.preventDefault(),!A.company_name_ar||!A.contact_person_name||!A.contact_person_phone){alert("   ");return}const g=localStorage.getItem("commercial_id");if(g)try{const{error:w}=await we.from("clients").insert({company_name_ar:A.company_name_ar,company_name_en:A.company_name_en,contact_person_name:A.contact_person_name,contact_person_phone:A.contact_person_phone,contact_person_email:A.contact_person_email||null,address:A.address||null,city:A.city||null,subscription_tier:A.subscription_tier,commercial_id:g,created_by:g,gps_lat:A.gps_lat,gps_lng:A.gps_lng,shop_photo_url:A.shop_photo_url||null,credit_limit:A.credit_limit?parseFloat(A.credit_limit):0});if(w)throw w;alert("    "),c(!1),d({company_name_ar:"",company_name_en:"",contact_person_name:"",contact_person_phone:"",contact_person_email:"",address:"",city:"",subscription_tier:"E",gps_lat:null,gps_lng:null,shop_photo_url:"",credit_limit:""}),h(g)}catch(w){console.error("Error adding client:",w),alert("     ")}},u=t.filter(p=>{var g,w,v;return((g=p.company_name_ar)==null?void 0:g.toLowerCase().includes(i.toLowerCase()))||((w=p.contact_person_name)==null?void 0:w.toLowerCase().includes(i.toLowerCase()))||((v=p.contact_person_phone)==null?void 0:v.includes(i))});return n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 shadow-lg sticky top-0 z-10",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("button",{onClick:()=>e("/commercial/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl font-bold",children:""}),n.jsxs("p",{className:"text-blue-100 text-sm",children:[t.length," "]})]}),n.jsx("button",{onClick:()=>c(!0),className:"bg-white text-blue-600 p-3 rounded-lg font-bold hover:bg-blue-50 transition-colors",children:n.jsx(ts,{size:20})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",value:i,onChange:p=>o(p.target.value),className:"w-full pr-10 pl-4 py-3 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300",placeholder:"  ..."})]})]}),n.jsx("div",{className:"p-4 space-y-3",children:s?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):u.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Bi,{className:"mx-auto text-gray-400 mb-4",size:48}),n.jsx("p",{className:"text-gray-500 mb-4",children:"  "}),n.jsx("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:"  "})]}):u.map(p=>n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-gray-800 text-lg mb-1",children:p.company_name_ar}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:p.contact_person_name})]}),n.jsx("div",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-medium",children:p.subscription_tier})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(Uh,{size:16}),n.jsx("a",{href:`tel:${p.contact_person_phone}`,className:"hover:text-blue-600",children:p.contact_person_phone})]}),p.address&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(bA,{size:16}),n.jsx("span",{children:p.address})]})]}),n.jsx("div",{className:"mt-3 pt-3 border-t flex gap-2",children:n.jsx("button",{onClick:()=>e(`/commercial/orders/new?client=${p.id}`),className:"flex-1 bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors",children:" "})})]},p.id))}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-t-xl",children:n.jsx("h2",{className:"text-xl font-bold",children:"  "})}),n.jsxs("form",{onSubmit:f,className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  () *"}),n.jsx("input",{type:"text",required:!0,value:A.company_name_ar,onChange:p=>d({...A,company_name_ar:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"  ..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  (English)"}),n.jsx("input",{type:"text",value:A.company_name_en,onChange:p=>d({...A,company_name_en:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Company name..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"   *"}),n.jsx("input",{type:"text",required:!0,value:A.contact_person_name,onChange:p=>d({...A,contact_person_name:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"   ..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"tel",required:!0,value:A.contact_person_phone,onChange:p=>d({...A,contact_person_phone:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"06xxxxxxxx"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsx("input",{type:"email",value:A.contact_person_email,onChange:p=>d({...A,contact_person_email:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@example.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("input",{type:"text",value:A.address,onChange:p=>d({...A,address:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:" ..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("input",{type:"text",value:A.city,onChange:p=>d({...A,city:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),n.jsxs("select",{value:A.subscription_tier,onChange:p=>d({...A,subscription_tier:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"A",children:"A -  "}),n.jsx("option",{value:"B",children:"B -  "}),n.jsx("option",{value:"C",children:"C -  "}),n.jsx("option",{value:"D",children:"D -  "}),n.jsx("option",{value:"E",children:"E -  "})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300 transition-colors",children:""}),n.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:""})]})]})]})})]})}function SY(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(!0),[i,o]=H.useState("all");H.useEffect(()=>{const d=localStorage.getItem("commercial_id");if(!d){e("/commercial/login");return}l(d)},[e]);const l=async d=>{a(!0);try{const{data:h,error:f}=await we.from("orders").select(`
          *,
          clients (
            company_name_ar
          )
        `).eq("created_by",d).order("created_at",{ascending:!1});if(f)throw f;r(h||[])}catch(h){console.error("Error loading orders:",h)}finally{a(!1)}},c=t.filter(d=>i==="all"?!0:d.status===i),A=d=>{switch(d){case"pending":return{icon:n.jsx(Hr,{size:16}),text:" ",className:"bg-yellow-100 text-yellow-700"};case"confirmed":return{icon:n.jsx(Kr,{size:16}),text:"",className:"bg-green-100 text-green-700"};case"rejected":return{icon:n.jsx(sl,{size:16}),text:"",className:"bg-red-100 text-red-700"};case"completed":return{icon:n.jsx(Kr,{size:16}),text:"",className:"bg-blue-100 text-blue-700"};default:return{icon:n.jsx(vs,{size:16}),text:d,className:"bg-gray-100 text-gray-700"}}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 text-white p-4 shadow-lg sticky top-0 z-10",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("button",{onClick:()=>e("/commercial/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl font-bold",children:""}),n.jsxs("p",{className:"text-orange-100 text-sm",children:[t.length," "]})]}),n.jsx("button",{onClick:()=>e("/commercial/orders/new"),className:"bg-white text-orange-600 p-3 rounded-lg font-bold hover:bg-orange-50 transition-colors",children:n.jsx(ts,{size:20})})]}),n.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[n.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${i==="all"?"bg-white text-orange-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[" (",t.length,")"]}),n.jsxs("button",{onClick:()=>o("pending"),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${i==="pending"?"bg-white text-orange-600":"bg-white/20 text-white hover:bg-white/30"}`,children:["  (",t.filter(d=>d.status==="pending").length,")"]}),n.jsxs("button",{onClick:()=>o("confirmed"),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${i==="confirmed"?"bg-white text-orange-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[" (",t.filter(d=>d.status==="confirmed").length,")"]}),n.jsxs("button",{onClick:()=>o("rejected"),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${i==="rejected"?"bg-white text-orange-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[" (",t.filter(d=>d.status==="rejected").length,")"]})]})]}),n.jsx("div",{className:"p-4 space-y-3",children:s?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):c.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(vs,{className:"mx-auto text-gray-400 mb-4",size:48}),n.jsx("p",{className:"text-gray-500 mb-4",children:"  "}),n.jsx("button",{onClick:()=>e("/commercial/orders/new"),className:"bg-orange-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-orange-700 transition-colors",children:"  "})]}):c.map(d=>{var f;const h=A(d.status);return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("h3",{className:"font-bold text-gray-800 text-lg",children:["#",d.order_number]}),n.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${h.className}`,children:[h.icon,n.jsx("span",{children:h.text})]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:((f=d.clients)==null?void 0:f.company_name_ar)||"  "})]}),n.jsx("div",{className:"text-left",children:n.jsxs("p",{className:"text-xl font-bold text-green-600",children:[d.total_amount.toFixed(2)," MAD"]})})]}),n.jsx("div",{className:"text-sm text-gray-500",children:n.jsxs("p",{children:[": ",new Date(d.order_date).toLocaleDateString("ar-MA")]})}),d.status==="pending"&&n.jsx("div",{className:"mt-3 pt-3 border-t",children:n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start gap-2",children:[n.jsx(Hr,{className:"text-yellow-600 flex-shrink-0 mt-0.5",size:16}),n.jsx("p",{className:"text-xs text-yellow-800",children:"   "})]})})]},d.id)})})]})}function FY(){const e=Lr(),[t]=$j(),r=t.get("client"),[s,a]=H.useState([]),[i,o]=H.useState([]),[l,c]=H.useState([]),[A,d]=H.useState(null),[h,f]=H.useState([]),[u,p]=H.useState(!0),[g,w]=H.useState(""),[v,x]=H.useState(null),[y,_]=H.useState(!1);H.useEffect(()=>{const L=localStorage.getItem("commercial_id");if(!L){e("/commercial/login");return}I(L)},[e]),H.useEffect(()=>{if(r&&l.length>0){const L=l.find(D=>D.id===r);L&&d(L)}},[r,l]);const I=async L=>{p(!0);try{const[D,Q,K]=await Promise.all([we.from("products").select("*").order("name_ar"),we.from("categories").select("*").order("name_ar"),we.from("clients").select("*").eq("created_by",L).order("company_name_ar")]);if(D.error)throw D.error;if(Q.error)throw Q.error;if(K.error)throw K.error;const te=(D.data||[]).filter(J=>J.is_active_for_commercial!==!1);a(te),o(Q.data||[]),c(K.data||[])}catch(D){console.error("Error loading data:",D)}finally{p(!1)}},k=(L,D)=>{switch(D){case"A":return L.price_a;case"B":return L.price_b;case"C":return L.price_c;case"D":return L.price_d;case"E":return L.price_e;default:return L.price_e}},T=L=>{if(!A){alert("   ");return}const D=k(L,A.subscription_tier),Q=h.find(K=>K.id===L.id);f(Q?h.map(K=>K.id===L.id?{...K,quantity:K.quantity+1}:K):[...h,{...L,quantity:1,selectedPrice:D}])},S=(L,D)=>{f(h.map(Q=>{if(Q.id===L){const K=Q.quantity+D;return K>0?{...Q,quantity:K}:Q}return Q}).filter(Q=>Q.quantity>0))},B=()=>h.reduce((L,D)=>L+D.selectedPrice*D.quantity,0),R=async()=>{if(!A){alert("  ");return}if(h.length===0){alert("   ");return}const L=localStorage.getItem("commercial_id");if(L)try{const{data:D}=await we.from("orders").select("order_number").order("created_at",{ascending:!1}).limit(1).single();let Q="ORD-0001";if(D!=null&&D.order_number){const V=parseInt(D.order_number.split("-")[1]);Q=`ORD-${String(V+1).padStart(4,"0")}`}const{data:K,error:P}=await we.from("orders").insert({order_number:Q,client_id:A.id,order_date:new Date().toISOString(),status:"pending",total_amount:B(),created_by:L,source:"commercial"}).select().single();if(P)throw P;const te=h.map(V=>({order_id:K.id,product_id:V.id,quantity:V.quantity,unit_price:V.selectedPrice,total:V.selectedPrice*V.quantity})),{error:J}=await we.from("order_items").insert(te);if(J)throw J;alert("    !    ."),e("/commercial/orders")}catch(D){console.error("Error creating order:",D),alert("     ")}},U=s.filter(L=>{var K;const D=L.name_ar.toLowerCase().includes(g.toLowerCase())||((K=L.sku)==null?void 0:K.toLowerCase().includes(g.toLowerCase())),Q=!v||L.category_id===v;return D&&Q});return n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white p-4 shadow-lg sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/commercial/orders"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl font-bold",children:" "}),n.jsx("p",{className:"text-green-100 text-sm",children:A?A.company_name_ar:" "})]})]})}),n.jsx("div",{className:"bg-white border-b p-4",children:n.jsxs("button",{onClick:()=>_(!0),className:"w-full bg-blue-50 border-2 border-blue-200 rounded-lg p-4 flex items-center justify-between hover:bg-blue-100 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_o,{className:"text-blue-600",size:24}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600",children:""}),n.jsx("p",{className:"font-bold text-gray-800",children:A?A.company_name_ar:" "})]})]}),A&&n.jsx("div",{className:"bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:A.subscription_tier})]})}),n.jsx("div",{className:"bg-white border-b p-4",children:n.jsx("input",{type:"text",value:g,onChange:L=>w(L.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",placeholder:"  ..."})}),n.jsx("div",{className:"bg-white border-b p-4 shadow-sm overflow-x-auto",children:n.jsxs("div",{className:"flex gap-2 min-w-max",children:[n.jsxs("button",{onClick:()=>x(null),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${v?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-600 text-white"}`,children:[" (",s.length,")"]}),i.map(L=>{const D=s.filter(Q=>Q.category_id===L.id).length;return n.jsxs("button",{onClick:()=>x(L.id),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${v===L.id?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[L.name_ar," (",D,")"]},L.id)})]})}),n.jsx("div",{className:"p-4 space-y-3 pb-32",children:u?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):U.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):U.map(L=>{const D=A?k(L,A.subscription_tier):L.price_e,Q=h.find(K=>K.id===L.id);return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-gray-800",children:L.name_ar}),n.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",L.sku]})]}),n.jsxs("div",{className:"text-left",children:[n.jsxs("p",{className:"text-lg font-bold text-green-600",children:[D.toFixed(2)," MAD"]}),n.jsxs("p",{className:`text-xs ${L.stock>10?"text-green-600":"text-orange-600"}`,children:[": ",L.stock]})]})]}),Q?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>S(L.id,-1),className:"bg-red-100 text-red-600 p-2 rounded-lg hover:bg-red-200",children:n.jsx(y3,{size:20})}),n.jsx("span",{className:"flex-1 text-center font-bold text-lg",children:Q.quantity}),n.jsx("button",{onClick:()=>S(L.id,1),className:"bg-green-100 text-green-600 p-2 rounded-lg hover:bg-green-200",children:n.jsx(ts,{size:20})})]}):n.jsx("button",{onClick:()=>T(L),disabled:!A||L.stock===0,className:"w-full bg-green-600 text-white py-2 rounded-lg font-bold hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:" "})]},L.id)})}),h.length>0&&n.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 p-4 shadow-lg",dir:"rtl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ni,{className:"text-green-600",size:24}),n.jsxs("span",{className:"font-bold text-gray-800",children:[h.length," "]})]}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-sm text-gray-600",children:""}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[B().toFixed(2)," MAD"]})]})]}),n.jsxs("button",{onClick:R,className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Jd,{size:20})," "]})]}),y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:n.jsx("h2",{className:"text-xl font-bold",children:" "})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:l.map(L=>n.jsx("button",{onClick:()=>{d(L),_(!1),f([])},className:"w-full bg-gray-50 hover:bg-blue-50 border-2 border-gray-200 hover:border-blue-300 rounded-lg p-4 text-right transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-bold text-gray-800",children:L.company_name_ar}),n.jsx("div",{className:"bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:L.subscription_tier})]})},L.id))}),n.jsx("div",{className:"p-4 border-t",children:n.jsx("button",{onClick:()=>_(!1),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300",children:""})})]})})]})}function TY(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(!0),[i,o]=H.useState(null),[l,c]=H.useState(null);H.useEffect(()=>{const w=localStorage.getItem("commercial_id");if(!w){e("/commercial/login");return}d(w),A()},[e]);const A=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(w=>{c({lat:w.coords.latitude,lng:w.coords.longitude})},w=>{console.error("Error getting location:",w)})},d=async w=>{a(!0);try{const{data:v,error:x}=await we.from("clients").select("*").eq("commercial_id",w).order("company_name_ar");if(x)throw x;r(v||[])}catch(v){console.error("Error loading clients:",v)}finally{a(!1)}},h=(w,v,x,y)=>{const I=(x-w)*Math.PI/180,k=(y-v)*Math.PI/180,T=Math.sin(I/2)*Math.sin(I/2)+Math.cos(w*Math.PI/180)*Math.cos(x*Math.PI/180)*Math.sin(k/2)*Math.sin(k/2);return 6371*(2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T)))},f=w=>{if(w.gps_lat&&w.gps_lng){const v=`https://www.google.com/maps/dir/?api=1&destination=${w.gps_lat},${w.gps_lng}`;window.open(v,"_blank")}},u=t.filter(w=>w.gps_lat&&w.gps_lng),p=t.filter(w=>!w.gps_lat||!w.gps_lng),g=l?[...u].sort((w,v)=>{const x=h(l.lat,l.lng,w.gps_lat,w.gps_lng),y=h(l.lat,l.lng,v.gps_lat,v.gps_lng);return x-y}):u;return n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white p-4 shadow-lg sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/commercial/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl font-bold",children:" "}),n.jsxs("p",{className:"text-green-100 text-sm",children:[u.length,"   "]})]}),l&&n.jsx("div",{className:"bg-white/20 px-3 py-2 rounded-lg",children:n.jsx(Mv,{size:20})})]})}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsx("h2",{className:"font-bold text-gray-800 mb-3",children:" "}),s?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):g.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(bA,{className:"mx-auto text-gray-400 mb-4",size:48}),n.jsx("p",{className:"text-gray-500",children:"    "})]}):g.map(w=>{const v=l?h(l.lat,l.lng,w.gps_lat,w.gps_lng):null;return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-gray-800 text-lg mb-1",children:w.company_name_ar}),n.jsx("p",{className:"text-sm text-gray-600",children:w.contact_person_name}),w.address&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:w.address})]}),v!==null&&n.jsxs("div",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-bold",children:[v.toFixed(1)," km"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>f(w),className:"flex-1 bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Mv,{size:16}),""]}),n.jsxs("button",{onClick:()=>e(`/commercial/visits/new?client=${w.id}`),className:"flex-1 bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[n.jsx(ts,{size:16}),""]}),n.jsx("a",{href:`tel:${w.contact_person_phone}`,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 transition-colors",children:n.jsx(Uh,{size:20})})]})]},w.id)}),p.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"font-bold text-gray-800 mb-3 mt-6",children:"  "}),p.map(w=>n.jsx("div",{className:"bg-gray-100 rounded-xl p-4 border-2 border-dashed border-gray-300",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-gray-700",children:w.company_name_ar}),n.jsx("p",{className:"text-sm text-gray-500",children:w.contact_person_name})]}),n.jsx("button",{onClick:()=>e(`/commercial/clients/${w.id}/edit`),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700",children:" "})]})},w.id))]})]})]})}function yB(){const e=Lr(),[t]=$j(),r=t.get("client"),[s,a]=H.useState(null),[i,o]=H.useState(!1),[l]=H.useState(new Date),[c,A]=H.useState({note:"",photo_url:"",order_created:!1,gps_lat:null,gps_lng:null});H.useEffect(()=>{if(!localStorage.getItem("commercial_id")){e("/commercial/login");return}r&&h(r),d()},[e,r]);const d=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(p=>{A(g=>({...g,gps_lat:p.coords.latitude,gps_lng:p.coords.longitude}))},p=>{console.error("Error getting location:",p)})},h=async p=>{try{const{data:g,error:w}=await we.from("clients").select("*").eq("id",p).single();if(w)throw w;a(g)}catch(g){console.error("Error loading client:",g)}},f=async()=>{if(!s)return;const p=localStorage.getItem("commercial_id");if(p){o(!0);try{const w=Math.round((new Date().getTime()-l.getTime())/6e4),{error:v}=await we.from("visits").insert({commercial_id:p,client_id:s.id,visit_date:l.toISOString(),gps_lat:c.gps_lat,gps_lng:c.gps_lng,note:c.note||null,photo_url:c.photo_url||null,order_created:c.order_created,duration_minutes:w});if(v)throw v;alert("    "),e("/commercial/clients")}catch(g){console.error("Error saving visit:",g),alert("     ")}finally{o(!1)}}},u=()=>{s&&(A(p=>({...p,order_created:!0})),e(`/commercial/orders/new?client=${s.id}&visit=true`))};return s?n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-4 shadow-lg sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/commercial/map"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl font-bold",children:" "}),n.jsx("p",{className:"text-purple-100 text-sm",children:s.company_name_ar})]})]})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" "}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:":"})," ",n.jsx("span",{className:"font-medium",children:s.company_name_ar})]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:" :"})," ",n.jsx("span",{className:"font-medium",children:s.contact_person_name})]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:":"})," ",n.jsx("span",{className:"font-medium",children:s.contact_person_phone})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-bold text-gray-800",children:" "}),n.jsxs("button",{onClick:d,className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm",children:[n.jsx(Mv,{size:16}),""]})]}),c.gps_lat&&c.gps_lng?n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[n.jsx(bA,{size:20}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("p",{children:["Lat: ",c.gps_lat.toFixed(6)]}),n.jsxs("p",{children:["Lng: ",c.gps_lng.toFixed(6)]})]})]})}):n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-yellow-700 text-sm",children:"    "})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Hr,{className:"text-blue-600",size:24}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:" "}),n.jsxs("p",{className:"font-bold text-gray-800",children:[Math.round((new Date().getTime()-l.getTime())/6e4)," "]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[n.jsx(O2,{size:20})," "]}),n.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:p=>{var w;const g=(w=p.target.files)==null?void 0:w[0];if(g){const v=new FileReader;v.onloadend=()=>{A(x=>({...x,photo_url:v.result}))},v.readAsDataURL(g)}},className:"w-full px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"}),c.photo_url&&n.jsx("div",{className:"mt-3",children:n.jsx("img",{src:c.photo_url,alt:"Visit",className:"w-full rounded-lg shadow-md"})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" "}),n.jsx("textarea",{value:c.note,onChange:p=>A(g=>({...g,note:p.target.value})),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none",rows:4,placeholder:"   ..."})]}),n.jsxs("div",{className:"space-y-3 pb-6",children:[n.jsxs("button",{onClick:u,className:"w-full bg-green-600 text-white py-4 rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 shadow-lg",children:[n.jsx(Plus,{size:24}),"  "]}),n.jsxs("button",{onClick:f,disabled:i,className:"w-full bg-purple-600 text-white py-4 rounded-xl font-bold hover:bg-purple-700 transition-colors flex items-center justify-center gap-2 shadow-lg disabled:opacity-50",children:[n.jsx(rl,{size:24}),i?" ...":" "]})]})]})]}):n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-500",children:" ..."})})}function IY(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState([]),[i,o]=H.useState(null),[l,c]=H.useState(null),[A,d]=H.useState(!0),[h,f]=H.useState(!1),[u,p]=H.useState({amount:"",payment_method:"cash",payment_date:new Date().toISOString().split("T")[0],notes:""});H.useEffect(()=>{const y=localStorage.getItem("commercial_id");if(!y){e("/commercial/login");return}g(y)},[e]);const g=async y=>{d(!0);try{const{data:_,error:I}=await we.from("clients").select("*").eq("commercial_id",y).order("company_name_ar");if(I)throw I;r(_||[])}catch(_){console.error("Error loading clients:",_)}finally{d(!1)}},w=async y=>{try{const{data:_,error:I}=await we.from("invoices").select(`
          *,
          clients (
            company_name_ar,
            contact_person_name,
            credit_limit
          )
        `).eq("client_id",y).neq("status","paid").order("created_at",{ascending:!1});if(I)throw I;a(_||[])}catch(_){console.error("Error loading invoices:",_)}},v=async y=>{o(y),await w(y.id)},x=async()=>{if(!l||!u.amount){alert("  ");return}const y=parseFloat(u.amount);if(!Number.isFinite(y)||y<=0){alert("   ");return}if(y>l.amount_due){alert("      ");return}const _=localStorage.getItem("commercial_id");if(_)try{const{data:I}=await we.from("payments").select("payment_number").order("created_at",{ascending:!1}).limit(1).single();let k="PAY-0001";if(I!=null&&I.payment_number){const L=parseInt(I.payment_number.split("-")[1]);k=`PAY-${String(L+1).padStart(4,"0")}`}const{error:T}=await we.from("payments").insert({payment_number:k,invoice_id:l.id,client_id:l.client_id,amount:y,payment_method:u.payment_method,payment_date:u.payment_date,notes:u.notes||null,collected_by:_,payment_source:"commercial"});if(T)throw T;const S=l.amount_paid+y,B=l.total_amount-S,R=B<=0?"paid":"partial",{error:U}=await we.from("invoices").update({amount_paid:S,amount_due:B,status:R}).eq("id",l.id);if(U)throw U;alert("    "),f(!1),p({amount:"",payment_method:"cash",payment_date:new Date().toISOString().split("T")[0],notes:""}),i&&await w(i.id)}catch(I){console.error("Error saving payment:",I),alert("     ")}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white p-4 shadow-lg sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/commercial/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl font-bold",children:" "}),n.jsx("p",{className:"text-green-100 text-sm",children:i?i.company_name_ar:" "})]})]})}),i?n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsx("button",{onClick:()=>{o(null),a([])},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"   "}),n.jsx("h2",{className:"font-bold text-gray-800 mb-3",children:"  "}),s.length===0?n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center",children:[n.jsx(Kr,{className:"mx-auto text-green-600 mb-3",size:48}),n.jsx("p",{className:"text-green-700 font-medium",children:"   "}),n.jsx("p",{className:"text-green-600 text-sm mt-1",children:"  "})]}):s.map(y=>n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-gray-800",children:["#",y.invoice_number]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",y.total_amount.toFixed(2)," MAD"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[": ",y.amount_paid.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),n.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[y.amount_due.toFixed(2)," MAD"]})]})]}),n.jsxs("button",{onClick:()=>{c(y),p(_=>({..._,amount:y.amount_due.toString()})),f(!0)},className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Sr,{size:20})," "]})]},y.id))]}):n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsx("h2",{className:"font-bold text-gray-800 mb-3",children:" "}),A?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):t.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):t.map(y=>n.jsxs("button",{onClick:()=>v(y),className:"w-full bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow text-right",children:[n.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:y.company_name_ar}),n.jsx("p",{className:"text-sm text-gray-600",children:y.contact_person_name}),y.credit_limit&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[" : ",y.credit_limit.toFixed(2)," MAD"]})]},y.id))]}),h&&l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white p-4 rounded-t-xl",children:[n.jsx("h2",{className:"text-xl font-bold",children:" "}),n.jsxs("p",{className:"text-green-100 text-sm",children:["#",l.invoice_number]})]}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-600",children:" "}),n.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[l.amount_due.toFixed(2)," MAD"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"number",step:"0.01",required:!0,value:u.amount,onChange:y=>p({...u,amount:y.target.value}),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsxs("select",{value:u.payment_method,onChange:y=>p({...u,payment_method:y.target.value}),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",children:[n.jsx("option",{value:"cash",children:""}),n.jsx("option",{value:"transfer",children:" "}),n.jsx("option",{value:"check",children:""}),n.jsx("option",{value:"card",children:""}),n.jsx("option",{value:"other",children:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),n.jsx("input",{type:"date",required:!0,value:u.payment_date,onChange:y=>p({...u,payment_date:y.target.value}),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),n.jsx("textarea",{value:u.notes,onChange:y=>p({...u,notes:y.target.value}),className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none",rows:3,placeholder:" ..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:()=>f(!1),className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300",children:""}),n.jsx("button",{onClick:x,className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700",children:" "})]})]})]})})]})}function UY(){const e=Lr(),[t,r]=H.useState({totalOrders:0,totalRevenue:0,totalClients:0,averageOrderValue:0,monthlyOrders:0,monthlyRevenue:0,pendingOrders:0,confirmedOrders:0}),[s,a]=H.useState([]),[i,o]=H.useState(!0),[l,c]=H.useState("");H.useEffect(()=>{const d=localStorage.getItem("commercial_id"),h=localStorage.getItem("commercial_name");if(!d){e("/commercial/login");return}c(h||""),A(d)},[e]);const A=async d=>{o(!0);try{const h=new Date().toISOString().slice(0,7),[f,u]=await Promise.all([we.from("orders").select("total_amount, status, created_at").eq("created_by",d),we.from("clients").select("id").eq("commercial_id",d)]);if(f.error)throw f.error;if(u.error)throw u.error;const p=f.data||[],g=u.data||[],w=p.filter(I=>I.created_at.startsWith(h)),v=p.reduce((I,k)=>I+(k.total_amount||0),0),x=w.reduce((I,k)=>I+(k.total_amount||0),0);r({totalOrders:p.length,totalRevenue:v,totalClients:g.length,averageOrderValue:p.length>0?v/p.length:0,monthlyOrders:w.length,monthlyRevenue:x,pendingOrders:p.filter(I=>I.status==="pending").length,confirmedOrders:p.filter(I=>I.status==="confirmed").length});const y={};p.forEach(I=>{const k=I.created_at.slice(0,7);y[k]||(y[k]={orders:0,revenue:0}),y[k].orders++,y[k].revenue+=I.total_amount||0});const _=Object.entries(y).map(([I,k])=>({month:I,...k})).sort((I,k)=>k.month.localeCompare(I.month)).slice(0,6);a(_)}catch(h){console.error("Error loading performance data:",h)}finally{o(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-4 shadow-lg sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/commercial/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-xl font-bold",children:" "}),n.jsx("p",{className:"text-indigo-100 text-sm",children:l})]})]})}),i?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ni,{size:24}),n.jsx("span",{className:"text-3xl font-bold",children:t.totalOrders})]}),n.jsx("p",{className:"text-blue-100 text-sm",children:" "})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(Sr,{size:24}),n.jsxs("span",{className:"text-2xl font-bold",children:[(t.totalRevenue/1e3).toFixed(1),"K"]})]}),n.jsx("p",{className:"text-green-100 text-sm",children:" "})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(Bi,{size:24}),n.jsx("span",{className:"text-3xl font-bold",children:t.totalClients})]}),n.jsx("p",{className:"text-purple-100 text-sm",children:" "})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(No,{size:24}),n.jsx("span",{className:"text-2xl font-bold",children:t.averageOrderValue.toFixed(0)})]}),n.jsx("p",{className:"text-orange-100 text-sm",children:" "})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[n.jsxs("h2",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(hh,{size:20}),"  "]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:""}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.monthlyOrders})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:""}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[(t.monthlyRevenue/1e3).toFixed(1),"K MAD"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[n.jsx("h2",{className:"font-bold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[n.jsx("span",{className:"text-gray-700",children:" "}),n.jsx("span",{className:"font-bold text-yellow-600 text-xl",children:t.pendingOrders})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[n.jsx("span",{className:"text-gray-700",children:""}),n.jsx("span",{className:"font-bold text-green-600 text-xl",children:t.confirmedOrders})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[n.jsx("h2",{className:"font-bold text-gray-800 mb-4",children:" "}),n.jsx("div",{className:"space-y-3",children:s.map(d=>n.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:new Date(d.month+"-01").toLocaleDateString("ar-MA",{year:"numeric",month:"long"})}),n.jsxs("span",{className:"text-sm text-gray-500",children:[d.orders," "]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full",style:{width:`${Math.min(d.revenue/t.totalRevenue*100,100)}%`}})}),n.jsxs("span",{className:"font-bold text-green-600 text-sm",children:[(d.revenue/1e3).toFixed(1),"K"]})]})]},d.month))})]})]})]})}function LY(){var y,_,I,k;const[e,t]=H.useState([]),[r,s]=H.useState(!0),[a,i]=H.useState("pending"),[o,l]=H.useState(null),[c,A]=H.useState([]),[d,h]=H.useState(!1);H.useEffect(()=>{f()},[]);const f=async()=>{s(!0);try{const{data:T,error:S}=await we.from("orders").select(`
          *,
          clients (
            company_name_ar,
            subscription_tier
          ),
          employees (
            name,
            phone
          )
        `).order("created_at",{ascending:!1});if(S)throw S;t(T||[])}catch(T){console.error("Error loading orders:",T)}finally{s(!1)}},u=async T=>{try{const{data:S,error:B}=await we.from("order_items").select(`
          *,
          products (
            name_ar,
            sku
          )
        `).eq("order_id",T);if(B)throw B;A(S||[])}catch(S){console.error("Error loading order items:",S)}},p=async T=>{l(T),await u(T.id),h(!0)},g=async(T,S)=>{try{const{error:B}=await we.from("orders").update({status:S}).eq("id",T);if(B)throw B;alert(S==="confirmed"?"   ":"   "),h(!1),f()}catch(B){console.error("Error updating order status:",B),alert("     ")}},w=e.filter(T=>a==="all"?!0:T.status===a),v=T=>{switch(T){case"pending":return{icon:n.jsx(Hr,{size:16}),text:" ",className:"bg-yellow-100 text-yellow-700 border-yellow-300"};case"confirmed":return{icon:n.jsx(Kr,{size:16}),text:"",className:"bg-green-100 text-green-700 border-green-300"};case"rejected":return{icon:n.jsx(sl,{size:16}),text:"",className:"bg-red-100 text-red-700 border-red-300"};default:return{icon:n.jsx(Hr,{size:16}),text:T,className:"bg-gray-100 text-gray-700 border-gray-300"}}},x=e.filter(T=>T.status==="pending").length;return n.jsxs("div",{className:"p-6",dir:"rtl",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(kr,{className:"text-white",size:36}),"  "]}),n.jsx("p",{className:"text-gray-300 mt-1",children:"   "})]}),x>0&&n.jsxs("div",{className:"bg-yellow-500 text-white px-6 py-3 rounded-lg font-bold text-lg",children:[x,"  "]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>i("pending"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${a==="pending"?"bg-yellow-500 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:["  (",e.filter(T=>T.status==="pending").length,")"]}),n.jsxs("button",{onClick:()=>i("confirmed"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${a==="confirmed"?"bg-green-500 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" (",e.filter(T=>T.status==="confirmed").length,")"]}),n.jsxs("button",{onClick:()=>i("rejected"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${a==="rejected"?"bg-red-500 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" (",e.filter(T=>T.status==="rejected").length,")"]}),n.jsxs("button",{onClick:()=>i("all"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${a==="all"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" (",e.length,")"]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):w.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(T=>{var B,R,U,L;const S=v(T.status);return n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"font-bold text-gray-800",children:["#",T.order_number]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_o,{size:16,className:"text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-800",children:((B=T.employees)==null?void 0:B.name)||" "}),n.jsx("p",{className:"text-xs text-gray-500",children:(R=T.employees)==null?void 0:R.phone})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-800",children:((U=T.clients)==null?void 0:U.company_name_ar)||" "}),n.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:(L=T.clients)==null?void 0:L.subscription_tier})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(hh,{size:16}),n.jsx("span",{className:"text-sm",children:new Date(T.order_date).toLocaleDateString("ar-MA")})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sr,{size:16,className:"text-green-600"}),n.jsxs("span",{className:"font-bold text-green-600 text-lg",children:[T.total_amount.toFixed(2)," MAD"]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium border ${S.className}`,children:[S.icon,n.jsx("span",{children:S.text})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("button",{onClick:()=>p(T),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(la,{size:16})," "]})})]},T.id)})})]})})}),d&&o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold mb-1",children:["  #",o.order_number]}),n.jsx("p",{className:"text-blue-100",children:new Date(o.order_date).toLocaleDateString("ar-MA")})]}),n.jsx("div",{className:`px-4 py-2 rounded-lg font-bold ${o.status==="pending"?"bg-yellow-500":o.status==="confirmed"?"bg-green-500":"bg-red-500"}`,children:v(o.status).text})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[n.jsx(_o,{size:20})," "]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:":"})," ",n.jsx("span",{className:"font-medium",children:(y=o.employees)==null?void 0:y.name})]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:":"})," ",n.jsx("span",{className:"font-medium",children:(_=o.employees)==null?void 0:_.phone})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[n.jsx(kr,{size:20})," "]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:":"})," ",n.jsx("span",{className:"font-medium",children:(I=o.clients)==null?void 0:I.company_name_ar})]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:":"})," ",n.jsx("span",{className:"font-medium",children:(k=o.clients)==null?void 0:k.subscription_tier})]})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-3 text-lg",children:""}),n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-center text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:c.map(T=>{var S,B;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:(S=T.products)==null?void 0:S.name_ar}),n.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:(B=T.products)==null?void 0:B.sku}),n.jsx("td",{className:"px-4 py-3 text-center font-bold",children:T.quantity}),n.jsxs("td",{className:"px-4 py-3 text-gray-700",children:[T.unit_price.toFixed(2)," MAD"]}),n.jsxs("td",{className:"px-4 py-3 font-bold text-green-600",children:[T.total.toFixed(2)," MAD"]})]},T.id)})}),n.jsx("tfoot",{className:"bg-gray-50 border-t-2",children:n.jsxs("tr",{children:[n.jsx("td",{colSpan:4,className:"px-4 py-3 text-right font-bold text-gray-800",children:" :"}),n.jsxs("td",{className:"px-4 py-3 font-bold text-green-600 text-xl",children:[o.total_amount.toFixed(2)," MAD"]})]})})]})})]})]}),n.jsx("div",{className:"border-t p-6 bg-gray-50",children:n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{onClick:()=>h(!1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-bold hover:bg-gray-300 transition-colors",children:""}),o.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>g(o.id,"rejected"),className:"px-6 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors flex items-center gap-2",children:[n.jsx(sl,{size:20})," "]}),n.jsxs("button",{onClick:()=>g(o.id,"confirmed"),className:"px-6 py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx(Kr,{size:20})," "]})]})]})})]})})]})}function DY(){const e=Lr(),[t,r]=H.useState(""),[s,a]=H.useState(""),[i,o]=H.useState(!1),[l,c]=H.useState(""),A=async d=>{d.preventDefault(),c(""),o(!0);try{const{data:h,error:f}=await we.from("employees").select("id, name, phone, role, status").eq("phone",t).eq("password_hash",s).in("role",["stock","admin"]).eq("status","active").single();if(f||!h){c("      "),o(!1);return}localStorage.setItem("employee_id",h.id),localStorage.setItem("employee_name",h.name),localStorage.setItem("employee_role",h.role),localStorage.setItem("employee_phone",h.phone),e("/employee/dashboard")}catch(h){c("    "),console.error(h)}finally{o(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",dir:"rtl",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(v3,{className:"text-blue-600",size:32})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Ba9alino"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"   (/)"})]}),l&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vs,{className:"text-red-600",size:20}),n.jsx("p",{className:"text-red-700 text-sm",children:l})]})}),n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"tel",value:t,onChange:d=>r(d.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"0612345678",disabled:i})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),n.jsx("input",{type:"password",value:s,onChange:d=>a(d.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"",disabled:i})]}),n.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors disabled:bg-gray-400",children:i?" ...":""})]}),n.jsx("p",{className:"text-center text-gray-600 text-sm mt-6",children:"  -  "})]})})}function QY(){const e=Lr(),[t,r]=H.useState({totalOrders:0,totalSales:0,totalItemsSold:0,totalRevenue:0,totalCredit:0,pendingOrders:0}),[s,a]=H.useState(!0),[i,o]=H.useState("");H.useEffect(()=>{const A=localStorage.getItem("employee_id"),d=localStorage.getItem("employee_name");if(!A){e("/employee/login");return}o(d||""),l()},[e]);const l=async A=>{a(!0);try{const{data:d}=await we.from("orders").select("id, total_amount, status"),{data:h}=await we.from("orders").select("id").eq("status","pending"),{data:f}=await we.from("order_items").select("quantity, total"),{data:u}=await we.from("clients").select("credit_limit"),p=(d==null?void 0:d.length)||0,g=(d==null?void 0:d.reduce((y,_)=>y+(_.total_amount||0),0))||0,w=(f==null?void 0:f.reduce((y,_)=>y+(_.quantity||0),0))||0,v=(u==null?void 0:u.reduce((y,_)=>y+(_.credit_limit||0),0))||0,x=(f==null?void 0:f.length)||0;r({totalOrders:p,totalSales:x,totalItemsSold:w,totalRevenue:g,totalCredit:v,pendingOrders:(h==null?void 0:h.length)||0})}catch(d){console.error("Error loading dashboard stats:",d)}finally{a(!1)}},c=()=>{localStorage.removeItem("employee_id"),localStorage.removeItem("employee_name"),localStorage.removeItem("employee_role"),localStorage.removeItem("employee_phone"),e("/employee/login")};return s?n.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-600 text-lg",children:" ..."})}):n.jsxs("div",{className:"min-h-screen bg-gray-100",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white p-6 shadow-lg",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold",children:[" ",i]}),n.jsx("p",{className:"text-blue-100 mt-1",children:"  -  "})]}),n.jsxs("button",{onClick:c,className:"bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(R2,{size:20})," "]})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-gray-600 font-medium",children:" "}),n.jsx(ni,{className:"text-blue-500",size:28})]}),n.jsx("p",{className:"text-4xl font-bold text-gray-800",children:t.totalOrders}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:""})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-yellow-500",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-gray-600 font-medium",children:" "}),n.jsx(QD,{className:"text-yellow-500",size:28})]}),n.jsx("p",{className:"text-4xl font-bold text-gray-800",children:t.pendingOrders}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:" "})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-gray-600 font-medium",children:" "}),n.jsx(No,{className:"text-green-500",size:28})]}),n.jsx("p",{className:"text-4xl font-bold text-gray-800",children:t.totalSales}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:" "})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-gray-600 font-medium",children:"  "}),n.jsx(kr,{className:"text-purple-500",size:28})]}),n.jsx("p",{className:"text-4xl font-bold text-gray-800",children:t.totalItemsSold}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:""})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-emerald-500",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-gray-600 font-medium",children:" "}),n.jsx(Sr,{className:"text-emerald-500",size:28})]}),n.jsx("p",{className:"text-4xl font-bold text-gray-800",children:t.totalRevenue.toFixed(0)}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"MAD"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-gray-600 font-medium",children:" "}),n.jsx(Bi,{className:"text-orange-500",size:28})]}),n.jsx("p",{className:"text-4xl font-bold text-gray-800",children:t.totalCredit.toFixed(0)}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"MAD"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:" "}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("button",{onClick:()=>e("/employee/orders/new"),className:"bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white p-6 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-3",children:[n.jsx(ts,{size:32}),n.jsx("span",{children:" "})]}),n.jsxs("button",{onClick:()=>e("/employee/orders"),className:"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white p-6 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-3",children:[n.jsx(la,{size:32}),n.jsx("span",{children:""})]}),n.jsxs("button",{onClick:()=>e("/employee/invoices"),className:"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white p-6 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-3",children:[n.jsx(Gs,{size:32}),n.jsx("span",{children:""})]}),n.jsxs("button",{onClick:()=>e("/employee/products"),className:"bg-gradient-to-br from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white p-6 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-3",children:[n.jsx(kr,{size:32}),n.jsx("span",{children:""})]}),n.jsxs("button",{onClick:()=>e("/employee/pos"),className:"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white p-6 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-3",children:[n.jsx(ni,{size:32}),n.jsx("span",{children:""})]}),n.jsxs("button",{onClick:()=>e("/employee/clients"),className:"bg-gradient-to-br from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 text-white p-6 rounded-lg font-bold transition-all duration-200 transform hover:scale-105 flex flex-col items-center gap-3",children:[n.jsx(Bi,{size:32}),n.jsx("span",{children:""})]})]})]})]})]})}function wB(){var I;const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(!0),[i,o]=H.useState(""),[l,c]=H.useState("all"),[A,d]=H.useState(null),[h,f]=H.useState([]),[u,p]=H.useState(!1);H.useEffect(()=>{if(!localStorage.getItem("employee_id")){e("/employee/login");return}g()},[e]);const g=async()=>{a(!0);try{const{data:k,error:T}=await we.from("orders").select(`
          *,
          clients (
            company_name_ar
          )
        `).order("created_at",{ascending:!1});if(T)throw T;r(k||[])}catch(k){console.error("Error loading orders:",k)}finally{a(!1)}},w=async k=>{try{const{data:T,error:S}=await we.from("order_items").select(`
          *,
          products (
            name_ar,
            sku
          )
        `).eq("order_id",k);if(S)throw S;f(T||[])}catch(T){console.error("Error loading order items:",T)}},v=async k=>{d(k),await w(k.id),p(!0)},x=async(k,T)=>{try{const{error:S}=await we.from("orders").update({status:T}).eq("id",k);if(S)throw S;alert("    "),p(!1),g()}catch(S){console.error("Error updating order:",S),alert("  ")}},y=t.filter(k=>{var B;const T=k.order_number.includes(i)||((B=k.clients)==null?void 0:B.company_name_ar.includes(i)),S=l==="all"||k.status===l;return T&&S}),_=k=>{switch(k){case"pending":return{icon:n.jsx(Hr,{size:16}),text:" ",className:"bg-yellow-100 text-yellow-700"};case"confirmed":return{icon:n.jsx(Kr,{size:16}),text:"",className:"bg-green-100 text-green-700"};case"rejected":return{icon:n.jsx(sl,{size:16}),text:"",className:"bg-red-100 text-red-700"};case"completed":return{icon:n.jsx(Kr,{size:16}),text:"",className:"bg-blue-100 text-blue-700"};default:return{icon:null,text:k,className:"bg-gray-100 text-gray-700"}}};return n.jsxs("div",{className:"min-h-screen bg-gray-100",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-800 text-white p-6 shadow-lg",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/employee/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:""}),n.jsx("p",{className:"text-green-100",children:"  "})]})]}),n.jsxs("button",{onClick:()=>e("/employee/orders/new"),className:"bg-white text-green-600 px-6 py-3 rounded-lg font-bold hover:bg-green-50 transition-colors flex items-center gap-2",children:[n.jsx(ts,{size:20})," "]})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[n.jsx("div",{className:"flex gap-4 mb-4",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none",placeholder:"      ..."})]})}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","pending","confirmed","rejected"].map(k=>n.jsxs("button",{onClick:()=>c(k),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l===k?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[k==="all"&&"",k==="pending"&&" ",k==="confirmed"&&"",k==="rejected"&&""]},k))})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:s?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):y.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map(k=>{var S;const T=_(k.status);return n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsxs("td",{className:"px-6 py-4 font-bold text-gray-800",children:["#",k.order_number]}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:((S=k.clients)==null?void 0:S.company_name_ar)||" "}),n.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(k.order_date).toLocaleDateString("ar-MA")}),n.jsxs("td",{className:"px-6 py-4 font-bold text-green-600",children:[k.total_amount.toFixed(2)," MAD"]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${T.className}`,children:[T.icon,n.jsx("span",{children:T.text})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("button",{onClick:()=>v(k),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(la,{size:16}),""]})})]},k.id)})})]})})})]}),u&&A&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold",children:[" #",A.order_number]}),n.jsx("p",{className:"text-blue-100",children:new Date(A.order_date).toLocaleDateString("ar-MA")})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n.jsx("div",{className:"grid grid-cols-2 gap-6 mb-6",children:n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" "}),n.jsxs("p",{className:"text-sm text-gray-600",children:[": ",n.jsx("span",{className:"font-medium",children:(I=A.clients)==null?void 0:I.company_name_ar})]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[": ",n.jsxs("span",{className:"font-bold text-green-600",children:[A.total_amount.toFixed(2)," MAD"]})]})]})}),n.jsx("h3",{className:"font-bold text-gray-800 mb-3 text-lg",children:""}),n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-center text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:""})]})}),n.jsx("tbody",{className:"divide-y",children:h.map(k=>{var T,S;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:(T=k.products)==null?void 0:T.name_ar}),n.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:(S=k.products)==null?void 0:S.sku}),n.jsx("td",{className:"px-4 py-3 text-center font-bold",children:k.quantity}),n.jsxs("td",{className:"px-4 py-3 text-gray-700",children:[k.unit_price.toFixed(2)," MAD"]}),n.jsxs("td",{className:"px-4 py-3 font-bold text-green-600",children:[k.total.toFixed(2)," MAD"]})]},k.id)})})]})})]}),n.jsx("div",{className:"border-t p-6 bg-gray-50",children:n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-bold hover:bg-gray-300 transition-colors",children:""}),A.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>x(A.id,"rejected"),className:"px-6 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors",children:""}),n.jsx("button",{onClick:()=>x(A.id,"confirmed"),className:"px-6 py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 transition-colors",children:""})]}),A.status==="confirmed"&&n.jsx("button",{onClick:()=>x(A.id,"completed"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-colors",children:""})]})})]})})]})}function bB(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(!0),[i,o]=H.useState(""),[l,c]=H.useState("all");H.useEffect(()=>{if(!localStorage.getItem("employee_id")){e("/employee/login");return}A()},[e]);const A=async()=>{a(!0);try{const{data:f,error:u}=await we.from("invoices").select(`
          *,
          clients (
            company_name_ar
          )
        `).order("created_at",{ascending:!1});if(u)throw u;r(f||[])}catch(f){console.error("Error loading invoices:",f)}finally{a(!1)}},d=t.filter(f=>{var g;const u=f.invoice_number.includes(i)||((g=f.clients)==null?void 0:g.company_name_ar.includes(i)),p=l==="all"||f.status===l;return u&&p}),h=f=>{switch(f){case"draft":return{text:"",className:"bg-gray-100 text-gray-700"};case"sent":return{text:"",className:"bg-blue-100 text-blue-700"};case"paid":return{text:"",className:"bg-green-100 text-green-700"};case"overdue":return{text:"",className:"bg-red-100 text-red-700"};default:return{text:f,className:"bg-gray-100 text-gray-700"}}};return n.jsxs("div",{className:"min-h-screen bg-gray-100",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white p-6 shadow-lg",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/employee/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:""}),n.jsx("p",{className:"text-purple-100",children:"  "})]})]}),n.jsxs("button",{onClick:()=>e("/employee/invoices/new"),className:"bg-white text-purple-600 px-6 py-3 rounded-lg font-bold hover:bg-purple-50 transition-colors flex items-center gap-2",children:[n.jsx(ts,{size:20})," "]})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[n.jsx("div",{className:"flex gap-4 mb-4",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",value:i,onChange:f=>o(f.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none",placeholder:"      ..."})]})}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","draft","sent","paid","overdue"].map(f=>n.jsxs("button",{onClick:()=>c(f),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l===f?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[f==="all"&&"",f==="draft"&&"",f==="sent"&&"",f==="paid"&&"",f==="overdue"&&""]},f))})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:s?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):d.length===0?n.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:" "}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:""})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(f=>{var p;const u=h(f.status);return n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsxs("td",{className:"px-6 py-4 font-bold text-gray-800",children:["#",f.invoice_number]}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:((p=f.clients)==null?void 0:p.company_name_ar)||" "}),n.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(f.invoice_date).toLocaleDateString("ar-MA")}),n.jsxs("td",{className:"px-6 py-4 font-bold text-gray-800",children:[f.total_amount.toFixed(2)," MAD"]}),n.jsxs("td",{className:"px-6 py-4 text-green-600 font-bold",children:[f.amount_paid.toFixed(2)," MAD"]}),n.jsxs("td",{className:"px-6 py-4 text-orange-600 font-bold",children:[f.amount_due.toFixed(2)," MAD"]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${u.className}`,children:u.text})}),n.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[n.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center gap-1",children:[n.jsx(la,{size:16}),""]}),n.jsxs("button",{className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center gap-1",children:[n.jsx(hg,{size:16}),""]})]})]},f.id)})})]})})})]})]})}function OY(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(new Map),[i,o]=H.useState(!0),[l,c]=H.useState(""),[A,d]=H.useState("all");H.useEffect(()=>{if(!localStorage.getItem("employee_id")){e("/employee/login");return}h()},[e]);const h=async()=>{o(!0);try{const{data:u,error:p}=await we.from("products").select("*").eq("is_active",!0).order("name_ar");if(p)throw p;const{data:g,error:w}=await we.from("stock").select("*");if(w)throw w;r(u||[]);const v=new Map;g==null||g.forEach(x=>{v.set(x.product_id,x)}),a(v)}catch(u){console.error("Error loading products:",u)}finally{o(!1)}},f=t.filter(u=>{const p=s.get(u.id),g=u.name_ar.toLowerCase().includes(l.toLowerCase())||u.sku.toLowerCase().includes(l.toLowerCase());let w=!0;return A==="in_stock"&&(w=p?p.quantity_available>0:!1),A==="low_stock"&&(w=p?p.is_low_stock===!0:!1),A==="out_of_stock"&&(w=p?p.is_out_of_stock===!0:!1),g&&w});return n.jsxs("div",{className:"min-h-screen bg-gray-100",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-orange-800 text-white p-6 shadow-lg",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/employee/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:" "}),n.jsx("p",{className:"text-orange-100",children:"   "})]})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[n.jsx("div",{className:"flex gap-4 mb-4",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",value:l,onChange:u=>c(u.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none",placeholder:"    SKU..."})]})}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","in_stock","low_stock","out_of_stock"].map(u=>n.jsxs("button",{onClick:()=>d(u),className:`px-4 py-2 rounded-lg font-medium transition-colors ${A===u?"bg-orange-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[u==="all"&&"",u==="in_stock"&&"",u==="low_stock"&&" ",u==="out_of_stock"&&" "]},u))})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i?n.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:" ..."}):f.length===0?n.jsxs("div",{className:"col-span-full text-center py-12",children:[n.jsx(kr,{className:"mx-auto text-gray-400 mb-4",size:48}),n.jsx("p",{className:"text-gray-500",children:"  "})]}):f.map(u=>{const p=s.get(u.id),g=p!=null&&p.is_out_of_stock?"bg-red-100 text-red-700":p!=null&&p.is_low_stock?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:u.name_ar}),n.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",u.sku]})]}),n.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${g}`,children:(p==null?void 0:p.quantity_available)||0})]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsxs("span",{className:"font-bold text-green-600",children:[u.price.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsxs("span",{className:"font-bold text-gray-700",children:[u.cost_price.toFixed(2)," MAD"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsxs("span",{className:"font-bold text-blue-600",children:[((u.price-u.cost_price)/u.price*100).toFixed(1),"%"]})]})]}),p&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsx("span",{className:"font-medium",children:p.quantity_in_stock})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-medium",children:p.quantity_reserved})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-bold text-green-600",children:p.quantity_available})]}),n.jsxs("div",{className:"flex justify-between border-t pt-2",children:[n.jsx("span",{className:"text-gray-600",children:"  :"}),n.jsx("span",{className:"font-medium",children:p.reorder_level})]})]})]},u.id)})})]})]})}function PY(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState([]),[i,o]=H.useState([]),[l,c]=H.useState(null),[A,d]=H.useState(""),[h,f]=H.useState(!0),[u,p]=H.useState(!1),[g,w]=H.useState("cash");H.useEffect(()=>{if(!localStorage.getItem("employee_id")){e("/employee/login");return}v()},[e]);const v=async()=>{f(!0);try{const[S,B]=await Promise.all([we.from("products").select("id, sku, name_ar, price").eq("is_active",!0).order("name_ar"),we.from("clients").select("id, company_name_ar").order("company_name_ar")]);if(S.error)throw S.error;if(B.error)throw B.error;r(S.data||[]),a(B.data||[])}catch(S){console.error("Error loading data:",S)}finally{f(!1)}},x=S=>{const B=i.find(R=>R.id===S.id);o(B?i.map(R=>R.id===S.id?{...R,quantity:R.quantity+1}:R):[...i,{...S,quantity:1}])},y=(S,B)=>{o(i.map(R=>{if(R.id===S){const U=R.quantity+B;return U>0?{...R,quantity:U}:R}return R}).filter(R=>R.quantity>0))},_=S=>{o(i.filter(B=>B.id!==S))},I=()=>i.reduce((S,B)=>S+B.price*B.quantity,0),k=async()=>{if(i.length===0){alert("  ");return}try{const S=`POS-${Date.now()}`,B=I(),{data:R,error:U}=await we.from("orders").insert({order_number:S,client_id:(l==null?void 0:l.id)||null,order_date:new Date().toISOString(),status:"completed",total_amount:B,source:"pos"}).select().single();if(U)throw U;const L=i.map(Q=>({order_id:R.id,product_id:Q.id,quantity:Q.quantity,unit_price:Q.price,total:Q.price*Q.quantity})),{error:D}=await we.from("order_items").insert(L);if(D)throw D;alert(`    !
: ${S}
: ${B.toFixed(2)} MAD`),o([]),c(null)}catch(S){console.error("Error checkout:",S),alert("     ")}},T=t.filter(S=>S.name_ar.toLowerCase().includes(A.toLowerCase())||S.sku.toLowerCase().includes(A.toLowerCase()));return n.jsxs("div",{className:"min-h-screen bg-gray-100",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-800 text-white p-6 shadow-lg",children:n.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/employee/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"  (POS)"}),n.jsx("p",{className:"text-red-100",children:"  "})]})]})})}),n.jsxs("div",{className:"max-w-7xl mx-auto p-6 grid grid-cols-3 gap-6 h-[calc(100vh-120px)]",children:[n.jsxs("div",{className:"col-span-2 flex flex-col",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 mb-4",children:n.jsx("input",{type:"text",value:A,onChange:S=>d(S.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none",placeholder:"  ..."})}),n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 flex-1 overflow-y-auto",children:h?n.jsx("div",{className:"text-center py-12 text-gray-500",children:" ..."}):n.jsx("div",{className:"grid grid-cols-2 gap-3",children:T.map(S=>n.jsxs("button",{onClick:()=>x(S),className:"bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border-2 border-blue-300 rounded-lg p-4 text-right transition-all duration-200 transform hover:scale-105",children:[n.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1",children:S.name_ar}),n.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["SKU: ",S.sku]}),n.jsxs("p",{className:"text-lg font-bold text-green-600",children:[S.price.toFixed(2)," MAD"]})]},S.id))})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 mb-4",children:n.jsxs("button",{onClick:()=>p(!0),className:"w-full bg-blue-50 border-2 border-blue-300 rounded-lg p-3 text-right hover:bg-blue-100 transition-colors",children:[n.jsx("p",{className:"text-xs text-gray-600",children:""}),n.jsx("p",{className:"font-bold text-gray-800",children:l?l.company_name_ar:" "})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex-1 overflow-y-auto mb-4",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-3",children:[" (",i.length,")"]}),i.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(ni,{size:32,className:"mx-auto mb-2 opacity-50"}),n.jsx("p",{children:" "})]}):n.jsx("div",{className:"space-y-2",children:i.map(S=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-sm text-gray-800",children:S.name_ar}),n.jsxs("p",{className:"text-xs text-gray-500",children:[S.price.toFixed(2)," MAD"]})]}),n.jsx("button",{onClick:()=>_(S.id),className:"text-red-600 hover:text-red-700",children:n.jsx(Xa,{size:16})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>y(S.id,-1),className:"bg-red-100 text-red-600 p-1 rounded hover:bg-red-200",children:n.jsx(y3,{size:14})}),n.jsx("span",{className:"flex-1 text-center font-bold text-sm",children:S.quantity}),n.jsx("button",{onClick:()=>y(S.id,1),className:"bg-green-100 text-green-600 p-1 rounded hover:bg-green-200",children:n.jsx(ts,{size:14})})]}),n.jsxs("p",{className:"text-right text-sm font-bold text-green-600 mt-2",children:[(S.price*S.quantity).toFixed(2)," MAD"]})]},S.id))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsx("span",{children:":"}),n.jsx("span",{className:"font-bold text-2xl text-green-600",children:I().toFixed(2)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-600 block mb-2",children:" :"}),n.jsxs("select",{value:g,onChange:S=>w(S.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none text-sm",children:[n.jsx("option",{value:"cash",children:""}),n.jsx("option",{value:"card",children:""}),n.jsx("option",{value:"check",children:""}),n.jsx("option",{value:"transfer",children:""})]})]})]}),n.jsxs("button",{onClick:k,disabled:i.length===0,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition-colors disabled:bg-gray-400 flex items-center justify-center gap-2",children:[n.jsx(Jd,{size:20})," "]})]})]})]}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:n.jsx("h2",{className:"text-xl font-bold",children:" "})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsx("button",{onClick:()=>{c(null),p(!1)},className:"w-full bg-gray-100 hover:bg-gray-200 border-2 border-gray-300 rounded-lg p-4 text-right transition-colors font-medium",children:"  ( )"}),s.map(S=>n.jsx("button",{onClick:()=>{c(S),p(!1)},className:"w-full bg-blue-50 hover:bg-blue-100 border-2 border-blue-300 rounded-lg p-4 text-right transition-colors",children:n.jsx("p",{className:"font-bold text-gray-800",children:S.company_name_ar})},S.id))]}),n.jsx("div",{className:"p-4 border-t",children:n.jsx("button",{onClick:()=>p(!1),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300",children:""})})]})})]})}function _B(){const e=Lr(),[t,r]=H.useState([]),[s,a]=H.useState(!0),[i,o]=H.useState(""),[l,c]=H.useState(null),[A,d]=H.useState(!1);H.useEffect(()=>{if(!localStorage.getItem("employee_id")){e("/employee/login");return}h()},[e]);const h=async()=>{a(!0);try{const{data:u,error:p}=await we.from("clients").select("*").order("company_name_ar");if(p)throw p;r(u||[])}catch(u){console.error("Error loading clients:",u)}finally{a(!1)}},f=t.filter(u=>u.company_name_ar.toLowerCase().includes(i.toLowerCase())||u.contact_person_name.toLowerCase().includes(i.toLowerCase())||u.contact_person_phone.includes(i));return n.jsxs("div",{className:"min-h-screen bg-gray-100",dir:"rtl",children:[n.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-cyan-800 text-white p-6 shadow-lg",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/employee/dashboard"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Cn,{size:24})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:""}),n.jsx("p",{className:"text-cyan-100",children:"   "})]})]}),n.jsxs("button",{onClick:()=>e("/employee/clients/new"),className:"bg-white text-cyan-600 px-6 py-3 rounded-lg font-bold hover:bg-cyan-50 transition-colors flex items-center gap-2",children:[n.jsx(ts,{size:20})," "]})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(cs,{className:"absolute right-3 top-3 text-gray-400",size:20}),n.jsx("input",{type:"text",value:i,onChange:u=>o(u.target.value),className:"w-full pr-10 pl-4 py-3 border-2 border-gray-300 rounded-lg focus:border-cyan-500 focus:outline-none",placeholder:"      ..."})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s?n.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:" ..."}):f.length===0?n.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"  "}):f.map(u=>n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:u.company_name_ar}),n.jsx("p",{className:"text-sm text-gray-500",children:u.company_name_en})]}),n.jsx("div",{className:"bg-cyan-100 text-cyan-700 px-3 py-1 rounded-full text-sm font-bold",children:u.subscription_tier})]}),n.jsxs("div",{className:"space-y-3 mb-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsx(Uh,{size:16,className:"text-cyan-600"}),n.jsx("span",{children:u.contact_person_phone})]}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsx("span",{className:"font-medium",children:":"}),n.jsx("span",{children:u.contact_person_name})]}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsx(bA,{size:16,className:"text-cyan-600"}),n.jsx("span",{children:u.city})]}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsx(Sr,{size:16,className:"text-green-600"}),n.jsxs("span",{children:[" : ",u.credit_limit.toFixed(2)," MAD"]})]})]}),n.jsxs("button",{onClick:()=>{c(u),d(!0)},className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white py-2 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[n.jsx(la,{size:16})," "]})]},u.id))})]}),A&&l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-cyan-700 text-white p-6",children:[n.jsx("h2",{className:"text-2xl font-bold",children:l.company_name_ar}),n.jsx("p",{className:"text-cyan-100",children:l.company_name_en})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:" :"}),n.jsx("p",{className:"font-medium text-gray-800",children:l.company_name_ar})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:" :"}),n.jsx("p",{className:"font-medium text-gray-800",children:l.company_name_en})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:":"}),n.jsx("p",{className:"font-medium text-cyan-600",children:l.subscription_tier})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:":"}),n.jsx("p",{className:"font-medium text-gray-800",children:l.city})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:" :"}),n.jsx("p",{className:"font-medium text-gray-800",children:l.contact_person_name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:":"}),n.jsx("p",{className:"font-medium text-gray-800",children:l.contact_person_phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:" :"}),n.jsx("p",{className:"font-medium text-gray-800",children:l.contact_person_email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:":"}),n.jsx("p",{className:"font-medium text-gray-800",children:l.billing_address_ar})]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" "}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:" :"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[l.credit_limit.toFixed(2)," MAD"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:" :"}),n.jsx("p",{className:"font-medium text-gray-800",children:new Date(l.created_at).toLocaleDateString("ar-MA")})]})]})]})]}),n.jsx("div",{className:"border-t p-6 bg-gray-50",children:n.jsx("button",{onClick:()=>d(!1),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300 transition-colors",children:""})})]})})]})}function Gr({children:e}){const{logout:t}=dh(),r=Lr(),s=wA(),a=[{label:" ",path:"/dashboard",icon:g3,color:"text-indigo-600"},{label:"",path:"/pos",icon:ni,color:"text-green-600"},{label:"",path:"/invoices",icon:Gs,color:"text-blue-600"},{label:"",path:"/orders",icon:Gs,color:"text-indigo-600"},{label:"",path:"/credits",icon:Sr,color:"text-red-600"},{label:" ",path:"/supplier-credits",icon:hA,color:"text-purple-600"},{label:"",path:"/expenses",icon:fg,color:"text-red-600"},{label:"",path:"/payments",icon:ND,color:"text-emerald-600"},{label:"",path:"/employees",icon:LD,color:"text-indigo-600"},{label:"",path:"/user-accounts",icon:x3,color:"text-red-600"},{label:"",path:"/products",icon:kr,color:"text-purple-600"},{label:"",path:"/warehouses",icon:DD,color:"text-blue-600"},{label:"",path:"/stock",icon:e5,color:"text-teal-600"},{label:" ",path:"/stock-transfers",icon:uh,color:"text-orange-600"},{label:"",path:"/purchases",icon:e5,color:"text-orange-600"},{label:"",path:"/suppliers",icon:rA,color:"text-gray-600"},{label:"",path:"/clients",icon:Bi,color:"text-cyan-600"}],i=s.pathname==="/",o=s.pathname==="/pos";return n.jsx("div",{className:"flex h-screen bg-gradient-to-br from-blue-600 to-blue-800",dir:"rtl",children:n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[!o&&n.jsxs("header",{className:"bg-white shadow-sm px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[!i&&n.jsxs("button",{onClick:()=>r("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(uh,{size:20,className:"text-gray-600"}),n.jsx("span",{className:"text-gray-600",children:""})]}),n.jsx("img",{src:"/ba9alino_logo.jpeg",alt:"",className:"h-12 w-auto object-contain"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>r("/profile"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(ID,{size:20,className:"text-gray-600"})}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors text-red-500",children:n.jsx(R2,{size:20})})]})]}),n.jsx("main",{className:`flex-1 ${o?"overflow-hidden":"overflow-auto"} ${o?"p-0":"p-4"}`,children:i?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-5xl font-bold text-white mb-2",children:""}),n.jsx("p",{className:"text-white/80 text-lg",children:"   "})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:a.map(l=>{const c=l.icon;return n.jsxs(uI,{to:l.path,className:"bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 flex flex-col items-center justify-center gap-2 cursor-pointer",children:[n.jsx(c,{size:32,className:l.color}),n.jsx("span",{className:"text-center text-gray-800 font-semibold text-sm",children:l.label})]},l.path)})})]}):n.jsx("div",{className:`${o?"h-full":"max-w-7xl mx-auto"}`,children:e})})]})})}function $r({children:e}){const{user:t,loading:r}=dh();return r?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:" ..."})]})}):t?n.jsx(n.Fragment,{children:e}):n.jsx(Gj,{to:"/login",replace:!0})}function RY(){const{checkAuth:e}=dh();return H.useEffect(()=>{e()},[e]),n.jsx(cI,{children:n.jsxs(tI,{children:[n.jsx(Wt,{path:"/login",element:n.jsx(OD,{})}),n.jsx(Wt,{path:"/commercial/login",element:n.jsx(CY,{})}),n.jsx(Wt,{path:"/commercial/dashboard",element:n.jsx(jY,{})}),n.jsx(Wt,{path:"/commercial/products",element:n.jsx(EY,{})}),n.jsx(Wt,{path:"/commercial/clients",element:n.jsx(kY,{})}),n.jsx(Wt,{path:"/commercial/orders",element:n.jsx(SY,{})}),n.jsx(Wt,{path:"/commercial/orders/new",element:n.jsx(FY,{})}),n.jsx(Wt,{path:"/commercial/map",element:n.jsx(TY,{})}),n.jsx(Wt,{path:"/commercial/visits/new",element:n.jsx(yB,{})}),n.jsx(Wt,{path:"/commercial/payments",element:n.jsx(IY,{})}),n.jsx(Wt,{path:"/commercial/performance",element:n.jsx(UY,{})}),n.jsx(Wt,{path:"/employee/login",element:n.jsx(DY,{})}),n.jsx(Wt,{path:"/employee/dashboard",element:n.jsx(QY,{})}),n.jsx(Wt,{path:"/employee/orders",element:n.jsx(wB,{})}),n.jsx(Wt,{path:"/employee/orders/new",element:n.jsx(wB,{})}),n.jsx(Wt,{path:"/employee/invoices",element:n.jsx(bB,{})}),n.jsx(Wt,{path:"/employee/invoices/new",element:n.jsx(bB,{})}),n.jsx(Wt,{path:"/employee/products",element:n.jsx(OY,{})}),n.jsx(Wt,{path:"/employee/pos",element:n.jsx(PY,{})}),n.jsx(Wt,{path:"/employee/clients",element:n.jsx(_B,{})}),n.jsx(Wt,{path:"/employee/clients/new",element:n.jsx(_B,{})}),n.jsx(Wt,{path:"/",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(n.Fragment,{})})})}),n.jsx(Wt,{path:"/dashboard",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(PD,{})})})}),n.jsx(Wt,{path:"/pos",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(RD,{})})})}),n.jsx(Wt,{path:"/credits",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(MD,{})})})}),n.jsx(Wt,{path:"/clients",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(HD,{})})})}),n.jsx(Wt,{path:"/products",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(gY,{})})})}),n.jsx(Wt,{path:"/warehouses",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(bY,{})})})}),n.jsx(Wt,{path:"/stock",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(xY,{})})})}),n.jsx(Wt,{path:"/stock-transfers",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(_Y,{})})})}),n.jsx(Wt,{path:"/orders",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(KD,{})})})}),n.jsx(Wt,{path:"/invoices",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(zD,{})})})}),n.jsx(Wt,{path:"/invoices/create",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(pN,{})})})}),n.jsx(Wt,{path:"/invoices/:id/edit",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(pN,{})})})}),n.jsx(Wt,{path:"/delivery-notes/create",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(iK,{})})})}),n.jsx(Wt,{path:"/delivery-notes",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(oK,{})})})}),n.jsx(Wt,{path:"/payments",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(vY,{})})})}),n.jsx(Wt,{path:"/suppliers",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(yY,{})})})}),n.jsx(Wt,{path:"/purchases",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(wY,{})})})}),n.jsx(Wt,{path:"/supplier-credits",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(cK,{})})})}),n.jsx(Wt,{path:"/expenses",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(AK,{})})})}),n.jsx(Wt,{path:"/employees",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(uK,{})})})}),n.jsx(Wt,{path:"/user-accounts",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(NY,{})})})}),n.jsx(Wt,{path:"/client-tracking/:clientId",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(BY,{})})})}),n.jsx(Wt,{path:"/commercial-orders",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(LY,{})})})}),n.jsx(Wt,{path:"/commercial-activity",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(yB,{})})})}),n.jsx(Wt,{path:"/credit-notes",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(hK,{})})})}),n.jsx(Wt,{path:"/coupons",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(fK,{})})})}),n.jsx(Wt,{path:"/profile",element:n.jsx($r,{children:n.jsx(Gr,{children:n.jsx(lK,{})})})}),n.jsx(Wt,{path:"*",element:n.jsx(Gj,{to:"/",replace:!0})})]})})}I1.createRoot(document.getElementById("root")).render(n.jsx(Qy.StrictMode,{children:n.jsx(RY,{})}));export{Mr as _,HY as c,NB as g};
